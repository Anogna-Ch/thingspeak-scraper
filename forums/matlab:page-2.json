{"url": "https://community.thingspeak.com/forum/matlab/page-2/", "threads": [{"url": "https://community.thingspeak.com/forum/matlab/please-allow-code-window-to-be-resized-larger/", "posts": [{"date": "January 25, 2018 - 12:14 pm", "content": "I've been spending lots of time learning Matlab in the Thingspeak Matlab Analysis webpage. \u00a0The size of the code window is limiting. \u00a0Please allow code window to be resized larger.Is there a group indent capability, or a whole document auto format?", "num_user_post": " 70", "author": "turgo"}, {"date": "February 26, 2018 - 1:09 pm", "content": "This is a good feedback, thanks. We are working on editor improvements. Would you be open to discuss this further?", "num_user_post": " 402", "author": "Hans"}]}, {"url": "https://community.thingspeak.com/forum/matlab/learn-matlab-udemy-course/", "posts": [{"date": "February 28, 2016 - 3:23 pm", "content": "Hi,You can take advantage and get 74% OFF coupon to Learn Matlab Udemy courseCoupon code: MATLAB25https://www.udemy.com/learn-matlab/?couponCode=MATLAB25", "num_user_post": " 2", "author": "raihan97"}, {"date": "February 18, 2018 - 4:50 pm", "content": "thank you usefull\u0637\u0631\u0627\u062d\u06cc \u0633\u0627\u06cc\u062a", "num_user_post": " 1", "author": "shahsavan"}]}, {"url": "https://community.thingspeak.com/forum/matlab/plotting-data-with-respect-to-station-year-month/", "posts": [{"date": "February 13, 2018 - 8:03 am", "content": "hi\u00a0i am new in mat Labi have set of data that are constitute of station, year, month, day and Temperaturei want to plot the temperature values per month in each year according to a specific station\u00a0any one can help me to make this process will be appreciatebest regards.\u00a0", "num_user_post": " 1", "author": "abdmet74"}, {"date": "February 13, 2018 - 2:19 pm", "content": "The configuration of plots in ThingSpeak depends strongly on how the data is organized.\u00a0 \u00a0 Does each station have its own channel?\u00a0 Or is all the station data in one big table where the fields have the labels you describe?\u00a0If the channel is public, you can share the channel number here and we can have a look at it to help the discussion.\u00a0\u00a0There are a lot of analysis and visualization tools in MATLAB that are available in ThingSpeak.\u00a0 Have a look through some of the tutorials and examples, especially the Getting Started tutorial for some ideas.Welcome to MATLAB and ThingSpeak!", "num_user_post": " 401", "author": "cstapels"}]}, {"url": "https://community.thingspeak.com/forum/matlab/how-to-ignore/", "posts": [{"date": "February 7, 2018 - 8:20 am", "content": "Hi. I would like to ignore data outside a range, ie if the data is over 400 or below 0.this is what i am using now, occasionally the sensor goes mad. I have had a try but im just messing up my data more with errors, this is my current code.\u00a0[code]\u00a0% TODO - Specify URL of the page to read data fromurl = 'https://api.thingspeak.com/apps/thinghttp/send_request?api_key=xxxxxxxxxxxxx';% TODO - Specify the target string to search in webpagetargetString = 'is';% TODO - Replace the [] with channel ID to write data to:writeChannelID = xxxxxxx;% TODO - Enter the Write API Key between the '' below:writeAPIKey = 'xxxxxxxxxxxxx';%% Scrape the webpage %%data = urlfilter(url, targetString);display(data);%% Analyze Data %%% Add code in this section to analyze data and store the result in the% analyzedData variable.analyzedData = data;%% Write Data %%thingSpeakWrite(writeChannelID, analyzedData,'Fields',[1], 'WriteKey', writeAPIKey);\u00a0[/code]", "num_user_post": " 18", "author": "jacktheripper125"}, {"date": "February 13, 2018 - 1:48 pm", "content": "Hi,How many points does the output of urlfilter command contain? For the code examples below, I am assuming that it only contains a single point.There are several options available based on what is required for your applications. Here are a couple options that might be relevant:Option 1: If the data is outside the desired range, then you can choose not to write that data to 'writeChannelID':% TODO - Specify URL of the page to read data fromurl = 'https://api.thingspeak.com/apps/thinghttp/send_request?api_key=xxxxxxxxxxxxx';% TODO - Specify the target string to search in webpagetargetString = 'is';% TODO - Replace the [] with channel ID to write data to:writeChannelID = xxxxxxx;% TODO - Enter the Write API Key between the '' below:writeAPIKey = 'xxxxxxxxxxxxx';%% Scrape the webpage %%data = urlfilter(url, targetString);display(data);%% Analyze Data %%% Add code in this section to analyze data and store the result in the% analyzedData variable.maxValue =400 ;minValue = 0;if (data > maxValue) || (data < minValue)% Do nothing because data is outside the range defined [0, 400]else%% Write Data %%thingSpeakWrite(writeChannelID, data,'Fields',[1], 'WriteKey', writeAPIKey);end\u00a0Option 2: If the data is outside the desired range, then you can write a predefined value to 'writeChannelID'. For example, if the value is greater than 400, then you write 400 and if the value is less than 0, then you write 0:\u00a0% TODO - Specify URL of the page to read data fromurl = 'https://api.thingspeak.com/apps/thinghttp/send_request?api_key=xxxxxxxxxxxxx';% TODO - Specify the target string to search in webpagetargetString = 'is';% TODO - Replace the [] with channel ID to write data to:writeChannelID = xxxxxxx;% TODO - Enter the Write API Key between the '' below:writeAPIKey = 'xxxxxxxxxxxxx';%% Scrape the webpage %%data = urlfilter(url, targetString);display(data);%% Analyze Data %%% Add code in this section to analyze data and store the result in the% analyzedData variable.maxValue =400 ;minValue = 0;if (data > maxValue)\u00a0 \u00a0 analyzedData = maxValue;elseif (data < minValue)\u00a0 \u00a0 analyzedData = minValue;else\u00a0 \u00a0analyzedData = data;end%% Write Data %%thingSpeakWrite(writeChannelID, analyzedData,'Fields',[1], 'WriteKey', writeAPIKey);", "num_user_post": " 62", "author": "Adarsh_Murthy"}]}, {"url": "https://community.thingspeak.com/forum/matlab/matlab-thingspeakwrite-data-appears-1-day-off/", "posts": [{"date": "January 25, 2018 - 3:09 pm", "content": "I'm using thingspeakwrite to upload Nov 2013 data to a new channel. \u00a0I downloaded data from a channel dated:\u00a022-Nov-2013 00:00:00 UTCThe last data point I processed and wrote is dated 22-Nov-2013 00:00:00.\u00a0When I view the data on the graph in the private view on my channel, the last date is: 22-Nov-2013 00:00:00\u00a0GMT - 800When I download the newly written channel, the last date is: 2013-11-22 08:00:00 UTCMy data appears to have been shifted ahead 8 hours on the thingspeakwrite step.Is there an error in the way thingspeak is handling these dates, or is there some nuance that I don't understand?", "num_user_post": " 70", "author": "turgo"}, {"date": "January 25, 2018 - 6:40 pm", "content": "I see in the documentation that:\u00a0\u00a0'the\u00a0Timestamp\u00a0provided is interpreted in local timezone.'How do I get thingspeak to take my timestamp data in UTC, or how do I convert it to local time, accounting for daylight savings time?", "num_user_post": " 70", "author": "turgo"}, {"date": "January 25, 2018 - 7:07 pm", "content": "This timestamp business is a confusing topic. \u00a01. For example, when I use thingspeakread in matlab, are the start and end dates in UTC or local time? \u00a0The documentation doesn't say.2. Is thingspeakread returning UTC or local time in a timetable?3. Are the datetime values shown in Matlab UTC or local time. \u00a04. If I set a local timezone(d.TimeZone = 'America/New_York'), does it affect the timetable I send to thingspeakwrite, or just the display values in the matlab output pane?", "num_user_post": " 70", "author": "turgo"}, {"date": "January 26, 2018 - 2:16 pm", "content": "Hi turgo,datetime('now') function in MATLAB by default displays the local timezone defined in MATLAB. If you set the time, i.e., evaluate code likedt = datetime('1-Jan-2018'),then the datetime value is assigned to dt (without a timezone). you can assign a timezone to this variable by setting the property:dt.TimeZone = 'America/New_York'ordt.TimeZone = 'local'Refer to this link for further information:https://www.mathworks.com/help/matlab/matlab_prog/specify-time-zones.html-----------------------------------------------------\u00a0When you use ThingSpeakRead in MATLAB, the returned timestamps are always in local time by default. This is the case whether you return the data in an array, table, and timetable, i.e., for each of the cases below, timestamps will be in your local timezone:[data, time] = thingSpeakRead(12397, 'NumPoints', 10);dataT = thingSpeakRead(12397, 'NumPoints', 10, 'OutputFormat', 'table');dataTT = thingSpeakRead(12397, 'NumPoints', 10, 'OutputFormat', 'timetable');---------------------------If the timestamps provided to thingSpeakWrite do not have their TimeZone property set, then thingSpeakWrite assumes local timezone (as defined by MATLAB). Else if the timestamps provided to thingSpeakWrite have their TimeZone property set, then thingSpeakWrite will use the specified TimeZone.\u00a0-Adarsh\u00a0", "num_user_post": " 62", "author": "Adarsh_Murthy"}, {"date": "January 26, 2018 - 5:13 pm", "content": "Thanks Adarsh.\u00a0Upon examination of the flow of dates in and out of matlab and thingspeak, I think that there is no problem with the new recorded data:1. \u00a0thingspeakread Start and end dates are in local time.2. \u00a0Results are returned from thingspeakread to matlab in local time.3. \u00a0Datetime values displayed in Matlab are in local time4. \u00a0Didn't mess with d.Timezone5. thingspeakwrite converts local times to UTC and writes UTC to the channel feed.", "num_user_post": " 70", "author": "turgo"}]}, {"url": "https://community.thingspeak.com/forum/matlab/cant-calculate-max-temperature-for-the-last-30-days-is-there-a-limit/", "posts": [{"date": "January 4, 2018 - 4:01 pm", "content": "I've chosen a ThingSpeak example: 'Calculate hourly max temperature'I modified the code to calculate the max temperature for 30 days:% Temperature for the past hour is read from a ThingSpeak channel and% maximum temperature is written to another ThingSpeak channel.% Channel 12397 contains data from the MathWorks Weather Station, located% in Natick, Massachusetts. The data is collected once every minute. Field% 4 contains temperature data.% Channel ID to read data fromreadChannelID = 300978;% Temperature Field IDTemperatureFieldID = 2;% Channel Read API Key% If your channel is private, then enter the read API% Key between the '' below:readAPIKey = '';% To store the maximum temperature, write it to a channel other than% the one used for reading data. To write to a channel, assign the write% channel ID to the 'writeChannelID' variable, and the write API Key to the% 'writeAPIKey' variable below. Find the write API Key in the right side pane% of this page.% TODO - Replace the [] with channel ID to write data to:writeChannelID = [];% TODO - Enter the Write API Key between the '' below:writeAPIKey = '';% Read temperature data for the last 60 minutes from the MathWorks Weather% Station. Learn more about the THINGSPEAKREAD function by going to the Documentation% tab on the right side pane of this page.[tempF, timeStamp] = thingSpeakRead(readChannelID, 'Fields', TemperatureFieldID, 'numMinutes', 60*24*30, 'ReadKey', readAPIKey);% Calculate the maximum temperature[maxTempF, maxTempIndex] = max(tempF);% Choose the timestamp at which the maximum temperature was measuredtimeMaxTemp = timeStamp(maxTempIndex);display(maxTempF, 'Maximum Temperature for the last hour is');% Write the maximum temperature to another channel specified by the% 'writeChannelID' variabledisplay(['Note: To successfully write data to another channel, ',...'assign the write channel ID and API Key to ''writeChannelID'' and ',...'''writeAPIKey'' variables above. Also uncomment the line of code ',...'containing ''thingSpeakWrite'' (remove ''%'' sign at the beginning of the line.)'])% Learn more about the THINGSPEAKWRITE function by going to the Documentation tab on% the right side pane of this page.% thingSpeakWrite(writeChannelID, maxTempF, 'timestamp', timeMaxTemp, 'Writekey', writeAPIKey);The code previously was calculating data for 60 minutes, and it works fine.I've changed\u00a0it to\u00a060*24*30 (trying to calculate for 30 days) and the result (max temperature) is not correct, the result may be true for 7 days but not for 30.Doesn't\u00a0matter what I use\u00a060*24*7 or\u00a060*24*30 or\u00a060*24*90 I always get the same max temperature.I assume that there is some limit (probably 8000 points).P.S. I am new to MATLAB, maybe I am doing something wrong, please explain to me.", "num_user_post": " 3", "author": "Deimos"}, {"date": "January 4, 2018 - 8:22 pm", "content": "You are correct, ThingSpeak limits the number of points you can read with thingSpeakRead or a single REST API call to 8000.\u00a0 However, you can read more by creating a loop if you need to.\u00a0 Just be careful not to hit the code time maximum for your license type.", "num_user_post": " 401", "author": "cstapels"}, {"date": "January 4, 2018 - 10:13 pm", "content": "A much better approach than to read more than 8000 points in a loop is to downsample the data and store it in another channel.\u00a0So, let's say you are getting raw data from your sensors every 15 seconds. You could set up a timecontrol that runs every hour and averages this data and saves it to another channel. If you needed averaging at a lower resolution, you could further resample the 1 hour averaged data to every day and write to another channel, etc.The main advantage of this approach is that it allows you to operate on smaller amounts of data, which is much more efficient and quick than operating on large arrays of data.To give an analogy, if you had to count the number of grains of sand in a bucket of sand, rather than count each grain, a better approach would be to count the grains in a small cup, and count the number of cups in the bucket. The second is an approximation, but it is a good enough approximation that you can hope to complete the task in a reasonable amount of time than spending a few years on something that doesn't need to be that precise.", "num_user_post": " 225", "author": "Vinod"}, {"date": "January 5, 2018 - 8:09 am", "content": "I agree, downsampling is a much better solution, and can be exact, not an approximation in the case of measuring a maximum (compared to counting sand).", "num_user_post": " 401", "author": "cstapels"}, {"date": "January 6, 2018 - 4:54 pm", "content": "I've got a data channel with 8 million fifteen second entries. \u00a0I need to aggregate this into hourly averages. \u00a0How do I practically do this, given the 8000 point limit, and the 20 second calculation timeout?\u00a0", "num_user_post": " 70", "author": "turgo"}, {"date": "January 16, 2018 - 6:47 pm", "content": "Turgo,One method you could try would be to downsample the data bit by bit and use a timecontrol to run this code regularly.\u00a0 The code below uses a new channel and reads its length to determine where to start the downsampling.\u00a0 Put the code in a MATLAB analysis and trigger it with a timecontrol.\u00a0 It will eventually reach the max or run out of data and stop.\u00a0 Then you can turn off the timeControl.You need to set up a new channel and provide its read and write API keys.\u00a0 The variable oldChannel is the channel with many entries. hourlyChannel is the downsampled data.\u00a0 If your old channel is a private channel, you will need to provide its read api key as well.\u00a0oldChannel=1234;hourlyChannel=123456;writeAPIKey='XXXXXXXXXXXXXXXX';readAPIKey='YYYYYYYYYYYYYYYY';sizeCheck=thingSpeakRead(hourlyChannel,'ReadKey',readAPIKey,'numDays',2000,'outputformat','timetable');daySpot=round(height(sizeCheck)/24); % Hourly datadaysMax=1000; % 3 years of dataif (daySpot<daysMax) % Make sure you don't read foreveroneDayData=thingSpeakRead(oldChannel,'DateRange',[datetime('today')-days(daySpot+1),datetime('today')-days(daySpot)],'Outputformat','timetable');if height(oneDayData)>0hourlyData=retime(oneDayData,'hourly','mean');thingSpeakWrite(hourlyChannel,hourlyData,'WriteKey',writeAPIKey);endend\u00a0Keep in mind that this method could consume a lot of messages (as many as 24,000).\u00a0\u00a0For future channels that you need long periods of data from, I suggest setting up a downsampled channel at design time. Hopefully that will save you the trouble next time.\u00a0\u00a0", "num_user_post": " 401", "author": "cstapels"}, {"date": "January 16, 2018 - 7:21 pm", "content": "Thanks for your effort to craft this solution. One note, it will take 5 day to run this script on each channel (11 total). \u00a0I'd best get going as I have 15 days left!", "num_user_post": " 70", "author": "turgo"}, {"date": "January 25, 2018 - 6:09 pm", "content": "I discovered that staples method result in a channel which is written backwards in groups. This results in a channel feed that is hard to use and read when downloaded. Here is a method that writes the channel from start to finish averaging hourly data into daily data. \u00a0Note the use of channel arrays to manage large numbers of channels. \u00a0I assemble the arrays from an excel spreadsheet.% Aggregate daily from hourly (Channel 1) myChannelName = 'Channel 1'; datetimeStart = datetime(2013,11,11); % UPDATE Start date of data channelList = {'Hourly Channel 1';'Daily Channel 1';'Hourly Channel 2}; channelID = {####;####;####}; channelReadKey = {'XXXXXXXXXXX';'XXXXXXXXXX';'XXXXXXXXXXXX'}; channelWriteKey = {'XXXXXXXXXXX';'XXXXXXXXXX';'XXXXXXXXXXXX'}; channelTable = table(channelID,channelReadKey,channelWriteKey,'RowNames',channelList); hourlyChannelID = channelTable.channelID{['Hourly ' myChannelName],:}; hourlyReadAPIKey = channelTable.channelReadKey{['Hourly ' myChannelName],:}; dailyChannelID = channelTable.channelID{['Daily ' myChannelName],:}; dailyReadAPIKey = channelTable.channelReadKey{['Daily ' myChannelName],:}; dailyWriteAPIKey = channelTable.channelWriteKey{['Daily ' myChannelName],:};% determine the next day to read aggregateProgress = thingSpeakRead(dailyChannelID, 'numPoints',1, 'ReadKey', dailyReadAPIKey,'outputFormat', 'timetable'); display(aggregateProgress); if isempty(aggregateProgress) % New Hourly channel display(['Daily channel empty ']); datetimeStop = dateshift(datetimeStart,'start','day') + days(300); else % Existing hourly channel datetimeStart = dateshift(aggregateProgress.Timestamps(1),'start','hour') + hours(24); datetimeStop = dateshift(aggregateProgress.Timestamps(1),'start','day') + days(300); end % Read the next day worth of data display(datetimeStart); display(datetimeStop);data = thingSpeakRead(hourlyChannelID, 'DateRange',[datetimeStart,datetimeStop], 'ReadKey', hourlyReadAPIKey,'outputFormat','timetable'); % display(summary(data)); if height(data) > 5 display(data(1:5,:)); end % Convert text numbers strVars = varfun(@iscellstr,data,'output','uniform'); display(strVars); for varnum = 1:length(strVars) if strVars(varnum) celldata = table2cell(data(:,varnum)); celldata = str2double(celldata); data.(varnum)= celldata; end end % error correction -999 to NaN for humidity data negToNaNfunc = @(x) x .* (x>=-100)./(x>=-100); display(negToNaNfunc(-1000)); data = varfun(negToNaNfunc,data); if height(data) > 5 display(data(1:5,:)); end if isempty(data) display(['No data for that day period']); else dataDaily = retime(data,'daily','mean'); display(dataDaily(1:5,:)); thingSpeakWrite(dailyChannelID, dataDaily, 'Writekey', dailyWriteAPIKey); end", "num_user_post": " 70", "author": "turgo"}]}, {"url": "https://community.thingspeak.com/forum/matlab/update-channel-from-output/", "posts": [{"date": "January 18, 2018 - 1:49 pm", "content": "ANYONE OUT THERE WHO CAN HELP??\u00a0can anyone help on what i need to send the data from a matlab output to a field on thingspeak?this is my current code.......% Enter your MATLAB Code belowopts = weboptions('Timeout',15); data = webread('https://api.thingspeak.com/apps/thinghttp/send_request?api_key=PC4EOCTMNDPPQOSW',opts) writeChannelID = xxxxx;% TODO - Enter the Write API Key between the '' below: writeKey = 'xxxxxxxxxx';thingSpeakWrite(writeChannelID,data', writeKey);but it comes up with this in the output????\u00a0 data =' 18 6 60 88 'Error using READ TEMP (line 10) Error using thingSpeakWrite Expected a string scalar or character vector for the parameter name.", "num_user_post": " 18", "author": "jacktheripper125"}, {"date": "January 19, 2018 - 10:51 am", "content": "Bumpy road", "num_user_post": " 18", "author": "jacktheripper125"}, {"date": "January 19, 2018 - 11:48 am", "content": "I have now got to\u00a0this is my current code.......% Enter your MATLAB Code belowopts = weboptions('Timeout',15);data = webread('https://api.thingspeak.com/apps/thinghttp/send_request?api_key=PC4EOCTMNDPPQOSW',opts)writeChannelID = xxxxx;% TODO - Enter the Write API Key between the '' below:writeKey = 'xxxxxxxxxx';thingSpeakWrite(writeChannelID, data, writeKey);but it comes up with this in the output????Lounge_Temp18Loft_Temp6Lounge_Humidity62Loft_Humidity88' must be a string scalar or character vector that can represent a field name.Any ideas how to fix?im not sure the blank lines are causing this but there is no help at all for thingspeak. such a shame as im sure it is just a little bit of code im missing but no one on the forum no help, and no real support unless i want to pay 200 for it?. maybe I should abandon thingspeak\u00a0 \ud83d\ude41", "num_user_post": " 18", "author": "jacktheripper125"}, {"date": "January 19, 2018 - 1:01 pm", "content": "Use 'display(data);' to see what exactly you are sending to thingspeakwrite. \u00a0Check out the data format expectations in the documentation for thingspeak write. \u00a0Change your code to get the format right. \u00a0Good luck!", "num_user_post": " 70", "author": "turgo"}, {"date": "January 19, 2018 - 1:43 pm", "content": "Thank you for your help, But the data comming in seems fine. I have even got rid of the the spaces before and after from the server but now I just cant get the code to push it to the fields into the channelmy code is below (including your display data) and the output.What i need is the code to get the it to the fields. but nothing I try has worked? why is it so difficult??the field names are there and they match my fields I am guessing that I need to push them to the database but nothing I have tried gets any part of it to the database.\u00a0data = webread('https://api.thingspeak.com/apps/thinghttp/send_request?api_key=PC4EOCTMNDPPQOSW',opts)writeChannelID = 405063;writeKey = 'UGEUH8A5T1V9AFA9';display(data);thingSpeakWrite(writeChannelID, data, writeKey);\u00a0\u00a0my output is\u00a0data = 'Lounge_Temp 17 Loft_Temp 6 Lounge_Humidity 64 Loft_Humidity 88'data = 'Lounge_Temp 17 Loft_Temp 6 Lounge_Humidity 64 Loft_Humidity 88'Error using READ TEMP (line 13)Error using thingSpeakWriteUnmatched parameter name 'Lounge_Temp 17 Loft_Temp 6 Lounge_Humidity 64 Loft_Humidity 88' must be a string scalar or character vector that can represent a field name.", "num_user_post": " 18", "author": "jacktheripper125"}, {"date": "January 19, 2018 - 9:34 pm", "content": "You can use a single MATLAB analysis to scrape your data, parse the different fields and write it to 4 fields of a channel, or 4 different channels, if that is what you wish.The example I wrote is in this post.", "num_user_post": " 225", "author": "Vinod"}, {"date": "January 20, 2018 - 1:40 am", "content": "It looks to me like your 'data' is a string with line feeds in it. \u00a0I bet that thingspeakwrite doesn't like that. \u00a0The documentation shows that thingspeakwrite expects data types:data \u2014 Data to write to channelarray | numeric | table | timetable\u00a0I'd look for some slick matlab command to load your string with line feeds into a table.You could also try commas instead of line feeds.This stuff is hard. \u00a0You'll get it.", "num_user_post": " 70", "author": "turgo"}]}, {"url": "https://community.thingspeak.com/forum/matlab/how-to-determine-the-date-of-the-first-channel-entry-point/", "posts": [{"date": "January 16, 2018 - 2:55 pm", "content": "I'm trying to\u00a0determine the date of the first channel entry point. \u00a0This would seem a simple exercise, but there are problems. \u00a0For example, downloading the channel yield a 500 mb file which is impossible to open. \u00a0Using thingspeak read with a broad range of dates yields only the ending points. \u00a0If the dates are both prior to the channel start, an error is generated. \u00a0What do I do?\u00a0It would be really helpful for thingspeak read to have the ability to return points by index value.", "num_user_post": " 70", "author": "turgo"}, {"date": "January 16, 2018 - 5:52 pm", "content": "If have the file on a Linux computer, you can use the head command.\u00a0If you are on Windows, you will need to open up a powershell and executeget-content c:path_to_fileyour_file_name -totalcount 10to get the first 10 lines.Out of curiosity, of this 500MB of data how much of it is critical to you and how do you use it?", "num_user_post": " 225", "author": "Vinod"}, {"date": "January 16, 2018 - 7:02 pm", "content": "I use the data in realtime as a gage. \u00a0Rapid update is important. \u00a0However, I don't need this kind of resolution in the historical data, hence my other threads about consolidating my data. \u00a0Is there a unix shell command that will work on the mac OS?", "num_user_post": " 70", "author": "turgo"}, {"date": "January 16, 2018 - 7:30 pm", "content": "The head command should work on the Mac. Tryhead -n 10 filename.csv", "num_user_post": " 225", "author": "Vinod"}, {"date": "January 20, 2018 - 1:29 am", "content": "I found another way. \u00a0First, start downloading the entire channel; then cancel the download; finally open the small file containing the first points.", "num_user_post": " 70", "author": "turgo"}]}, {"url": "https://community.thingspeak.com/forum/matlab/time-to-consolidate-my-data/", "posts": [{"date": "December 6, 2016 - 8:28 pm", "content": "Thanks Hans, for all the years of ThingSpeak functionality and data storage. \u00a0I have gigabytes of data on your servers, and with the new pricing, I need to average it down into new channels. \u00a0How do I do this? \u00a0I expect there will be many users in my situation, is there a template for doing this?", "num_user_post": " 70", "author": "turgo"}, {"date": "January 6, 2018 - 11:39 am", "content": "The free year is almost expired, and now I need to consolidate my data. \u00a0Again I ask, 'How do I do this? \u00a0I expect there will be many users in my situation, is there a template for doing this?'", "num_user_post": " 70", "author": "turgo"}, {"date": "January 16, 2018 - 6:51 pm", "content": "I've posted a slow but sure solution in another topic.\u00a0 Please let us know if that helps.", "num_user_post": " 401", "author": "cstapels"}]}, {"url": "https://community.thingspeak.com/forum/matlab/how-to-perform-operations-on-8-million-points/", "posts": [{"date": "January 9, 2018 - 11:56 am", "content": "How do I do processing on large channels, with, say 8 million points. \u00a0The apparent limitations are 8000 points per load, and the 20 second compute timeout.", "num_user_post": " 70", "author": "turgo"}, {"date": "January 16, 2018 - 6:50 pm", "content": "I've posted a slow but sure solution in another topic.", "num_user_post": " 401", "author": "cstapels"}]}, {"url": "https://community.thingspeak.com/forum/matlab/matlab-hexadecimal-number-conversion/", "posts": [{"date": "January 4, 2018 - 9:22 am", "content": "Hi, i would like to ask for help.I am sending value to thingspeek periodically (lets say every 5 minute) where the original message is number. But the transmission changes the string(number value) into hex format, so instead of 40 i do receive\u00a03430, after 5 minutes instead of value lets say 45 i receive\u00a03435 and so on. I want to plot original values. I started with analysis tool writing code below, but i need help with function for changing hexadeciaml value back into original value.readChannelID = xxxxx;readAPIKey = 'xxxxxx;writeChannelID = xxxxxx;writeAPIKey = 'xxxxxx;data = thingSpeakRead(readChannelID, 'ReadKey', readAPIKey,'OutputFormat','table');analyzedData = data; analyzedData.('Counter') = data.('Counter');thingSpeakWrite(writeChannelID, analyzedData, 'WriteKey', writeAPIKey);Tank you", "num_user_post": " 1", "author": "avbuuren"}, {"date": "January 4, 2018 - 11:09 am", "content": "try this:value = '3435';intConvert=str2num(char(sscanf(value,'%2x')'))notice that value has to be a character vector.If you can keep the device or program that is posting from converting to hex, ThingSpeak will definitely accept field values as string.\u00a0 However, adding a string manipulation class your code may not be easy if you are using a limited hardware.\u00a0\u00a0", "num_user_post": " 401", "author": "cstapels"}]}, {"url": "https://community.thingspeak.com/forum/matlab/derivation-of-channel-data/", "posts": [{"date": "December 21, 2017 - 6:37 am", "content": "Hello,I want to create a plot with the derivation of existing channel-data.I send about every 5 minutes the amount of used energy to thingspeak. This is more or less a constant increasing value.Watching these values in a graph is boring.I want to display the derivation of these values in a graph.Example:Sending each time a value of totally used Kilo-Watt-Hours (kWh):100,00 ... 100,01 ... 100,02 ... 100,03 ... 100,10 (using the microwave) ... 100,11 ... 100,12 ... 100,12 (main fuse blows) ... 100,12 ...This should display a const horizontal line with a single peak (microwave) and going back to zero at the end.I tried this but i does not work:[energyData, time] = thingSpeakRead(readChannelID, 'Fields', energyFieldID, 'NumPoints', 100, 'ReadKey', readAPIKey);dydx = diff(energyData(:))./diff(time(:)); % Cannot divide a double array by a duration array.\u00a0And it should be some kind of logarithm. I want to see small changes (e.g. kitchen-light with 60W) as well as big changes (e.g. microwave with 1500W).\u00a0Is there a easy way to do so?Thanks a lot!", "num_user_post": " 3", "author": "Max Marder"}, {"date": "December 21, 2017 - 1:29 pm", "content": "Try converting to seconds:dydx = diff(data(:))./seconds(diff(time(:)));", "num_user_post": " 401", "author": "cstapels"}, {"date": "December 21, 2017 - 3:37 pm", "content": "Hy,thanks a lot for the really fast response!I guess its pretty close to a working solution...:My code is:[data, time] = thingSpeakRead(readChannelID, 'Field', fieldID1, 'NumPoints', 250, 'ReadKey', readAPIKey);dydx = diff(data(:))./seconds(diff(time(:)));thingSpeakPlot(time, dydx);And the result is:Error using thingSpeakPlot (line 59)X must be same length as Y.Error in Create a 2-D line plot 2 (line 25)thingSpeakPlot(time, dydx);\u00a0Can you help me one more time?", "num_user_post": " 3", "author": "Max Marder"}, {"date": "December 26, 2017 - 10:01 am", "content": "Since dxdy is a difference, there is one less point in that array, compared to the time stamps. After you do the calculation, remove the first point in the time array.I changed one of your variable names in the code below.[data, times] = thingSpeakRead(readChannelID, 'Field', fieldID1, 'NumPoints', 250, 'ReadKey', readAPIKey);dydx = diff(data(:))./seconds(diff(times(:)));times(1)=[];\u00a0 %remove one data point for plotting.\u00a0 MATLAB arrays stary at 1, not zero.thingSpeakPlot(times, dydx);", "num_user_post": " 401", "author": "cstapels"}, {"date": "January 2, 2018 - 1:59 pm", "content": "PERFECTThanks a lot, nice christms gift \ud83d\ude42\u00a0My code looks at the end like this:%% Energy - 2 days deviation log%readChannelID = xxx; % public!fieldID = yy;% numOfPoints = 750;% numOfHours = 2;numOfDays = 2;readAPIKey = '';\u00a0%% Read Data %%% [data, time] = thingSpeakRead(readChannelID, 'Field', fieldID, 'NumPoints', numOfPoints, 'ReadKey', readAPIKey);[data, time] = thingSpeakRead(readChannelID, 'Field', fieldID, 'NumDays',numOfDays);dydx = 100 * (diff(data(:))./seconds(diff(time(:))));numOfPoints = numel(time); % Number of array elementsdisp(['numOfPoints is: ''', num2str(numOfPoints), '''']);time2 = time(2:numOfPoints,1);whos; % DEBUGGING%% Visualize Data %%thingSpeakPlot(time2, dydx, 'LineWidth',1, 'Color','red', 'YScale','log');\u00a0", "num_user_post": " 3", "author": "Max Marder"}, {"date": "January 2, 2018 - 3:36 pm", "content": "Thanks for posting the solution, I like your syntax better - it is more generic. (and happy new year too!)", "num_user_post": " 401", "author": "cstapels"}]}]}
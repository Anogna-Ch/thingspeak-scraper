{"url": "https://community.thingspeak.com/forum/thingspeak-api/page-14/", "threads": [{"url": "https://community.thingspeak.com/forum/thingspeak-api/sum-of-a-daily-sum-of-a-chart-divided-by-another-chart/", "posts": [{"date": "July 11, 2017 - 1:31 pm", "content": "Hi All,I have a channel with two charts, both measuring electrical power. Chart 1 mesures the input power of a device, while chart 2 measures the output power.How could it be possible to present the daily efficiency of the device?For the efficiency calculation I need to divide the daily sum of one chart by the other, how can I do it with ThingSpeak API?\u00a0Thanks!", "num_user_post": " 1", "author": "michael.iospa"}, {"date": "July 11, 2017 - 2:11 pm", "content": "Use the Matlab analysis app. \u00a0If you follow the Getting Started Tutorial, it shows you how to create a visualization of dew point calculated from temperature and humidity, ad have it run on a regular schedule. \u00a0Use your input and output data to calculate the efficiency and then plot it in a similar way. The Act on your data section sows you how to use React to take action when your data reaches a threshold. \u00a0You can also use react to calculate the efficiency each time you put new data into the channel.", "num_user_post": " 401", "author": "cstapels"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/clearing-a-private-channel-using-rest-api/", "posts": [{"date": "July 5, 2017 - 12:18 pm", "content": "Hi,I have tried to clear my channel using\u00a0https://api.thingspeak.com/channels/CHANNEL_ID/feeds.json api_key=USER_APIOf course CHANNEL_ID & USER_API replaced correctly. When i send this request by just typing it in the address bar of my browser it gives the response '-1'. But the channel does not clear. What am i doing wrong here?", "num_user_post": " 1", "author": "chinthakajay"}, {"date": "July 5, 2017 - 2:08 pm", "content": "Your browser address bar is not capable of sending a DELETE request. You can use other software such as POSTMAN\u00a0 to make other HTTP requests, including DELETE and POST. \u00a0 it looks like you found the delete instructions, be sure you are using your user api key (not a channel read or write api_key). \u00a0The user API key is on your profile page.The proper response for the cleared channel is an empty JSON object, []. \u00a0The -1 indicates that the server did not complete the action you requested.", "num_user_post": " 401", "author": "cstapels"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/hpa-bme280-change/", "posts": [{"date": "May 27, 2017 - 9:08 pm", "content": "somebody know how i change for hPA\u00a0\u00a0http://www.instructables.com/id/Solar-Powered-WiFi-Weather-Station/\u00a0hPa is more used in aviation for QNH\u00a0My channelhttps://thingspeak.com/channels/266412", "num_user_post": " 2", "author": "py2alc"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/problem-with-arduino-thingspeak-writefields-not-updating-fields-correctly/", "posts": [{"date": "May 19, 2017 - 12:27 am", "content": "Writing to more than 5 fields with the .writeFields() function causes the Thingspeak server to receive all null data. The channel is setup properly. I have tried deleting and recreating the channel, switched the order of writes, nothing works. The stranger thing is that it all worked a few days ago.Remove the set for 'field6', works fine. Add it back... server gets null for all fields (but it does get an entry). All fields are of the same 'int' type.\u00a0 ThingSpeak.setField(1, var1);\u00a0 ThingSpeak.setField(2, var2);\u00a0 ThingSpeak.setField(3, var3);\u00a0 ThingSpeak.setField(4, var4);\u00a0 ThingSpeak.setField(5, var5);\u00a0 ThingSpeak.setField(6, var6);\u00a0 ThingSpeak.writeFields(ChannelNumber, WriteAPIKey);Anyone see anything like this? Is it flakey server code?", "num_user_post": " 2", "author": "JK"}, {"date": "May 19, 2017 - 9:48 am", "content": "Both ThingSpeak and the library support writing all 8 fields at once. \u00a0To be sure, I just confirmed it with a sketch running on a MKR1000. \u00a0I can also make it work with a URL in my browser:https://api.thingspeak.com/update?api_key=INSERTAPIKEYHERE&field1=1&field2=2&field3=3&field4=4&field5=5&field6=6&field7=7&field8=8It is possible your device is running out of RAM and causing the HTTP output buffer to get corrupted. \u00a0That would explain the null response. \u00a0Most of the early arduino device models don't have much RAM to begin with. \u00a0It is very easy to run out of RAM and not realize it.", "num_user_post": " 34", "author": "JasonW"}, {"date": "May 23, 2017 - 8:34 pm", "content": "Thanks for the tip. I am running low on RAM. Are there any good libs (or tricks) out there that provide memory resource tracking?", "num_user_post": " 2", "author": "JK"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/cannot-connect-to-thingspeak/", "posts": [{"date": "May 8, 2017 - 2:40 pm", "content": "I'm unable to connect and post data to my ThingSpeak channel. \u00a0Data being sent from ESP8266-01S module, using WiFi to access internet. \u00a0I can send data to Google Sheets, but not to ThingSpeak. \u00a0Something wrong in my connect code. \u00a0API is the WRITE API. \u00a0Code follows:\u00a0[code]/* H2O_Flo_WiFiMeasures the flow rate of water flowing through a 3/4-inch PVC pipe using a DIGITEN Hall effect sensor and displaying results on thingspeak.com using an ESP8266-01S Sensor date wire connected to Uno pin D2 The sensor output is in the form of the duration in milliseconds of a square wave pulse and the relationship to the water flowrate is:F = 4.8 * Q ( in liters per minute)ThingSpeak ( https://www.thingspeak.com ) is an analytic IoT platform service that allows you to aggregate, visualize and analyze live data streams in the cloud.Documentation for the ThingSpeak Communication Library for Arduino is in the extras/documentation folder where the library was installed.*/#include <ESP8266WiFi.h>String apiKey = '0ZUS9CDG08ZU6VJ2';#include <ThingSpeak.h>// WiFi SSD and Password// char ssid[] = 'tracy'// char password[] = 'Mange161'// char server[] = 'api.thingspeak.com'const char* ssid = 'tracy';const char* password = 'Mange161';const char* server = 'api.thingspeak.com';//Initialize the client libraryWiFiClient client;#include <SPI.h>void setup() {pinMode(2, INPUT);Serial.begin(115200);delay(1000);// init done\u00a0Serial.println(); Serial.println(); Serial.print('Connecting to '); Serial.println(ssid);WiFi.begin(ssid, password); delay(10000); while (WiFi.status() != WL_CONNECTED) { delay(500); Serial.print('.'); } Serial.println(''); Serial.println('WiFi connected');\u00a0}void loop() {const unsigned long duration = pulseIn(2, HIGH); //Pulse duration in microsecondsfloat dursec = duration / 1000000.0; //Pulse duration in secondsfloat pulsefreq = 10.0;if ( duration != 0 ) { pulsefreq = 1.0 / dursec; } else { pulsefreq = 0.0; }//Pulse frequency in Hzfloat flolit = (pulsefreq / 4.8); float flolitr = 60.0 * flolit; //Flow rate in Liters/hourfloat flogal = flolitr * .26417; //Flow rate in Gallons/hour float flocuft = flolitr * .035315; //Flow rate in cu ft/hourif (client.connect(server, 80)) { // '184.106.153.149' or api.thingspeak.com String postStr = apiKey; postStr += '&field1='; postStr += String(flogal); postStr += '';client.print('POST /update HTTP/1.1'); client.print('Host: api.thingspeak.com'); client.print('Connection: close'); client.print('X-THINGSPEAKAPIKEY: ' + apiKey + ''); client.print('Content-Type: application/x-www-form-urlencoded'); client.print('Content-Length: '); client.print(postStr.length()); client.print(''); client.print(postStr);\u00a0// Write to ThingSpeak. There are up to 8 fields in a channel, allowing you to store up to 8 different // pieces of information in a channel. Here, we write to field 1.//ThingSpeak.writeField( 255517, 1, flogal, '0ZUS9CDG08ZU6VJ2')} client.stop(); delay(600000); // ThingSpeak will only accept updates every 15 seconds.}\u00a0[/code]", "num_user_post": " 2", "author": "DeYulia"}, {"date": "May 9, 2017 - 2:23 pm", "content": "You might consider trying your HTTP request in POSTMAN first, just to get the syntax correct. \u00a0I think the issue is in this section:if (client.connect(server, 80)) { // '184.106.153.149' or api.thingspeak.com String postStr = apiKey; postStr += '&field1='; postStr += String(flogal); ....your 'postStr' should start with a string that says 'api_key=' and then append the api_key. You want postStr='api_key=XXXXXXXXXXXXXXXX&field1='For some hints, you might look at Continuously Collect Data and Bulk-Update a ThingSpeak Channel Using an Arduino MKR1000 Board or an ESP8266 Board, but keep in mind this syntax is for a bulk update which slightly different.You also have the line 'client.print('X-THINGSPEAKAPIKEY: ' + apiKey + '\u00a0You can safely keep this line, but you do not need to have the api key in both the header section and the body. \u00a0You could also look at the 'WriteVoltage' example that comes with the\u00a0ThingSpeak Communication Library for Arduino. \u00a0It looks like you are combining methods from the thingspeak library with separate\u00a0wifi client methods.", "num_user_post": " 401", "author": "cstapels"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/not-getting-data-uploaded-to-my-channel/", "posts": [{"date": "April 27, 2017 - 12:33 pm", "content": "I have successfully compiled and loaded my code to a ESP8266-01S module and believed the data was being uploaded to my ThingSpeak channel, but the channel indicates zero entries.I have an external power regulator delivering 3.3v power to the ESP8266, and 13.5v power to my Hall effect sensor. \u00a0The data wire of my sensor is connected to the GPIO 2 pin of the ESP8255-01S. \u00a0The sensor output is in the form of a pulsating square wave. \u00a0The code translates this input to a floating point number which is sent to the ThingSpeak channel.My code follows:[code]/* H2O_Flo_WiFiMeasures the flow rate of water flowing through a 3/4-inch PVC pipe using a DIGITEN Hall effect sensor and displaying results on thingspeak.com using an ESP8266-01S Sensor date wire connected to Uno pin D2 The sensor output is in the form of the duration in milliseconds of a square wave pulse and the relationship to the water flowrate is:F = 4.8 * Q ( in liters per minute) ThingSpeak ( https://www.thingspeak.com ) is an analytic IoT platform service that allows you to aggregate, visualize and analyze live data streams in the cloud.Documentation for the ThingSpeak Communication Library for Arduino is in the extras/documentation folder where the library was installed.*/#include <ESP8266WiFi.h>#include <ThingSpeak.h>\u00a0// WiFi SSD and Passwordchar ssid[] = 'tracy';char password[] = 'Mange161';char server[] = 'api.thingspeak.com';//Initialize the client libraryWiFiClient client;#include <SPI.h>const int sensdatapin = 2;String apiKey = '0ZUS9CDG08ZU6VJ2';unsigned long myChannelNumber = 255517;void setup() {unsigned long duration; float dursec; float pulsefreq; float flolit; float flolitr; float flogal; float flocuft;\u00a0pinMode(sensdatapin, INPUT);Serial.begin(115200);delay(10);// init doneWiFi.begin(ssid, password);Serial.println(); Serial.println(); Serial.print('Connecting to '); Serial.println(ssid);WiFi.begin(ssid, password); while (WiFi.status() != WL_CONNECTED) { delay(500); Serial.print('.'); } Serial.println(''); Serial.println('WiFi connected');ThingSpeak.begin(client);}void loop() {const unsigned long duration = pulseIn(sensdatapin, HIGH); //Pulse duration in microsecondsfloat dursec = duration / 1000000.0; //Pulse duration in secondsfloat pulsefreq = 10.0;if ( duration != 0 ) { pulsefreq = 1.0 / dursec; } else { pulsefreq = 0.0; }//Pulse frequency in Hz float flolit = (pulsefreq / 4.8); float flolitr = 60.0 * flolit; //Flow rate in Liters/hourfloat flogal = flolitr * .26417; //Flow rate in Gallons/hour float flocuft = flolitr * .035315; //Flow rate in cu ft/hour\u00a0// Write to ThingSpeak. There are up to 8 fields in a channel, allowing you to store up to 8 different // pieces of information in a channel. Here, we write to field 1.ThingSpeak.writeField( 255517, 1, flogal, '0ZUS9CDG08ZU6VJ2'); delay(20000); // ThingSpeak will only accept updates every 15 seconds.}\u00a0[/code]", "num_user_post": " 2", "author": "DeYulia"}, {"date": "April 27, 2017 - 3:00 pm", "content": "It is possible that you have used your user API key instead of your Write API key. \u00a0You could try testing requests using the POSTMAN (https://www.getpostman.com/) chrome extension, and see if they successfully add data to your channel.See the instructions here on how to post using HTTP requests:  https://www.mathworks.com/help/thingspeak/update-channel-feed.html (in POSTMAN use\u00a0x-www-form-urlencoded) and put your Write api_key in the body. \u00a0As a side note, when you share your API keys, you may give access to others being able to change your account information or post to a private channel. You can change your user api key here: https://thingspeak.com/account/profile", "num_user_post": " 401", "author": "cstapels"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/newbie-sending-data-from-esp-easy-sharp-gp2y10-problem/", "posts": [{"date": "April 12, 2017 - 12:31 pm", "content": "Hi all,I have ESP Easy setup with with 5 sensors.Everything is updating in ESP Easy, but no way I can get the date from my\u00a0Sharp GP2Y10 (Dust Sensor) to ThingSpeakBeen googling for ages and did try adjusting the timing and set the\u00a0Sharp GP2Y10 up on a new channel, but no data at all on the graph.All my other graphs update without problemhttps://thingspeak.com/channels/257417\u00a0Any help please, think it will be obvious... this is my first project with ThingSpeak.\u00a0RegardsDave", "num_user_post": " 1", "author": "g0emf"}, {"date": "April 23, 2017 - 10:39 am", "content": "Can you share the code that is posting data from your Sharp GP2Y10 sensor? Can you also\u00a0try printing the data to the serial output and including that so we can make some suggestions on how to modify it to post data to ThingSpeak?", "num_user_post": " 225", "author": "Vinod"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/upload-to-thingspeak-limited-to-2-fields/", "posts": [{"date": "March 10, 2017 - 6:07 am", "content": "\u00a0Hello again,I am trying to upload data from a DHT11 sensor and a few others to my thingspeak channel, but I only can 2 fields and not all the 4. I enabled the fields from settings. The code I am using is taken from an example for UNO WiFi DevEd here. When I comment field 1 and 2, the others are working. The same happens when I comment field 3, 4. Any ideas?\u00a0void dataupload() { String uri = '/update?api_key='; uri += APIKEY_THINGSPEAK;//uri += '&field1=';//uri += String(weight, 3); // 3 decimals to thingSpeak//uri += '&field2=';//uri += String(pump); uri += '&field3='; uri += String(temperature); uri += '&field4='; uri += String(humidity);// test prints Serial.print(F('A1 value: ')); Serial.println(analogRead(A1)); Serial.println(weight, 3); Serial.println(pump); Serial.print(millis() / 1000); //in seconds Serial.println(F(' sec')); // Serial.println(temperature); // Serial.println(humidity);Ciao.println(F('Send data on ThingSpeak Channel'));CiaoData data = Ciao.write(CONNECTOR, SERVER_ADDR, uri);if (!data.isEmpty()) { Ciao.println( 'State: ' + String (data.get(1)) ); Ciao.println( 'Response: ' + String (data.get(2)) ); } else { Ciao.println('Write Error'); } }", "num_user_post": " 3", "author": "s161025"}, {"date": "April 22, 2017 - 10:45 am", "content": "The same problem", "num_user_post": " 3", "author": "Griwen"}, {"date": "April 23, 2017 - 10:34 am", "content": "Take a look at the examples posted here:\u00a0https://github.com/mathworks/thingspeak-arduino/tree/master/examplesSpecifically take a look at this:https://github.com/mathworks/thingspeak-arduino/tree/master/examples/WriteMultipleVoltages", "num_user_post": " 225", "author": "Vinod"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/update-requency-and-http-500-errors/", "posts": [{"date": "April 19, 2017 - 1:30 pm", "content": "Hello, I'm new to this stuff but have a decent understanding of how it works.\u00a0 Ok, I have a few questions that I think have been giving me problems.1.\u00a0 data points on channels, is it always set at 15 seconds or does it only update when data comes in?\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 I say this because I've changed the time.sleep() and it doesn't seem to affect this.2. I keep getting this error intermittently and I thought it could be because of the update time.\u00a0 I get this error sometimes after 1 hour, sometimes after 8.\u00a0\u00a0\u00a0\u00a0 raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)urllib2.HTTPError: HTTP Error 500: Internal Server ErrorThis is a simple 2 sensor setup going into a channel with two fields coming from a raspberry pi running python 2.7.9", "num_user_post": " 1", "author": "slopcounts"}, {"date": "April 23, 2017 - 10:28 am", "content": "If you are a user of the free service, you can send data up to once every 15s per channel. If you purchase a ThingSpeak license you can send data up to once every 1s. If you send data faster than\u00a0the limits of your account, you will get an HTTP error status code.I'm not sure why you are getting a HTTP 500 status code. Could you share the code that results in a 500 status code?", "num_user_post": " 225", "author": "Vinod"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/long-data-series-is-being-truncated/", "posts": [{"date": "March 31, 2017 - 5:27 am", "content": "Hi,I've embedded a chart on a web page. It's a temperature logger that has been running since July or so last year. There should be 8 or 9 months worth of data. Update frequency is 10 minutes.I'm trying to embed a chart showing the temperature for the last year (there's not enough data for that, but I expected to get a plot of the temperature since the start of logging).This is what I do:https://api.thingspeak.com/channels/129101/charts/1?bgcolor=%23ffffff&color=%23d62020&type=line&timescale=240&days=365The result is a plot that starts on Feb 3 - just shy of 2 months worth of data. The same thing happens if I try to view the data on Thingspeak's own web page:https://thingspeak.com/channels/129101Data start on Feb 3.Are my data older than Feb 3 missing?", "num_user_post": " 5", "author": "uphillbattle"}, {"date": "April 3, 2017 - 3:32 pm", "content": "Go into your channel private view, click on the pencil and select 'average' to 1440.The data in your channel is intact. Perhaps you are looking for this: https://thingspeak.com/channels/129101/charts/1?average=1440&days=365The 1440 number is = 24(hours) *60 (minutes). This\u00a0needed so your data in any day does not look like a blob and your graph with historical data doesn't look like a collection of blobs.", "num_user_post": " 225", "author": "Vinod"}, {"date": "April 21, 2017 - 8:44 am", "content": "Ahh, yes, thank you, Vinod! That's it - problem solved.\u00a0", "num_user_post": " 5", "author": "uphillbattle"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/what-should-i-do-to-add-gauge-type-visualizations-and-location-on-a-map/", "posts": [{"date": "March 31, 2017 - 6:13 pm", "content": "Hi, what should i do to add gauge type visualizations and location on a map? thanks", "num_user_post": " 2", "author": "PumbEmili"}, {"date": "April 1, 2017 - 3:41 pm", "content": "For gauge visualizations on your private view, go to Apps->Plugins and create a new Google gauge.To display the location of your sensor on the map, go to Channels->My Channels>-<Your channel name>->Channel Settings and set the Latitude and Longitude. Also check the checkbox that says 'Show Location'.", "num_user_post": " 225", "author": "Vinod"}, {"date": "April 12, 2017 - 5:50 pm", "content": "Hi PumbEmili,\u00a0Hope you were able to add the gauge and location to a channel view. Could you tell us more about your project and what you are attempting to visualize using a gauge and a map? We are looking to learn more about user workflows with these two visualization types.Thanks.", "num_user_post": " 62", "author": "Adarsh_Murthy"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/newbie-sending-data-via-api-does-not-work-help-would-be-very-appreciatet/", "posts": [{"date": "April 11, 2017 - 10:23 am", "content": "Hello, English is not my first language so please forgive my mistakes.I have been trying to fix my problem a whole day, including searching and stuff. For now i have found nothing, that's why i am asking for help.I want to send Data (in this case a '5') from my Arduino Uno to Thingspeak. I am Using the Arduino in combination with an esp8266 (my University requires this Set up).\u00a0I started with sending Commands over the Serial monitor (i have used an second virtual Serial Port so i can see everything in the Serial Monitor). S: means i have send that Line myself, A: is the Answer i have gotten:S: AT+CIPMUX=1A: OKS: AT+CIPMODE?A: +CIPMODE:0S: AT+CIPSTART=0,'TCP','api.thingspeak.com',80A: 0,CONNECT\u00a0 \u00a0OKS: AT+CIPSEND=0,67A: \u00a0OK \u00a0 \u00a0 \u00a0>S: GET https://api.thingspeak.com/update?api_key=W9TVZMIOLM8A2SGK&field1=5A: d1=5 \u00a0 \u00a0 busy s/..\u00a0 \u00a0Recv 67 bytes \u00a0 \u00a0 SEND OKand after waiting a whileA: 0,CLOSED \u00a0 \u00a0 The Channel on ThingSpeak however stays empty ... https://thingspeak.com/channels/255847Help in every Way would be very appreciatet. Thank you!Edit:I have used the following Code wich i found online and it doesn't work either, i bypassed the Voltage Sensor and put it right to 6 V.Reveal Spoiler#include <SoftwareSerial.h>// LEDint ledPin = 13;int sensor_pin=A0; // variable for sensorfloat sample=0;float bat_volt =0; // for temperaturevoid voltage (void);void esp_8266 (void);String apiKey = 'W9TVZMIOLM8A2SGK';SoftwareSerial ser(10,11); // RX, TX// this runs oncevoid setup() { // initialize the digital pin as an output. pinMode(ledPin, OUTPUT);// enable debug serial Serial.begin(9600); // enable software serial ser.begin(9600); // reset ESP8266 ser.println('AT+RST');}////////////////////////////////////////////////////////////////////////////// the loopvoid loop() { // blink LED on board digitalWrite(ledPin, HIGH); delay(200); digitalWrite(ledPin, LOW); voltage(); esp_8266(); }/////////////////////////////////////////////////////////////////////////////////////////void voltage(){ sample=0; for(int i=0;i<150;i++) { sample+=analogRead(sensor_pin); //read the value from the sensor delay(2); } sample=sample/150; bat_volt = 5; // R1+R2/R2 // R1=10k and R2=2k}void esp_8266(){ // convert to string char buf[32]; String strVolt = '6'; //=dtostrf( bat_volt, 4, 1, buf); Serial.print(strVolt); Serial.println(' V'); // TCP connection String cmd = 'AT+CIPSTART='TCP',''; cmd += '184.106.153.149'; // api.thingspeak.com cmd += '',80'; ser.println(cmd); if(ser.find('Error')){ Serial.println('AT+CIPSTART error'); return; } // prepare GET string String getStr = 'GET /update?api_key='; getStr += apiKey; getStr +='&field1='; getStr += String(strVolt); getStr += '';// send data length cmd = 'AT+CIPSEND='; cmd += String(getStr.length()); ser.println(cmd);if(ser.find('>')){ ser.print(getStr); } else{ ser.println('AT+CIPCLOSE'); // alert user Serial.println('AT+CIPCLOSE'); } // thingspeak needs 15 sec delay between updates delay(16000);}", "num_user_post": " 2", "author": "WildC4rd"}, {"date": "April 12, 2017 - 3:51 pm", "content": "Hello,i have worked it out my self by now. I was using an old Version of the Firmware on the esp8266. With the newest Firmware everything works like it should.I dont know if this Post should stay here so others can learn or if some Admin wants to close / delete it.\u00a0", "num_user_post": " 2", "author": "WildC4rd"}, {"date": "April 12, 2017 - 4:18 pm", "content": "Welcome to the ThingSpeak community. Thank you for confirming that this is an issue on the device firmware, and that updating the firmware fixed it for you.Your post is\u00a0useful to others who might run into the same issue.\u00a0", "num_user_post": " 225", "author": "Vinod"}]}]}
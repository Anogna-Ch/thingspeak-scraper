{"url": "https://community.thingspeak.com/forum/thingspeak-api/page-8/", "threads": [{"url": "https://community.thingspeak.com/forum/thingspeak-api/accessing-talkback-through-postman/", "posts": [{"date": "February 14, 2018 - 12:02 pm", "content": "I'm a complete beginner trying to understand how this all works. I've set up a Talkback App and I can add in commands from an Arduino/ESP8266. I'm now trying to use POSTMAN to try out all the commands. I'm cutting and pasting the commands directly from the Apps page so I know they have the correct key etc but , with the exception of accessing the last command executed which does work, every submission from POSTMAN results in 'The page you were looking for doesn't exist (404)'. Clearly I am missing something basic and would appreciate any help.", "num_user_post": " 2", "author": "BrianD"}, {"date": "February 14, 2018 - 2:02 pm", "content": "Can you share a sample of the url you are trying, and what action you expected ( add a command, get a command update a command, etc)?\u00a0 You can erase the api key to keep the control private.\u00a0 Make sure you indicate what Verb you have set as well (GET, PUT, POST etc.)", "num_user_post": " 401", "author": "cstapels"}, {"date": "February 15, 2018 - 5:44 pm", "content": "Thanks for responding. I have loaded 10 commands onto a queue from a Pretzel board. I can see them all there.\u00a0As an example I'm trying to delete one of the commands using the API. I've pasted the URL below with the verb DELETE. I've pasted in the command id. I'm expecting the command string of the deleted command to come back.The response is:The page you were looking for doesn't exist (404)\u00a0I'm clearly doing something wrong but I can't see whatURLhttps://api.thingspeak.com/talkbacks/22922/commands/11473319.json api_key=XXXXXXXXXXXXXXXXXX\u00a0", "num_user_post": " 2", "author": "BrianD"}, {"date": "February 20, 2018 - 5:15 pm", "content": "I was just able to complete a delete of talkback command using POSTMAN.\u00a0 I would check the body settings and the API key.\u00a0 The api_key needs to be the talkback API key, and the body setting should be x-www-form-urlencoded.", "num_user_post": " 401", "author": "cstapels"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/sending-data-to-twilio-sms-via-thinghttp/", "posts": [{"date": "August 9, 2016 - 5:09 pm", "content": "I am able to send an SMS\u00a0via Twilio using ThingHTTP but the message I send is hardcoded within ThingHTTP. Here is the way it looks in ThingHTTP:Body:To=+167xxx89x63&From=+16x88xxx731&Body=Hello World\u00a0I am only able to send 'Hello World' since it hardcoded into the Body within ThingHTTP. I need to send real messages/data from my app as an SMS message.Is there a way to create the URL in my app that allows me to send data to Twilio via ThingHTTP?\u00a0Thanks for the help", "num_user_post": " 2", "author": "SRT392"}, {"date": "August 10, 2016 - 12:02 am", "content": "There is this in the documentation.and this thread.The range of replacement strings are pretty limited.\u00a0 For a more flexible solution you might be able to use a Matlab Analysis and the webwrite() matlab command.", "num_user_post": " 271", "author": "rw950431"}, {"date": "August 10, 2016 - 5:55 pm", "content": "Success!I am now able to send an SMS containing data from my app using Twilio via ThingHTTP.Use code from http://www.instructables.com/id/Send-SMS-from-Arduino-over-the-Internet-using-ENC2/step3/Arduino-Side/You also MUST edit ThingHTTP Body to look like the following:Body:From=+16xxxxx731&To=+167xxxxx263&Body=%%message%%", "num_user_post": " 2", "author": "SRT392"}, {"date": "October 4, 2016 - 1:19 pm", "content": "Hello, STR329!\u00a0\u00a0\u00a0I should fill\u00a0'From=+1XXXXX732&To=+167XXXXX263&Body=%%OOOOO%%' into\u00a0Body box when I\u00a0edit\u00a0ThingHTTP to send SMS via ThingHTTP to Twilio? doube %, or single% ?\u00a0\u00a0 BTW, I am new guy. May I ask what is 'content type' box? Fill ' application/x-www-form-urlencoded' ? Thanks!", "num_user_post": " 4", "author": "Super ME engineer"}, {"date": "January 31, 2017 - 12:14 am", "content": "Hi SRT392I have tried every thing.....!!! like its in the tutorial.BODY =To=+88017**080249&From=+13203**4699&Body=%%message%% or From=+13203**4699&To=%%number%%Body=%%message%%but its not working the error i get view ThingHttp request response is21211The 'To' number 88017**080249 is not a valid phone number.https://www.twilio.com/docs/errors/21211400my number is verified by twilio. and when i use send sms from twilio its working but when i am trying to send sms via ThingHttp it's not working.....!!Any Suggestions......??", "num_user_post": " 1", "author": "faizulmustafiz"}, {"date": "April 6, 2017 - 7:20 am", "content": "Hi Guys,\u00a0I am facing a similar issue.I am able to send an SMS from Thingspeak to a US number but not to an Indian number.However, I am able to send an\u00a0SMS\u00a0from Twilio to the Indian number. This confirms that this number is verified and also that I am using the correct format in Thingspeak.\u00a0I also tried using\u00a0&ForceDelivery=True' but it still doesnt\u00a0work and I get this message.{'code': 21211, 'message': 'The 'To' number ' 9198XXXXXX49' is not a valid phone number.', 'more_info': 'https://www.twilio.com/docs/errors/21211', 'status': 400}", "num_user_post": " 1", "author": "raghunow"}, {"date": "May 23, 2017 - 12:50 pm", "content": "raghunow said  Hi Guys,\u00a0I am facing a similar issue.I am able to send an SMS from Thingspeak to a US number but not to an Indian number.However, I am able to send an\u00a0SMS\u00a0from Twilio to the Indian number. This confirms that this number is verified and also that I am using the correct format in Thingspeak.\u00a0I also tried using\u00a0&ForceDelivery=True' but it still doesnt\u00a0work and I get this message.{'code': 21211, 'message': 'The 'To' number ' 9198XXXXXX49' is not a valid phone number.', 'more_info': 'https://www.twilio.com/docs/errors/21211', 'status': 400}\u00a0\u00a0Hi\u00a0raghunow!I'm having the same problem.Did you figure out a way how to solve it?Does anyone else knows how to solve it?I'm frustrated.Thnaks!", "num_user_post": " 8", "author": "irproject"}, {"date": "December 5, 2017 - 1:29 am", "content": "Thanks a lot to give suggestions. I also want to integrate API for my business.", "num_user_post": " 1", "author": "logonutility"}, {"date": "February 20, 2018 - 5:57 am", "content": "SOLVED! Replace '+' with '%2B' for international mobile number.", "num_user_post": " 1", "author": "samuel.thf"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/coding-connection-issue/", "posts": [{"date": "February 11, 2018 - 2:21 pm", "content": "I am looking for some help with the coding to post to my channel.\u00a0 This is a sketch to post a single value from a one wire network.\u00a0 I have cut and pasted the code from here:http://internetofthinking.blogspot.com/2016/02/upload-ds18b20-temperature-sensor-data.htmlMy serial monitor shows the temperature correctly and that the wifi is connected. It is just not posting to my channel on thingspeakI know I can establish the connection from my sparkfun esp8266 because i ran this sketch from thingspeak and it posts correctly on the field 1 graph.\u00a0\u00a0https://www.mathworks.com/help/thingspeak/continuously-collect-data-and-bulk-update-a-thingspeak-channel-using-an-arduino-mkr1000-board-or-an-esp8266-board.htmlAlthough these do entirely different things, I am not able to see why the temperature is not being posted to my channel from the first sketch I have listed above.\u00a0 I have double (triple) checked my write api key, even tried resetting it with no success.\u00a0\u00a0Does anyone see any coding issues?\u00a0 thanks", "num_user_post": " 3", "author": "mtmtntop"}, {"date": "February 13, 2018 - 3:21 pm", "content": "Have a look at the soil monitor example, which shows how to use client commands to make HTTP requests.\u00a0The ThingSpeak communication library makes it even easier to interact with ThingSpeak using your devices.\u00a0 The proximity sensor example shows both reading and writing with ThingSpeak using the library.The sample code you posted has an oddly formed POST string, but I tested your code removing the OneWire and DallasTemperature libraries and it still works for me.\u00a0 I'm pretty sure I have tested using these libraries as well, but I did not test with your code.In your sample code, postStr contains the API Key and then 'field1=' and then data.\u00a0 According to the doc page on writing data, the post string should begin with 'field1='.\u00a0 I have tested with an & in front, and this works too.\u00a0 Even with the API key in the postStr, it worked for me to post to. my channel\u00a0...\u00a0String postStr = apiKey; \u00a0\u00a0postStr += '&field1=';....Does the number of entries increase on your channel view?  You may be accidentally posting data that ThingSpeak thinks is a string and that is why you do not see it in your plot.You can try exporting your data is there are entries that you do not see on the plot.Also you can try removing the dallas libraries and posting a constant as a test.'temp=123;'", "num_user_post": " 401", "author": "cstapels"}, {"date": "February 17, 2018 - 11:46 am", "content": "SOLVED WITH COMMENTS ABOUT LEARNING THE HARD WAYYou were right.\u00a0 There wasn't anything wrong with the code taken from the website I referred to.\u00a0 In the end, I started all\u00a0 over, cut and pasted it and it worked.\u00a0 Here are 2 things I came across that may help other totally inexperienced code writers like me.1.\u00a0 the thingspeak read and write keys USE BOTH 'O' (the letter o) AND 0 (ZERO).\u00a0 I only found this out by accident resetting my api codes and the new one had both characters.\u00a0 If you work in the world of VIN numbers for cars, for example, the letter o is never used.\u00a0 if it looks like an o its really a zero.\u00a0 But as I found out, this is not a universal truth.2.\u00a0 If you are getting a 'wifi connected ' message on the serial monitor but nothing is happening on thingspeak, try inserting a piece of code that returns the response from thingspeak.\u00a0 this may help point you in the right direction.\u00a0 an example is below, taken from here:https://www.mathworks.com/help/thingspeak/continuously-collect-data-and-bulk-update-a-thingspeak-channel-using-an-arduino-mkr1000-board-or-an-esp8266-board.html// POST data to ThingSpeak if (client.connect(server, 80)) { client.println('POST /channels/418168/bulk_update.json HTTP/1.1'); //Replace YOUR-CHANNEL-ID with your ThingSpeak channel ID client.println('Host: api.thingspeak.com'); client.println('User-Agent: mw.doc.bulk-update (Arduino ESP8266)'); client.println('Connection: close'); client.println('Content-Type: application/json'); client.println('Content-Length: '+data_length); client.println(); client.println(data); } else { Serial.println('Failure: Failed to connect to ThingSpeak'); } delay(250); //Wait to receive the response client.parseFloat(); String resp = String(client.parseInt()); Serial.println('Response code:'+resp); // Print the response code. 202 indicates that the server has accepted the response jsonBuffer[0] = '['; // Reinitialize the jsonBuffer for next batch of data jsonBuffer[1] = '0'; lastConnectionTime = millis(); // Update the last connection time}thanks for the help", "num_user_post": " 3", "author": "mtmtntop"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/the-best-way-to-connect-ttn-with-thingspeak/", "posts": [{"date": "February 16, 2018 - 3:58 am", "content": "Hallo Community,I'm neewbe in the world of IoT and want to send a data from TTN (The Things Network) to Thingspeak.So my question is, what is the best way to do it.Many Thanks!!", "num_user_post": " 1", "author": "alexanderott"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/graph-iframe-not-scaling-proprely/", "posts": [{"date": "February 9, 2018 - 10:09 am", "content": "Hi there!This is a very basic thing but I am just beginning and I can't find the solution using google. When I increase my iframe width and height, the outside frame gets bigger but the graphs itself stay the same size. See for yourself: I have 2 graphs on this page: http://sound-force.nl/fermenter.htmlThanks in advance!Nicolas", "num_user_post": " 2", "author": "nicolas@sound-force"}, {"date": "February 9, 2018 - 11:00 am", "content": "Welcome to the community!Try using the 'auto' sizing feature. You change your iframe's src URL\u00a0to something like the following:http://thingspeak.com/channels/423600_ID/charts/2?width=auto&height=auto", "num_user_post": " 402", "author": "Hans"}, {"date": "February 10, 2018 - 6:17 am", "content": "Thanks a lot Hans, this is perfect!", "num_user_post": " 2", "author": "nicolas@sound-force"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/espanol-problema-fields-de-un-canal-dejaron-de-actualizarse/", "posts": [{"date": "February 5, 2018 - 9:28 pm", "content": "Solicito ayuda con el siguiente problema: Tengo un canal con 8 fields que se actualizan cada 10 minutos mediante 2 GET, ya que cuando intentaba actualizar los 8 fields con un solo GET los \u00faltimos 2 recibian 'null'. El problema puntual es que dicho canal estuvo un poco m\u00e1s de 2 d\u00edas recibiendo datos pero luego los fields 4 y 5 recibian solo 'null'. Utilizo un Arduino MEGA en conjunto con un modulo ESP12 y el numero del canal es\u00a0417156\u00a0Desde ya, muchas gracias", "num_user_post": " 4", "author": "Gustavo_JE"}, {"date": "February 6, 2018 - 12:10 am", "content": "Gustavo,Yo uso un arduino uno con ESP01 con comandos AT y hasta ahora funciona. Podrias decir tu metodo, das poca informacion. A ver si te puedo ayudar/opinar.Podria ser que los numeros que mandas son numeros y debes mandar 'strings' pero estoy hablando en adivinanza porque no se que haces.Saludos\u00a0", "num_user_post": " 91", "author": "piajola"}, {"date": "February 6, 2018 - 10:06 am", "content": "Hola piajola, gracias por responder.\u00a0Elcodigo que utilizo es el siguiente:\u00a0\u00a0\u00a0\u00a0 \u00a0if((millis() - Periodo_Refresco_Wifi) > 600000 && Flag_Primer_Envio == false)\u00a0\u00a0 //Refresco cada 10 minutos\u00a0\u00a0\u00a0 { wdt_reset();\u00a0\u00a0\u00a0\u00a0\u00a0 ThingSUpdate();\u00a0\u00a0\u00a0\u00a0\u00a0 Serial.println('ThingSUpdate ejecutada');\u00a0\u00a0\u00a0\u00a0\u00a0 PrimerEnvio = millis();\u00a0\u00a0\u00a0\u00a0\u00a0 Flag_Primer_Envio = true;\u00a0\u00a0\u00a0 }\u00a0\u00a0\u00a0 if((millis() - PrimerEnvio) > 15000 && Flag_Primer_Envio == true)\u00a0\u00a0\u00a0 { wdt_reset();\u00a0\u00a0\u00a0\u00a0\u00a0 ThingSUpdate2();\u00a0\u00a0\u00a0\u00a0\u00a0 Serial.println('ThingSUpdate2 ejecutada');\u00a0\u00a0\u00a0\u00a0\u00a0 Flag_Primer_Envio = false;\u00a0\u00a0\u00a0\u00a0\u00a0 Periodo_Refresco_Wifi = millis();\u00a0\u00a0\u00a0 }\u00a0En esta porcion de codigo me aseguro de enviar los datos cada 10 minutos, una primera parte con 6 fields y luego un segundo mensaje con los 2 restantes 15 segundos despues. Las funciones que son llamadas son las siguientes:void ThingSUpdate()\u00a0\u00a0 //Funcion que envia la informacion a Thingspeak{\u00a0 wdt_reset();\u00a0\u00a0 char buffer[200];\u00a0\u00a0\u00a0\u00a0 // Funcion para convertir un dato tipo float en un String\u00a0 S_Temp_Comp_01 = dtostrf(Temp_Comp_01, 4, 1, buffer); //The format is: dtostrf(floatvar, StringLengthIncDecimalPoint, numVarsAfterDecimal, charbuf);\u00a0 S_Temp_in_T = dtostrf(Temp_in_T, 4, 1, buffer);\u00a0 S_Temp_out_T = dtostrf(Temp_out_T, 4, 1, buffer);\u00a0 S_Temp_in_H = dtostrf(Temp_in_H, 4, 1, buffer);\u00a0 S_Temp_out_H = dtostrf(Temp_out_H, 4, 1, buffer);\u00a0 S_A_RMS = dtostrf(A_RMS, 4, 1, buffer);\u00a0\u00a0 String cmd = 'AT+CIPSTART='TCP','';\u00a0 cmd += IP;\u00a0 cmd += '',80';\u00a0 Serial3.println(cmd);\u00a0 delay(2000);\u00a0 if (Serial3.find('Error')) {\u00a0\u00a0\u00a0 return;\u00a0 }\u00a0\u00a0\u00a0 cmd = msg ;\u00a0 cmd += '&field1=';\u00a0 cmd += S_Temp_Comp_01;\u00a0 cmd += '&field2=';\u00a0 cmd += S_Temp_in_T;\u00a0 cmd += '&field3=';\u00a0 cmd += S_Temp_out_T;\u00a0 cmd += '&field4=';\u00a0 cmd += S_Temp_in_H;\u00a0 cmd += '&field5=';\u00a0 cmd += S_Temp_out_H;\u00a0 cmd += '&field6=';\u00a0\u00a0cmd += S_A_RMS;\u00a0 //cmd += '&field7=';\u00a0 //cmd += S_Caud_T;\u00a0 //cmd += '&field8=';\u00a0 //cmd += String(Caud_H);\u00a0 cmd += '';\u00a0 Serial3.print('AT+CIPSEND=');\u00a0 Serial3.println(cmd.length());\u00a0 if (Serial3.find('>')) {\u00a0\u00a0\u00a0 Serial3.print(cmd);\u00a0 }\u00a0}//Fin funcion Thingspeak Update\u00a0\u00a0void ThingSUpdate2()\u00a0\u00a0 //Funcion que envia la informacion a Thingspeak{\u00a0 wdt_reset();\u00a0\u00a0 char buffer[200];\u00a0\u00a0\u00a0\u00a0 // Funcion para convertir un dato tipo float en un String\u00a0 float F_Caud_H = Caud_H;\u00a0 S_Caud_T = dtostrf(F_Caud_H, -5, 1, buffer);\u00a0\u00a0 String cmd = 'AT+CIPSTART='TCP','';\u00a0 cmd += IP;\u00a0 cmd += '',80';\u00a0 Serial3.println(cmd);\u00a0 delay(2000);\u00a0 if (Serial3.find('Error')) {\u00a0\u00a0\u00a0 return;\u00a0 }\u00a0\u00a0\u00a0 cmd = msg ;\u00a0 //cmd += '&field1=';\u00a0 //cmd += S_Temp_Comp_01;\u00a0 //cmd += '&field2=';\u00a0 //cmd += S_Temp_in_T;\u00a0 //cmd += '&field3=';\u00a0 //cmd += S_Temp_out_T;\u00a0 //cmd += '&field4=';\u00a0 //cmd += S_Temp_in_H;\u00a0 //cmd += '&field5=';\u00a0 //cmd += S_Temp_out_H;\u00a0 //cmd += '&field6=';\u00a0 //cmd += S_A_RMS;\u00a0 cmd += '&field7=';\u00a0 cmd += S_Caud_T;\u00a0 cmd += '&field8=';\u00a0 cmd += String(Caud_T);\u00a0 cmd += '';\u00a0 Serial3.print('AT+CIPSEND=');\u00a0 Serial3.println(cmd.length());\u00a0 if (Serial3.find('>')) {\u00a0\u00a0\u00a0 Serial3.print(cmd);\u00a0 }\u00a0}//Fin funcion Thingspeak Update\u00a0La razon por la que uso 2 funciones separadas es porque cuando intent\u00e9 actualizar los 8 campos al mismo tiempo, solo recib\u00eda los primeros 6 y los \u00faltimos 2 siempre recib\u00edan 'null'. Esto andubo perfectamente durante un poco m\u00e1s de 2 d\u00edas, sin embargo desde hace al menos unas 24 horas los campos 3, 4 y 5 solo reciben 'null'. Perdon por el formato en que presento el c\u00f3digo\u00a0", "num_user_post": " 4", "author": "Gustavo_JE"}, {"date": "February 6, 2018 - 8:09 pm", "content": "Gustavo,Para poder usar el menor tiempo en comunicacion y ver en la PC para debugear (siempre hay problemas) yo uso AltSoftSerial Library de PRJC que va bien a 57600 en el arduino uno y creo que hay tiempo para mandar los 8 campos mas el status, en mega con dos seriales hardware a 115200 no deberia faltarte tiempo ... creo.para que wdt_reset() pregunto ...Yo hago: altSer. hacia el ESP Serial. hacia la PC cuando debugeo- - - - - - - - - - -// TCP connection String cmd = 'AT+CIPSTART='TCP',''; cmd += '184.106.153.149';\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 // NO api.thingspeak.com cmd += '',80'; altSer.println(cmd);// if (altSer.find('Error')) { mi firmware actual pide mayusculas if (altSer.find('ERROR')) {\u00a0 Serial.println('AT+CIPSTART error');\u00a0 eperau(8000); espera segun elapsedMillis.h return; }// preparar GET string String getStr = 'GET /update?api_key='; getStr += apiKey; getStr += '&field1='; getStr += String(strTemp); getStr += '&field2='; getStr += String(strHume); getStr += '/r/n/r/n';\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0// bien clarito 2 ret + 2 nl hay que usar el quebrado invertido en vez del / para poderlo escribir en el forum// cuantos caracteres voy a mandar cmd = 'AT+CIPSEND='; cmd += String(getStr.length()); altSer.println(cmd);if (altSer.find('>')) { altSer.print(getStr); } else { altSer.println('AT+CIPCLOSE'); // alertar usuario que no paso nada esta vez Serial.println('AT+CIPCLOSE'); } - - - - - - - - - - -copialo al IDE arduino y dile que le de autoformatoyur opinion plis\u00a0 ... hay que seguirla hasta que te funcione\u00a0", "num_user_post": " 91", "author": "piajola"}, {"date": "February 7, 2018 - 1:31 pm", "content": "yo utilizaba un solo '/r/n' al final del string, cual es la diferencia al usar 2?Probando un poco m\u00e1s, encontre un comportamiento extra\u00f1o: tal vez hayas podido deducir que mi programa lee algunas temperaturas y 2 caudales de agua y encontre que cuando tengo efectivamente se\u00f1al de caudal la transmision se realiza sin problemas. En un momento cerr\u00e9 el caudal y cuando le toc\u00f3 actualizar la informaci\u00f3n descubr\u00ed que solo se enviaba el segundo mensaje con el caudal =0 como corresponde, pero las temperaturas nunca las envi\u00f3. Es extra\u00f1o pues no deber\u00eda funcionar as\u00ed. Podr\u00e1 tal vez ser un problema con la funci\u00f3n String(Caud_T) cuando el caudal es cero?\u00a0Gracias!", "num_user_post": " 4", "author": "Gustavo_JE"}, {"date": "February 7, 2018 - 7:42 pm", "content": "que 2 '/r/n' es el doble de lo que usas\u00a0 ... en serio no se, pero en algun lado lo lei. Que asi es con el ESP y arduinoLas lagrimas es lo que forja la experienciaYo uso termite ( https://www.compuphase.com/software_termite.htm ) no se instala no se mete en el registry es chico es rapido ... etc etc- AT+CIPSTART='TCP','api.thingspeak.com',80- AT+CIPSEND=77- GET /update?api_key=___el_API_key___&field1=00.00&field2=00.00&field3=00.00prueba esas tres lineas y veras que los CEROS no tienen problemas, termite los envia como string y TS los graba valor cero numerico. Lo acabo de probar asi que copyalo y pastealoTotal has probado mandar los 8 campos de un solo viaje?Prueba string tu valor numerico regresado por tu sensor y tambien juega con los parametros de dtostrf (siempre me paso un dia con esta cuestion del valor del sensor y mandarlo por internet)continuara ...", "num_user_post": " 91", "author": "piajola"}, {"date": "February 7, 2018 - 9:13 pm", "content": "L\u00e1grimas, montones de ellas....\u00a0Hasta ahora parece que todo volvio a funcionar. Actualizar\u00e9 si es que ocurre alg\u00fan cambio.\u00a0Muchas gracias por tu ayuda (y apoyo moral XD)", "num_user_post": " 4", "author": "Gustavo_JE"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/last-feed-data/", "posts": [{"date": "February 6, 2018 - 2:33 pm", "content": "Hiall was going well with thingspeak, untill just recently when I wanted to use the last entry. the problem is because my matlab skills suck I am parsing 4 lots of data every 20 min so it updates my data one at a time. all ok but now I want the last data for gauges it shows null and then whatever it updated last.is there any way to get the last good data reading ? instead of\u00a0{'created_at':'2018-02-06T19:27:16Z','entry_id':3530,'field1':null,'field2':null,'field3':null,'field4':'87'}\u00a0all i get is 87 for my gauge :/ any ideas that doesnt involve breaking my working matlab install?", "num_user_post": " 18", "author": "jacktheripper125"}, {"date": "February 7, 2018 - 8:59 am", "content": "Mr. TheRipper,Do you want just the last entry in a field?\u00a0 There is a specific REST call for last entry in a field.\u00a0 As long as there is a number in the last 8000 entries, the read last field entry should work for you.I assume you are presently reading the last entry in the feed, not the field, which is why you get all the null values.The syntax is similar. For example,\u00a0https://api.thingspeak.com/channels/12397/fields/4/last.json If that's not what you were looking for, please let me know.\u00a0\u00a0", "num_user_post": " 401", "author": "cstapels"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/mqtt-server-drops-connection-after-subscribe/", "posts": [{"date": "February 6, 2018 - 1:06 am", "content": "I'm using different MQTT clients but it seems that all of them have similar problems. Server closes connection after subscription. Here is how it looks with\u00a0mosquitto_sub:$ mosquitto_sub -d -v -u <USER> -P <TOKEN> -h mqtt.thingspeak.com -p 8883 --capath /etc/ssl/certs -t channels/107178/subscribe/json  -I mqttClient mqtt12684 sending CONNECTClient mqtt12684 received CONNACKClient mqtt12684 sending SUBSCRIBE (Mid: 1, Topic: channels/107178/subscribe/json, QoS: 0)Client mqtt12684 received SUBACKSubscribed (mid: 1): 0Client mqtt12684 sending CONNECTClient mqtt12684 received CONNACKClient mqtt12684 sending SUBSCRIBE (Mid: 2, Topic: channels/107178/subscribe/json, QoS: 0)Client mqtt12684 received SUBACKSubscribed (mid: 2): 0^C\u00a0It seems that it is somehow related with subscription limits for free account.\u00a0Few first attempts worked for me but now I get this error even if I don't have active connection. It seems like my old subscriptions that are not active anymore (I terminated mosquitto_sub) are counted as 'active' that is not true.", "num_user_post": " 2", "author": "dpolukhin"}, {"date": "February 6, 2018 - 10:18 am", "content": "I'm looking into this.Do you also have subscriptions on channel 111206?\u00a0 It looks like those are still marked as active on our side.", "num_user_post": " 34", "author": "JasonW"}, {"date": "February 6, 2018 - 1:04 pm", "content": "I used to have 1 active subscription to\u00a0111206 from OpenHab. To make sure that it is really only 1 connection I removed OpenHab subscriptions completely and restarted OpenHab. Now it seems that problem is gone so it looks like it was something on my side. Now I can have 3 simultaneous connections with mosquitto_sub. Really sorry for false alarm.", "num_user_post": " 2", "author": "dpolukhin"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/channel-feeds-coming-through-as-null-since-adding-fields/", "posts": [{"date": "February 5, 2018 - 7:49 pm", "content": "I recently added 4 fields for a total of 6 and since then I can't seem to pinpoint a weird bug that only the latest updated value is returned on an API call under 'feeds'. However the graphs are working just fine and I can see the data is there. Here's a small snippet of .json from my channel:{'channel':{'id':182539,'name':'Flower Room','description':'Collects Flower Room Data','latitude':'0.0','longitude':'0.0','field1':'Room Temperature','field2':'Room Humidity','field3':'Reservoir pH','field4':'Reservoir EC','field5':'Intensity at Canopy','field6':'Co2 Addition','created_at':'2016-11-12T23:30:52-07:00','updated_at':'2018-02-05T17:03:12-07:00','last_entry_id':453},'feeds':[{'created_at':'2018-02-05T16:21:27-07:00','entry_id':354,'field1':null,'field2':null,'field3':'5.91','field4':null,'field5':null,'field6':null},{'created_at':'2018-02-05T16:21:43-07:00','entry_id':355,'field1':null,'field2':null,'field3':null,'field4':'2.15','field5':null,'field6':null},{'created_at':'2018-02-05T16:21:59-07:00','entry_id':356,'field1':null,'field2':null,'field3':null,'field4':null,'field5':'13639.407','field6':null},{'created_at':'2018-02-05T16:22:16-07:00','entry_id':357,'field1':null,'field2':null,'field3':null,'field4':null,'field5':null,'field6':'1965.53'},{'created_at':'2018-02-05T16:23:01-07:00','entry_id':358,'field1':'26.23','field2':null,'field3':null,'field4':null,'field5':null,'field6':null},{'created_at':'2018-02-05T16:23:28-07:00','entry_id':359,'field1':null,'field2':null,'field3':'5.82','field4':null,'field5':null,'field6':null},{'created_at':'2018-02-05T16:23:44-07:00','entry_id':360,'field1':null,'field2':null,'field3':null,'field4':'2.12','field5':null,'field6':null},{'created_at':'2018-02-05T16:24:00-07:00','entry_id':361,'field1':null,'field2':null,'field3':null,'field4':null,'field5':'13560.425','field6':null},{'created_at':'2018-02-05T16:24:17-07:00','entry_id':362,'field1':null,'field2':null,'field3':null,'field4':null,'field5':null,'field6':'1958.65'},{'created_at':'2018-02-05T16:25:01-07:00','entry_id':363,'field1':'26.52','field2':null,'field3':null,'field4':null,'field5':null,'field6':null},\u00a0I've since deleted the channel and created a new one to no avail. As you can see, one value per API call. Any advice?", "num_user_post": " 2", "author": "BiologyWatcher"}, {"date": "February 5, 2018 - 8:32 pm", "content": "Based on the snippet, I think the issue is your code that is updating the channel is updating one field per update, instead of one update that updates all fields.The most efficient code on your device would do a HTTP GET request like this:https://api.thingspeak.com/update?api_key=YOUR_API_KEY_HERE&field1=10&field2=20&field3=30, etc.\u00a0instead of 3 separate requestshttps://api.thingspeak.com/update?api_key=YOUR_API_KEY_HERE&field1=10https://api.thingspeak.com/update?api_key=YOUR_API_KEY_HERE&field2=20https://api.thingspeak.com/update?api_key=YOUR_API_KEY_HERE&field3=30", "num_user_post": " 225", "author": "Vinod"}, {"date": "February 5, 2018 - 9:37 pm", "content": "Ohhhh! Yes. that's definitely it. Thanks for the quick response.", "num_user_post": " 2", "author": "BiologyWatcher"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/unable-to-upload-sensor-data-from-arduino-to-thingspeak-using-mqtt/", "posts": [{"date": "January 26, 2018 - 6:22 am", "content": "I had used the below code to send data using Arduino PubSubclient library. The serial monitor shows data being sent to the Thingspeak MQTT broker but the thingspeak dashboard is not getting updated....please help me#include <SPI.h>#include <Ethernet.h>#define USE_ETHERNET_SHIELD byte mac[] = {x,x,x,x,x,x}; IPAddress ip(192,168,x,x); EthernetClient client;#include char mqttUserName[] = 'x'; char mqttPass[] = 'x'; char writeAPIKey[] = 'x'; long channelID = x;PubSubClient mqttClient(client); const char* server = 'mqtt.thingspeak.com'; unsigned long lastConnectionTime = 0; const unsigned long postingInterval = 20L * 1000L;//#include 'ThingSpeak.h' //unsigned long myChannelNumber =x; //const char * myWriteAPIKey = 'x';#include 'DHT.h' #define DHTPIN 2 DHT dht; const int sensor_pin = A1;void setup() { Serial.begin(4800); //ThingSpeak.begin(client); Ethernet.begin(mac,ip); if (Ethernet.begin(mac) == 0) { Serial.println(F('Unable to configure Ethernet using DHCP')); for (;;); } Serial.println('Ethernet configured via DHCP'); Serial.println('Connected to internet'); mqttClient.setServer(server, 1883); dht.setup(DHTPIN); }void loop() { if (!mqttClient.connected()) { reconnect(); } mqttClient.loop(); if (millis() - lastConnectionTime > postingInterval) { mqttpublish(); } }void reconnect() {while (!mqttClient.connected()) { Serial.print('Attempting MQTT connection...'); // Generate ClientID /*for (int i = 0; i < 8; i++) { clientID[i] = alphanum[random(51)]; }*/ char clientID[]='x'; if (mqttClient.connect(clientID,mqttUserName,mqttPass)) { Serial.print('Connected with Client ID: '); Serial.print(String(clientID)); Serial.print(', Username: '); Serial.print(mqttUserName); Serial.print(' , Passwword: '); Serial.println(mqttPass); } else { Serial.print('failed, rc='); Serial.print(mqttClient.state()); Serial.println(' try again in 5 seconds'); delay(5000); } } }void mqttpublish() {delay(dht.getMinimumSamplingPeriod()); float moisture_percentage; int sensor_analog; sensor_analog = analogRead(sensor_pin); moisture_percentage = ( 100 - ( (sensor_analog/1023.00) * 100 ) ); float t = dht.getTemperature(); float h = dht.getHumidity();// Create data string to send to ThingSpeak String data = String('field1=' + String(moisture_percentage, DEC) + '&field2=' + String(t, DEC) + '&field3=' + String(h, DEC)); int length = data.length(); char msgBuffer[length]; data.toCharArray(msgBuffer,length+1); Serial.println(msgBuffer);// Create a topic string and publish data to ThingSpeak channel feed. String topicString ='channels/' + String( channelID ) + '/publish/'+String(writeAPIKey); length=topicString.length(); char topicBuffer[length]; topicString.toCharArray(topicBuffer,length+1);mqttClient.publish( topicBuffer, msgBuffer );lastConnectionTime = millis(); } // Use this function instead to publish to a single field directly. Don't forget to comment out the above version. /* void mqttpublish() {float t = dht.getTemperature(); // Read temperature from DHT sensor.String data = String(t, DEC); int length = data.length(); char msgBuffer[length]; data.toCharArray(msgBuffer,length+1); Serial.println(msgBuffer);// Create a topic string and publish data to ThingSpeak channel feed. String topicString ='channels/' + String( channelID ) + '/publish/'+String(writeAPIKey); length=topicString.length(); char topicBuffer[length]; topicString.toCharArray(topicBuffer,length+1);mqttClient.publish( topicBuffer, msgBuffer );lastConnectionTime = millis(); } */", "num_user_post": " 1", "author": "Lakshana"}, {"date": "February 1, 2018 - 3:44 pm", "content": "Does the serial monitor show a successful connection to the thingspeak server? i.e. do you get '...Connected with Client ID:...'I would double check your channel number and write API key, I have definitely made that mistake before.\u00a0\u00a0One debugging method that I use is to copy the topic output and the publish command from the serial monitor and try to publish the same content using MQTT.fx.\u00a0 There is a demo for it here.\u00a0 That will halp make sure you are publishing correctly.Another thing is that the declaration for the pubsub client library is missing, but you wouldn't be able to compile without that.What hardware are you using specifically?", "num_user_post": " 401", "author": "cstapels"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/read-information-with-key-api-and-appinventor/", "posts": [{"date": "January 29, 2018 - 9:54 am", "content": "Hello, I have a probleme to connect AppInventor with Thingspeak, i succeeded to write with app inventor to thingspeak but\u00a0\u00a0I can not read information in a channel, I used this tutorial to help me http://www.instructables.com/id/IoT-Made-Easy-With-UNO-ESP-01-ThingSpeak-and-MIT-A/\u00a0But, instead of only having useful information, I have all the information that the page provides me, If someone knows the way and wants more information to help me, you can contact me at xelirac@gmail.com Cordially\u00a0", "num_user_post": " 3", "author": "Franclod"}, {"date": "January 29, 2018 - 2:21 pm", "content": "Franclod,Are you using an ESP8266-01 for this project?\u00a0 Are you trying to read data from ThingSpeak with the device?\u00a0The demo you provided uses the AT commands to communicate through the ESP8266-01.\u00a0 It may be a little easier to program through the Arduino IDE directly.\u00a0 Install the ESP8266 board support and connect the esp TX and RX pins directly to the Arduino TX and TX pins.\u00a0The ESP examples in the ThingSpeak documentation will work to show you how to read from ThingSpeak with a device.\u00a0 The temperature example shows how to use the ThingSpeak communication library for Arduino and ESP to read from a ThingSpeak channel.\u00a0 These examples can be programmed on to the ESP8266-01, though they were tested with ESP6266-12. The -01 does not have an internal ADC, so you cannot read an analog voltage.I looked through the example you provided, it shows both writing and reading from the channel. Can you describe what is going wrong, or what you are seeing when you try to read?", "num_user_post": " 401", "author": "cstapels"}, {"date": "January 31, 2018 - 5:37 am", "content": "I not use\u00a0an ESP8266-01 i use an Ardruino, with the ardruino i have succed to read info and write : https://thingspeak.com/channels/403739/charts/3?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&type=line&update=15\u00a0without considering ardruin, because it is not me who takes care of it,I have do this :\u00a0https://ibb.co/gvSEpRbut i have an erroe : Bad arguments to < : the operation < cannot accept the arguments:, [null], [10]I can if you want send you the project app inventor ?", "num_user_post": " 3", "author": "Franclod"}, {"date": "January 31, 2018 - 10:42 am", "content": "Thanks for the clarifications.\u00a0 I'm still not fully clear what your goal is.\u00a0 Are you trying to get data to the app or are your trying to display the thingspeak plot?Since the second block in the appinventor code you showed seems to parses the json, I assume you are trying to get data.\u00a0 if so, use the get channel feed api call.change the URL to something like\u00a0https://api.thingspeak.com/channels/YOUR_CHANNEL/fields/1.jsonThen the web1.GotText input will be json formatted.Does that help?", "num_user_post": " 401", "author": "cstapels"}, {"date": "February 1, 2018 - 10:29 am", "content": "I have change the url like you told to me, but i have the same error,\u00a0do I have to change the second block ?", "num_user_post": " 3", "author": "Franclod"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/issues-of-updating-the-chart-data-but-the-entry-has-been-always-updated/", "posts": [{"date": "January 24, 2018 - 1:54 pm", "content": "\u00a0Hello\u00a0GuysI have a weird problem with\u00a0transferring and updating chart data on Thingspeak. However, the entry was updated when the sensors captured new data. The channel is public https://thingspeak.com/channels/410378.Here are the codes I have uploaded to the arduino\u00a0uno board. Please help me out. It is really killing me, since I tried almost methods available online.#include 'MutichannelGasSensor.h'#include <CytronWiFiClient.h>#include <CytronWiFiServer.h>#include <CytronWiFiShield.h>#include <ThingSpeak.h>#include <Wire.h>// Network Parametersconst char* ssid = 'LoveSalus';const char* pass = 'salus0411';// ThingSpeak informationchar thingSpeakAddress[] = 'api.thingspeak.com';unsigned long channelID = 410378;char* writeAPIKey = 'UBFR2PU51PN7ONJO';char* readAPIKey = 'NQJ7ZIAGVON0UQEV';const unsigned long postingInterval = 120L * 1000L;unsigned int dataFieldOne = 1; // Field to write NH3 dataunsigned int dataFieldTwo = 2; // Field to write CO dataunsigned int dataFieldThree = 3; // Field to write NO2 dataunsigned int dataFieldFour = 4; // Field to write C3H8 dataunsigned long lastConnectionTime = 0;long lastUpdateTime = 0;//Multi-channel gas sensorfloat cNH3;float cCO;float cNO2;float cCH4;float cH2;ESP8266Client client;void setup(){ Serial.begin(9600); Serial.println('Start'); //Multi-channel sensor setup gas.begin(0x04); gas.powerOn(); //WIFI connection wifi.begin(2, 3); if (!wifi.connectAP(ssid, pass)) { Serial.println(F('Error connecting to WiFi')); } Serial.print('Connected to '); Serial.println(wifi.SSID()); Serial.println(wifi.localIP()); ThingSpeak.begin( client );}void loop(){ if (millis() - lastUpdateTime >= postingInterval) { //Multi-channel gas sensor cNH3 = gas.measure_NH3(); cCO = gas.measure_CO(); cNO2 = gas.measure_NO2(); cH2 = gas.measure_H2();Serial.print('NH3 is '); Serial.println(cNH3); Serial.print('CO is '); Serial.println(cCO); Serial.print('NO2 is '); Serial.println(cNO2); Serial.print('H2 is '); Serial.println(cH2); write2TSData( channelID , dataFieldOne , cNH3, dataFieldTwo, cCO, dataFieldThree, cNO2, dataFieldFour, cH2); delay(10000); }}float writeTSData( long TSChannel, unsigned int TSField, float data ){ float writeSuccess = ThingSpeak.writeField( TSChannel, TSField, data, writeAPIKey ); // Write the data to the channel while ( writeSuccess ) { Serial.println( String(data) + ' written to Thingspeak.' ); } return writeSuccess;}float write2TSData( long TSChannel, unsigned int TSField1, float field1Data, unsigned int TSField2, long field2Data, unsigned int TSField3, long field3Data , unsigned int TSField4, long field4Data){ ThingSpeak.setField( TSField1, field1Data ); ThingSpeak.setField( TSField2, field2Data ); ThingSpeak.setField( TSField3, field3Data ); ThingSpeak.setField( TSField4, field4Data );float writeSuccess = ThingSpeak.writeFields( TSChannel, writeAPIKey ); return writeSuccess;}\u00a0PLEASE PLEASE PLEASE help me.", "num_user_post": " 1", "author": "ryan528"}, {"date": "January 31, 2018 - 8:27 pm", "content": "What exactly is the problem?\u00a0 Your channel does not seem to be public at present.\u00a0\u00a0I am curious about the while loop:while ( writeSuccess ){Serial.println( String(data) + ' written to Thingspeak.' );}if writeSuccess is true, wont this loop forever?", "num_user_post": " 401", "author": "cstapels"}]}]}
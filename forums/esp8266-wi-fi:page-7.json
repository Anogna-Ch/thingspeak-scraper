{"url": "https://community.thingspeak.com/forum/esp8266-wi-fi/page-7/", "threads": [{"url": "https://community.thingspeak.com/forum/esp8266-wi-fi/inconsistent-data-readings-from-thingspeak-thingspeak-library-arduino-esp8266/", "posts": [{"date": "August 8, 2016 - 4:31 am", "content": "hi all.\u00a0i try this forum since i had no success in the arduino thinspeak forum.sorry for double posting - !!\u00a0i try to read last values of 3 field set \u00a0of thhingspeak channel.like that:-after setting up client with these\u00a0libraries#include <WiFiEsp.h>#include <WiFiEspClient.h>#include <WiFiEspServer.h>#include <WiFiEspUdp.h>#include <ThingSpeak.h> ////<<<<<<<<<<<<<<etc.etc.\u00a0void loop() {int field1 = ThingSpeak.readIntField(141045,1);Serial.println();delay(1000);Serial.print('field 1 is: ');Serial.print(field1);Serial.println();int field2 = ThingSpeak.readIntField(141045,2);Serial.println();delay(10000);Serial.print('field 2 is: ');Serial.print(field2);Serial.println();int field3 = ThingSpeak.readIntField(141045,3);Serial.println();delay(10000);Serial.print('field 3 is: ');Serial.println(field3);Serial.println();delay(10000); // Note that the weather station only updates once a minute;};\u00a0PROBLEM:I set the data to be\u00a0\u00a0 600 , 600,600\u00a0i get unstable readings (of same line wihch i try to read for testing purposes over the loop),as follows \u00a0over the arduino \u00a0mega serial terminal\u00a0\u00a0field 1 is: 0[WiFiEsp] Connecting to api.thingspeak.com[WiFiEsp] TIMEOUT: 605[WiFiEsp] Disconnecting 0field 2 is: 0[WiFiEsp] Connecting to api.thingspeak.comfield 3 is: 600\u00a0[WiFiEsp] Connecting to api.thingspeak.comfield 1 is: 600[WiFiEsp] Connecting to api.thingspeak.com[WiFiEsp] TIMEOUT: 605[WiFiEsp] Disconnecting 0field 2 is: 0[WiFiEsp] Connecting to api.thingspeak.comfield 3 is: 600[WiFiEsp] Connecting to api.thingspeak.comfield 1 is: 600[WiFiEsp] Connecting to api.thingspeak.com[WiFiEsp] TIMEOUT: 607[WiFiEsp] Disconnecting 0field 2 is: 0[WiFiEsp] Connecting to api.thingspeak.comfield 3 is: 600[WiFiEsp] Connecting to api.thingspeak.comfield 1 is: 600[WiFiEsp] Connecting to api.thingspeak.com[WiFiEsp] TIMEOUT: 605[WiFiEsp] Disconnecting 0field 2 is: 0[WiFiEsp] Connecting to api.thingspeak.comfield 3 is: 600\u00a0any body can explain \u00a0whats wrong here ?\u00a0is it low memory of arduino as one suggested \u00a0somewhere \u00a0?\u00a0wifi is strong , and all results come ok over http terminal .\u00a0thanks \u00a0Oded,", "num_user_post": " 3", "author": "oded"}, {"date": "August 8, 2016 - 9:48 pm", "content": "Is your device having a brownout?Frequently the power consumption of the device will momentarily increase when it\u00a0needs to transmit data over WiFi.\u00a0If the\u00a0power source is not capable of supplying the required power, a brownout may occur. I've had this happen to me with\u00a0several ESP8266 devices.Some things to try:Connect your device using an ethernet cable (if that is an option) and power it by external power (as opposed to battery power) and see if it\u00a0reliably retrieves dataIf (1) works, then power it by new battery/freshly charged battery and ensure it works reliablyIf (2) works, then switch to wifi at a spot that has strong Wifi signal and ensure it works reliably\u00a0If (3) works, deploy device in field", "num_user_post": " 225", "author": "Vinod"}]}, {"url": "https://community.thingspeak.com/forum/esp8266-wi-fi/error-400-bad-request/", "posts": [{"date": "June 22, 2015 - 2:11 am", "content": "I have a little project using a ESP8266 on an Arduino Uno that simply reads a value (well, 3 values) from a serial device (UV dosimeter).  I finally have everything talking together nicely (the arduino's serial monitor, so that I can see what's going on; the serial UV sensor; and the ESP8266).  I have not had any success in getting the updates - I have now been trying to update manually using Terminal v1.93b.  Here is the process I am using (I have no problem connecting):AT+CIPSTART=4,'TCP','184.106.153.149',804, CONNECTOKAT+CIPSEND=4,67OK>GET /update?key={my_API_key}&field1=5&field2=255&field3=300+IPD,4,172:400 Bad Request400 Bad Requestnginx/1.7.54,CLOSEDI have tried updating my channel via my browser and that works fine.I would appreciate any help I can get.", "num_user_post": " 4", "author": "SESupply"}, {"date": "June 22, 2015 - 12:10 pm", "content": "Try this:GET /update?key={my_API_key}&field1=5&field2=255&field3=300&headers=false HTTP/1.1{CrLf}Host: api.thingspeak.com{CrLf}Connection: close{CrLf}Accept: */*{CrLf}{CrLf}Replace {CrLf} by CrLf ( 13, 10 )The keyword 'headers=false' will remove extra headers from response.The keyword 'Connection: close' will close the connection automatically.HTH", "num_user_post": " 13", "author": "Michel_J"}, {"date": "June 23, 2015 - 2:14 am", "content": "Hi Michael, thanks for the reply - I'm getting so frustrated with this that I'm starting to chew on my keyboard!I tried your suggestion, but I get an error - I'm replacing your {CrLf} with  in the string I'm sending but it doesn't seem to work. (How exactly can I put the {CrLf} chars into the string in Terminal?)   At the moment I'm trying to send an update manually using Terminal so I can send exactly the string I want & see the response. Everything works perfectly right up till the GET statement.I've tried updating my channel from a browser and that works fine.  Could it be the ESP module itself??", "num_user_post": " 4", "author": "SESupply"}, {"date": "June 24, 2015 - 4:05 pm", "content": "Make sure your terminal software send CrLf when you hit the return key on your keyboard. If you have Visual Studio I suggest you try with Visual Basic or C# to test your commands:           dim _SerialPort As New System.IO.Ports.SerialPort('COM3')            With _SerialPort                .BaudRate = '9600'                .Parity = IO.Ports.Parity.None                .DataBits = 8                .StopBits = IO.Ports.StopBits.One                .Handshake = IO.Ports.Handshake.None                .ReadTimeout = 10000                .NewLine = Microsoft.VisualBasic.Constants.vbCrLf                .Open()                'Clear the buffer                .DiscardInBuffer()                .DiscardOutBuffer()                .WriteLine('ATE0')            End With        cmd = _            'GET /update?key={my_API_key}&field1=20.0200&headers=false HTTP/1.1' & vbCr & vbLf & 'Host: api.thingspeak.com' & vbCr & vbLf & 'Connection: close' & vbCr & vbLf & 'Accept: */*' & vbCr & vbLf & vbCr & vbLf        _SerialPort.WriteLine('AT+CIPSEND=' & cmd.Length.ToString)        System.Threading.Thread.Sleep(100)        _SerialPort.Write(cmd)", "num_user_post": " 13", "author": "Michel_J"}, {"date": "June 28, 2015 - 12:30 am", "content": "Hi Michael, thanks so much for your help - it is now finally working.", "num_user_post": " 4", "author": "SESupply"}, {"date": "September 23, 2015 - 2:23 pm", "content": "Hi,Im trying to create simple Arduino project. 2 Arduino Uno boards, first one is sending sensor data to Thingspeak by ESP8266, second one is responding to received data. I managed to setup sending device without any problems, but i get 400 error while im trying to receive data with second device. To make sure it's not problem with my code i used Termite terminal and simply send AT commands to ESP. CR and LF signs are enabled. This is the field im trying to get data from: https://thingspeak.com/channels/39433/fields/2/lastThis is my terminal window:AT+CWMODE=1AT+CWMODE=1OKAT+CWJAP='test','12345678'AT+CWJAP='test','12345678'OKAT+CIPSTART='TCP','184.106.153.149',80AT+CIPSTART='TCP','184.106.153.149',80CONNECTOKAT+CIPSEND=51AT+CIPSEND=51OK> https://thingspeak.com/channels/39433/fields/2/lasthttps://thingspeak.com/channels/39433/fields/2/lastbusy s...SEND OK+IPD,323:HTTP/1.1 400 Bad RequestServer: nginx/1.7.5Date: Wed, 23 Sep 2015 18:21:41 GMTContent-Type: text/htmlContent-Length: 172Connection: close400 Bad Request400 Bad Requestnginx/1.7.5CLOSEDWhat am i doing wrong? Thanks for any help.", "num_user_post": " 3", "author": "MatHoff"}, {"date": "September 23, 2015 - 2:42 pm", "content": "Hi,You may have more success using our API URL which bypasses HTTPS, for example: http://api.thingspeak.com/channels/39433/fields/2/last .lee", "num_user_post": " 457", "author": "lee"}, {"date": "September 23, 2015 - 3:43 pm", "content": "Just tried your suggestion, i still get the same error. Any more ideas?", "num_user_post": " 3", "author": "MatHoff"}, {"date": "September 23, 2015 - 3:51 pm", "content": "Hi MatHoff,Are you able to provide more details as to what your HTTP request looks like?  Are you able to make HTTP requests to other websites?lee", "num_user_post": " 457", "author": "lee"}, {"date": "September 26, 2015 - 8:29 am", "content": "Hi.Im not sure if i understand you well, this is my first IoT project. Im not using HTTP POST request, im using GET method from this tutorial https://thingspeak.com/docs/channels#update_feed , paragraph 'Get last entry in a field feed'. Im just sending URL from example to ThingSpeak server just like i did in code from post 6. Am i doing it right?", "num_user_post": " 3", "author": "MatHoff"}, {"date": "September 28, 2015 - 8:51 am", "content": "Hi MatHoff,Yes that is the right API command to update a feed.  Instead of sending a request to ThingSpeak, can you try sending a HTTP GET request to google.com, yahoo.com, or some other service to determine if your HTTP requests are formatted correctly and sending correctly?  My guess is that before the request is sent, in your code the request is somehow being formed incorrectly.lee", "num_user_post": " 457", "author": "lee"}, {"date": "January 18, 2016 - 2:55 pm", "content": "I've just tried to send the followingGET /update?key=[apikey]&field1=200&headers=false HTTP/1.1Host: api.thingspeak.comConnection: closeAccept: */*and   got the folowing back: wrong syntaxERRORSEND OK+IPD,4,323:HTTP/1.1 400 Bad RequestServer: nginx/1.7.5Date: Mon, 18 Jan 2016 19:50:43 GMTContent-Type: text/htmlContent-Length: 172Connection: closeI'm using an Arduino +ESP8266 set up and can't seem to get my channel update to work.I've also triedGET http://api.thingspeak.com/update?key=%5Bkey%5D&field1=800/r/n/r/nWhich seem to be recognised by my channel as data, as the last update read 'less than a minute ago'. However, the point isn't plotted or not visible on my chart. when i paste thehttp://api.thingspeak.com/update?key=[key]&field1=800/r/n/r/n into my browser it updates the field fine.. Is the ESP not sending the GET command in the right format? Would really appreciate some help ", "num_user_post": " 2", "author": "yukimach"}, {"date": "January 18, 2016 - 3:17 pm", "content": "yukimach said wrong syntaxERRORSEND OK'wrong syntax' comes from the ESP8266. Inspect carrefully your code. If you have a spare USB to TTL serial use a terminal to spy on what you actually send to the ESP, that helps a lot.", "num_user_post": " 13", "author": "Michel_J"}, {"date": "July 4, 2016 - 9:11 am", "content": "i get 400 error while im trying to receive data with second device. To make sure it's not problem with my code i used Termite terminal and simply send AT commands to ESP. CR and LF signs are enabled.", "num_user_post": " 3", "author": "jenifferhomes"}]}, {"url": "https://community.thingspeak.com/forum/esp8266-wi-fi/data-do-not-show-in-thingspeak/", "posts": [{"date": "June 23, 2016 - 7:58 am", "content": "Hi AllI in my earliest stages of trying to post data to my Thingspeak channel via an ESP8266. I have managed to successfully send data via my browser, but via my ESP does not seem to work. I have my ESP connected via a FTDI converter and am using Terminal V1.93b as a serial terminal program. The data I attempt to send seems to be successfully sent according to the Terminal program. However, when I check my thingspeak channel, there are no updates. I've been at this for 3 days and I've tried all sorts of permutations, incl the number of /r/n's at the end of the GET line. Now I am at a total loss. Can someone please help?Log of terminal connection:Terminal log fileDate: 23/06/2016 - 9:26:09 PM-----------------------------------------------AT+CIPSTART=1,'TCP','api.thingspeak.com',80OKLinkedAT+CIPSEND=1,52> GET /update?api_key=27YZ7P1D60A7X1CH&field2=41busy s...SEND OKOKUnlink-----------------------------------------------Date: 23/06/2016 - 9:27:26 PMEnd log file", "num_user_post": " 13", "author": "rberkelm"}, {"date": "June 23, 2016 - 6:36 pm", "content": "Hi\u00a0rberkelm,Please read this post, my aswer is part 2.http://community.thingspeak.com/forum/thingspeak-projects/esp8266-and-thingspeakI use windows and termite (http://www.compuphase.com/software_termite.htm) but ANY RS232 terminal will do.Please check AT+GMR because different AT versions have 'different syntax'. (In my case I must test in my Arduino program for the answer\u00a0'ERROR' because with other version the test must be done against 'Error' and the program\u00a0fails. UPPERCASE ... lowercase)ESP8266 -> Thingspeak works!Hope this helps ... questions?\u00a0Regards", "num_user_post": " 91", "author": "piajola"}, {"date": "June 24, 2016 - 7:53 am", "content": "Yeehah!! It worked - I am stoked! Piajol, you have made my day, thank you!So, for the record, at the time of my original post I was running the default version of the AT firmware (008000901) with its 115200 baud rate. Later in the night I reflashed to AT firmware 008000902 (AI Thinker) with a baud rate of 9600 hoping I would do better. Unfortunately it made it even worse as I now could not even link to the ThingSpeak site with my syntax above.However thanks to you I was successful with the following syntax and settings:AT+GMR \u00a0 \u00a0 \u00a0'008000902.AT+CWMODE=3 \u00a0'ESP is both a station and a serverAT+CIPMODE=0AT+CIPMUX=0 \u00a0 'Single channelAT+CIPSTART='TCP','api.thingspeak.com',80AT+CIPSEND=62GET /update?api_key=27YZ7P1D60A7X1CH&field1=33.5&field2=65.5To all first-timers like me, the ESP is incredibly sensitive to syntax variation between Firmware variations, so beware! Thanks again for setting me straight!Ray", "num_user_post": " 13", "author": "rberkelm"}, {"date": "June 24, 2016 - 2:47 pm", "content": "Hi Ray,Glad you are in the game \ud83d\ude00Any further help ... askRegardsH.S.", "num_user_post": " 91", "author": "piajola"}]}, {"url": "https://community.thingspeak.com/forum/esp8266-wi-fi/data-not-show-on-thingspeak/", "posts": [{"date": "June 18, 2016 - 4:57 am", "content": "Dear ALLI am sending temperature data to thingspeak but it did't show in my channel. Below is my code. Please give me the suggestion.t=require('ds18b20_1')pin = 1t.setup(pin)addrs = t.addrs()if (addrs ~= nil) then\u00a0 print('Total DS18B20 sensors: '..table.getn(addrs))\u00a0\u00a0 end-------------------------------------------------------------------------------wifi.setmode(wifi.STATIONAP)wifi.sta.config('INNEXIV', 'innexiv$1')tmr.alarm(0,5000,1, function()\u00a0\u00a0\u00a0 -- 5sec for get the ip address for router\u00a0\u00a0 add = wifi.sta.getip()\u00a0\u00a0 if(add == nil) then\u00a0\u00a0\u00a0\u00a0\u00a0 print('Connecting to AP...')\u00a0\u00a0 else\u00a0\u00a0\u00a0\u00a0\u00a0 ip, nm, gw=wifi.sta.getip()\u00a0\u00a0\u00a0\u00a0\u00a0 print('IP Info:IP Address: ',ip)\u00a0\u00a0\u00a0\u00a0\u00a0 print('Netmask: ',nm)\u00a0\u00a0\u00a0\u00a0\u00a0 print('Gateway Addr: ',gw,'')\u00a0\u00a0\u00a0\u00a0\u00a0 tmr.stop(0)\u00a0\u00a0 endend)-------------------------------------------------function sendData()\u00a0 value=ds18b20_1.read()-- print('temp',value)print('Sending data to thingspeak.com')conn=net.createConnection(net.TCP,false)conn:on('receive', function(conn, payload) print(payload) end)-- api.thingspeak.com 184.106.153.149conn:connect(80,'184.106.153.149')conn:send('GET /update?key=XDKWXU7SQ39WXXPY&field1='..value..' HTTP/1.1')conn:send('Host: api.thingspeak.com')conn:send('Accept: */*')conn:send('User-Agent: Mozilla/4.0 (compatible; esp8266 Lua; Windows NT 5.1)')conn:send('')conn:on('sent',function(conn)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 print('Closing connection')\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 conn:close()\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 end)conn:on('disconnection', function(conn)\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 print('Got disconnection...')\u00a0 end)end-- send data every X ms to thing speaktmr.alarm(2, 60000, 1, function() sendData() end )--------------------------------------------------------", "num_user_post": " 1", "author": "fahimhaider"}, {"date": "June 20, 2016 - 9:21 am", "content": "The charts only show numeric data such as 77.9 or 80 - you can use the IoT Debugger tool to see what the data looks like. Sometimes this helps you troubleshoot formatting issues. https://github.com/nothans/iot-debugger", "num_user_post": " 402", "author": "Hans"}]}, {"url": "https://community.thingspeak.com/forum/esp8266-wi-fi/thinspeak-unreachable/", "posts": [{"date": "June 4, 2016 - 8:03 am", "content": "Hello,I use an Arduino Uno linked to a LM35 temperature sensor, to ESP8266 01 and to my laptop, and I intend to send the data collected by the sensor to the ThingSpeak platform, and to do that I use the following code.---------------------------------------------------------------------------------------------------------------------------------------------------------int ledPin = 13;// LM35 analog inputint lm35Pin = 0;// replace with your channel's thingspeak API keyString apiKey = 'T2RJXWQAVXG4ZV39';// connect 10 to TX of Serial USB// connect 11 to RX of serial USBSoftwareSerial ser(10, 11); // RX, TX// this runs oncevoid setup() {                  // initialize the digital pin as an output.  pinMode(ledPin, OUTPUT);      // enable debug serial  Serial.begin(9600);   // enable software serial  ser.begin(9600);    // reset ESP8266  ser.println('AT+RST');}// the loop void loop() {    // blink LED on board  digitalWrite(ledPin, HIGH);     delay(200);                 digitalWrite(ledPin, LOW);  // read the value from LM35.  // read 10 values for averaging.  int val = 0;  for(int i = 0; i < 10; i++) {      val += analogRead(lm35Pin);         delay(500);  }  // convert to temp:  // temp value is in 0-1023 range  // LM35 outputs 10mV/degree C. ie, 1 Volt => 100 degrees C  // So Temp = (avg_val/1023)*5 Volts * 100 degrees/Volt  float temp = val*50.0f/1023.0f;  // convert to string  char buf[16];  String strTemp = dtostrf(temp, 4, 1, buf);    Serial.println(strTemp);    // TCP connection  String cmd = 'AT+CIPSTART='TCP','';  cmd += '184.106.153.149'; // api.thingspeak.com  cmd += '',80';  ser.println(cmd);     if(ser.find('Error')){    Serial.println('AT+CIPSTART error');    return;  }    // prepare GET string  String getStr = 'GET /update?api_key=';  getStr += apiKey;  getStr +='&field1=';  getStr += String(strTemp);  getStr += '';  // send data length  cmd = 'AT+CIPSEND=';  cmd += String(getStr.length());  ser.println(cmd);  if(ser.find('>')){    ser.print(getStr);  }  else{    ser.println('AT+CIPCLOSE');    // alert user    Serial.println('AT+CIPCLOSE');  }      // thingspeak needs 15 sec delay between updates  delay(16000);  }----------------------------------------------------------------------------------------------------------------------------------------------------------When I upload the code the ESP8266 connects to my WiFi network and I get an IP address, I can PING it .. in brief, no connection problems.But the upload of my data to ThingSpeak does not work, I can not visualize anything in the platform and the serial monitor shows the temperature value and 'AT + CIPCLOSE' (which means, I think, that after 'AT + = CIPSEND data_length' I do not get a '>')If you can see my error(s) and how to correct it: DThank you.", "num_user_post": " 3", "author": "aissam"}]}, {"url": "https://community.thingspeak.com/forum/esp8266-wi-fi/arduinoesp8266thingspeak/", "posts": [{"date": "June 3, 2016 - 11:12 am", "content": "Hello,I have problem to send data taken from temperature sensor on arduino using wifi shield 'ESP8266'. Neeeeed helpHere is the code:#include <SoftwareSerial.h>//#include <stdlib.h> // LEDint ledPin = 13;// LM35 analog inputint lm35Pin = 0;// replace with your channel's thingspeak API keyString apiKey = 'QWXWVLWCV42QPFFT';// connect 10 to TX of Serial USB// connect 11 to RX of serial USBSoftwareSerial ser(10, 11); // RX, TX// this runs oncevoid setup() {\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \u00a0\u00a0 // initialize the digital pin as an output.\u00a0 pinMode(ledPin, OUTPUT);\u00a0\u00a0 \u00a0\u00a0 // enable debug serial\u00a0 Serial.begin(9600);\u00a0 // enable software serial\u00a0 ser.begin(9600);\u00a0\u00a0 // reset ESP8266\u00a0 ser.println('AT+RST');}// the loopvoid loop() {\u00a0\u00a0 // blink LED on board\u00a0 digitalWrite(ledPin, HIGH);\u00a0 \u00a0\u00a0 delay(200);\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \u00a0\u00a0 digitalWrite(ledPin, LOW);\u00a0 // read the value from LM35.\u00a0 // read 10 values for averaging.\u00a0 int val = 0;\u00a0 for(int i = 0; i < 10; i++) {\u00a0\u00a0\u00a0\u00a0\u00a0 val += analogRead(lm35Pin);\u00a0 \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 delay(500);\u00a0 }\u00a0 // convert to temp:\u00a0 // temp value is in 0-1023 range\u00a0 // LM35 outputs 10mV/degree C. ie, 1 Volt => 100 degrees C\u00a0 // So Temp = (avg_val/1023)*5 Volts * 100 degrees/Volt\u00a0 float temp = val*50.0f/1023.0f;\u00a0 // convert to string\u00a0 char buf[16];\u00a0 String strTemp = dtostrf(temp, 4, 1, buf);\u00a0\u00a0 Serial.println(strTemp);\u00a0\u00a0 // TCP connection\u00a0 String cm = 'AT+CIPMUX=1';\u00a0 ser.println(cm);\u00a0\u00a0 String cmd = 'AT+CIPSTART=,'TCP','';\u00a0 cmd += '52.7.53.111'; // api.thingspeak.com\u00a0 cmd += '',80';\u00a0 ser.println(cmd);\u00a0 \u00a0\u00a0 if(ser.find('Error')){\u00a0\u00a0\u00a0 Serial.println('AT+CIPSTART error');\u00a0\u00a0\u00a0 return;\u00a0 }\u00a0\u00a0 // prepare GET string\u00a0 String getStr = 'GET /update?api_key=';\u00a0 getStr += apiKey;\u00a0 getStr +='&field1=';\u00a0 getStr += String(strTemp);\u00a0 getStr += '';\u00a0 // send data length\u00a0 cmd = 'AT+CIPSEND=';\u00a0 cmd += String(getStr.length());\u00a0 ser.println(cmd);\u00a0 if(ser.find('>')){\u00a0\u00a0\u00a0\u00a0 // I thing problems begin here ! am i right ??????????????,\u00a0\u00a0\u00a0 ser.print(getStr);\u00a0 }\u00a0 else{\u00a0\u00a0\u00a0 ser.println('AT+CIPCLOSE');\u00a0\u00a0\u00a0 // alert user\u00a0\u00a0\u00a0 Serial.println('AT+CIPCLOSE');\u00a0 }\u00a0\u00a0 \u00a0\u00a0 // thingspeak needs 15 sec delay between updates\u00a0 delay(16000); \u00a0}AND I get on the monitor serie something like this :AT+CIPCLOSE27.5AT+CIPCLOSE28.0AT+CIPCLOSE27.4AT+CIPCLOSE27.4AT+CIPCLOSE27.4AT+CIPCLOSE27.4AT+CIPCLOSESo i thing the shield is connected but data not sent. Help me to solve pleeeeeaaaaaaaaaase", "num_user_post": " 1", "author": "Nasser05"}]}, {"url": "https://community.thingspeak.com/forum/esp8266-wi-fi/gaps-in-data-recording/", "posts": [{"date": "May 6, 2016 - 1:11 pm", "content": "Hello everyone!\u00a0I have a nasty problem and I have searched whole Internet but I haven't found any result \ud83d\ude41 Please look at my results: I get gaps, spmetimes they last for\u00a0 hours. I use NodeMcu (ESP8266) programmed in Arduino. I have tried using DS18B20 or simple code i=i+1. I I wait one minute before posting another data. I get server response '0' anyway. After some time it starts working again. Could you help me please? What may be the reason for it?", "num_user_post": " 2", "author": "Frog_Qmak"}, {"date": "May 7, 2016 - 7:07 am", "content": "Probably solved. I was using two ESP's sending data to the same channel. From time to time they synchronized - and TS needs 15 sec interval between consecutive updates, so servers were rejecting the latter.", "num_user_post": " 2", "author": "Frog_Qmak"}, {"date": "May 7, 2016 - 8:07 am", "content": "Happy that you got to the bottom of it!\u00a0", "num_user_post": " 402", "author": "Hans"}, {"date": "June 1, 2016 - 7:43 am", "content": "I agree on the cause, as I have the same issue. How did you fix the sync problem?", "num_user_post": " 1", "author": "DavidB"}]}, {"url": "https://community.thingspeak.com/forum/esp8266-wi-fi/thingspeak-library-failure-with-returned-error-codes-with-cryptic-meanings/", "posts": [{"date": "May 22, 2016 - 5:40 pm", "content": "I'm new here and trying to post to a new channel via the Arduino IDE and a\u00a0NodeMcu 0.9 ESP8266 board. I can post direct from a browser and see the results OK BUT when I run some code via the\u00a0#include <ThingSpeak.h>library e.g. the lines below...\u00a0ThingSpeak.setField(1, float(20.2)); ThingSpeak.setField(2, float(23.4)); int ExitCode = ThingSpeak.writeFields(MyTSChannelNumber, MyTSWriteAPIKey); if (ExitCode == 200) { Serial.print (' 200=Success! '); } else { Serial.print (' \ud83d\ude41 Thingspeak Error Code = '); Serial.print(ExitCode); }I get a -302 error code! \u00a0and of course no data is written. Otherwise I am quite close to getting something done.This is a '#define ERR_UNEXPECTED_FAIL \u00a0 \u00a0 -302 \u00a0 \u00a0// Unexpected failure during write to ThingSpeak'Can anyone help with demystifying the library exit code or see a problem in what I have done? How can I test things better. I get a -301 when I sever the connection which is what I would expect.Paul", "num_user_post": " 1", "author": "PlStrss"}]}, {"url": "https://community.thingspeak.com/forum/esp8266-wi-fi/sample-code-to-retrive-last-value-from-thinkspeak-using-esp8266/", "posts": [{"date": "April 20, 2016 - 3:20 am", "content": "Hi,I am new with Arduino & esp8266 and using the below code to upload data to ThinkSpeak. Everything works fine, but now I want to retrieve some data back from ThinkSpeak. Can some one help in developing the code for retrieval?// Using XXXXX here as my channel is privateGET https://api.thingspeak.com/channels/XXXXXX/fields/1.json?results=2 From what I am checking, I have to use the above GET string to get the fields data. But I don't know how to create the request string.Help would be appreciated. Thanks// Uploading data to Thinkspeak<br />uploadData() {String apiKey = 'ESDS8678890SDDS';String myData = '45.5'; // example of data to sendif (espClient.connect(server,80)) { String postStr = apiKey; postStr +='&amp;field1=';postStr += String(myData);postStr += '';espClient.print('POST /update HTTP/1.1');espClient.print('Host: api.thingspeak.com');espClient.print('Connection: close');espClient.print('X-THINGSPEAKAPIKEY: '+apiKey+'');espClient.print('Content-Type: application/x-www-form-urlencoded');espClient.print('Content-Length: ');espClient.print(postStr.length());espClient.print('');espClient.print(postStr);Serial.print(postStr);Serial.print('My Data: ');Serial.print(myData);Serial.print('');}espClient.stop();}<br /><br />\u00a0", "num_user_post": " 1", "author": "theindianapple"}, {"date": "May 8, 2016 - 12:52 pm", "content": "If you just want to retrieve the last value for a channel you could use the official thingspeak/arduino library. That works fine. But if you also would like the date/time for the last value I don't think you could use that library. I'm having the same problem, I would like to get the timestamp for the last value as well.", "num_user_post": " 10", "author": "mdahlb"}]}, {"url": "https://community.thingspeak.com/forum/esp8266-wi-fi/thingspeak-and-wemos-d1-mini/", "posts": [{"date": "May 1, 2016 - 12:01 pm", "content": "I have been trying to use the Arduino IDE examples posted on GitHub, with Wemos D1 Mini.\u00a0 I am using the ReadPrivateChannel example.\u00a0 The code compiles and I get no error messages.\u00a0 However, the data returned is always either '0.00' or null.\u00a0 I am posting data to thingspeak using other code, I am not able to get the WriteVoltage Example to work either.\u00a0Does anyone know why this does not work with Wemos D1 mini? Is there a work around?Thanks.\u00a0Tim", "num_user_post": " 1", "author": "tgibbs99"}, {"date": "May 8, 2016 - 12:37 pm", "content": "Hello TimI have managed to read the last value (a temperature) from my private thingspeak channel with a Wemos D1 mini.. just replace the XXXXX in the code below with your personal settings:\u00a0#include 'ThingSpeak.h'#include <SPI.h>#include <ESP8266WiFi.h> char ssid[] = 'XXXXXXX'; // your network SSID (name) char pass[] = 'XXXXXX'; // your network passwordWiFiClient client;unsigned long myChannelNumber = XXXXXXX; \u00a0// your channel numberconst char * myReadAPIKey = 'XXXXXX'; \u00a0// your read api keyvoid setup() { Serial.begin(115200); WiFi.begin(ssid, pass); ThingSpeak.begin(client);}void loop() { float temperature = ThingSpeak.readFloatField(myChannelNumber, 1, myReadAPIKey); \u00a0// reads a float, in this case a temperature Serial.print('Last temperature: '); Serial.print(temperature); Serial.println(' *C'); delay(15000); }", "num_user_post": " 10", "author": "mdahlb"}]}, {"url": "https://community.thingspeak.com/forum/esp8266-wi-fi/inconsistent-data-upload-to-thingspeak-via-arduino-using-esp8266/", "posts": [{"date": "April 17, 2016 - 5:50 am", "content": "I have been successfully sent data using esp8266, thingspeak and arduino.\u00a0I ran the code again after a couple of days and thingspeak no longer updates my data onto field1.\u00a0 I use my android phone and tether a hotspot connection to esp8266. I can see that the esp8266 is connected to the internet properly. I always get ping response from my command prompt window.\u00a0I am able to connect to the thingspeak static ip. Send using AT+CIPSEND=48, for a (abc.x) floating value.\u00a0But still i am not getting response on my thingspeak channel...Please help me find a solution, kind of a permanent fix. Thank you in advance.Regards, K. Raghavendran\u00a0", "num_user_post": " 2", "author": "sinet666"}]}, {"url": "https://community.thingspeak.com/forum/esp8266-wi-fi/esp8266-missed-events-on-thingspeak/", "posts": [{"date": "April 12, 2016 - 1:14 pm", "content": "I am trying to display value on thingspeak\u00a0 and per image below we can see that number of entries are :22 and points plotted are just 3.And every time to see the data plot i need to refresh the page to get updated plot.I dont think so code has anything to do with this but, how can solve this?http://cdn.instructables.com/F2M/BA50/IMRYGF7H/F2MBA50IMRYGF7H.LARGE.jpg", "num_user_post": " 4", "author": "disha"}, {"date": "April 13, 2016 - 10:44 am", "content": "If you click the edit icon (pencil), you will see the chart options. If you are only showing the last day of day you might only see the last few points. If you are showing, results = 60 then you should see all of the most recent results. Also, set dynamic to true to get the charts to update themselves.", "num_user_post": " 402", "author": "Hans"}, {"date": "April 17, 2016 - 3:39 am", "content": "Hans said If you click the edit icon (pencil), you will see the chart options. If you are only showing the last day of day you might only see the last few points. If you are showing, results = 60 then you should see all of the most recent results. Also, set dynamic to true to get the charts to update themselves.Ya i did that and you can see two pics below the field chart settings changed and then another of: plot image where 45 entries and you can see only one point on the plothttps://drive.google.com/open?id=0B9S6uuNt7m4OMHV3aTJFMVRfdDQhttps://drive.google.com/open?id=0B9S6uuNt7m4OOUVHRERrMjVHTUU", "num_user_post": " 4", "author": "disha"}, {"date": "April 17, 2016 - 4:12 am", "content": "My code:#include <SoftwareSerial.h>#include <stdlib.h>SoftwareSerial ser(2,3); // RX, TXint ledpin=13;int sense=A0;float volt=0.0;String apiKey='PT41QR66HL1NH8LU';// this runs oncevoid setup() {\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \u00a0\u00a0 // initialize the digital pin as an output.\u00a0 pinMode(ledpin, OUTPUT);\u00a0\u00a0 \u00a0\u00a0 // enable debug serial\u00a0 Serial.begin(9600);\u00a0 // enable software serial\u00a0 ser.begin(9600);\u00a0\u00a0 // reset ESP8266ser.println('AT+RST');}void loop(){\u00a0\u00a0 digitalWrite(ledpin, HIGH);\u00a0 \u00a0\u00a0 delay(500);\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \u00a0\u00a0 digitalWrite(ledpin, LOW);\u00a0\u00a0\u00a0 delay(500); \u00a0\u00a0\u00a0\u00a0 volt=analogRead(sense)*(5.0f/1023.0f);\u00a0 char buf[16];\u00a0 String strvolt1 = dtostrf(volt, 4, 1, buf);\u00a0\u00a0 Serial.println(strvolt1);\u00a0 \u00a0\u00a0\u00a0\u00a0 String cmd = 'AT+CIPSTART='TCP','';\u00a0 cmd += '184.106.153.149'; // api.thingspeak.com\u00a0 cmd += '',80';\u00a0 ser.println(cmd);\u00a0 \u00a0\u00a0 if(ser.find('Error')){\u00a0\u00a0\u00a0 Serial.println('AT+CIPSTART error');\u00a0\u00a0\u00a0 return;\u00a0 }\u00a0 String getStr = 'GET /update?api_key=';\u00a0 getStr += apiKey;\u00a0 getStr +='&field1=';\u00a0 getStr += String(strvolt1);\u00a0 getStr += '';\u00a0 cmd = 'AT+CIPSEND=';\u00a0 cmd += String(getStr.length());\u00a0 ser.println(cmd);\u00a0 if(ser.find('>')){\u00a0\u00a0\u00a0 ser.print(getStr);\u00a0 }\u00a0 else{\u00a0\u00a0\u00a0 ser.println('AT+CIPCLOSE');\u00a0\u00a0\u00a0 // alert user\u00a0\u00a0\u00a0 Serial.println('AT+CIPCLOSE');\u00a0 }\u00a0\u00a0\u00a0 delay(16000); \u00a0}", "num_user_post": " 4", "author": "disha"}]}]}
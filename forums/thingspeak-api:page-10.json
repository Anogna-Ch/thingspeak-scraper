{"url": "https://community.thingspeak.com/forum/thingspeak-api/page-10/", "threads": [{"url": "https://community.thingspeak.com/forum/thingspeak-api/two-values-to-thingspeak-server/", "posts": [{"date": "January 3, 2018 - 3:33 pm", "content": "I am trying to send two sensor data to thingspeak. Please tell me how to write command to send two sensor data. The basic program which I am using is given below.\u00a0#include <SoftwareSerial.h>/* Create object named SIM900 of the class SoftwareSerial */SoftwareSerial SIM900(8, 7);void setup(){ SIM900.begin(9600); /* Define baud rate for software serial communication */ Serial.begin(9600); /* Define baud rate for serial communication */}void loop() { Serial.println('HTTP post method :'); Serial.print('AT'); SIM900.println('AT'); /* Check Communication */ delay(500); ShowSerialData(); /* Print response on the serial monitor */ delay(500); /* Configure bearer profile 1 */ Serial.print('AT+SAPBR=3,1,'CONTYPE','GPRS''); SIM900.println('AT+SAPBR=3,1,'CONTYPE','GPRS''); /* Connection type GPRS */ delay(500); ShowSerialData(); delay(500); Serial.print('AT+SAPBR=3,1,'APN','airtelgprs.com''); SIM900.println('AT+SAPBR=3,1,'APN','airtelgprs.com''); /* APN of the provider */ delay(500); ShowSerialData(); delay(500); Serial.print('AT+SAPBR=1,1'); SIM900.println('AT+SAPBR=1,1'); /* Open GPRS context */ delay(500); ShowSerialData(); delay(500); Serial.print('AT+SAPBR=2,1'); SIM900.println('AT+SAPBR=2,1'); /* Query the GPRS context */ delay(500); ShowSerialData(); delay(2000); Serial.print('AT+HTTPINIT'); SIM900.println('AT+HTTPINIT'); /* Initialize HTTP service */ delay(2000); ShowSerialData(); delay(500); Serial.print('AT+HTTPPARA='CID',1'); SIM900.println('AT+HTTPPARA='CID',1'); /* Set parameters for HTTP session */ delay(500); ShowSerialData(); delay(500); Serial.print('AT+HTTPPARA='URL','api.thingspeak.com/update''); SIM900.println('AT+HTTPPARA='URL','api.thingspeak.com/update''); /* Set parameters for HTTP session */ delay(500); ShowSerialData(); delay(500); Serial.print('AT+HTTPDATA=33,10000'); SIM900.println('AT+HTTPDATA=33,10000'); /* POST data of size 33 Bytes with maximum latency time of 10seconds for inputting the data*/ delay(200); ShowSerialData(); delay(200); Serial.print('api_key=8MMR5DD7QC42NAUJ&field1=2'); /* Data to be sent */ SIM900.println('api_key=8MMR5DD7QC42NAUJ&field1=2'); delay(500); ShowSerialData(); delay(500); Serial.print('AT+HTTPACTION=1'); SIM900.println('AT+HTTPACTION=1'); /* Start POST session */ delay(1000); ShowSerialData(); delay(2000); Serial.print('AT+HTTPTERM'); SIM900.println('AT+HTTPTERM'); /* Terminate HTTP service */ delay(2000); ShowSerialData(); delay(500); Serial.print('AT+SAPBR=0,1'); SIM900.println('AT+SAPBR=0,1'); /* Close GPRS context */ delay(500); ShowSerialData(); delay(500);}void ShowSerialData(){ while(SIM900.available()!=0) /* If data is available on serial port */ Serial.write(char (SIM900.read())); /* Print character received on to the serial monitor */}", "num_user_post": " 3", "author": "MURLIDHAR ROY"}, {"date": "January 4, 2018 - 9:37 am", "content": "See REST API documentation for the appropriate syntax.\u00a0Does this code work to update a single field?\u00a0 I think you may need a '?' before the api key.https://api.thingspeak.com/update?api_key=xxxxxxxxxxxxxxxx&field1=0Then continue to append fields with the '&'.https://api.thingspeak.com/update?api_key=xxxxxxxxxxxxxxxx&field1=0&field2=56&field3=123Can you describe your hardware?", "num_user_post": " 401", "author": "cstapels"}, {"date": "January 9, 2018 - 3:57 am", "content": "You may need a '?' before the api key", "num_user_post": " 2", "author": "royalghost"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/how-to-add-a-talkback-command-from-a-xamarin-forms-app/", "posts": [{"date": "January 4, 2018 - 4:31 pm", "content": "Hello,I would like to know if it is possible to add (also delete, modify, ...) a TalkBack command from a mobile Xamarin.Form app written in C#. I tried with several fragments of codes without success. One of them is the following:async static void PostRequest(string url){\u00a0 \u00a0 \u00a0 IEnumerable<KeyValuePair<string, string>> queries = new List<KeyValuePair<string, string>>()\u00a0 \u00a0\u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 new KeyValuePair<string, string>('api_key','XXXXXXXXXXXXXXXX'),\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 new KeyValuePair<string, string>('command_string','Alarm')\u00a0 \u00a0 \u00a0 };\u00a0 \u00a0 \u00a0 HttpContent q = new FormUrlEncodedContent(queries);\u00a0 \u00a0 \u00a0 q.Headers.Clear();\u00a0 \u00a0 \u00a0 q.Headers.Add('Content-Type', 'application/x-www-form-urlencoded');\u00a0 \u00a0 \u00a0 using (HttpClient client = new HttpClient())\u00a0 \u00a0\u00a0 { \u00a0\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 using (HttpResponseMessage response = await client.PostAsync(url, q))\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0\u00a0 using (HttpContent content = response.Content)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0\u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 string mycontent = await content.ReadAsStringAsync();\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 HttpContentHeaders headers = content.Headers;\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 str = headers.ToString();\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0\u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 }}and I called this method usingPostRequest('https://api.thingspeak.com/talkbacks/XXXXX/commands');\u00a0This is not working. I think that I am passing the parameters api_key and command_string in a wrong way.Any help is welcome! Thanks,\u00a0Ariel\u00a0\u00a0", "num_user_post": " 2", "author": "alombardi"}, {"date": "January 4, 2018 - 7:52 pm", "content": "What you are trying should definitely be possible.The syntax looks correct to me.\u00a0 Can you try the post with POSTMAN or curl as see if it is added correctly?\u00a0 That will make sure the api key is the correct one and the talkback id is correct.", "num_user_post": " 401", "author": "cstapels"}, {"date": "January 5, 2018 - 8:36 am", "content": "Thank you\u00a0cstapels! Sorry, the problem was with the internet connection of the android emulator.The syntax was correct and also the parameters.", "num_user_post": " 2", "author": "alombardi"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/inconsistent-data-intervals-in-chart/", "posts": [{"date": "January 2, 2018 - 11:59 am", "content": "Hello,I'm experiencing considerable inconsistencies when posting data to the API.Using this URL.....http://api.thingspeak.com/update?api_key=HDRIJNETDDISNTDRL&field1=45.00&field2=80.68,api_key,humidStr,tempStrI am able to log all outbound connections and I can clearly see that in fact, my system is sending the URL every 60 seconds like clockwork.\u00a0 I can also see that the URLS appear to contain valid data.\u00a0 So the problem appears to be on the ThingSpeak.com side.What I get is entries with varying intervals such as 1 minute, 2minutes, 5 minutes, 6 minutes, 8 minutes, 10 minutes, 15 minutes etc....even though I can verify that my side is sending the URL consistently every 1 minute.Downloading and viewing the raw data in a spreadsheet.....this seems to be confirmed.\u00a0If I manually enter this string into the browser, the points seem to be entered.\u00a0 That makes me feel it's not on the ThinkSpeak side.\u00a0 Is there some problem with the data?Is this a known issue that you simply have to deal with or is there a way to make the receiving and plotting of data more consistent?Or, is this an isolated issue that only I am experiencing?Thanks.\u00a0", "num_user_post": " 15", "author": "Piez"}, {"date": "January 3, 2018 - 8:44 am", "content": "What response do you get from the GET URL you are using?\u00a0 If the update is successful, ThingSpeak will return the entry id, which should get incrementally higher.\u00a0I'm confused by the commas at the end of your URL.\u00a0 it looks like part of a string building operation.\u00a0 There shouldn't be any commas at the end of the GET command, after the field data, unless its part of another valid parameter.If you were trying to perform two successive writes, the server might reject the writes for being too fast.\u00a0 Are you performing any other updates in your code, or is it possible that the code is trying the same call twice?\u00a0 Updating two fields at once as your command is written counts only as one write.Is it possible that the connection is lost between your logger and Thingspeak?\u00a0 You should be able to tell by the response from the server.", "num_user_post": " 401", "author": "cstapels"}, {"date": "January 3, 2018 - 1:44 pm", "content": "cstapels said  What response do you get from the GET URL you are using?\u00a0 If the update is successful, ThingSpeak will return the entry id, which should get incrementally higher.\u00a0 I'm confused by the commas at the end of your URL.\u00a0 it looks like part of a string building operation.\u00a0 There shouldn't be any commas at the end of the GET command, after the field data, unless its part of another valid parameter. If you were trying to perform two successive writes, the server might reject the writes for being too fast.\u00a0 Are you performing any other updates in your code, or is it possible that the code is trying the same call twice?\u00a0 Updating two fields at once as your command is written counts only as one write. Is it possible that the connection is lost between your logger and Thingspeak?\u00a0 You should be able to tell by the response from the server.\u00a0\u00a0Hello,The Data submissions are sent programmatically via an Arduino sketch so there is no response.\u00a0 The only way I can get that entry ID response is to send the URL directly from a browser.Commas...Are you referring to this?\u00a0\u00a0,api_key,humidStr,tempStrIf so, that is just part of the Sketch.\u00a0\u00a0 I did not program it.\u00a0 It's a popular Temp Humidity ThingSpeak project found herehttps://circuitdigest.com/microcontroller-projects/iot-temperature-humidity-monitoring-using-arduinoLooking at the outbound logs, it is only sent once every 60 seconds.\u00a0\u00a0\u00a0 Not that so far today it seems to be doing MUCH better for unknown reasonsAgain, looking at the outbound connections log, there appears to be successful outbound URL's to ThingSpeak very 60 seconds and an HTTP FIN response from the ThingSpeak server indicating it was received.Thanks for your assistance", "num_user_post": " 15", "author": "Piez"}, {"date": "January 3, 2018 - 2:08 pm", "content": "Also, would updating two different channels at the same time cause this behavior?Today I'm only updating one and it's doing much better.\u00a0 Not sure if it has to do with the number of separate channels being updated?", "num_user_post": " 15", "author": "Piez"}, {"date": "January 3, 2018 - 2:48 pm", "content": "Yes, updates to different channels on the same account must still comply with the rate limit.\u00a0 The free account limit is one update per 15 seconds but you get 3 million updates per year.\u00a0 More licence options with faster update rates are available.\u00a0 I'm glad to hear we may have found the culprit for the earlier problem.Thanks for sharing the link to your sketch.\u00a0 The commas are definitely not part of the URL, but part of the sprintf() function.Can you describe your hardware?\u00a0 I may be able to offer more simple code than the AT command set, depending on what you are using.", "num_user_post": " 401", "author": "cstapels"}, {"date": "January 3, 2018 - 3:15 pm", "content": "cstapels said  Yes, updates to different channels on the same account must still comply with the rate limit.\u00a0 The free account limit is one update per 15 seconds but you get 3 million updates per year.\u00a0 More licence options with faster update rates are available.\u00a0 I'm glad to hear we may have found the culprit for the earlier problem. Thanks for sharing the link to your sketch.\u00a0 The commas are definitely not part of the URL, but part of the sprintf() function. Can you describe your hardware?\u00a0 I may be able to offer more simple code than the AT command set, depending on what you are using.\u00a0\u00a0ok.It is quite possible that the requests to the two channels were being sent too close together.\u00a0\u00a0 I was running two independent Arduino sketches in independent Arduino Interface windows.\u00a0 A solution might be to put both channel update routines into ONE Arduino sketch.\u00a0\u00a0 I'll have to look into thatThanks for this info.My hardware is an Arduino UNO CH340 R3\u00a0 (Clone)ESP8266-01 WiFi module", "num_user_post": " 15", "author": "Piez"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/timezone-in-charts-any-chart/", "posts": [{"date": "September 15, 2015 - 12:39 am", "content": "I'm having an issue getting the correct Timezone to display in charts that i'm embedding on other webpages. The timezone parameter doesn't seem to be changing what Thingspeak is displaying on the X axis. Here is the very simple chart I'm trying to display.http://api.thingspeak.com/channels/52499/charts/1?timezone=Asia/KolkataThe timezone in my account is set to Pacific Standard Time (I'm in California), but my channel and hardware is in India. For the future, I will be having multiple channels probably with different time zones. The API says this should work. https://thingspeak.com/docs/charts I tried the offset parameter to see if it had something to do with my settings, and that is also displaying my current PST time.http://api.thingspeak.com/channels/52499/charts/1?offset=5I also tried changing my account settings to a different timezone (Asia/Kolkata) and that did not remedy the issue.", "num_user_post": " 11", "author": "fishmastaflex"}, {"date": "September 15, 2015 - 1:45 pm", "content": "I am looking into this and will have something for you shortly.Matt", "num_user_post": " 2", "author": "ma11en"}, {"date": "September 15, 2015 - 1:46 pm", "content": "Hi fishmastaflex,As you mentioned, you can use the timezone parameter or the offset parameter to request for data from a field in a specific time zone. For e.g:https://thingspeak.com/channels/52499/fields/1.json?timezone=Asia/KolkataHowever, thingspeak high-charts are designed to use the browser timezone (thereby the OS timezone) always. Therefore, even when the feed parameter for setting timezone is specified,  the high-chart will always default back to using the browser timezone. Note that, changing the OS clock's timezone should lead to thingspeak high-chart display to change the timezone used for x-axis. But, changing your account setting will not affect it.To enable charts to be displayed with fixed timezones, create a MATLAB Visualization App, read data from your channel, change the timezone and create a plot. For example:[data, time] = thingSpeakRead(52499, 'Fields', 1, 'NumPoints', 100);time.TimeZone = 'Asia/Kolkata';plot(time, data);xlabel('Time in Kolkata timezone');title('Data displayed with Shifted timezone');You can then embed the MATLAB plot into other webpages.For more information on the datetime function, following this link:http://www.mathworks.com/help/matlab/ref/datetime.html- Adarsh", "num_user_post": " 62", "author": "Adarsh_Murthy"}, {"date": "September 15, 2015 - 3:35 pm", "content": "Thanks Adarsh. I had a feeling I would have to use MatLab to do this and you have verified my thoughts. Does that mean that the timezone parameter (in ThingSpeak charts) is basically useless? If it always defaults to the browser timezone, then I don't see a reason for stating it as a parameter in the API under the charts section.", "num_user_post": " 11", "author": "fishmastaflex"}, {"date": "September 16, 2015 - 2:31 pm", "content": "You are right. The timezone parameter is controlling the display of timestamps for the feed data only, i.e.,https://thingspeak.com/channels/12397/fields/1.json?timezone=Asia/KolkataIt does not have any effect on the x-axis display in the charts though. We will add to the documentation to explain this behavior. Thanks for bringing this to our attention.-Adarsh", "num_user_post": " 62", "author": "Adarsh_Murthy"}, {"date": "October 16, 2017 - 9:23 am", "content": "Any updates on this?Looks like parameter timezone still hasn't been implemented or is not functioning?Also, regardless of the graphical display of data, how does one control the period used for the 'daily' keyword for timescale/sum/average/median chart api parameters?", "num_user_post": " 6", "author": "gpc"}, {"date": "November 3, 2017 - 5:30 pm", "content": "Just bumping it to the top, still looking for answers.\u00a0", "num_user_post": " 6", "author": "gpc"}, {"date": "January 3, 2018 - 10:14 am", "content": "I've just noticed the timestamps on downloaded data are incorrect even though they are correct online when viewd in the chart itself.", "num_user_post": " 15", "author": "Piez"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/please-help-thing-speak-not-updating-on-dht-11/", "posts": [{"date": "December 28, 2017 - 1:10 am", "content": "I have no idea why, but my sensor isn't reading anymore despite just setting it up. My numbers for humidity and temps are off and I don't know how to fix that (it shows 255 as the reading for both). I am new at this, but I will post my coding below for the DHT and the Personal Weather Station. Any help will be so appreciated!\u00a0\u00a0DHT CODING#include <DHT.h>#include <ESP8266WiFi.h>#include <WiFiClient.h>#include <ThingSpeak.h>#define DHTPIN D5#define DHTTYPE DHT11DHT dht(DHTPIN, DHTTYPE);const char* ssid = 'WuTangLAN';const char* password = 'spranktank7664A';WiFiClient client;unsigned long myChannelNumber = 386894;const char * myWriteAPIKey = '9DAGDL2109WC8DIJ';uint8_t temperature, humidity;void setup(){ Serial.begin(115200); dht.begin(); delay(10); // Connect to WiFi network Serial.println(); Serial.println(); Serial.print('Connecting to '); Serial.println(ssid); WiFi.begin(ssid, password); while (WiFi.status() != WL_CONNECTED) { delay(500); Serial.print('.'); } Serial.println(''); Serial.println('WiFi connected'); // Print the IP address Serial.println(WiFi.localIP()); ThingSpeak.begin(client);}void loop(){ static boolean data_state = false; temperature = dht.readTemperature(); humidity = dht.readHumidity(); Serial.print('Temperature Value is :'); Serial.print(temperature); Serial.println('C'); Serial.print('Humidity Value is :'); Serial.print(humidity); Serial.println('%'); // Write to ThingSpeak. There are up to 8 fields in a channel, allowing you to store up to 8 different // pieces of information in a channel. Here, we write to field 1. if( data_state ) { ThingSpeak.writeField(myChannelNumber, 1, temperature, myWriteAPIKey); data_state = false; } else { ThingSpeak.writeField(myChannelNumber, 2, humidity, myWriteAPIKey); data_state = true; } delay(30000); // ThingSpeak will only accept updates every 15 seconds.}PWS/**The MIT License (MIT)Copyright (c) 2016 by Daniel EichhornPermission is hereby granted, free of charge, to any person obtaining a copyof this software and associated documentation files (the 'Software'), to dealin the Software without restriction, including without limitation the rightsto use, copy, modify, merge, publish, distribute, sublicense, and/or sellcopies of the Software, and to permit persons to whom the Software isfurnished to do so, subject to the following conditions:The above copyright notice and this permission notice shall be included in allcopies or substantial portions of the Software.THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS ORIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THEAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHERLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THESOFTWARE.See more at http://blog.squix.ch*/#include <ESP8266WiFi.h>#include <Ticker.h>#include <JsonListener.h>#include 'SSD1306Wire.h'#include 'OLEDDisplayUi.h'#include 'Wire.h'#include 'WundergroundClient.h'#include 'WeatherStationFonts.h'#include 'WeatherStationImages.h'#include 'TimeClient.h'#include 'ThingspeakClient.h'/*************************** * Begin Settings **************************/// Please read http://blog.squix.org/weatherstation-getting-code-adapting-it// for setup instructions// WIFIconst char* WIFI_SSID = 'WuTangLAN';const char* WIFI_PWD = 'spranktank7664A';\u00a0// Setupconst int UPDATE_INTERVAL_SECS = 10 * 60; // Update every 10 minutes// Display Settingsconst int I2C_DISPLAY_ADDRESS = 0x3c;const int SDA_PIN = D3;const int SDC_PIN = D4;// TimeClient settingsconst float UTC_OFFSET = -5;// Wunderground Settingsconst boolean IS_METRIC = true;const String WUNDERGRROUND_API_KEY = 'c7fdd773c27f8a63';const String WUNDERGRROUND_LANGUAGE = 'EN';const String WUNDERGROUND_COUNTRY = 'WV';const String WUNDERGROUND_CITY = 'Morgantown';//Thingspeak Settingsconst String THINGSPEAK_CHANNEL_ID = ' 386894';const String THINGSPEAK_API_READ_KEY = 'BZF0D1CS8DBQC6AQ';// Initialize the oled display for address 0x3c// sda-pin=14 and sdc-pin=12SSD1306Wire display(I2C_DISPLAY_ADDRESS, SDA_PIN, SDC_PIN);OLEDDisplayUi ui( &display );/*************************** * End Settings **************************/TimeClient timeClient(UTC_OFFSET);// Set to false, if you prefere imperial/inches, FahrenheitWundergroundClient wunderground(IS_METRIC);ThingspeakClient thingspeak;// flag changed in the ticker function every 10 minutesbool readyForWeatherUpdate = false;String lastUpdate = '--';Ticker ticker;//declaring prototypesvoid drawProgress(OLEDDisplay *display, int percentage, String label);void updateData(OLEDDisplay *display);void drawDateTime(OLEDDisplay *display, OLEDDisplayUiState* state, int16_t x, int16_t y);void drawCurrentWeather(OLEDDisplay *display, OLEDDisplayUiState* state, int16_t x, int16_t y);void drawForecast(OLEDDisplay *display, OLEDDisplayUiState* state, int16_t x, int16_t y);void drawThingspeak(OLEDDisplay *display, OLEDDisplayUiState* state, int16_t x, int16_t y);void drawForecastDetails(OLEDDisplay *display, int x, int y, int dayIndex);void drawHeaderOverlay(OLEDDisplay *display, OLEDDisplayUiState* state);void setReadyForWeatherUpdate();\u00a0// Add frames// this array keeps function pointers to all frames// frames are the single views that slide from right to leftFrameCallback frames[] = { drawDateTime, drawCurrentWeather, drawForecast, drawThingspeak };int numberOfFrames = 4;OverlayCallback overlays[] = { drawHeaderOverlay };int numberOfOverlays = 1;void setup() { Serial.begin(115200); Serial.println(); Serial.println();// initialize dispaly display.init(); display.clear(); display.display();//display.flipScreenVertically(); display.setFont(ArialMT_Plain_10); display.setTextAlignment(TEXT_ALIGN_CENTER); display.setContrast(255);WiFi.begin(WIFI_SSID, WIFI_PWD);int counter = 0; while (WiFi.status() != WL_CONNECTED) { delay(500); Serial.print('.'); display.clear(); display.drawString(64, 10, 'Connecting to WiFi'); display.drawXbm(46, 30, 8, 8, counter % 3 == 0 ? activeSymbole : inactiveSymbole); display.drawXbm(60, 30, 8, 8, counter % 3 == 1 ? activeSymbole : inactiveSymbole); display.drawXbm(74, 30, 8, 8, counter % 3 == 2 ? activeSymbole : inactiveSymbole); display.display();counter++; }ui.setTargetFPS(30);ui.setActiveSymbol(activeSymbole); ui.setInactiveSymbol(inactiveSymbole);// You can change this to // TOP, LEFT, BOTTOM, RIGHT ui.setIndicatorPosition(BOTTOM);// Defines where the first frame is located in the bar. ui.setIndicatorDirection(LEFT_RIGHT);// You can change the transition that is used // SLIDE_LEFT, SLIDE_RIGHT, SLIDE_TOP, SLIDE_DOWN ui.setFrameAnimation(SLIDE_LEFT);ui.setFrames(frames, numberOfFrames);ui.setOverlays(overlays, numberOfOverlays);// Inital UI takes care of initalising the display too. ui.init();Serial.println('');updateData(&display);ticker.attach(UPDATE_INTERVAL_SECS, setReadyForWeatherUpdate);}void loop() {if (readyForWeatherUpdate && ui.getUiState()->frameState == FIXED) { updateData(&display); }int remainingTimeBudget = ui.update();if (remainingTimeBudget > 0) { // You can do some work here // Don't do stuff if you are below your // time budget. delay(remainingTimeBudget); }\u00a0}void drawProgress(OLEDDisplay *display, int percentage, String label) { display->clear(); display->setTextAlignment(TEXT_ALIGN_CENTER); display->setFont(ArialMT_Plain_10); display->drawString(64, 10, label); display->drawProgressBar(2, 28, 124, 10, percentage); display->display();}void updateData(OLEDDisplay *display) { drawProgress(display, 10, 'Updating time...'); timeClient.updateTime(); drawProgress(display, 30, 'Updating conditions...'); wunderground.updateConditions(WUNDERGRROUND_API_KEY, WUNDERGRROUND_LANGUAGE, WUNDERGROUND_COUNTRY, WUNDERGROUND_CITY); drawProgress(display, 50, 'Updating forecasts...'); wunderground.updateForecast(WUNDERGRROUND_API_KEY, WUNDERGRROUND_LANGUAGE, WUNDERGROUND_COUNTRY, WUNDERGROUND_CITY); drawProgress(display, 80, 'Updating thingspeak...'); thingspeak.getLastChannelItem(THINGSPEAK_CHANNEL_ID, THINGSPEAK_API_READ_KEY); lastUpdate = timeClient.getFormattedTime(); readyForWeatherUpdate = false; drawProgress(display, 100, 'Done...'); delay(1000);}\u00a0void drawDateTime(OLEDDisplay *display, OLEDDisplayUiState* state, int16_t x, int16_t y) { display->setTextAlignment(TEXT_ALIGN_CENTER); display->setFont(ArialMT_Plain_10); String date = wunderground.getDate(); int textWidth = display->getStringWidth(date); display->drawString(64 + x, 5 + y, date); display->setFont(ArialMT_Plain_24); String time = timeClient.getFormattedTime(); textWidth = display->getStringWidth(time); display->drawString(64 + x, 15 + y, time); display->setTextAlignment(TEXT_ALIGN_LEFT);}void drawCurrentWeather(OLEDDisplay *display, OLEDDisplayUiState* state, int16_t x, int16_t y) { display->setFont(ArialMT_Plain_10); display->setTextAlignment(TEXT_ALIGN_LEFT); display->drawString(60 + x, 5 + y, wunderground.getWeatherText());display->setFont(ArialMT_Plain_24); String temp = wunderground.getCurrentTemp() + '\u00b0C'; display->drawString(60 + x, 15 + y, temp); int tempWidth = display->getStringWidth(temp);display->setFont(Meteocons_Plain_42); String weatherIcon = wunderground.getTodayIcon(); int weatherIconWidth = display->getStringWidth(weatherIcon); display->drawString(32 + x - weatherIconWidth / 2, 05 + y, weatherIcon);}\u00a0void drawForecast(OLEDDisplay *display, OLEDDisplayUiState* state, int16_t x, int16_t y) { drawForecastDetails(display, x, y, 0); drawForecastDetails(display, x + 44, y, 2); drawForecastDetails(display, x + 88, y, 4);}void drawThingspeak(OLEDDisplay *display, OLEDDisplayUiState* state, int16_t x, int16_t y) { display->setTextAlignment(TEXT_ALIGN_CENTER); display->setFont(ArialMT_Plain_10); display->drawString(64 + x, 0 + y, 'Outdoor'); display->setFont(ArialMT_Plain_16); display->drawString(64 + x, 10 + y, thingspeak.getFieldValue(0) + '\u00b0C'); display->drawString(64 + x, 30 + y, thingspeak.getFieldValue(1) + '%');}void drawForecastDetails(OLEDDisplay *display, int x, int y, int dayIndex) { display->setTextAlignment(TEXT_ALIGN_CENTER); display->setFont(ArialMT_Plain_10); String day = wunderground.getForecastTitle(dayIndex).substring(0, 3); day.toUpperCase(); display->drawString(x + 20, y, day);display->setFont(Meteocons_Plain_21); display->drawString(x + 20, y + 12, wunderground.getForecastIcon(dayIndex));display->setFont(ArialMT_Plain_10); display->drawString(x + 20, y + 34, wunderground.getForecastLowTemp(dayIndex) + '|' + wunderground.getForecastHighTemp(dayIndex)); display->setTextAlignment(TEXT_ALIGN_LEFT);}void drawHeaderOverlay(OLEDDisplay *display, OLEDDisplayUiState* state) { display->setColor(WHITE); display->setFont(ArialMT_Plain_10); String time = timeClient.getFormattedTime().substring(0, 5); display->setTextAlignment(TEXT_ALIGN_LEFT); display->drawString(0, 54, time); display->setTextAlignment(TEXT_ALIGN_RIGHT); String temp = wunderground.getCurrentTemp() + '\u00b0C'; display->drawString(128, 54, temp); display->drawHorizontalLine(0, 52, 128);}void setReadyForWeatherUpdate() { Serial.println('Setting readyForUpdate to true'); readyForWeatherUpdate = true;}", "num_user_post": " 8", "author": "ashebray"}, {"date": "December 28, 2017 - 9:25 pm", "content": "Perhaps you can start with one of the instructables? See here:http://www.instructables.com/id/Send-sensor-data-DHT11-BMP180-to-ThingSpeak-with-a/", "num_user_post": " 225", "author": "Vinod"}, {"date": "December 28, 2017 - 11:22 pm", "content": "It is able to read data but it is no longer recording it on to thing speak. I even tried this http://community.thingspeak.com/forum/thingspeak-api/my-channel-stopped-updating-the-data-but-shows-entries/ but still not luck. Do I need to put a JSON streamer on?\u00a0", "num_user_post": " 8", "author": "ashebray"}, {"date": "December 29, 2017 - 1:50 pm", "content": "Are you still using the code above?\u00a0 Can you share what you see on the serial monitor?\u00a0 You should not need a special JSON library.The link you shared shows hot to updata a channel with an HTTP GET.\u00a0 Were you able to update your channel that way?If the numbers for the sensor\u00a0 are wrong, I would suspect you have a connection error.\u00a0 Double check your schematic.", "num_user_post": " 401", "author": "cstapels"}, {"date": "December 29, 2017 - 2:00 pm", "content": "You're probably better off saving a 'copy' of your code, and remove all the unnecessary stuff like Oled, displays......ie. get rid of anything that could possibly cause issues or memory problems or writing errors etc. And then just test basic data upload to thingspeak --- without those extra possible distractions. Eventually you may find the issue --- such as memory over-written due to pointers over-running etc. This is just a maybe. The idea is ....to just start small again - to get data sending working properly again.", "num_user_post": " 4", "author": "SouthPark"}, {"date": "December 29, 2017 - 9:38 pm", "content": "cstapels said  Are you still using the code above?\u00a0 Can you share what you see on the serial monitor?\u00a0 You should not need a special JSON library. The link you shared shows hot to updata a channel with an HTTP GET.\u00a0 Were you able to update your channel that way? If the numbers for the sensor\u00a0 are wrong, I would suspect you have a connection error.\u00a0 Double check your schematic.\u00a0\u00a0I am using the codes above. I have tried a few DHT codes and still only get 2 or three readings then nothing. I'm new to this so I'm not sure how to fix this.\u00a0For my serial monitor, nothing loads at all. Just a white screen.", "num_user_post": " 8", "author": "ashebray"}, {"date": "December 29, 2017 - 9:49 pm", "content": "cstapels said  Are you still using the code above?\u00a0 Can you share what you see on the serial monitor?\u00a0 You should not need a special JSON library. The link you shared shows hot to updata a channel with an HTTP GET.\u00a0 Were you able to update your channel that way? If the numbers for the sensor\u00a0 are wrong, I would suspect you have a connection error.\u00a0 Double check your schematic.\u00a0\u00a0Never mind, here is my SMSetting readyForUpdate to true.02:42:412:42:419761Requesting URL: /api/c7fdd773c27f8a63/conditions/lang:EN/q/WV/Morgantown.jsonstart documentRequesting URL: /api/c7fdd773c27f8a63/forecast10day/lang:EN/q/WV/Morgantown.jsonstart document0: snow:forecastday0: Friday1: nt_snow:pop1: Friday Night2: snow:pop2: Saturday3: nt_partlycloudy:pop3: Saturday Night4: cloudy:pop4: Sunday5: nt_partlycloudy:pop5: Sunday Night6: mostlycloudy:pop6: Monday7: nt_partlycloudy:pop7: Monday Night8: partlycloudy:pop8: Tuesday9: nt_clear:pop9: Tuesday Night10: partlycloudy:pop10: Wednesday11: nt_cloudy:pop11: Wednesday Night12: partlycloudy:pop12: Thursday13: nt_partlycloudy:pop13: Thursday Night14: cloudy:pop14: Friday15: nt_partlycloudy:pop15: Friday Night16: clear:pop16: Saturday17: nt_partlycloudy:pop17: Saturday Night18: cloudy:pop18: Sunday19: nt_mostlycloudy:pop19: Sunday Night1: -42: -43: -84: -85: -86: -27: -98: -79: -610: 0Requesting URL: /channels/386894/feeds.json?results=1&api_key=BZF0D1CS8DBQC6AQ.field1: 512.00field2: 460.80 ", "num_user_post": " 8", "author": "ashebray"}, {"date": "December 29, 2017 - 11:10 pm", "content": "Tried a new code, now I'm getting NaN readings for my humidity\u00a0#include <ESP8266WiFi.h>#include <Ticker.h>#include <JsonListener.h>#include 'SSD1306Wire.h'#include 'OLEDDisplayUi.h'#include 'Wire.h'#include 'WundergroundClient.h'#include 'WeatherStationFonts.h'#include 'WeatherStationImages.h'#include 'TimeClient.h'#include 'ThingspeakClient.h'/*************************** * Begin Settings **************************/// Please read http://blog.squix.org/weatherstation-getting-code-adapting-it// for setup instructions// WIFIconst char* WIFI_SSID = 'WuTangLAN';const char* WIFI_PWD = 'spranktank7664A';\u00a0// Setupconst int UPDATE_INTERVAL_SECS = 10 * 60; // Update every 10 minutes// Display Settingsconst int I2C_DISPLAY_ADDRESS = 0x3c;const int SDA_PIN = D3;const int SDC_PIN = D4;// TimeClient settingsconst float UTC_OFFSET = -5;// Wunderground Settingsconst boolean IS_METRIC = true;const String WUNDERGRROUND_API_KEY = 'c7fdd773c27f8a63';const String WUNDERGRROUND_LANGUAGE = 'EN';const String WUNDERGROUND_COUNTRY = 'WV';const String WUNDERGROUND_CITY = 'Morgantown';//Thingspeak Settingsconst String THINGSPEAK_CHANNEL_ID = '386894';const String THINGSPEAK_API_READ_KEY = 'BZF0D1CS8DBQC6AQ';// Initialize the oled display for address 0x3c// sda-pin=14 and sdc-pin=12SSD1306Wire display(I2C_DISPLAY_ADDRESS, SDA_PIN, SDC_PIN);OLEDDisplayUi ui( &display );/*************************** * End Settings **************************/TimeClient timeClient(UTC_OFFSET);// Set to false, if you prefere imperial/inches, FahrenheitWundergroundClient wunderground(IS_METRIC);ThingspeakClient thingspeak;// flag changed in the ticker function every 10 minutesbool readyForWeatherUpdate = false;String lastUpdate = '--';Ticker ticker;//declaring prototypesvoid drawProgress(OLEDDisplay *display, int percentage, String label);void updateData(OLEDDisplay *display);void drawDateTime(OLEDDisplay *display, OLEDDisplayUiState* state, int16_t x, int16_t y);void drawCurrentWeather(OLEDDisplay *display, OLEDDisplayUiState* state, int16_t x, int16_t y);void drawForecast(OLEDDisplay *display, OLEDDisplayUiState* state, int16_t x, int16_t y);void drawThingspeak(OLEDDisplay *display, OLEDDisplayUiState* state, int16_t x, int16_t y);void drawForecastDetails(OLEDDisplay *display, int x, int y, int dayIndex);void drawHeaderOverlay(OLEDDisplay *display, OLEDDisplayUiState* state);void setReadyForWeatherUpdate();\u00a0// Add frames// this array keeps function pointers to all frames// frames are the single views that slide from right to leftFrameCallback frames[] = { drawDateTime, drawCurrentWeather, drawForecast, drawThingspeak };int numberOfFrames = 4;OverlayCallback overlays[] = { drawHeaderOverlay };int numberOfOverlays = 1;void setup() { Serial.begin(115200); Serial.println(); Serial.println();// initialize dispaly display.init(); display.clear(); display.display();//display.flipScreenVertically(); display.setFont(ArialMT_Plain_10); display.setTextAlignment(TEXT_ALIGN_CENTER); display.setContrast(255);WiFi.begin(WIFI_SSID, WIFI_PWD);int counter = 0; while (WiFi.status() != WL_CONNECTED) { delay(500); Serial.print('.'); display.clear(); display.drawString(64, 10, 'Connecting to WiFi'); display.drawXbm(46, 30, 8, 8, counter % 3 == 0 ? activeSymbole : inactiveSymbole); display.drawXbm(60, 30, 8, 8, counter % 3 == 1 ? activeSymbole : inactiveSymbole); display.drawXbm(74, 30, 8, 8, counter % 3 == 2 ? activeSymbole : inactiveSymbole); display.display();counter++; }ui.setTargetFPS(30);ui.setActiveSymbol(activeSymbole); ui.setInactiveSymbol(inactiveSymbole);// You can change this to // TOP, LEFT, BOTTOM, RIGHT ui.setIndicatorPosition(BOTTOM);// Defines where the first frame is located in the bar. ui.setIndicatorDirection(LEFT_RIGHT);// You can change the transition that is used // SLIDE_LEFT, SLIDE_RIGHT, SLIDE_TOP, SLIDE_DOWN ui.setFrameAnimation(SLIDE_LEFT);ui.setFrames(frames, numberOfFrames);ui.setOverlays(overlays, numberOfOverlays);// Inital UI takes care of initalising the display too. ui.init();Serial.println('');updateData(&display);ticker.attach(UPDATE_INTERVAL_SECS, setReadyForWeatherUpdate);}void loop() {if (readyForWeatherUpdate && ui.getUiState()->frameState == FIXED) { updateData(&display); }int remainingTimeBudget = ui.update();if (remainingTimeBudget > 0) { // You can do some work here // Don't do stuff if you are below your // time budget. delay(remainingTimeBudget); }\u00a0}void drawProgress(OLEDDisplay *display, int percentage, String label) { display->clear(); display->setTextAlignment(TEXT_ALIGN_CENTER); display->setFont(ArialMT_Plain_10); display->drawString(64, 10, label); display->drawProgressBar(2, 28, 124, 10, percentage); display->display();}void updateData(OLEDDisplay *display) { drawProgress(display, 10, 'Updating time...'); timeClient.updateTime(); drawProgress(display, 30, 'Updating conditions...'); wunderground.updateConditions(WUNDERGRROUND_API_KEY, WUNDERGRROUND_LANGUAGE, WUNDERGROUND_COUNTRY, WUNDERGROUND_CITY); drawProgress(display, 50, 'Updating forecasts...'); wunderground.updateForecast(WUNDERGRROUND_API_KEY, WUNDERGRROUND_LANGUAGE, WUNDERGROUND_COUNTRY, WUNDERGROUND_CITY); drawProgress(display, 80, 'Updating thingspeak...'); thingspeak.getLastChannelItem(THINGSPEAK_CHANNEL_ID, THINGSPEAK_API_READ_KEY); lastUpdate = timeClient.getFormattedTime(); readyForWeatherUpdate = false; drawProgress(display, 100, 'Done...'); delay(1000);}\u00a0void drawDateTime(OLEDDisplay *display, OLEDDisplayUiState* state, int16_t x, int16_t y) { display->setTextAlignment(TEXT_ALIGN_CENTER); display->setFont(ArialMT_Plain_10); String date = wunderground.getDate(); int textWidth = display->getStringWidth(date); display->drawString(64 + x, 5 + y, date); display->setFont(ArialMT_Plain_24); String time = timeClient.getFormattedTime(); textWidth = display->getStringWidth(time); display->drawString(64 + x, 15 + y, time); display->setTextAlignment(TEXT_ALIGN_LEFT);}void drawCurrentWeather(OLEDDisplay *display, OLEDDisplayUiState* state, int16_t x, int16_t y) { display->setFont(ArialMT_Plain_10); display->setTextAlignment(TEXT_ALIGN_LEFT); display->drawString(60 + x, 5 + y, wunderground.getWeatherText());display->setFont(ArialMT_Plain_24); String temp = wunderground.getCurrentTemp() + '\u00b0C'; display->drawString(60 + x, 15 + y, temp); int tempWidth = display->getStringWidth(temp);display->setFont(Meteocons_Plain_42); String weatherIcon = wunderground.getTodayIcon(); int weatherIconWidth = display->getStringWidth(weatherIcon); display->drawString(32 + x - weatherIconWidth / 2, 05 + y, weatherIcon);}\u00a0void drawForecast(OLEDDisplay *display, OLEDDisplayUiState* state, int16_t x, int16_t y) { drawForecastDetails(display, x, y, 0); drawForecastDetails(display, x + 44, y, 2); drawForecastDetails(display, x + 88, y, 4);}void drawThingspeak(OLEDDisplay *display, OLEDDisplayUiState* state, int16_t x, int16_t y) { display->setTextAlignment(TEXT_ALIGN_CENTER); display->setFont(ArialMT_Plain_10); display->drawString(64 + x, 0 + y, 'Outdoor'); display->setFont(ArialMT_Plain_16); display->drawString(64 + x, 10 + y, thingspeak.getFieldValue(0) + '\u00b0C'); display->drawString(64 + x, 30 + y, thingspeak.getFieldValue(1) + '%');}void drawForecastDetails(OLEDDisplay *display, int x, int y, int dayIndex) { display->setTextAlignment(TEXT_ALIGN_CENTER); display->setFont(ArialMT_Plain_10); String day = wunderground.getForecastTitle(dayIndex).substring(0, 3); day.toUpperCase(); display->drawString(x + 20, y, day);display->setFont(Meteocons_Plain_21); display->drawString(x + 20, y + 12, wunderground.getForecastIcon(dayIndex));display->setFont(ArialMT_Plain_10); display->drawString(x + 20, y + 34, wunderground.getForecastLowTemp(dayIndex) + '|' + wunderground.getForecastHighTemp(dayIndex)); display->setTextAlignment(TEXT_ALIGN_LEFT);}void drawHeaderOverlay(OLEDDisplay *display, OLEDDisplayUiState* state) { display->setColor(WHITE); display->setFont(ArialMT_Plain_10); String time = timeClient.getFormattedTime().substring(0, 5); display->setTextAlignment(TEXT_ALIGN_LEFT); display->drawString(0, 54, time); display->setTextAlignment(TEXT_ALIGN_RIGHT); String temp = wunderground.getCurrentTemp() + '\u00b0C'; display->drawString(128, 54, temp); display->drawHorizontalLine(0, 52, 128);}void setReadyForWeatherUpdate() { Serial.println('Setting readyForUpdate to true'); readyForWeatherUpdate = true;}\u00a0DHT CODING#include <DHT.h> // DHT.h library#include <ESP8266WiFi.h> // ESP8266WiFi.h library#define DHTPIN 2#define DHTTYPE DHT11const char* ssid = 'WuTangLAN';const char* password = 'spranktank7664A';const char* host = 'api.thingspeak.com';const char* writeAPIKey = '9DAGDL2109WC8DIJ';DHT dht(DHTPIN, DHTTYPE, 15);void setup() { // Initialize sensorSerial.begin(115200); dht.begin(); delay(1000);// Connect to WiFi network WiFi.begin(ssid, password); while (WiFi.status() != WL_CONNECTED) { delay(500); Serial.println('.'); }}void loop() { float humidity = dht.readHumidity(); float temperature = dht.readTemperature();if (isnan(humidity) || isnan(temperature)) { return; }// make TCP connections WiFiClient client; const int httpPort = 80; if (!client.connect(host, httpPort)) { return; }String url = '/update?key='; url+=writeAPIKey; url+='&field1='; url+=String(temperature); url+='&field2='; url+=String(humidity); url+='';", "num_user_post": " 8", "author": "ashebray"}, {"date": "December 31, 2017 - 9:58 pm", "content": "I'm desperate at this point. The sensor is now reading properly but it is NOT updating in the time frame it should be at all. Here is the code:\u00a0\u00a0#include <ESP8266WiFi.h>#include 'DHT.h'\u00a0/*************************** * Begin Settings **************************/\u00a0const char* ssid = 'WuTangLAN';const char* password = 'spranktank7664A';const char* host = 'api.thingspeak.com';const char* THINGSPEAK_API_KEY = '9DAGDL2109WC8DIJ';// DHT Settings#define DHTPIN D6 // what digital pin we're connected to. If you are not using NodeMCU change D6 to real pin\u00a0// Uncomment whatever type you're using!#define DHTTYPE DHT11 // DHT 11//#define DHTTYPE DHT22 // DHT 22 (AM2302), AM2321//#define DHTTYPE DHT21 // DHT 21 (AM2301)const boolean IS_METRIC = true;// Update every 600 seconds = 10 minutes. Min with Thingspeak is ~20 secondsconst int UPDATE_INTERVAL_SECONDS = 600;/*************************** * End Settings **************************/// Initialize the temperature/ humidity sensorDHT dht(DHTPIN, DHTTYPE);void setup() { Serial.begin(115200); delay(10);// We start by connecting to a WiFi networkSerial.println(); Serial.println(); Serial.print('Connecting to '); Serial.println(ssid); WiFi.begin(ssid, password); while (WiFi.status() != WL_CONNECTED) { delay(500); Serial.print('.'); }Serial.println(''); Serial.println('WiFi connected'); Serial.println('IP address: '); Serial.println(WiFi.localIP());}void loop() { Serial.print('connecting to '); Serial.println(host); // Use WiFiClient class to create TCP connections WiFiClient client; const int httpPort = 80; if (!client.connect(host, httpPort)) { Serial.println('connection failed'); return; }// read values from the sensor float humidity = dht.readHumidity(); float temperature = dht.readTemperature(!IS_METRIC); // We now create a URI for the request String url = '/update?api_key=';", "num_user_post": " 8", "author": "ashebray"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/time-zone/", "posts": [{"date": "November 22, 2017 - 3:21 pm", "content": "Hello everybody. When I got data export, I realized my time's message was not matched with my time zone. For instance, if my time is 15:00 PM, I only recieved a message from 7:50 AM. Do you have any ideas? Have a nice day.", "num_user_post": " 2", "author": "peter9x"}, {"date": "November 27, 2017 - 8:39 pm", "content": "The data exported from ThingSpeak using the 'Data Import/Export' tab is in UTC. When analyzing this data offline, you will need to add the timezone offset from your timezone to UTC to the data.", "num_user_post": " 225", "author": "Vinod"}, {"date": "December 18, 2017 - 4:11 am", "content": "Oh yes. This kind of thing can be massively confusing, and also largely inconvenient for the new user.It would be nice for ThingSpeak to have a data DOWNLOAD option that has a time-zone drop-down menu that allows users to download the data file matched to the user's local time-zone.But there appear to be no such feature at the moment.So, at the moment, the date-time column will be in some kind of standard time form---- ie. 'UTC' time, and the downloaded time values will be referenced to '0'. Yes.... 'zero'.So what you need to do is to use Google. And if you happen to live in say Tokyo, then google 'Tokyo UTC'. The google result will say something like 'GMT+9' for Tokyo. Note the 'plus 9'. This means you need to add 9 hours to the time values that you see in your downloaded ThingSpeak file.ThingSpeak typically gives you a 'CSV' file. So what you need to do is to open this CSV file using microsoft EXCEL. And then you need to SAVE that excel file to some other format, such as .xlsx format. This let's you take advantage of being able to use excel formulas to convert ThingSpeak date-time information to something that Excel can really use.Eg. you might see this in cell A2:\u00a0\u00a0\u00a0 2017-12-17 13:30:01 UTCIf you have a blank column, such as column M, then in cell M2, you enter a formula (into cell M2), such as: \u00a0 = LEFT(A2, LEN(A2) - 4)Cell M2 will then contain: 2017-12-17 13:30:01Then, in cell N2, type this formula:\u00a0\u00a0 =M2 + 9/24The important value is the '9' in the above line. The '9' makes excel add the 9 hours to get a time code linked to Tokyo's local time.Then, in cell O2, type the same formula manually into cell O2:\u00a0\u00a0 =M2 + 9/24Also, do the same for cell P2. Type the same formula manually into cell P2:\u00a0\u00a0 =M2 + 9/24Here, the values in column M, N, and O will all be the same. This is where you can play around with the column formatting.For example, if you highlight column N, and then choose to format the cells in column N to a 'Time' format. And if you also choose the 'Type' of time to be twelve-hour format (ie. AM/PM), then column N will be converted by excel time-formatting to 12 hour AM/PM format.And, for column O, you could format the column to be 'Time', and choose the 'Type' to be 13:22:00 format, which is 24-hour format.Both columns N and column O will be in Tokyo local time, which is 9 hours ahead of the ZERO UMT (or GMT) reference time.", "num_user_post": " 4", "author": "SouthPark"}, {"date": "December 29, 2017 - 2:40 pm", "content": "There is an API you can use to retrieve all the data in a channel:https://api.thingspeak.com/stream/channels/CHANNEL_ID/feeds?api_key=READ_API_KEY&timezone=TIMEZONEList of valid timezone entries is here. For example, to get the data in New York timezone, set TIMEZONE to America%2FNew_York, or to get the same in Mumbai set TIMEZONE to Asia%2FMumbai\u00a0", "num_user_post": " 225", "author": "Vinod"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/data-export-oddity/", "posts": [{"date": "December 18, 2017 - 3:46 am", "content": "Hi all!I notice that the ThingSpeak menu options has the following buttons:Private View, Public View, Channel Settings, Sharing, API Keys, Data Import / ExportThe very last button 'Data Import/Export' leads us to options for downloading the channel feed data in CSV format. The file downloaded from this area is noticed to contain the *full* set of recorded data values.But, I also notice that the Private View and the Public View areas also have 'Data Export' options. Here - the CSV data file obtained from the Private View and/or Public View downloads do *not* contain the full data set. That is, the downloaded file is usually just a sub-set of the full (actual) data set.Is it possible for ThingSpeak admins to fix this, so that all buttons for 'Data Export' will allow download of the full data set?Thanks all!", "num_user_post": " 4", "author": "SouthPark"}, {"date": "December 18, 2017 - 4:43 am", "content": "The Data Export button on the channel views are designed for programmatic access to your data from the API. You will notice that json, xml and CSV are supported. The default data set through the API is 1 day or up to 8000 data points without supplying more API parameters.\u00a0", "num_user_post": " 402", "author": "Hans"}, {"date": "December 18, 2017 - 7:35 am", "content": "Thanks Hans. Through the web-browser, I used the 'pencil' icon to change the default value to '8000'. But the downloaded (exported) data via Private View and Public View is still a subset of the full data set. I was only able to obtain the full data set by going the other route......which is 'Data Import / Export' (followed by choosing DOWNLOAD).I understand and know which area of ThingSpeak I need to access in order to download the full data set.But, for the new users ----- they will likely see a 'EXPORT DATA' button in the Private View or Public View, and they will intuitively assume that is the one to use for downloading data, and then they will certainly be scratching their heads and wondering why ThingSpeak is only giving them a snap-shot (subset) of the full data set. It will certainly confuse them.I'm thinking that the ThingSpeak admin should fix up the system, or at least put some kind of pop-up note to just let users know where to download the 'full data set', rather than make new users wonder why they just receive a small portion of the full data set.Or at least have a sticky or notification in the Private View and Public View pages that says something like 'For web-browsers, don't use this area to download data sets.......instead, use the Data Import / Export option (next to the 'API Keys' button) for downloading full data set'. This will prevent new users from getting confused and waste their time trying to figure what is going on.", "num_user_post": " 4", "author": "SouthPark"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/cannot-add-a-talkback-command-via-http-post/", "posts": [{"date": "January 19, 2015 - 2:31 am", "content": "need help with the add talkback command via http post feature.... im new but i was able to execute the next command via HTTP POST by typing'https://api.thingspeak.com/talkbacks/1203/commands/execute?api_key=0OT6Y43XC6Y5YVJ9' in my web browser...similarly when i tried to add a command by typing'https://api.thingspeak.com/talkbacks/1203/commands?api_key=0OT6Y43XC6Y5YVJ9&command_string=ON&position=1'the command was just not getting added.... can any 1 please help....n sorry if this post is in the wrong part of the forum.... its my first post in a forum.... will appreciate all the help.....ps. i went through the talk back examples and was able to get the execute next command to work in a few mins.... but the add command part has been haunting me for hours..... i need to use HTTP POSTs in text only as the part of the project... not json and xml", "num_user_post": " 6", "author": "waynebraganza"}, {"date": "January 19, 2015 - 10:03 am", "content": "Hi,Executing a TalkBack command is done via HTTP GET or POST, and by typing it into your web browser you are doing an HTTP GET.  Adding a command is only allowed via POST though, so typing it into your web browser won't work.  To execute a POST you can use an HTML form submit, JavaScript, a browser extension, etc.lee", "num_user_post": " 457", "author": "lee"}, {"date": "January 20, 2015 - 1:26 am", "content": "oh... .thanks alot man....... that helped... i found an extension for chrome n am able to add commands   now all i got to do is implement this into an arduino with the esp8566 wifi module.... anyways thanks for d reply... im new to this stuff n ur reply fixed my problems.... ", "num_user_post": " 6", "author": "waynebraganza"}, {"date": "March 3, 2016 - 8:58 am", "content": "Hello, what is your google chrome extension for my project ?Or, do you know any good extension for add command from thingspeak please ? Thanks in advance everyone !", "num_user_post": " 1", "author": "Midoji"}, {"date": "December 12, 2017 - 3:36 pm", "content": "Midoji said Hello, what is your google chrome extension for my project ? Or, do you know any good extension for add command from thingspeak please ? Thanks in advance everyone !\u00a0\u00a0hi,sorry for the really late reply, the extension that i used in chrome is 'Chrome Poster'best of luck with whatever you're doin", "num_user_post": " 6", "author": "waynebraganza"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/value-not-accepted/", "posts": [{"date": "December 7, 2017 - 4:44 am", "content": "I have 3 fields in a channel. Since yesterday, when I try to update\u00a0 the fields with a value using the write key in the browser, the value is not updated in the field.I have to refresh the screen for sometime so that the value can be updated. Sometimes it takes really long time for the value to be uploaded. What to do?", "num_user_post": " 2", "author": "Anand"}, {"date": "December 7, 2017 - 4:52 am", "content": "Hi,I am also having the same problem since today morning(I didn't check yesterday). I have built an app to update the value in one of my field, but it doesn't seems working. I also tried to update the values using the API command(URL), and still it is showing zero(0) entries and the value didn't change.", "num_user_post": " 1", "author": "Anu Sankar"}, {"date": "December 7, 2017 - 9:43 am", "content": "I just tested a few of my channels this morning, and things seem to be updating within a few seconds, occasionally a little longer. If the post is successful, the browser will return the value of the entry ID. Does the browser return a zero or a larger number?\u00a0 Is it also possible you are sending a value that is interpreted as a string, and thus does not show up in your plot.\u00a0 What values are you sending?", "num_user_post": " 401", "author": "cstapels"}, {"date": "December 11, 2017 - 12:08 am", "content": "The browser keeps returning zero and only after refreshing multiple times does the browser returns a large value. I am trying to send only two values, 5 and 1.", "num_user_post": " 2", "author": "Anand"}, {"date": "December 11, 2017 - 5:35 am", "content": "The API has a rate limit of one update per 15 seconds (for free accounts).\u00a0", "num_user_post": " 402", "author": "Hans"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/how-i-get-the-json-channel-content-from-arduino-esp8266/", "posts": [{"date": "December 7, 2017 - 7:35 pm", "content": "Hi everyone!!I am very new working with ESP8266 and ThingSpeak Platform. Actually i am trying to make my prototipe Plug and play, that why i need to understand how works to create a new channel from arduino(no manually).First, I created one channel from arduino using AT Cmd but i dont receive the Json response through ESP8266 serial line just 'response 200'. The mail goal of this, is receive the Channel JSON content then parse and decode to getting two things : Id and Channel Api_Key.Someone of you can help me with this issue? I will appreciate forever.\u00a0Here my code:\u00a0#include <SoftwareSerial.h>#include <EEPROM.h>/*********************************************************************/SoftwareSerial esp8266Serial(2, 4); // RX | TX Para Arduino Pro Mini/***********************Variables Globales*********************************************/String esp8266Response;String ssid ='xxxxxxxxxx';String password ='xxxxxxxxxx';\u00a0String host ='api.thingspeak.com';const int httpPort =80;String userChannelJson ='/channels.json';\u00a0 \u00a0 \u00a0 \u00a0// variables que se necesitan para Crear el Channel en ThingspeakString userApikey ='xxxxxxxxxxxx';\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 // variable que contiene el User Api key de ThingspeakString channelUpdate ='/update';\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0// variable que tiene el path para actualizar los datos en ThingspeakString channelApiKey;\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0// ApiKey del Channel en ThingSpeak/************************Estructuras****************************/struct ThingData{ String Id;\u00a0 String thingName; String companyName;\u00a0 String swVersion;\u00a0};struct StoredData{ ThingData thingData;};StoredData storedData;\u00a0/*///////////////////////////////Funciones///////////////////////////////////////*//*******************Inicializando los Puertos Serie*******************************/void initSerialPorts(void){ // Comunicacion Serie UART\u00a0 \u00a0esp8266Serial.flush();\u00a0 Serial.begin(115200);\u00a0 esp8266Serial.begin(115200);}/************************************************************************************ * Funcion que almacena en la EEPROM los datos de informacion*/void ARDUINO_storeThingData(void){\u00a0 EEPROM.put(0, storedData.thingData);}/************************************************************************************ * Funcion que obtiene de la EEPROM los datos de informacion*/void ARDUINO_restoreThingData(void){\u00a0 EEPROM.get(0, storedData.thingData);}/*******************************************************************//* * Funcion que asigna los datos de informacion en la EEPROM*/String ARDUINO_setThingData(void){\u00a0 \u00a0storedData.thingData.thingName = 'FP01';\u00a0 storedData.thingData.Id = ' ';\u00a0 storedData.thingData.companyName = ' ';\u00a0 storedData.thingData.swVersion = 'V1.0';\u00a0ARDUINO_storeThingData();}/*******************************************************************//*/ Funcion que realiza la conexion del ESP8266 con WIFI*/boolean ESP8266_connectWifi(void){\u00a0 \u00a0esp8266Serial.print('AT+CWMODE=3');delay(100);\u00a0 esp8266Serial.print('AT+RST');delay(100);\u00a0String cmd='AT+CWJAP='';\u00a0cmd+=ssid;\u00a0cmd+='','';\u00a0cmd+=password;\u00a0cmd+=''';\u00a0esp8266Serial.println(cmd);\u00a0delay(10000); if(esp8266Serial.find('OK')) {\u00a0 \u00a0return true;}else{\u00a0 return false; }}/*******************************************************************//* * Funcion que realiza la conexion TCP del ESP8266 con ThingSpeak*/boolean ESP8266_connectTCP(void){ // Al pasar 1 minuto automaticamente se cierra\u00a0 \u00a0 String cmd='AT+CIPSTART='TCP','';\u00a0 \u00a0 cmd+=host;\u00a0 \u00a0 cmd+='',80';\u00a0 \u00a0 esp8266Serial.println(cmd);\u00a0 \u00a0delay(1000); \u00a0 if(esp8266Serial.find('OK'))\u00a0{\u00a0 \u00a0 return true;\u00a0}else{\u00a0 \u00a0return false;\u00a0}}/*******************************************************************//* * Funcion que realiza la configuracion del ESP8266*/void ESP8266_setConfiguration(void){ esp8266Serial.print('AT');delay(100); //Nos conectamos con Wifi if(!ESP8266_connectWifi()) { Serial.println('No hay conexion Wifi'); }else{ Serial.println('Conexion Wifi establecida'); } esp8266Serial.print('AT+CIPMUX=0');delay(100);}/*******************************************************************//* * Funcion que crea el channel en Thingspeak*/void THINGSPEAK_newChannel(void){ //Nos conectamos con el servidor if(!ESP8266_connectTCP()) { Serial.println('No hay conexion TCP'); }else{ Serial.println('Conexion TCP establecida'); } //Se arma el encabezado de la peticion http para enviar los datos por field String cmd ='POST '; cmd+=userChannelJson; cmd+='?api_key='; cmd+=userApikey; cmd+='&name='; cmd+=storedData.thingData.thingName; cmd+=' HTTP/1.1Host: '; cmd+=host; cmd+=''; int len=cmd.length(); delay(1000);//enviamos el tama\u00f1o en caracteres de la peticion http: esp8266Serial.print('AT+CIPSEND='); esp8266Serial.println(len); //esperamos a '>' para enviar la peticion http: if(esp8266Serial.find('>')){ esp8266Serial.print(cmd);//Recibimos un Send Ok que confirma que la peticion if(esp8266Serial.find('SEND OK')) { boolean fin_respuesta; char chr=' '; String cadena=' '; while(fin_respuesta==false) { //Esperamos respuesta del api.thingspeak.com while(esp8266Serial.available()>0) { chr=(char) esp8266Serial.read(); Serial.write(chr); cadena.concat(chr); } if(cadena.length()>500) { esp8266Serial.println('AT+CIPCLOSE'); if(esp8266Serial.find('OK')){Serial.println('Conexion Finalizada');} fin_respuesta=true; } } // while }else{ Serial.println('No se creo el Channel'); } }else{ Serial.println('No se envio la peticion'); }}/*******************************************************************//* * Funcion que realiza las configuraciones de todo el Sistema*/void ARDUINO_systemConfiguration(void){ ARDUINO_restoreThingData(); Serial.println('/*************************************/'); Serial.println('Hola Mundo '); Serial.print('Mi nombre es: '); Serial.println(storedData.thingData.thingName); Serial.println('Configurando el Sistema...'); ESP8266_setConfiguration(); Serial.println('/*************************************/');}/******************************************************************/void setup(){ initSerialPorts();delay(100); ARDUINO_setThingData(); delay(100); ARDUINO_systemConfiguration(); delay(100);}\u00a0/***************************************************************/void loop(){ THINGSPEAK_newChannel(); delay(10000);}", "num_user_post": " 1", "author": "dher"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/video-url/", "posts": [{"date": "December 4, 2017 - 11:23 am", "content": "HelloHow i should enter Video URL to channel feed-How to configure it to Youtube or Wimeo ?I did not find any instruction\u00a0Br. Esko P", "num_user_post": " 3", "author": "OH6MQM"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/averaging-problem/", "posts": [{"date": "November 26, 2017 - 6:45 am", "content": "Hello,I stumbled upon a problem.Every time I average data on my channel it is usually about 2 times smallerand have a great tendency to have peaks. My raw data has no spikes, or wrong samples.Field 2, with no averageField 2, with 60 averageMy channel linkIt happens on almost all of my fields. If you average on field 1 it looks similar, but is actually 2x smaller than original :/Can I fix it, or do I need to make a new channel?", "num_user_post": " 3", "author": "lolkusus"}, {"date": "November 27, 2017 - 10:35 am", "content": "Some of the fields in your channel\u00a0 are updated more frequently than others.\u00a0 When this happens, an empty value is written to the fields that aren't updated, and the average includes the zero values.\u00a0 The spikes are due to periods when there are relativity fewer nulls than there were recently, and the average jumps.\u00a0 I would suggest using a MATLAB analysis to filter your data. The MATLAB analysis will read a value (possibly with thingSpeakRead ) and write it to a new channel (with thingSpeakWrite)if it is not a NULL or zero value.\u00a0 Then the new channel averaging will work appropriately.\u00a0\u00a0You can use the REACT App to trigger a MATLAB analysis that filters every time new data is entered.\u00a0\u00a0Alternatively, you could consider writing each measurement that updates at a different frequency to different channels.\u00a0 You can use another MATLAB analysis to loop through all the values in your old channel and write them to the new channel without the NULL values.", "num_user_post": " 401", "author": "cstapels"}, {"date": "November 27, 2017 - 1:50 pm", "content": "\u00a0I recently added one field updated by MATLAB analysis which updates at different frequency. I think it might have been a mistake.Will the problem disappear (in new samples) if I remove this field and let it collect more samples?All my others fields are updated at once, there were no problems before my messing with MATLAB.Thank you.", "num_user_post": " 3", "author": "lolkusus"}, {"date": "November 27, 2017 - 3:55 pm", "content": "Not a mistake, but an opportunity to improve your chops as a ThingSpeak guru. \ud83d\ude42\u00a0 I suggest that you make the output of the MATLAB analysis write to a different channel instead of field 7, then you will still have the analytics you wanted along with the behavior of the averaged ThingSpeak plots that you want.\u00a0 Once the empty values aren't written to the other fields for as many measurements as you are averaging, the average display will again act as you predicted.\u00a0 You can export your data on the private view (it will only export what you have it set to show) or using the data export tab on the far right.\u00a0 From what I saw in your data, only field 7 seemed out of sync with the others.", "num_user_post": " 401", "author": "cstapels"}, {"date": "November 28, 2017 - 2:04 pm", "content": "After removing field 7 and waiting for more samples, the problem stopped.Thank you =D", "num_user_post": " 3", "author": "lolkusus"}]}]}
{"url": "https://community.thingspeak.com/forum/thingspeak-api/page-1/", "threads": [{"url": "https://community.thingspeak.com/forum/thingspeak-api/update-multiple-fields-with-one-write/", "posts": [{"date": "June 21, 2017 - 3:01 pm", "content": "Hello Everyone,\u00a0I am pretty new in arduino and thingSpeak. The project that I am currently working on is to collect Temperature and Humidity using Arduino Uno and DH11 and transfer both values into a channel at ThingSpeak using SIM900 (GPRS communication).I was able to transfer one parameter (either Temperature or Humidity) . Could anyone help and show me how is this possible to update multiple fields with one write using the following command:String str2='GET https://api.thingspeak.com/update?api_key=Write API KEY &field2=0' + String(humi);I have search a lot but all examples are either for Ethernet Shield or not working properly.\u00a0Thanks,\u00a0", "num_user_post": " 2", "author": "tina.mir"}, {"date": "June 22, 2017 - 8:34 am", "content": "Never mind, I found the solution:In the function you have to define all parameters you are willing to send:int temperature = dht.readTemperature(); int humidity = dht.readHumidity();And then use the following command:String str='GET https://api.thingspeak.com/update?api_key=writeAPIkey&field1=' + String(temperature)+'&field2=' +String(humidity);(substitute 'writeAPIkey' with your channel's)", "num_user_post": " 2", "author": "tina.mir"}, {"date": "July 4, 2017 - 8:45 am", "content": "Hi!Could you share your code with us? I'm working on the same project and I have some problems with the sketch.Thank you.", "num_user_post": " 2", "author": "Aitorto8"}, {"date": "July 4, 2017 - 4:20 pm", "content": "Aitorto8 said Hi! Could you share your code with us? I'm working on the same project and I have some problems with the sketch. Thank you.\u00a0\u00a0//'Update a Channel Feed'\u00a0https://de.mathworks.com/help/thingspeak/update-channel-feed.html #include <WiFi.h>//WIFI Stuffconst char* ssid = 'XXXXX';const char* pwd = 'XXXXX';WiFiClient Client;//Thingspeak StuffString channelID\u00a0=\u00a0'XXXXX'; String apiKeyChannel =\u00a0'XXXXXXXXXXXXXXXXX'; String apiKeyUser =\u00a0'XXXXXXXXXXXXXXXXX'; const char* server = 'api.thingspeak.com';void setup() {//WIFI ConnectionWiFi.begin(ssid, pwd);while (WiFi.status() != WL_CONNECTED) {Serial.print('.');delay(500);}Serial.println('');Serial.println('WiFi Connected');Serial.println('IP address: ');Serial.println(WiFi.localIP());}void loop() {if (millis() - thingspeakPreviousTime >= 20000 && client.connect(server,80)) { // '184.106.153.149' or api.thingspeak.comthingspeakPreviousTime = millis();String\u00a0str_sensor =\u00a0'12345'; String str_sensor2 = '67890';String\u00a0postStr =\u00a0'api_key='+apiKeyChannel+'&field1='+str_sensor+'&field2='+str_sensor2; client.println('POST /update HTTP/1.1'); client.println('Host: api.thingspeak.com'); client.println('Connection: close'); client.println('Content-Type: application/x-www-form-urlencoded'); client.print('Content-Length: '); client.println(postStr.length()); client.println(); client.print(postStr);}client.stop();}", "num_user_post": " 5", "author": "melanogaster"}, {"date": "July 27, 2017 - 2:11 am", "content": "thingSpeakPlot(timeStamps,dewPointData,'xlabel','TimeStamps',...    'ylabel','Measured Values','title','Dew Point Measurement',...    'Legend',{'Temperature','Humidity','Dew Point'},'grid','on');", "num_user_post": " 1", "author": "assignmenthelpexperts"}, {"date": "September 17, 2018 - 1:21 am", "content": "I am new to this forum, the main reason to join this is to get more and more information regarding different topics, so I can write in details for my clients to help them in Academic writing help USA.", "num_user_post": " 1", "author": "PaulDee094"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/internal-server-error/", "posts": [{"date": "September 14, 2018 - 11:41 am", "content": "Hello I am trying to send some data from matlab to a thing speak server through a channel, using the thingSpeakWrite  command.However I receive the following error:'The server returned the message: 'Internal Server Error' for URL,'https://api.thingspeak.com/channels/575425/upload_json/' (with HTTP response code 500)'.can you help me with that?thanks a lotNikolas", "num_user_post": " 3", "author": "teratoulis"}, {"date": "September 14, 2018 - 3:22 pm", "content": "It is possible for the server to be temporarily overloaded.  Please pause and then try your request again and it should complete.", "num_user_post": " 401", "author": "cstapels"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/upload-to-thingspark-failed/", "posts": [{"date": "September 14, 2018 - 1:23 am", "content": "Hi, I've try to upload weatherdata from a BME280 with the wemosd1mini to my Thingspark channel. But i can get no connection to Thingspark. I've tried the hostname api.Thingspark.com and a lot more, but the Problem is still there. All other things like the wifi connection and to collect the Temperatur etc. works. Thank you very much for your help. Beavis", "num_user_post": " 1", "author": "Beavis1703"}, {"date": "September 14, 2018 - 11:35 am", "content": "Can you try https://api.thingspeak.com and let us know if that works? I think you have a spelling error in the address you used.Are you able to update your channel using an internet browser?try something like:https://api.thingspeak.com/update?api_key=XXXXXXXXXXXXXXXX&field1=10but use your channel write api key.", "num_user_post": " 401", "author": "cstapels"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/import-csv-file-to-thingspeak-with-automatically/", "posts": [{"date": "September 10, 2018 - 12:16 pm", "content": "I am a new user of ThingsPeak and a new user from Arduino Uno.at the moment I am still confused with my school assignments. I have a plan:1. Results from the temperature sensor, humidity will be stored in the sdcard module (csv file).2. Then the CSV files stored in the sdcard module will be imported to ThingsPeak automatically with the time specified. I'm using ESP8266..is this possible?How i can do it?I am still confused.Please help meThank you \ud83d\ude42", "num_user_post": " 2", "author": "rizafajar"}, {"date": "September 12, 2018 - 8:08 am", "content": "I would recommend starting with the examples at https://www.mathworks.com/help/thingspeak/examples.html.There are some specific to the ESP8266, but the Arduino examples are very similar and possibly portable to ESP.What advantage will you get from the SD card?  Your ESP should be able to connect to ThingSpeak whenever there is a network.", "num_user_post": " 401", "author": "cstapels"}, {"date": "September 12, 2018 - 12:22 pm", "content": "cstapels said I would recommend starting with the examples at https://www.mathworks.com/help/thingspeak/examples.html.There are some specific to the ESP8266, but the Arduino examples are very similar and possibly portable to ESP.What advantage will you get from the SD card?  Your ESP should be able to connect to ThingSpeak whenever there is a network.\u00a0\u00a0The advantage is that it can save battery power. The plan is I will send CSV files once a week. Is that possible? What is your opinion?because if every second sends data to ThingsPeak, the battery will run out quickly.", "num_user_post": " 2", "author": "rizafajar"}, {"date": "September 12, 2018 - 2:45 pm", "content": "Saving power is definitely a good reason to limit your posts.  Here is an ESP8266 example using deep sleep:https://www.mathworks.com/help/thingspeak/MoistureMonitor.htmlWhen you wake the device, you will want to use the bulk update to write multiple points in one entry. Seehttps://www.mathworks.com/help/thingspeak/bulkwritejsondata.htmlandhttps://www.mathworks.com/help/thingspeak/continuously-collect-data-and-bulk-update-a-thingspeak-channel-using-an-arduino-mkr1000-board-or-an-esp8266-board.htmlIf you have very many points, the buffer may get filled before you are able to print all the points.If you are using the the last example I linked above-and the buffer overflows, you can resize the data array and then print to the wifi client one character at a timeinstead of client.println(data);use something likeloop i:{client.println(data[i]);}I have heard that the memory for SD card management is large.  Can you let us know if you get it working?", "num_user_post": " 401", "author": "cstapels"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/fail-to-update-data-to-thingspeak-by-means-of-http-request-in-c/", "posts": [{"date": "April 28, 2016 - 2:26 am", "content": "By referring to my output as shows below, the connection to thingspeak is success, but there's nothing uodate in my thingspeak channel that already in public.Hope anyone can give some suggestion to solve it.Thanks.Below is my coding...int main(){ //cout << 'Hello BeagleBone Black!'; char waterLevel[60], flowRate[]=''; int i; //First, need to run the program in /etc //./ttyU.sh //sudo wvdial; // this will put the modem into internet access modecout << 'Hello Internet' << endl;socket(); for(i=0;i<3;i++) {separateDataIntoMultipleStr(waterLevel, flowRate ); printf('Preparing sending to ThingSpeak...');puts(waterLevel); puts(flowRate);system('wget http://api.thingspeak.com/update?key=IPB56DSWP8AQ5Y5I&field1=waterLevel&field2=flowRate'); sleep(20);}}Below is my result:root@arm:/home/ubuntu/Desktop# ./BeagleHello InternetSetting up the structs...Creating a socket...Connect()ing...send()ing message...Waiting to receive data...1000 bytes received :HTTP/1.1 200 OKDate: Thu, 28 Apr 2016 04:59:52 GMTExpires: -1Cache-Control: private, max-age=0Content-Type: text/html; charset=ISO-8859-1P3P: CP='This is not a P3P policy! See https://www.google.com/support/accounts/answer/151657?hl=en for more info.'Server: gwsX-XSS-Protection: 1; mode=blockX-Frame-Options: SAMEORIGINSet-Cookie: NID=79=Y3WOnXyXG9Aq0m3X7mJLbyhvddvBVqrC2MOw8DnJdIgbMZTir-1Uw5xQD93rmm_Ob7RKg5reoBOu3t1-_iQEBrhbXreCdXddxIEiICegUOROOw-hGY4fgvqqcEZxbVC2bpjAte9bxzeJpn8; expires=Fri, 28-Oct-2016 04:59:52 GMT; path=/; domain=.google.com; HttpOnlyAccept-Ranges: noneVary: Accept-EncodingTransfer-Encoding: chunked8000<!doctype html><html itemscope='' itemtype='http://schema.org/WebPage' lang='en'><head><meta content='Search the world's information, including webpages, images, videos and more. Google has many special features to help you find exactly what you're looking for.' name='description'><meta content='noodp' name='robots'><meta content='text/htmReceiving complete. Closing socket...Reading level and flow from filelevel = 4.73 121.72Preparing sending to ThingSpeak...4.73 121.72--2016-04-28 12:59:52-- http://api.thingspeak.com/update?key=IPB56DSWP8AQ5Y5IResolving api.thingspeak.com (api.thingspeak.com)... 54.164.214.198, 54.88.155.198Connecting to api.thingspeak.com (api.thingspeak.com)|54.164.214.198|:80... connected.HTTP request sent, awaiting response... 200 OKLength: 2 [text/html]Saving to: \u2018update?key=IPB56DSWP8AQ5Y5I.6\u2019100%[======================================================================================================>] 2 --.-K/s in 0.001s2016-04-28 12:59:53 (2.08 KB/s) - \u2018update?key=IPB56DSWP8AQ5Y5I.6\u2019 saved [2/2]Reading level and flow from filelevel = 4.73 121.72Preparing sending to ThingSpeak...4.73 121.72--2016-04-28 13:00:12-- http://api.thingspeak.com/update?key=IPB56DSWP8AQ5Y5IResolving api.thingspeak.com (api.thingspeak.com)... 54.164.214.198, 54.88.155.198Connecting to api.thingspeak.com (api.thingspeak.com)|54.164.214.198|:80... connected.HTTP request sent, awaiting response... 200 OKLength: 2 [text/html]Saving to: \u2018update?key=IPB56DSWP8AQ5Y5I.7\u2019100%[======================================================================================================>] 2 --.-K/s in 0s2016-04-28 13:00:13 (9.84 KB/s) - \u2018update?key=IPB56DSWP8AQ5Y5I.7\u2019 saved [2/2]Reading level and flow from filelevel = 4.73 121.72Preparing sending to ThingSpeak...4.73 121.72--2016-04-28 13:00:32-- http://api.thingspeak.com/update?key=IPB56DSWP8AQ5Y5IResolving api.thingspeak.com (api.thingspeak.com)... 54.164.214.198, 54.88.155.198Connecting to api.thingspeak.com (api.thingspeak.com)|54.164.214.198|:80... connected.HTTP request sent, awaiting response... 200 OKLength: 2 [text/html]Saving to: \u2018update?key=IPB56DSWP8AQ5Y5I.8\u2019100%[======================================================================================================>] 2 --.-K/s in 0s2016-04-28 13:00:33 (10.1 KB/s) - \u2018update?key=IPB56DSWP8AQ5Y5I.8\u2019 saved [2/2]", "num_user_post": " 1", "author": "SukiYoon"}, {"date": "June 20, 2016 - 9:05 am", "content": "Did you get this working? In your wget line, do you need to separate\u00a0waterLevel and\u00a0flowRate so that it writes the variable value versus the string?", "num_user_post": " 402", "author": "Hans"}, {"date": "August 25, 2018 - 7:58 am", "content": "I also encounter the similar issue. My stat data is updated but I can't see data in field.My Channel     Created: 11 days ago    Updated: 2 days ago    Last entry: 2 minutes ago    Entries: 17The entries is updated but I can't see data in field4.The cmd :wget http://api.thingspeak.com/update?api_key=NBMF2HCFGBX1521B&field4=21debian@beaglebone:~$ wget http://api.thingspeak.com/update?api_key=NBMF2HCFGBX1521B&field4=21[1] 13760debian@beaglebone:~$ --2015-03-04 09:15:53--  http://api.thingspeak.com/update?api_key=NBMF2HCFGBX1521BResolving api.thingspeak.com (api.thingspeak.com)... 34.202.98.102, 34.226.44.238, 2404:160:0:f:0:1:22ca:6266, ...Connecting to api.thingspeak.com (api.thingspeak.com)|34.202.98.102|:80... connected.HTTP request sent, awaiting response... 200 OKLength: 2 [text/html]Saving to: `update?api_key=NBMF2HCFGBX1521B.12'100%[======================================>] 2           --.-K/s   in 0s      2015-03-04 09:15:54 (25.4 KB/s) - `update?api_key=NBMF2HCFGBX1521B.12' saved [2/2]", "num_user_post": " 2", "author": "cxq638"}, {"date": "September 10, 2018 - 10:33 am", "content": "There can be a short delay before the data appears on your thingSpeak plots.  It is also possible that the auto scaling has rendered your data not visible.  If you read the data in your channel (using a REST call, or the data export button or the data export table on your channel), do you see the data that you wrote?", "num_user_post": " 401", "author": "cstapels"}, {"date": "September 11, 2018 - 3:00 am", "content": "The data export as follow (Jason format):created_at'2018-08-17T09:33:18Z'entry_id9field4null9created_at'2018-08-19T13:16:42Z'entry_id10field4null10created_at'2018-08-19T13:17:15Z'entry_id11field4null11Is that no data be uploaded to my channel- field 4?", "num_user_post": " 2", "author": "cxq638"}, {"date": "September 12, 2018 - 10:10 am", "content": "Yes it appears that field 4 did not get updated.  Are you using the write API key for your channel?In your command above, the &field4=21 part is truncated the second time it appears.  Is the buffer overflowing? In some interfaces, you need to send the URL and server name separately, though im not sure with wget on beaglebone.Can you try pasting the url into a browser window and see if the channel is updated?", "num_user_post": " 401", "author": "cstapels"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/how-to-send-data-from-existing-sd-card-server-on-ethernet-shield-to-thingspeak-channel/", "posts": [{"date": "July 9, 2018 - 9:14 am", "content": "Please Team, I have an SD card used as a Server to display gauges of voltages from my Arduino pins A0-A3 on web browser/internet. Now I want those same data to send the voltages to my ThingSpeak Channel. The data are: data_val1 to data_val4 to be displayed on my ThingSpeak channel. Below is the html code on the SD card serving as Server.Please help me insrt the right code that will fetch the data to ThingSpeak channel: JBoy Power Parametervar data_val = 0;        var data_val2 = 0;var data_val3 = 0;var data_val4 = 0;var Gauge=function(b){function l(a,b){for(var c in b)'object'==typeof b[c]&&'[object Array]'!==Object.prototype.toString.call(b[c])&&'renderTo'!=c?('object'!=typeof a[c]&&(a[c]={}),l(a[c],b[c])):a[c]=b[c]}function q(){z.width=b.width;z.height=b.height;A=z.cloneNode(!0);B=A.getContext('2d');C=z.width;D=z.height;t=C/2;u=D/2;f=t<u?t:u;A.i8d=!1;B.translate(t,u);B.save();a.translate(t,u);a.save()}function v(a){var b=new Date;G=setInterval(function(){var c=(new Date-b)/a.duration;1<c&&(c=1);var f=('function'==typeof a.delta?a.delta:M[a.delta])(c);a.step(f);1==c&&clearInterval(G)},a.delay||10)}function k(){G&&clearInterval(G);var a=I-n,h=n,c=b.animation;v({delay:c.delay,duration:c.duration,delta:c.fn,step:function(b){n=parseFloat(h)+a*b;E.draw()}})}function e(a){return a*Math.PI/180}function g(b,h,c){c=a.createLinearGradient(0,0,0,c);c.addColorStop(0,b);c.addColorStop(1,h);return c}function p(){var m=93*(f/100),h=f-m,c=91*(f/100),e=88*(f/100),d=85*(f/100);a.save();b.glow&&(a.shadowBlur=h,a.shadowColor='rgba(0, 0, 0, 0.5)');a.beginPath();a.arc(0,0,m,0,2*Math.PI,!0);a.fillStyle=g('#ddd','#aaa',m);a.fill();a.restore();a.beginPath();a.arc(0,0,c,0,2*Math.PI,!0);a.fillStyle=g('#fafafa','#ccc',c);a.fill();a.beginPath();a.arc(0,0,e,0,2*Math.PI,!0);a.fillStyle=g('#eee','#f0f0f0',e);a.fill();a.beginPath();a.arc(0,0,d,0,2*Math.PI,!0);a.fillStyle=b.colors.plate;a.fill();a.save()}function w(a){var h=!1;a=0===b.majorTicksFormat.dec?Math.round(a).toString():a.toFixed(b.majorTicksFormat.dec);return 1<b.majorTicksFormat['int']?(h=-1<a.indexOf('.'),-1c;c++)b.majorTicks.push(w(b.minValue+h*c));b.majorTicks.push(w(b.maxValue))}for(c=0;c<b.majorTicks.length;++c)a.rotate(e(45+c*(270/(b.majorTicks.length-1)))),a.beginPath(),a.moveTo(0,m),a.lineTo(0,m-15*(f/100)),a.stroke(),a.restore(),a.save();b.strokeTicks&&(a.rotate(e(90)),a.beginPath(),a.arc(0,0,m,e(45),e(315),!1),a.stroke(),a.restore(),a.save())}function J(){var m=81*(f/100);a.lineWidth=1;a.strokeStyle=b.colors.minorTicks;a.save();for(var h=b.minorTicks*(b.majorTicks.length-1),c=0;c<h;++c)a.rotate(e(45+c*(270/h))),a.beginPath(),a.moveTo(0,m),a.lineTo(0,m-7.5*(f/100)),a.stroke(),a.restore(),a.save()}function s(){for(var m=55*(f/100),h=0;ha;a=Math.abs(a);if(0<h){a=a.toFixed(h).toString().split('.');h=0;for(c-=a[0].length;h<c;++h)a[0]='0'+a[0];a=(f?'-':'')+a[0]+'.'+a[1]}else{a=Math.round(a).toString();h=0;for(c-=a.length;h<c;++h)a='0'+a;a=(f?'-':'')+a}return a}function F(a,b){var c=Math.sin(b),f=Math.cos(b);return{x:0*f-a*c,y:0*c+a*f}}function N(){a.save();for(var m=81*(f/100),h=m-15*(f/100),c=0,g=b.highlights.length;cn?Math.abs(b.minValue-n):0b.maxValue?b.maxValue+d:a=(7-4*b)/11){a=-Math.pow((11-6*b-11*a)/4,2)+Math.pow(c,2);break a}a=void 0}return 1-a},elastic:function(a){a=1-a;return 1-Math.pow(2,10*(a-1))*Math.cos(30*Math.PI/3*a)}},G=null;a.lineCap='round';this.draw=function(){if(!A.i8d){B.clearRect(-t,-u,C,D);B.save();var g={ctx:a};a=B;p();N();J();d();s();b.title&&(a.save(),a.font=24*(f/200)+'px Arial',a.fillStyle=b.colors.title,a.textAlign='center',a.fillText(b.title,0,-f/4.25),a.restore());b.units&&(a.save(),a.font=22*(f/200)+'px Arial',a.fillStyle=b.colors.units,a.textAlign='center',a.fillText(b.units,0,f/3.25),a.restore());A.i8d=!0;a=g.ctx;delete g.ctx}a.clearRect(-t,-u,C,D);a.save();a.drawImage(A,-t,-u,C,D);if(Gauge.initialized)L(),K(),H||(E.onready&&E.onready(),H=!0);else var e=setInterval(function(){Gauge.initialized&&(clearInterval(e),L(),K(),H||(E.onready&&E.onready(),H=!0))},10);return this}};Gauge.initialized=!1;(function(){var b=document,l=b.getElementsByTagName('head')[0],q=-1!=navigator.userAgent.toLocaleLowerCase().indexOf('msie'),v='@font-face {font-family: 'Led';src: url('fonts/digital-7-mono.'+(q?'eot':'ttf')+'');}',k=b.createElement('style');k.type='text/css';if(q)l.appendChild(k),l=k.styleSheet,l.cssText=v;else{try{k.appendChild(b.createTextNode(v))}catch(e){k.cssText=v}l.appendChild(k);l=k.styleSheet?k.styleSheet:k.sheet||b.styleSheets[b.styleSheets.length-1]}var g=setInterval(function(){if(b.body){clearInterval(g);var e=b.createElement('div');e.style.fontFamily='Led';e.style.position='absolute';e.style.height=e.style.width=0;e.style.overflow='hidden';e.innerHTML='.';b.body.appendChild(e);setTimeout(function(){Gauge.initialized=!0;e.parentNode.removeChild(e)},250)}},1)})();Gauge.Collection=[];Gauge.Collection.get=function(b){if('string'==typeof b)for(var l=0,q=this.length;l<q;l++){if((this[l].config.renderTo.tagName?this[l].config.renderTo:document.getElementById(this[l].config.renderTo)).getAttribute('id')==b)return this[l]}else return'number'==typeof b?this[b]:null};function domReady(b){window.addEventListener?window.addEventListener('DOMContentLoaded',b,!1):window.attachEvent('onload',b)}domReady(function(){function b(b){for(var e=b[0],d=1,g=b.length;d<g;d++)e+=b[d].substr(0,1).toUpperCase()+b[d].substr(1,b[d].length-1);return e}for(var l=document.getElementsByTagName('canvas'),q=0,v=l.length;q<v;q++)if('canv-gauge'==l[q].getAttribute('data-type')){var k=l[q],e={},g,p=parseInt(k.getAttribute('width'),10),w=parseInt(k.getAttribute('height'),10);e.renderTo=k;p&&(e.width=p);w&&(e.height=w);p=0;for(w=k.attributes.length;p<w;p++)if(g=k.attributes.item(p).nodeName,'data-type'!=g&&'data-'==g.substr(0,5)){var d=g.substr(5,g.length-5).toLowerCase().split('-');if(g=k.getAttribute(g))switch(d[0]){case 'colors':d[1]&&(e.colors||(e.colors={}),'needle'==d[1]?(d=g.split(/s+/),e.colors.needle=d[0]&&d[1]?{start:d[0],end:d[1]}:g):(d.shift(),e.colors[b(d)]=g));break;case 'highlights':e.highlights||(e.highlights=[]);g=g.match(/(?:(?:-?d*.)?(-?d+){1,2} ){2}(?:(?:#|0x)?(?:[0-9A-F|a-f]){3,8}|rgba?(.*?))/g);for(var d=0,J=g.length;d<J;d++){var s=g[d].replace(/^s+|s+$/g,'').split(/s+/),x={};s[0]&&''!=s[0]&&(x.from=s[0]);s[1]&&''!=s[1]&&(x.to=s[1]);s[2]&&''!=s[2]&&(x.color=s[2]);e.highlights.push(x)}break;case 'animation':d[1]&&(e.animation||(e.animation={}),'fn'==d[1]&&/^s*functions*(/.test(g)&&(g=eval('('+g+')')),e.animation[d[1]]=g);break;default:d=b(d);if('onready'==d)continue;if('majorTicks'==d)g=g.split(/s+/);else if('strokeTicks'==d||'glow'==d)g='true'==g?!0:!1;else if('valueFormat'==d)if(g=g.split('.'),2==g.length)g={'int':parseInt(g[0],10),dec:parseInt(g[1],10)};else continue;e[d]=g}}e=new Gauge(e);k.getAttribute('data-value')&&e.setRawValue(parseFloat(k.getAttribute('data-value')));k.getAttribute('data-onready')&&(e.onready=function(){eval(this.config.renderTo.getAttribute('data-onready'))});e.draw()}});window.Gauge=Gauge;        function GetArduinoInputs()        {            nocache = '&nocache=' + Math.random() * 1000000;            var request = new XMLHttpRequest();            request.onreadystatechange = function()            {                if (this.readyState == 4) {                    if (this.status == 200) {                        if (this.responseXML != null) {                            data_val  = this.responseXML.getElementsByTagName('analog')[0].childNodes[0].nodeValue;                            data_val2 = this.responseXML.getElementsByTagName('analog')[1].childNodes[0].nodeValue;data_val3 = this.responseXML.getElementsByTagName('analog')[2].childNodes[0].nodeValue;data_val4 = this.responseXML.getElementsByTagName('analog')[3].childNodes[0].nodeValue;                            data_val1 = data_val*(23.99/1024.0)*4.95;                            data_val2 = data_val2*(24.01 /1024.0)*2.31;    data_val3 = data_val3*(167.0/1024.0)*2.82;    data_val4 = data_val4*(167.0/1024.0)*2.75;                        }                    }                }            }            request.open('GET', 'ajax_inputs' + nocache, true);            request.send(null);            setTimeout('GetArduinoInputs()', 2500);        }VDT POP Battery & AC Mains VoltagesPOP Battery BankRectifier Battery BankGenerator MainsPublic Mains This is powered by JBoy", "num_user_post": " 1", "author": "isaacjohnsong007"}, {"date": "September 12, 2018 - 10:06 am", "content": "Here are the options for reading data from a ThingSpeak channel.https://www.mathworks.com/help/thingspeak/read-data-from-channel.htmlIf you need additional help with a particular method, please let us know what you tried and what were the results.", "num_user_post": " 401", "author": "cstapels"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/cant-write-to-thingspeak/", "posts": [{"date": "August 28, 2018 - 12:01 pm", "content": "I use the :   ThingSpeak.writeField(myChannelNumber, 1,  sendVal, myWriteAPIKey);   // to send 'sendVal' to ThingspeakI have declared the following:String myWriteAPIKey = '77NQYR833QPFRN2G';   // API Keyint sendVal;unsigned long myChannelNumber = 557953;I get the error :  no matching function for call to 'ThingSpeakClass::writeField(long unsigned int&, int, int, String&)'Can you please help me and tell me what is wrong ?", "num_user_post": " 7", "author": "dimbil"}, {"date": "August 29, 2018 - 7:53 am", "content": "I'm not sure the ThingSpeak library plays perfectly with the String class.  In the WriteVoltage example that comes with the library, the API key is declared as:const char * myWriteAPIKey = 'XXXXXXXXXXXXXXXX';Can you try that and let us know if it works?", "num_user_post": " 401", "author": "cstapels"}, {"date": "August 30, 2018 - 2:41 pm", "content": "It worked. I am sorry, I had forgotten to declare it as const, I had declared it just as char*Thank you very much for your help.I am having another problem now. I don't see the value that I am sending to Thingspeak. Can you please tell me what I do wrong?", "num_user_post": " 7", "author": "dimbil"}, {"date": "August 30, 2018 - 2:47 pm", "content": "I get the following warning now and I guess this is the reason that I don't see the value that I am sending to Thingspeakwarning: deprecated conversion from string constant to 'char*' [-Wwrite-strings]     espSerial.find('>'); I cannot see anything wrong calling the find function.Can you please tell me what I do wrong?", "num_user_post": " 7", "author": "dimbil"}, {"date": "August 30, 2018 - 5:13 pm", "content": "dimbil,Can you please elaborate?  Why are you using the find() function?  Are you using this to interact with ThingSpeak somehow?", "num_user_post": " 401", "author": "cstapels"}, {"date": "September 1, 2018 - 11:57 am", "content": "Yes, I wanted to interact with ThingSpeak and try to read some information.I removed this part and I am focusing in writing data to ThingSpeak .I don\u2019t get any error this time.On the Serial monitor I see \u201cAT Comman\u2e2e\u201dBut I don\u2019t see any data written on ThingSpeakFor sending data, I use the command :  ThingSpeak.writeField(myChannelNumber, 1,  sendVal, myWriteAPIKey);Do you have any suggestions to make?", "num_user_post": " 7", "author": "dimbil"}, {"date": "September 2, 2018 - 9:14 am", "content": "May I send you the code to help me please?", "num_user_post": " 7", "author": "dimbil"}, {"date": "September 2, 2018 - 9:26 am", "content": "Here is my code if you want to take a look in it :#include#include 'ThingSpeak.h'#includeSoftwareSerial espSerial(0, 1);#define DEBUG trueString mySSID = 'VODAFONE_135';String myPWD = '7EURADK2QG';const char * myWriteAPIKey ='77NQYR833QPFRN2G';String myHOST = 'api.thingspeak.com';String myPORT = '4';String myFIELD = 'field1';int sendVal;unsigned long myChannelNumber = 557953;void setup(){  Serial.begin(9600);  espSerial.begin(9600);  espData('AT+RST', 1000, DEBUG);  espData('AT+CWMODE=1', 1000, DEBUG);  espData('AT+CWJAP=''+ mySSID +'',''+ myPWD +''', 1000, DEBUG);  delay(1000);  WiFiClient  client;   ThingSpeak.begin(client);}  void loop()  {    sendVal =105;    String sendData = 'GET /update?api_key='+ String(myWriteAPIKey) +'&'+ myFIELD +'='+String(sendVal);    espData('AT+CIPMUX=1', 1000, DEBUG);    espData('AT+CIPSTART=0,'TCP',''+ myHOST +'','+ myPORT, 1000, DEBUG);    espData('AT+CIPSEND=0,' +String(sendData.length()+4),1000,DEBUG);    espSerial.println(sendData);    Serial.print('Value to be sent: ');    Serial.println(sendVal);    espData('AT+CIPCLOSE=0',1000,DEBUG);    delay(10000);  }  String espData(String command, const int timeout, boolean debug){  Serial.print('AT Command ==> ');  Serial.print(command);  Serial.println('     ');  String response = '';  espSerial.println(command);  long int time = millis();  //  ThingSpeak.writeField(myChannelNumber, 1,  sendVal, myWriteAPIKey);  //  while ( (time + timeout) > millis())  {    while (espSerial.available())    {      char c = espSerial.read();      response += c;    }  }  return response;}", "num_user_post": " 7", "author": "dimbil"}, {"date": "September 4, 2018 - 10:56 am", "content": "It looks like you have combined a few techniques here.  You seem to be using commands from the ThingSpeak communication Library, along with AT commands.  The AT commands are a manual method for doing some of the things the library will do for you. I would recommend you start with a clean slate. Have look at the examples in the ThingSpeak doc. For example, this one https://www.mathworks.com/help/thingspeak/read-and-post-temperature-data.htmlIt looks like you are using ESP, so this example should work for you.I'm pretty sure you should not need to use the AT commands to manually set up your wifi connection, though you may need another library (such as ESP8266WiFi)", "num_user_post": " 401", "author": "cstapels"}, {"date": "September 5, 2018 - 3:38 pm", "content": "I tried the example :https://www.mathworks.com/help/thingspeak/read-and-post-temperature-data.htmlbut I am getting the following warning and errors:warning: espcomm_sync failederror: espcomm_open failederror: espcomm_upload_mem failederror: espcomm_upload_mem failed", "num_user_post": " 7", "author": "dimbil"}, {"date": "September 7, 2018 - 11:24 am", "content": "That is a programming error, not related to ThingSpeak.  Try resetting your device.  If it persists, change to a new com port and change the port in Arduino.", "num_user_post": " 401", "author": "cstapels"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/api-thingspeak-com-dns-ttl-is-60-seconds-why-is-so/", "posts": [{"date": "September 5, 2018 - 8:21 am", "content": "Hi guys, my ESP8266 sends data to ThingSpeak every minute. Also, it resolves api.thingspeak.com to its IP every minute, that is because you've set DNS TTL to 60 seconds.I have noticed that your IP address rarely changes (or not changes at all), but still all ESP8266/ESP32 (and other) resolve api.thingspeak.com to its IP every minute because TTL is 60... Is there any reason why you choose TTL  60s ? I suggest using 300 seconds or even 600 seconds. For example cloud.blynk.cc uses 3600 seconds DNS TTL.More here: https://github.com/esp8266/Arduino/issues/5102Thanks!", "num_user_post": " 3", "author": "Deimos"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/post-data-to-thinspeak-com-using-esp8266-lua/", "posts": [{"date": "July 31, 2018 - 7:33 am", "content": "I am trying to POST data to ThingsSpeak Channel. The following is the code, I tried -----------------------------------------server = 'http://api.thingspeak.com/update' -- set server URLcount = 0   -- set initiale count to 0code = 10data = 20wifi.setmode(wifi.STATION)  -- set wi-fi mode to stationwifi.sta.config('totoro','totoro1986')-- set ssid & pwd to configwifi.sta.connect()          -- connect to routerprint(wifi.sta.getip())function PostToThingSpeak()-- callback function for post datastring = 'api_key=XXXXXXXXXXXXXXXXXXXXX&field1='..counthttp.post(server,'', string,  function(code, data)    if (code < 0) then      print('HTTP request failed')    else      print(code, data)      count = count+1   -- increment count after each successfull post    end  end)end-- call post function after each 20 second for thingspeak server updatetmr.alarm(1, 20000, 1, function() PostToThingSpeak() end)------------------------------------------------------The following is the error message from ESP8266. Can anyone help me?PANIC: unprotected error in call to Lua API (attempt to index a nil value)", "num_user_post": " 2", "author": "vkadal"}, {"date": "September 4, 2018 - 10:48 am", "content": "I found a reference to an unloaded library by doing a google search with your error message.  Perhaps check that all the relevant libraries are loaded.  If not, I suggest taking things out of your code one a t a time to fine the source of the error.", "num_user_post": " 401", "author": "cstapels"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/last-updated-field-suddenly-frozen/", "posts": [{"date": "August 28, 2018 - 4:19 am", "content": "Starting 8/27/2018 the 'updated' field got frozen (stuck on a fixed timestamp) for one of my channels, even if the field data gets still updated properly every two minutes like before. The channel has been up for 2 years and nothing changed on the reporting node / client. So right now, the feed reports updated as 'a day ago' yet the last entry properly reads 'a minute ago' - see the attached screenshot .This only affects one of the channels, on all the other ones the 2 fields are in sync as before. Anyone facing the same issue? I could just go on ignoring the field but I have a set of monitoring scripts that monitor the field via JSON API request to see if the node is alive or not so it's quite an annoyance.", "num_user_post": " 2", "author": "rado"}, {"date": "August 30, 2018 - 5:20 pm", "content": "Previously the updates at and last entry fields were duplicates.  A recent upgrade provides 'Updated at\u201d when the channel settings were updated and  \u201cLast entry\u201d when an entry was sent to the channel.  Is it possible for you to base your monitoring scripts on a call to the last value of the channel?  If the timestamp of the last value is old, it will let you know if the node is dead.https://www.mathworks.com/help/thingspeak/readlastentry.html", "num_user_post": " 401", "author": "cstapels"}, {"date": "September 2, 2018 - 2:52 am", "content": "Thank you for the clarification! Surely rewriting the scripts will be possible now that it's clear that the change of behavior is an expected feature change (and a permanent one). It seems it's being rolled out gradually? Just 3 hours ago another one of my feeds 'froze' the 'updated at' field.cstapels said Previously the updates at and last entry fields were duplicates.  A recent upgrade provides 'Updated at\u201d when the channel settings were updated and  \u201cLast entry\u201d when an entry was sent to the channel.  Is it possible for you to base your monitoring scripts on a call to the last value of the channel?  If the timestamp of the last value is old, it will let you know if the node is dead.https://www.mathworks.com/help/thingspeak/readlastentry.html", "num_user_post": " 2", "author": "rado"}, {"date": "September 4, 2018 - 10:29 am", "content": "Yes the process is being rolled out gradually.  All new channels created will have this behavior going forward.  Old channels will be migrated to this format gradually.  The API call to api.thingspeak.com/channels//feeds/last. will be a very stable replacement.", "num_user_post": " 401", "author": "cstapels"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/please-help-me-send-data-form-thingspeak-to-google-maps/", "posts": [{"date": "August 28, 2018 - 4:41 pm", "content": "hi ,I have arduino UNO , fastrexGPS UP501, WIFI esp8266 and website ( contain a map)My project is Tracking system , by using these tools.I wrote code , you can see code at the bottomFirst , How I can send data  to my Chanel in  ThingSpeak  ??after that,  send it to my Website or to Google maps directly?? by this code :#include#includeSoftwareSerial esp8266(2, 3);int countTrueCommand;int countTimeCommand;boolean found = false;//name networkString ssid = 'ssssssssss';//password the networkeString password = '000000000';//IP_Address thr server and port numper/*String IP_Address = '192.168.0....';String Port = '2020';*/String  dataGPS;int RXPin = 5;int TXPin = 6;int GPSBoud=9600;TinyGPSPlus gps;SoftwareSerial gpsSerial(RXPin, TXPin);void setup() { Serial.begin(9600);  esp8266.begin(115200);  gpsSerial.begin(GPSBoud);  sendCommand('AT',5,'OK');//sendCommand('AT+CWJAP=''+ ssid +'',''+ password +''',20,'OK');  sendCommand('AT+CWMODE=3',5,'OK');  sendCommand('AT+CIPMUX=1',5,'OK');/*  sendCommand('AT+CIPSTART=4,'UDP',''''+IP_Address+'','+Port,5,'OK');*/  sendCommand('AT+CIPSEND=4,9',5,'>');   Serial.println(dataGPS);   /*  esp8266.println('AT');delay(3000); esp8266.println('AT+CWMODE=3'); delay(3000); esp8266.println('AT+CIPMUX=1');  delay(3000);  esp8266.println( 'AT+CIPSTART=4,'UDP','192.168.8.102',2020');    delay(3000); esp8266.println('AT+CIPSEND=4,9'); */}void loop() {  // This sketch displays information every time a new sentence is correctly encoded.  while (gpsSerial.available() > 0)    if (gps.encode(gpsSerial.read()))      displayInfo();  // If 5000 milliseconds pass and there are no characters coming in  // over the software serial port, show a 'No GPS detected' error  if (millis() > 5000 && gps.charsProcessed() < 10)  {    Serial.println(F('No GPS detected'));    while(true);  }  if (esp8266.available()){ Serial.write(esp8266.read());  }  if ( Serial.available()){ esp8266.write(Serial.read());  }}void displayInfo(){  Serial.print(F('Location: '));  if (gps.location.isValid())  {    Serial.print(gps.location.lat(), 6);    Serial.print(F(','));    Serial.print(gps.location.lng(), 6);  }  else  {    Serial.print(F('INVALID'));  }  Serial.print(F('  Date/Time: '));  if (gps.date.isValid())  {    Serial.print(gps.date.month());    Serial.print(F('/'));    Serial.print(gps.date.day());    Serial.print(F('/'));    Serial.print(gps.date.year());  }  else  {    Serial.print(F('INVALID'));  }  Serial.print(F(' '));  if (gps.time.isValid())  {    if (gps.time.hour() < 10) Serial.print(F('0'));    Serial.print(gps.time.hour());    Serial.print(F(':'));    if (gps.time.minute() < 10) Serial.print(F('0'));    Serial.print(gps.time.minute());    Serial.print(F(':'));    if (gps.time.second() < 10) Serial.print(F('0'));    Serial.print(gps.time.second());    Serial.print(F('.'));    if (gps.time.centisecond()  ');  Serial.print(command);  Serial.print(' ');  while(countTimeCommand < (maxTime*1))  {    esp8266.println(command);//at+cipsend    if(esp8266.find(readReplay))//ok    {      found = true;      break;    }    countTimeCommand++;  }  if(found == true)  {    Serial.println('OYI');    countTrueCommand++;    countTimeCommand = 0;  }  if(found == false)  {    Serial.println('Fail');    countTrueCommand = 0;    countTimeCommand = 0;  }  found = false; }", "num_user_post": " 1", "author": "Am18"}, {"date": "August 29, 2018 - 4:10 pm", "content": "You can program an ESP8266 directly in the Arduino IDE.  They you can avoid the difficult syntax of the AT command set.If you have ESP8266-01, you will need another programmer with a serial connection, you can also use an Arduino Uno as the programmer.  If you have NODE MCU or WEMOS, you can program directly from Arduino IDE.Have a look at these examples:https://www.mathworks.com/help/thingspeak/examples.htmlIn this example, you can use the ThingSpeak Communication Library to help you communicate with ThingSpeak.https://www.mathworks.com/help/thingspeak/read-and-post-temperature-data.htmlHere is an example using the MQTT protocal, which works on ESP8266.https://www.mathworks.com/help/thingspeak/mqtt-publish-and-subscribe-with-esp8266.htmlPlease let us know if that helps.", "num_user_post": " 401", "author": "cstapels"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/retrieving-data-on-thinkspeak/", "posts": [{"date": "August 28, 2018 - 7:44 am", "content": "Hias thinkspeak gives you the data for 100 recent time slots. how to retrieve previous data.", "num_user_post": " 2", "author": "topsy"}, {"date": "August 28, 2018 - 1:19 pm", "content": "Hi topsy,-Sign in with your account-Go to your channel (interested in)-About 5th line there are 6 tabs in green letters-Click last tab 'Data Import/Export' (opens new webpage)-In the new webpage, bottom, 'Export' tells you send an e-mail asking nicely for 'the data' (a while ago you could download data directly)Try and I hope helped you ", "num_user_post": " 91", "author": "piajola"}, {"date": "August 29, 2018 - 4:03 pm", "content": "There is an API to export your data: https://www.mathworks.com/help/thingspeak/readdata.htmlUp to the last 8000 points can be retrieved using: https://api.thingspeak.com/channels/_CHANNEL_ID_/feeds.csv?api_key=_READ_API_KEY_&results=8000See the documentation with examples here.https://www.mathworks.com/help/thingspeak/readdata.html", "num_user_post": " 401", "author": "cstapels"}]}]}
{"url": "https://community.thingspeak.com/forum/thingspeak-api/page-2/", "threads": [{"url": "https://community.thingspeak.com/forum/thingspeak-api/why-is-the-all-feeds-download-become-need-send-mail/", "posts": [{"date": "August 17, 2018 - 4:16 am", "content": "hi I'm new heremy English is poor ,so please do not care on my grammarFew day ago , I can download my all feeds in {data import/export} export featurebut today I want to download my feeds with this feature againI find it change to need send email to  {support@thingspeak.com}is it the recent rule change? I send email about  my Channel ID and Read API Key to thingspeak ,but it Reply me {The e-mail message could not be delivered because the user's mailfolder is full.}why can I do to take my feeds with CSV again", "num_user_post": " 2", "author": "wsp89040"}, {"date": "August 17, 2018 - 9:12 am", "content": "We noticed some users were programmatically accessing the functionality that was designed for use from the website and causing instability in the system. To protect the system we are reworking the feature. In the mean time, remember there is an API to export your data: https://www.mathworks.com/help/thingspeak/readdata.htmlUp to the last 8000 points can be retrieved using: https://api.thingspeak.com/channels//feeds.csv?api_key=&results=8000***NOTE:*** Misuse by making a large number of requests in a short time may result in your channel being blocked.Also, you can use MATLAB to download your data and export it to CSV: https://www.mathworks.com/help/thingspeak/thingspeakread.htmlCan you provide some information so we can redesign the functionality to meet your needs?Specifically:- How often do you need to export your data? Is this on a schedule (once a day, once a week, etc.?)- If the data is exported on a schedule, is it sufficient to have the data available since the last download, or do you need the entire data again?- What do you do with the data once you have downloaded it?- Is your requirement to export the data limited to doing this from the website, or, exporting the data programmatically using an API?- Are you just exporting the data for archival purposes, or, is there another workflow that is driving this? If there is another workflow, can you please describe it in detail?- Do you need the entire channel data, or do you only care for a subset of recently loaded data? If you only care for recently loaded data, how many hours/days/weeks back do you need the data for?", "num_user_post": " 225", "author": "Vinod"}, {"date": "August 17, 2018 - 11:26 am", "content": "thank you very much, MasterI use your suggestion with {Up to the last 8000 points can be retrieved using:} is successbut the URL  is https://thingspeak.com/XXXXX.............(after is same )I want this function because I just beginner in IOT & matlab, but I'm familiar with EXCEL & Arduinoso EXCEL is convenient than meAnd you say about suggestion, maybe I can give some idea1. can setting how many feeds(minute,hour,day,week) to store a csv ,and  user can download with ZIP.2. maybe I update my feed in every second ,and I just want every minute feeds to store a csv ,or mark than and save with other feeds , other feeds just let me see is anything wrong  in my sensor3. can change time zone on thingspeak ,i know youtube have video teach about it, but i think it can  calculate on thingspeak is better than user.I know some suggestion can reach in coding or EXCEL  ,so it just suggestion =)I wish it can help your company to make thingspeak better.", "num_user_post": " 2", "author": "wsp89040"}, {"date": "August 29, 2018 - 3:56 pm", "content": "We really appreciate your feedback, thanks for taking the time to let us know how you would like the feature to work.Watch the forum for information on the release of an improved export feature.", "num_user_post": " 401", "author": "cstapels"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/uploading-data-from-arduino-to-thinspeak/", "posts": [{"date": "August 28, 2018 - 6:55 am", "content": "Helloi am doing project in which sensing the sensor data using arduino platform to  thinkspaek. first of all i uploaded the code on the arduino stacked with eps8266 module after uploading i removed the wire connection between arduino microcontroller and laptop but initially for 2 to 3 minutes data is trasferred on thinkspaek after it 'no data' on thinkspeak. i have  used write api of thinkspaek in my arduino code.please guide methank you", "num_user_post": " 2", "author": "topsy"}, {"date": "August 29, 2018 - 3:50 pm", "content": "Are you using the Arduino to run the code or just to program the ESP8266?Which wire connections did you remove?  The serial connection, or Ethernet, or USB?What responses are you getting from the write data API commands?", "num_user_post": " 401", "author": "cstapels"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/testing-bulk-update-feature-using-secure-protocol-htts/", "posts": [{"date": "August 7, 2018 - 12:52 pm", "content": "Hello.After testing the bulk update feature using Arduino MKR GSM 1400 devices, is time to improve my system. In fact, I would like to know how to post my requests across HTTP using SSL, I mean using HTTPS. This protocol is very important if I want to avoid the data can be intercepted by others. My program is based on the example explained on this page 'Bulk-Update a ThingSpeak Channel Using an Arduino MKR1000 Board or an ESP8266 Board', so I'm sending data across the network in plain text.I have been doing several tests applying this changes: -  The port 'from 80 to 443', -  Using the same server name 'api.thingspeak.com'. -  Changing GSMClient to GSMSSLClient But when I try to connect to the server this fails. Maybe the url is incorrect with 443 port.  Finally, my code is very similar to this:..... //Define the ThingSpeak server.char server[] = 'api.thingspeak.com'; // ThingSpeak Server......if (client.connect(server, 443)) {    client.println('POST /channels/YOUR-CHANNEL-ID/bulk_update.json HTTP/1.1'); // Replace YOUR-CHANNEL-ID with your ThingSpeak channel ID    client.println('Host: api.thingspeak.com');    client.println('User-Agent: mw.doc.bulk-update (Arduino ESP8266)');    client.println('Connection: close');    client.println('Content-Type: application/json');    client.println('Content-Length: '+data_length);    client.println();    client.println(data); ......  }......Could someone explain me how do get this??thanks", "num_user_post": " 16", "author": "eplantes"}, {"date": "August 10, 2018 - 2:13 pm", "content": "Port 443 is correct, however you want to change your server to https://api.thingspeak.com (note the extra S in the URL)", "num_user_post": " 225", "author": "Vinod"}, {"date": "August 14, 2018 - 6:55 am", "content": "Thanks Vimod.I use 443 as port and ' https://api.thingspeak.com' as name server. I can connect to the server using this settings, but after to write in the socket 'method client.print()..', for some strange reason the connection is closed and the channel is not updated. Maybe this connection is closed by the server but I'm very sure. On another hand I use the same parameters and headers commented in last post. POST /channels/MY_CHANNEL/bulk_update.json HTTP/1.1Host: api.thingspeak.comContent-Type: application/jsonContent-length: 231 or something like thatConnection: closeThank you very much", "num_user_post": " 16", "author": "eplantes"}, {"date": "August 25, 2018 - 10:23 am", "content": "Hello. Comming back to this topic...  I have been doing several tests using 'https://api.thingspeak.com' as name server and '443' as port,  but when I get connected to the server, the connection is closed in a few seconds. I haven't see any code example in the documentation that explains how to get this. - Could someone give an example using secure protocol 'https' and bulk update feature?- Is it necessary use a certificate in the autenticantion step or something like that?- Someone has experienced the same problems ?Thanks", "num_user_post": " 16", "author": "eplantes"}, {"date": "August 29, 2018 - 6:16 am", "content": "Hello again.Mmmmm I found where was the error. I defined the port variable as a byte, not as an int. For this reason the output debugged showed 187 as port and not 443.On another hand is not necessary defining the name server using the full path 'https://api.thingspeak.com', we can use the settings as follows:server: api.thingspeak.comport: 443I have done several tests using the bulk_update feature and this works fine!! : )I'm very sorry for this stupid error.Thanks", "num_user_post": " 16", "author": "eplantes"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/mqtt-connection-timeout-when-trying-to-connect/", "posts": [{"date": "August 22, 2018 - 9:10 am", "content": "Hi there,I'm using a nodeMCU dev board and the PubSubClient library to handle a MQTT connection for publishing to a channel. When connected the publishing is performed promptly. The connection however, can take minutes to successfully occur. A state of rc -4 is constantly returned indicating a server timeout.Any help would be appreciated!", "num_user_post": " 4", "author": "JaredP94"}, {"date": "August 22, 2018 - 9:48 am", "content": "You might have a local resource that isn't closing gracefully and stalling the next connection attempt.  Post your code and we'll take a look.", "num_user_post": " 34", "author": "JasonW"}, {"date": "August 22, 2018 - 9:58 am", "content": "I have a feeling it may relate to the chip going into a deep sleep directly after a publish is executed but not much else comes to mind.Kind find the code attached (note that API values have been replaced). Sorry about the formatting - I'm a bit unsure of the syntax for the forum.#include#include#include#include#include 'RF24.h'#include 'RF24Network.h'#include 'credentials.h'#define NUM_PARKINGS 24#define NUM_SENSORS 4#define NUM_ROWS 3#define SLEEP_TIME 16e6char ssid[] = WIFI_SSID; //  Change this to your network SSID (name).char pass[] = WIFI_PASSWORD;  // Change this your network passwordchar mqttUserName[] = 'TransmitterNode';  // Can be any name.char mqttPass[] = 'val';  // Change this your MQTT API Key from Account > MyProfile.char writeAPIKey[] = 'val';    // Change to your channel Write API Key.long channelID = 542645;char* topic ='channels/542645/publish/val';char* server = 'mqtt.thingspeak.com';WiFiClient wifiClient;PubSubClient client(wifiClient);void callback(char* topic, byte* payload, unsigned int length) {  // handle message arrived}RF24 myRadio (2, 15);RF24Network network(myRadio);unsigned long current_time;unsigned long upload_duration;bool received_results;bool incoming;int row_number;char dataReceived[NUM_PARKINGS];char parkingBayData[NUM_ROWS][NUM_PARKINGS];// Octal Mappingconst uint16_t this_node = 04;const uint16_t gateway_node = 00;bool row1 = false;bool row2 = false;bool row3 = false;void setup() {  Serial.begin(9600);  Serial.println(F('Transmitter - Node19'));   for (int i = 0; i < NUM_PARKINGS; i++) {    dataReceived[i] = -1;  }  for (int i = 0; i < NUM_ROWS; i++) {    for (int j = 0; j < NUM_PARKINGS; j++){      parkingBayData[i][j] = 0;    }  }  SPI.begin();  myRadio.begin();  network.begin(90, this_node);  myRadio.setDataRate(RF24_250KBPS);  myRadio.setPALevel(RF24_PA_MIN);   WiFi.begin(ssid, pass);  Serial.print('MAC: ');  Serial.println(WiFi.macAddress());  Serial.println();  Serial.print('Connecting to ');  Serial.println(ssid);  WiFi.begin(ssid, pass);  while (WiFi.status() != WL_CONNECTED) {    delay(500);    Serial.print('.');  }  Serial.println('');  Serial.println('WiFi connected');  Serial.println('IP address: ');  Serial.println(WiFi.localIP());  Serial.println('Connection strength: ');  Serial.println(WiFi.RSSI());  String clientName='TransmitterNode';  Serial.print('Connecting to ');  Serial.print(server);  Serial.print(' as ');  Serial.println(clientName);  client.setServer(server, 1883);   // Set the MQTT broker details.} void loop() {  incoming = false;  received_results = false;  row1 = false;  row2 = false;  row3 = false;  if (!client.connected())  {    reconnect();  }  client.loop();   // Call the loop continuously to establish connection to the server.  while(!received_results){    network.update();    if (network.available() == true || network.available() == false){      incoming = network.available();    }    if (incoming){      Serial.println('Recv');      RF24NetworkHeader header;      network.read(header, &dataReceived, sizeof(dataReceived)); // Read the incoming data      Serial.print('Data received from admin: ');      if (header.from_node == gateway_node && !row1){        memcpy(parkingBayData[0], dataReceived, NUM_PARKINGS * sizeof(char));        Serial.println('Row 1 from gateway: ');        for (int k = 0; k < NUM_PARKINGS; k++) {          Serial.print((int)parkingBayData[0][k]);          Serial.print(' ');        }        Serial.println('');        row1 = true;      }      else if (header.from_node == gateway_node && !row2){        memcpy(parkingBayData[1], dataReceived, NUM_PARKINGS * sizeof(char));        Serial.println('Row 2 from gateway ');        for (int k = 0; k < NUM_PARKINGS; k++) {          Serial.print((int)parkingBayData[1][k]);          Serial.print(' ');        }        Serial.println('');        row2 = true;      }      else if (header.from_node == gateway_node && !row3){        memcpy(parkingBayData[2], dataReceived, NUM_PARKINGS * sizeof(char));        Serial.println('Row 3 from gateway ');        for (int k = 0; k < NUM_PARKINGS; k++) {          Serial.print((int)parkingBayData[2][k]);          Serial.print(' ');        }        Serial.println('');        row3 = true;      }      if (row1 && row2 && row3){        received_results = true;      }    }    delay(0);  }  current_time = micros();  String row1_string;  String row2_string;  String row3_string;  for (int i = 0; i < NUM_PARKINGS; i++){    row1_string += (int)parkingBayData[0][i];  }  for (int i = 0; i < NUM_PARKINGS; i++){    row2_string += (int)parkingBayData[1][i];  }  for (int i = 0; i < NUM_PARKINGS; i++){    row3_string += (int)parkingBayData[2][i];  }  Serial.println(F('Converted:'));  Serial.println(row1_string);  Serial.println(row2_string);  Serial.println(row3_string);  String payload='field1=';  payload+=WiFi.RSSI();  payload+='&field2=';  payload+=row1_string;  payload+='&field3=';  payload+=row2_string;  payload+='&field4=';  payload+=row3_string;  payload+='&status=MQTTPUBLISH';  if (client.connected()){    Serial.print('Sending payload: ');    Serial.println(payload);    if (client.publish(topic, (char*) payload.c_str())) {      Serial.println('Publish ok');    }    else {      Serial.println('Publish failed');    }  }  upload_duration = micros() - current_time;  Serial.flush();  client.disconnect();  ESP.deepSleep(SLEEP_TIME - upload_duration);}void reconnect(){  char clientID[10];  // Loop until reconnected.  while (!client.connected())  {    Serial.print('Attempting MQTT connection...');    // Generate ClientID    for (int i = 0; i < 8; i++) {        clientID[i] = random(51);    }    // Connect to the MQTT broker    if (client.connect(clientID,mqttUserName,mqttPass))    {      Serial.print('Connected with Client ID:  ');      Serial.print(String(clientID));      Serial.print(', Username: ');      Serial.print(mqttUserName);      Serial.print(' , Passwword: ');      Serial.println(mqttPass);    } else    {      Serial.print('failed, rc=');      // Print to know why the connection failed.      // See https://pubsubclient.knolleary.net/api.html#state for the failure code explanation.      Serial.print(client.state());      Serial.println(' try again in 5 seconds');      delay(1000);    }  }}", "num_user_post": " 4", "author": "JaredP94"}, {"date": "August 22, 2018 - 11:10 am", "content": "The deepSleep might just be the problem.  After waking up from deep sleep, the Wi-Fi connection will need to be remade.To see if it is the problem try replacing    ESP.deepSleep(SLEEP_TIME - upload_duration);with   delay(16000);I think your hardware has a 'light sleep' mode what will keep the Wi-Fi connection alive while turning off unused peripherals.", "num_user_post": " 34", "author": "JasonW"}, {"date": "August 22, 2018 - 2:35 pm", "content": "Thanks for the feedback @JasonW. I did some further testing and it seems that the WiFi connection itself was stable and able perform the required operations after a Deep Sleep call. Initiating the MQTT broker connection within the loop() function seemed to be the issue - it was suitable for reconnections but seemingly not the initial connection.I resolved this by adding the following code after the setServer() call:if (client.connect((char*) clientName.c_str())) {    Serial.println('Connected to MQTT broker');    Serial.print('Topic');    Serial.println(topic);  }  else {    Serial.println('MQTT connect failed');    Serial.println('Will reset and try again...');    abort();  }Thanks again for your help \ud83d\ude42", "num_user_post": " 4", "author": "JaredP94"}, {"date": "August 23, 2018 - 11:10 am", "content": "I was puzzled why your fix worked so I looked a little closer.The actual problem is in the code that creates the randomized client ID.  It was creating a char array with non-printable characters and wasn't null terminated.  The broker will reject a client ID with non-printable characters.  And leaving a null off a char array will cause your code to crash.I changed the reconnect() to this, and it works properly now.void reconnect(){  char clientID[] = '00000000';  // null terminated 8 chars long  // Loop until reconnected.  while (!client.connected())  {    Serial.print('Attempting MQTT connection...');    // Generate ClientID    for (int i = 0; i < 8; i++) {      clientID[i] = random(65, 91);  // use only letters A to Z    }    // Connect to the MQTT broker    if (client.connect(clientID,mqttUserName,mqttPass))    {      Serial.print('Connected with Client ID: ');      Serial.print(String(clientID));      Serial.print(', Username: ');      Serial.print(mqttUserName);      Serial.print(' , Passwword: ');      Serial.println(mqttPass);    } else    {      Serial.print('failed, rc=');      // Print to know why the connection failed.      // See https://pubsubclient.knolleary.net/api.html#state for the failure code explanation.      Serial.print(client.state());      Serial.println(' try again in 5 seconds');      delay(1000);    }  }}", "num_user_post": " 34", "author": "JasonW"}, {"date": "August 24, 2018 - 8:36 am", "content": "JaredP94,I am pretty sure the code you used was from the ThingSpeak documentation for MQTT publish from Arduino.  That code missed an update unfortunately.  There is a newer example showing both publish and subscribe here:https://www.mathworks.com/help/thingspeak/mqtt-publish-and-subscribe-with-esp8266.htmlThanks for pointing out that other error still remained.  We will look into updating that code as soon as possible.", "num_user_post": " 401", "author": "cstapels"}, {"date": "August 24, 2018 - 4:54 pm", "content": "@JasonW, Thank you for looking into my reconnect function - it's been extraordinarily helpful in improving the MQTT broker connection quality!@cstapels, Thanks for providing feedback on that - glad could I could assist!", "num_user_post": " 4", "author": "JaredP94"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/i-cant-format-the-values-in-a-visualisation/", "posts": [{"date": "August 9, 2018 - 8:22 am", "content": "Hello I have crated a couple of visualisations but several of them show BIG values at the sides. I need only ( and at most) 2 decimals.What is the cause of this weird behaviour?How can I get this right?Thanks,Jos", "num_user_post": " 7", "author": "Jos"}, {"date": "August 9, 2018 - 1:55 pm", "content": "If it is a  MATLAB plot, you can use ytickformat('%.2f')  If you are using thingSpeakPlotYY, then you will have to reformat the data in your channel before plotting.  You can read it and then use round(X,2), before plotting.", "num_user_post": " 401", "author": "cstapels"}, {"date": "August 12, 2018 - 4:10 am", "content": "Thank for this hint, cstapels.To start with: I have set the 'ROUNDING' in the ThingSpeak channels to '2', I assumed that this would be sufficeint to solve the problem...... Well, it doesn't.So I tried your ytickformat('%.2f') suggestion.But it is not working (yet).I have two Y-axis, one on the left and one on the right side of the chart. How do i distinguish between these two, and how shoud i put this in the my code?The code (so far) is:% Channel ID to read data fromreadChannelID = 531447;% ORP Field IDORPFieldID = 4;% Temperature Field IDTempFieldID = 2;% Channel Read API Key% If your channel is private, then enter the read API% Key between the '' below:readAPIKey = '#############'; [data,timeStamps] = thingSpeakRead(readChannelID,'Fields',[ORPFieldID TempFieldID], ...                                               'NumPoints',900, ...                                               'ReadKey',readAPIKey);ORPData = data(:,1);% Read Temperature DataTempData = data(:,2);thingSpeakPlotYY(timeStamps,ORPData,timeStamps,TempData, 'Ylabel1','ORP', 'Ylabel2','Celsius');", "num_user_post": " 7", "author": "Jos"}, {"date": "August 14, 2018 - 5:19 pm", "content": "Since you are using the thingSpeakPlotYY, then yTickFormat() will not work.Here is a good example using thingSpeakPlotYY()https://www.mathworks.com/help/thingspeak/Plot-Temperature-and-Wind-Speed-on-Two-Different-Axes.htmlAfter you read the data from your thingSpeak channel, then use the round function.  dataRound=round(data,2);Then use thingSpeakPlotYY with dataRound.", "num_user_post": " 401", "author": "cstapels"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/readintfield-returns-different-results-than-data-export/", "posts": [{"date": "August 4, 2018 - 4:10 pm", "content": "When I export the data from field1 of one of my channels, it shows no entry for that field (which is as it should be, since uploading data via data import of a file, while occurring without error, does not result in actually putting the data into the field -- but that's a separate problem).However, when I use a readIntField call it returns a value of -1 with a code of 200 (i.e., operation occurred without error).Anyone have an explanation?", "num_user_post": " 11", "author": "wadevcamp"}, {"date": "August 6, 2018 - 8:09 am", "content": "I see your other post for the first problem (with data upload.) For the readIntField question, according to the library documentation, it should return 0 if there is text data or no integer.  Is your channel public?  Can you share the channelID and the field you are reading from?", "num_user_post": " 401", "author": "cstapels"}, {"date": "August 6, 2018 - 1:51 pm", "content": "It is not public, but if there is a way for you to access a private channel, let me know what it is.So, even though I can now upload data to the channel, it still seems as though a channel field that contains nothing (i.e., is blank/null) returns a value of -1 when retrieved via readIntField vs. a value of blank/null when retrieved via a data export.", "num_user_post": " 11", "author": "wadevcamp"}, {"date": "August 6, 2018 - 2:53 pm", "content": "On the sharing tab of your channel, you can share your channel with  at MathWorks.com.  I will have access to view your data but not write access to add any data.You can revoke it at any time.", "num_user_post": " 401", "author": "cstapels"}, {"date": "August 7, 2018 - 2:47 pm", "content": "You didn't give me a complete email address with which to share the channel....I assumed you email to be cstapels at mathworks dot com, and shared the channel to that email.Channel id is 535544, field is 3, and it is blank acc. to the data export utility.", "num_user_post": " 11", "author": "wadevcamp"}, {"date": "August 9, 2018 - 3:32 pm", "content": "I just viewed the data in your channel.  It looks like you recently updated it (possibly clearing it), but there was no data in the channel.  readIntField() is a member of the thingSpeak communication library for arduino and esp8266.That function does not return the HTTP code, unless you use getLastReadStatus().  Is that what you are doing to get the 200 code?  This topic is ThinkSpeakAPI, which is related to but different from the thingSpeak communication library.  Can you clarify what you are trying to do exactly?  Are you using hardware to read from your channel?", "num_user_post": " 401", "author": "cstapels"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/help-no-more-datas-in-thinspeak/", "posts": [{"date": "August 6, 2018 - 8:38 am", "content": "Hi, since today i have no visible Datas in the Private View and App.If i export the Datas i have it all. Any Ideas ?Thxsniper", "num_user_post": " 3", "author": "sniper"}, {"date": "August 6, 2018 - 8:55 am", "content": "Use the pencil icon (next to the 'x') to change the axis settings and the number of entries or days.  If you have data, but not recent data, the thingSpeakPlot may not show what you want automatically.", "num_user_post": " 401", "author": "cstapels"}, {"date": "August 6, 2018 - 8:58 am", "content": "no hats not the problem. i changed nothing, and it was working until today. i also have no datas in the App since today.", "num_user_post": " 3", "author": "sniper"}, {"date": "August 6, 2018 - 10:36 am", "content": "Is the channel public?  Can you share your channel ID?  I can take a look.", "num_user_post": " 401", "author": "cstapels"}, {"date": "August 6, 2018 - 11:45 am", "content": "I believe a whole bunch of NULL entries are being written to the channel roughly every minute. You can see this on the Channel's 'Number of entries' item if you refresh the page. You can also verify this by downloading the data from your channel from the 'data import/export' tab of your channel.I suspect your python code has a bug where some variable overflowed or is not getting set correctly before it is written to ThingSpeak.", "num_user_post": " 225", "author": "Vinod"}, {"date": "August 7, 2018 - 1:34 am", "content": "you're right,  since i have problems, it seems like they are empty entries.OK, looks like the script is bad now, or the sensor is not working properlythanks Guys", "num_user_post": " 3", "author": "sniper"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/data-import-not-forking/", "posts": [{"date": "August 4, 2018 - 9:52 am", "content": "(Title should be 'Data Upload not Working')I tried to upload the following, but got msg 'The data in the file does not contain values for the datetime column. Do you wish to continue?'. Strange, since it's the same format I used a few days ago!!datetimefield32018-08-02T15:04:091If I say 'yes' to the 'continue?' question, I get 'The uploaded file is not in a supported format.'Also, an error banner says 'The uploaded file is not in a supported format. See Channel Data Import for more information.', but the hotlink (on Channel Data Properties) takes me to a page titled 'Channel Properties', which doesn't address the format issue.Any help would be greatly appreciated!  (I either need to get this working soon or switch to another IoT platform with more consistently reliable functionality. Except for this problem, I like the TS functionality!!)", "num_user_post": " 11", "author": "wadevcamp"}, {"date": "August 4, 2018 - 12:28 pm", "content": "Here I am a few hours later...  I uploaded the exact same file, but this time the uploaded file format was accepted!!  I'd love to know why it was not accepted before -- as I said above, I need to be convinced that this functionality is consistently reliable before committing to go into production with TS -- any help in understanding this apparent inconsistency would be appreciated.Unfortunately, the upload did not result in getting the field values assigned.I uploaded the following...datetime                         field32018-08-02T15:04:09             1...and the result was this...created_at                                entry_idfield1field2field3field4field52018-08-02 20:04:09 UTC              1Anyone know what's going on here??  I need to know how to get field3 to have a value of 1.  (The result has the entry_id=1, and all the data fields are blank.)", "num_user_post": " 11", "author": "wadevcamp"}, {"date": "August 6, 2018 - 8:23 am", "content": "Are you using commas in your data file?The Channel properties page has a section on Data import at the bottom.Here is a csv file, created in excel, opened in notepad that results in successful data written to field 3.datetime,field32018-08-01T19:03:48-05:00,202018-08-02T19:03:48-05:00,212018-08-02T08:56:13,22Can you try my file and see what happens?  I've found it to be very consistent, once you get the format correct.Do you need to upload a lot of csv data?  The csv upload requires gui interface, which is harder to use programatically.  If you are considering commercial use, you might think about the REST API Write data or bulk write Data .https://www.mathworks.com/help/thingspeak/writedata.htmlhttps://www.mathworks.com/help/thingspeak/bulkwritejsondata.html", "num_user_post": " 401", "author": "cstapels"}, {"date": "August 6, 2018 - 1:31 pm", "content": "SOLVED!I had a (non-obvious) space leading the 'field3' header.  -----   It's the little things that always get you.........I want to be able to upload so that I can set/change parameters from any web browser (i.e., with no program interface).", "num_user_post": " 11", "author": "wadevcamp"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/data-import-file-format-example/", "posts": [{"date": "July 30, 2018 - 8:19 pm", "content": "I'm new to ThingSpeak, so please excuse the simple question.Have been trying to upload CSV data into a TS channel, but always get 'Unable to parse data in the file. Ensure that the data in the file being uploaded contains required columns.'I've researched what the format should be (i.e., datetime,field1,field2,field3,field4,field5,field6,field7,field8,latitude,longitude,elevation,status) and my latest version of data attempting to upload is a text file with one line that reads...1532976301,'30','10','1','20','10',0.0,0.0,0,'statusW'Suggestions????", "num_user_post": " 11", "author": "wadevcamp"}, {"date": "August 1, 2018 - 10:50 am", "content": "Your csv file needs a header row with the column titles.Here is an example.datetimefield1field2field3field4field5field62018-08-02T12:34:56-05:0011.21.31.41.50.041776095I assume you researched this page:https://www.mathworks.com/help/thingspeak/channel-data-import.html Ill look into making it more clear that you need the titles. Thanks for the feedback.", "num_user_post": " 401", "author": "cstapels"}, {"date": "August 1, 2018 - 3:59 pm", "content": "Thanks -- I read that page but not closely enough -- didn't get that I needed the headers.I tried the following upload but says 'unable to parse data in the file'  -- suggestions??datetime               field38/1/2018 14:53        0Also, tried '2018-08-01T19:03:48-05:00' in the date/time stamp field -- still said 'unable to parse'Also, what is the date/time stamp used for?  Can it be anything I want?", "num_user_post": " 11", "author": "wadevcamp"}, {"date": "August 2, 2018 - 9:36 am", "content": "I used excel to create the csv file. I used your data and it worked, though the datetime format I showed you originally (edited now) was wrong so it switched the month and day.   Do you have commas in your file?  The datetime is used for the 'created_at' field for your data, and it is how your data is indexed so it can only be a valid date time.", "num_user_post": " 401", "author": "cstapels"}, {"date": "August 2, 2018 - 10:07 am", "content": "Thanks.  I can now upload without getting an error (used an Excel csv file instead of a Notepad text file), but the upload does not have the expected result.I uploaded the following:datetime field32018-08-02T08:56:131and then downloaded the channel's field 3 and got the following (i.e., field3 is blank):created_atentry_idfield38/2/2018 8:451", "num_user_post": " 11", "author": "wadevcamp"}, {"date": "August 2, 2018 - 2:54 pm", "content": "Is the time change from 8:56 to 8:45 repeatable?  Can you try the data export button on the Private view tab of your channel?  (instead of the Data Import / Export tab)I see a value of 1 in the data you posted.  Perhaps your  axis for the field 3 plot are preventing you from seeing the data?Here is the csv file created in excel, opened in notepad.  All three data points were successfully imported into my channel.datetime,field32018-08-01T19:03:48-05:00,202018-08-02T19:03:48-05:00,212018-08-02T08:56:13,22I really appreciate your feedback here, file formats and especially time formats are always difficult to describe correctly.", "num_user_post": " 401", "author": "cstapels"}, {"date": "August 2, 2018 - 4:07 pm", "content": "", "num_user_post": " 11", "author": "wadevcamp"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/understanding-bulkupdate-code-responses/", "posts": [{"date": "June 22, 2018 - 7:08 am", "content": "Hello.I have been testing the bulk update feature using Arduino MKR 1400 GSM during a few months. I have done about 4000 tests sending parameters to Thingspeak platform like temperature, humidity, etc.. Once I have finished my code, I think my code is very stable, but I have noticed that around a 2% of the requests, aren't plotted in the charts. In order to resolve this problem, I have developed a very simple data logger to log every response code returned by the ThingSpeak server.According to the results logged, I can see that the server sometimes returns a '202' code, a '0' code, and sometimes returns '1' code. In all these cases, the request has been stored in the database and plotted in the corresponding chart. The problem is that sometimes the code returned by the server is a '0 code', or '505 code', and the request is lost, and is not showed in my channel.I don't understand what is the meaning of some codes. For example, every time I received the code 202 or 1, the request is successful stored, but when I receive a '0 code', sometimes (very few times) the request is not stored. At the moment I'm working with only with four devices, but in the future I will work with 22 devices, so this error rate can increase, so this can supose a very serious problem for me.This is the part of code where I send data to the server and receive the corresponding code:/*** //////////////////////////////////////////////////////////////* bulkUpdate* //////////////////////////////////////////////////////////////**/void bulkUpdate(int indexIni, int IndexFin) {int ldata = getlengthData(indexIni, IndexFin);String potencial = '';client.stop();if (client.connect(server, port)) {Serial.println('[-] Enviando datos !!!! ');client.println('POST /channels/' + String(CHANNEL)+'/bulk_update.json HTTP/1.1');client.println('Host: api.thingspeak.com');client.println('User-Agent: Arduino MKRGSM');client.println('Connection: close');client.println('Content-Type: application/json');client.print('Content-Length: ');client.print(ldata);Serial.print('[>] Longitud cadena: ');Serial.println(ldata);client.print('');potencial = String(potenciales[indexIni], 3);client.print('{'write_api_key':'' + String(API_KEY) +'','updates':[{'delta_t':0,'field3':' + potencial + '}');for (int i = indexIni +1 ; i < IndexFin-1; i++){potencial = String(potenciales[i], 3);client.print(',{'delta_t':2,'field3':' + potencial + '}');}client.print(getLastString());client.print(']}');//Comprobacion codigo respuesta servidordelay(250);String rs = 'Respuesta bulkUpdate: ';client.parseFloat();rs += String(client.parseInt());Serial.println(rs);} else {failedCounter++;Serial.println('Connection to ThingSpeak Failed ('+String(failedCounter, DEC)+')');Serial.println();}}thank you very much", "num_user_post": " 16", "author": "eplantes"}, {"date": "June 22, 2018 - 9:19 am", "content": "Thanks for the statistics and detective work!  This helps us formulate better code for error tracking.  I suggest you increase the content you are looking for in the error code.  See the last function about getting the full response in this example (I think its section g)https://www.mathworks.com/help/thingspeak/MoistureMonitor.htmlWhen you parse the response for just a number, you are losing a lot of information.  If you successfully connect to the bulk update API, it will return a json formatted response.  When you parse and get a zero, that might mean it did not find a number at all in the response.  When it gives a 1, that is probably not the HTTP response.  The regular write endpoint can respond with a 1, but not bulk.I suspect you are having a connection failure or buffer overflow for those few posts.  Make sure your time stamps have integer values of seconds just in case.I just managed to see 43 successful posts in a row, at 1  minute each.  If I use your 2%, the probability of that is still about 42%, so ill keep logging and see, just in case.If you catch the full response when you get a 0 or 1, can you share what you saw?505 is definitely a bad format, but still could be a buffer issue.", "num_user_post": " 401", "author": "cstapels"}, {"date": "June 23, 2018 - 5:26 am", "content": "Hi cstapels!  You always respond to me very quickly \ud83d\ude42 thanks.As you said in the previous message, I guess that the '0 codes' and '1 codes' may mean that some information is lost in the process. The bulk update feature uses a json format, so the Content-type must be 'application/json'. For this reason, my code use exactly the same mechanism explained in the tutorial 'Bulk-Update a ThingSpeak Channel Using an Arduino MKR1000 Board or an ESP8266 Board'.The part or code is this:###############################  ........................  delay(250); //Wait to receive the response  client.parseFloat();  String resp = String(client.parseInt());  Serial.println('Response code:'+resp); // Print the response code. 202 indicates that the server has accepted the response............................###############################I think this is not the best way to manage the response, because the format response is not a simple code, in fact is in json format. I am right?I will investigate more about that.On the other hand, I have a doubt about your previous message when you say ... 'The regular write endpoint can respond with a 1, but not bulk.' ... What Does it mean???Thanks for all", "num_user_post": " 16", "author": "eplantes"}, {"date": "June 25, 2018 - 10:14 am", "content": "Sorry I took the weekend off..Yes, the example does not do a good job of parsing the response from the server for all responses (specifically, the section you highlighted.) You should look at the moisture example that I linked  to see a better way to parse the response and display it all.The response from the bulk write JSON REST API call is in JSON format.  That's what you use when you write '/bulk_update.json 'The response from the write data API call is not necessarily in JSON format.  (You would use https://api.thingspeak.com/update.json) That I why you can get a 1 or 0 or a number indicating the last entry written from the write API call.https://www.mathworks.com/help/thingspeak/writedata.html", "num_user_post": " 401", "author": "cstapels"}, {"date": "June 26, 2018 - 5:20 pm", "content": "Hello.I have been testing the moisture example linked in the previous message but I still have some problems to receive the server response as I expected.This is the method showed in the point g of the example:#########################################String getResponse(){  String response;  long startTime = millis();  delay( 200 );  while ( client.available()  0 );    }  client.stop();  return response;}#########################################When my program calls this method, the response never is the same, in fact it seems that the response is cut or incomplete. - Sometimes the response shows strange characters, for example '???' - Sometimes I receive a 'HTT', or 'HTTP/' or 'HTTP/1.1', and 'HTT/1.1 202 Accepted'I have seen in some forums that the cause of that may be the header 'Connection:  close', so I have changed 'client.available' by 'client.connected'. Now is something like that:###########################################String getResponse(){  String response;  long startTime = millis();  char charIn;  while ( client.connected() && (( millis() - startTime ) < TIMEOUT ) ){      if  (client.available()) {          charIn = client.read();          delay( 1 );          response += charIn();      }  }  client.stop();  return response;}###########################################Through this function the response is longer and it the famous code 202 is shown. But only a few times, the response is still incomplete and the code is not shown. I have increased the TIMEOUT from 5000 to 10000. I log every response in an SD card, so it will let me know if this change goes to right direction or not.If anyone has some idea to resolve that.... thanks", "num_user_post": " 16", "author": "eplantes"}, {"date": "June 28, 2018 - 4:11 pm", "content": "Is the response incomplete in the same way as it was before?  I have seen a similar issue where no response is returned.  Perhaps in your case the response buffer may be filled with parts of the previous response? I would suggest adding 200-500 ms of delay after the post but before you call getResponse.  You could alternatively increase the 200 ms that is there in the getResponse function now by a little bit.  What is the frequency of the failures (partial response) with respect to the successes ?  I think 10 s timeout is long, but please let us know how it went.", "num_user_post": " 401", "author": "cstapels"}, {"date": "June 29, 2018 - 5:13 am", "content": "Hello cstapels.With the new method getResponse(), the response is still incomplete but  the code response is showed; so it let me know if the request is successful or fails.At the moment I can't attach examples, because the device is still running . I'm  waiting for it something wrong happens and log the results in my SD card. From my point of view is very hard to test it, because only one request of every 500 (in best of cases 600 or 300 in worst) fails.On another hand I will define a delay before call to getResponse() method and I will check it again.As soon as I have the results I will post it.thank you", "num_user_post": " 16", "author": "eplantes"}, {"date": "June 29, 2018 - 9:00 am", "content": "eplantes,Thanks for your work to help make sure the bulk update is faithful!Since we test the bulk update internally for consistency, I suspect the 1 in 500 times when it fails are connectivity issues.  If this is true, you could consider re-posting the failed data when the response returned is not successful.I look forward to your results.", "num_user_post": " 401", "author": "cstapels"}, {"date": "July 31, 2018 - 12:02 pm", "content": "Hello.I already have the results of my tests. My device has been working arround a month, sending requests every 8 minutes. The results shows like some errors has been caused by connectivity issues, but others shows internal errors . I guess this can be caused by problems of service availability. The results are as follows:TOTAL REQUESTS:                                                 4730---------------------------------------------------------------------------ERRORS---------------------------------------------------------------------------'FAILED connecting to server':                 54 errors'500 Internal Server Error':                         26 errors'502 Bad Gateway':                   6 errors'503 Service Unavailable'                          4 errors'\u00ff' or no response                  3 errorsThe errors showed as 'failed connecting' can be caused by connectivity problems.  On the other hand, other kind of errors like '500 internal error, 502 Bad gateway and 503 Service Unavailable' are been reported to the support team.  I have opened an issue explaining this and the large internal errors returned by the server . The support team has told me that this is a known issue and its under investigation.In my sckech, when the response returned is not successful I re-post the data again (sometimes several times). Using this method, I have reduced the errors in the the most of cases. In fact, only 4 requests of the total has failed. I want to share this information with us because I think it can be useful.Thank you very much for your help. !!!", "num_user_post": " 16", "author": "eplantes"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/graph-empty-no-data-displayed/", "posts": [{"date": "June 27, 2018 - 4:00 am", "content": "The use of String type uses a lot of the limited Uno memory leading to instability.This issue is now resolved to the point where I am now getting State : 200 ie successful data upload to Thingspeak.The current solution has been to free up memory in the Uno using the F function ie Ciao.print(F('State :');More work on the more efficient use of String type should also improve performance.I am not getting any graphical display on ThingSpeak.My Arduino Wifi is sending simple test data according to the Ciao WiFi Console and I get a Response State 400 ie an ERROR but whyThe data is field1 =100.0I have an API keyI am using the Ciao library which is in Arduino IDEI am uploading every 60secmy code...#define CONNECTOR ='rest'#define SERVER_ADDR = 'api.thingspeak.com'#define APIKEY_THINGSPEAK= 'xxxxx  ...'....String uri = '/update?api_key=';  uri += APIKEY_THINGSPEAK;  uri += '&field1='; float kWh = 100; //test data  uri += String(kWh);  Serial.print(F('thingspeak called uri='));Serial.println(uri);  Ciao.println('Send data on Thingspeak Channel');  CiaoData data = Ciao.write(CONNECTOR, SERVER_ADDR, uri);  if (!data.isEmpty()){    Ciao.println('State: ' + String(data.get(1)) );    Ciao.println('Response: ' + String(data.get(2)) );  }  else {    Ciao.println('Write Error');  }", "num_user_post": " 12", "author": "mac"}, {"date": "June 28, 2018 - 4:01 pm", "content": "If you get a successful write with a string (200), do you also see data in your channel then?My understanding is that it stopped working when you changed to a new function.  From the code above, it still appears that you are using the String class.If you get a 400 error with the Ciao.print, but not otherwise, then I would look at the output form the Ciao.print function.  Is it possible to put the output on the serial monitor?Are you able to update you channel using a browser GET command?  Replacethe api key with your channel write API key.https://api.thingspeak.com/update?api_key=XXXXXXXXXXXXXXXX&field1=1", "num_user_post": " 401", "author": "cstapels"}, {"date": "July 1, 2018 - 11:19 am", "content": "My main program and the Thingspeak function code below use from Arduino IDE compilerSketch uses 17494 bytes (54%) of program storage space. Maximum is 32256 bytes.Global variables use 1521 bytes (74%) of dynamic memory, leaving 527 bytes for local variables. Maximum is 2048 bytes.The code now only uses C stringsThe program runs without any apparent issues on an Uno WiFi Dev Ed displaying data on an LCD, Serial.monitor (if usb attached) and WiFi Console and State 200It uploads one field to Thingspeak each 30 secs.However the Ciao.write  irregularly/periodically returns data.isEmpty()  either for one or several writes or for 20 minutes or more! see chart attachedWhen isEmpty is true the URL (uri) is displayed on Serial monitor. It is always correctly constructed.There are no Response errors 400 etcShould I be getting the amount of upload write fails?void uploadtothingspeak(){    char uri[45] = '/update?api_key=myapi16chars&field2=';// need to re initialse uri as strcat increments 44+0 chars!    char buffer [5] ='';  //0-1000 4 char plus 0    itoa (pulse_count1_Wh,buffer,10);//convert int to char array DEC    Serial.print(F('buffer ='));Serial.print(buffer);Serial.println(F(' Wh'));    strcat(uri, buffer);    //concatenant uri and buffer (pulse_count1_Wh) 40+4+0    //Serial.println(uri);    Ciao.println(F('Send data on ThingSpeak Channel'));    CiaoData data = Ciao.write(CONNECTOR, SERVER_ADDR, uri);    if (!data.isEmpty())    {      String getdata_1 = data.get(1); String getdata_2 = data.get(2);      Ciao.print( F('State: '));//Ciao.println( String (data.get(1)) );      Ciao.println(getdata_1);      Ciao.print( F('Response: ')); //Ciao.println( String (data.get(2)) );      Ciao.print(getdata_2);      Ciao.print( F('  '));Ciao.print(buffer);Ciao.println( F('Wh'));      Serial.print(F('State ='));Serial.print(getdata_1);      Serial.print(F(' Response ='));Serial.println(getdata_2);      if (getdata_1 != '200')   //State : 200 is correct data        {          Serial.println(uri);        }    } else {      Ciao.print(F('Write Error: uri ='));Ciao.println(uri);      Serial.print(F('Write Error uri ='));Serial.println(uri);    }}", "num_user_post": " 12", "author": "mac"}, {"date": "July 2, 2018 - 3:05 pm", "content": "There should definitely not be any upload write fails. I wonder if it is possible that the Ciao.write function returns empty if it fails to connect.  Are you sure the device has a strong signal at all times?  Can you share the library that you are using that has the Ciao function in it?  It looks like the check on data being empty comes before you have even sent any data to ThingSpeak.  Thus I do not think the empty result is due to formatting of the request issues, or a write fail on the ThingSpeak side.  I am going to guess that you are not waiting long enough for a server response.  You could consider putting a delay in between these two linesCiaoData data = Ciao.write(CONNECTOR, SERVER_ADDR, uri);if (!data.isEmpty())or something likeCiaoData data;while(data.isEmpty){data = Ciao.write(CONNECTOR, SERVER_ADDR, uri);delay(300);}", "num_user_post": " 401", "author": "cstapels"}, {"date": "July 3, 2018 - 3:52 am", "content": "Further to this issue are also a few writes sometimes to the channel  but which are reported as empty which suggests a timing problemThe Arduino library containing Ciao is public domain UnoWiFiDevEd.hmeanwhile I will try your while(...  suggestion.", "num_user_post": " 12", "author": "mac"}, {"date": "July 3, 2018 - 8:42 am", "content": "Found the library, thanks.  Let us know how it goes.  Id suggest trying just a delay before you add the while loop.", "num_user_post": " 401", "author": "cstapels"}, {"date": "July 5, 2018 - 3:11 am", "content": "Thanks for your suggestions.I am using your while(... code suggestion and getting reliable writes to channel.Note that Ciao function is data.isEmpty()  and not data.isEmpty.However there are occasions when there is a correct write to channel ie State = 200 but where the received Response =0. Another timing issue? But it is not a fatal issue.Thingspeak called :buffer =313 WhState =200 Response =14455Thingspeak called :buffer =316 WhState =200 Response =14456Thingspeak called :buffer =320 WhState =200 Response =0Thingspeak called :buffer =324 WhState =200 Response =14458Thingspeak called :buffer =328 WhState =200 Response =14459Thingspeak called :buffer =332 WhState =200 Response =0Thingspeak called :buffer =336 WhState =200 Response =0Thingspeak called :buffer =340 WhState =200 Response =14463 (should State not be called Status as Rest is stateless?)Timing appears very important as additional code often/may cause a Uno restart.I don't have a full understanding of the limited Uno memory processes which require (?) careful management.Sketch uses 17526 bytes (54%) of program storage space. Maximum is 32256 bytes.Global variables use 1517 bytes (74%) of dynamic memory, leaving 531 bytes for local variables. Maximum is 2048 bytes.This uploadtothingspeak function is called about each 30secs from an Arduino main program (loop) which has a routineattachInterrupt(pin_irq, IRQcounter, FALLING);  // D2 triggered by photo cell . It is a small simple(?) routine with only a few code lines but can be called every 1 to 120+ secs .At an interrupt the main loop execution including Ciao... calls is suspended. There is no direct code link between the interrupt routine and the upload fn.void uploadtothingspeak(){    char uri[45] = '/update?api_key=myapikeyof16chars&field2=';// need to re initialse uri as strcat increments each time 44+0 chars!    char buffer [5];  //0-1000 4 char plus 0 for field write to channel    buffer[0] ='0';    char getdata_1[4]; //for State 200, 400 etc    getdata_1[0] ='0';    char getdata_2[8]; //for Response 0-9,999,999    getdata_2[0] ='0';    itoa (pulse_count1_Wh,buffer,10);//convert int to char array DEC    Serial.print(F('buffer ='));Serial.print(buffer);Serial.println(F(' Wh'));    strcat(uri, buffer);    //concatenate uri and buffer (pulse_count1_Wh) 40+4+0          //Serial.println(uri);    Ciao.println(F('Send data on ThingSpeak Channel'));          //CiaoData data = Ciao.write(CONNECTOR, SERVER_ADDR, uri);    CiaoData data;    while(data.isEmpty())    {      data = Ciao.write(CONNECTOR, SERVER_ADDR, uri);      delay(300);    }    delay(100);    if (!data.isEmpty())    {      strcpy(getdata_1, data.get(1)); //get State and copy char[4]      //delay(100);      strcpy(getdata_2, data.get(2)); //get Response      Ciao.print( F('State: '));//Ciao.println( String (data.get(1)) );      Ciao.println(getdata_1);      Ciao.print( F('Response: ')); //Ciao.println( String (data.get(2)) );      Ciao.print(getdata_2);      Ciao.print( F('  '));Ciao.print(buffer);Ciao.println( F('Wh'));      Serial.print(F('State ='));Serial.print(getdata_1);      Serial.print(F(' Response ='));Serial.println(getdata_2);      char success[] ='200';//State : 200 is correct data      if (strcmp(getdata_1, success) != 0)        {          Serial.print(F('not State200 '));Serial.println(uri);        }    } else {      Ciao.print(F('Write Error uri ='));Ciao.println(uri);      Serial.print(F('Write Error uri ='));Serial.println(uri);    }}", "num_user_post": " 12", "author": "mac"}, {"date": "July 10, 2018 - 9:21 am", "content": "From the response numbers, it appears that the update is happening, even though you return 0.   I think this is consistent with what you said above.If there is an interrupt, it might be interrupting the response buffer getting filled?  Or perhaps the response is still timing out before it gets the information.  You have 100 ms of delay commented out in the above, that could be another part of it.The full memory for the uno is not usually as much a problem as the amounts of memory that are allocated for a specific buffer, such as the http write buffer.  Sometimes those sizes are set in the underlying library.", "num_user_post": " 401", "author": "cstapels"}, {"date": "July 11, 2018 - 2:03 pm", "content": "State =200 Response =30621Thingspeak write function called uploadint =30002 buffer =270 WhState =503 Response =This website is under heavy loadWe're sorry, too manynot State=200 /update?api_key=my key&field2=270This message from Thingspeak might explain a few things. I have seen it partly before  but you a char[18+1] (a REST GET spec) to see the complete messageI am writing to channel each 30 secsWhat is the minimum grade of service for Thingspeak?", "num_user_post": " 12", "author": "mac"}, {"date": "July 12, 2018 - 11:10 am", "content": "No channel writes for 30mins! and erratic before and the non writes occur regularly.State(get1) =        and Response(get2) =        (ie no data point write reference number)Even writes to channel once per 60secs makes no difference.Why should I purchase an account?I need to know the Thingspeak performance standards so that I can develop my app appropriately.My code has always appeared to execute correctly. It is now modified a little.", "num_user_post": " 12", "author": "mac"}, {"date": "July 12, 2018 - 11:14 am", "content": "", "num_user_post": " 12", "author": "mac"}, {"date": "July 13, 2018 - 4:42 am", "content": "Unfortunately, I am unable to see your screenshot. There are no known issues at this time and I confirmed that I am able to consistently store data in my ThingSpeak channel using the API.If you are developing your own app that integrates with ThingSpeak, I would strongly urge you to read and Terms of Service and Privacy policy linked in the footer of https://thingspeak.com as they have information that may be relevant.", "num_user_post": " 225", "author": "Vinod"}, {"date": "July 13, 2018 - 12:12 pm", "content": "I have disabled the attachInterrupt(... routine and am writing fixed values to channel fields 1 2 & 3 yet the issue persists.There are still times when there is no write to channel for 15-20mins nor any server error messages.There are many times when there is no State (GET(1)  or Response (GET2) FROM THE Server although the write to channel is successful.The screen shot was taken after the events which started at 23:15 GMT +0800 and ceased at 23:30 GMT+0800 (Perth Australia) on the 13th July 2018The Serial Monitor log below shows the start of the 'no writes'The screen shot shows the no writes and this is the relevant code    CiaoData data;    data = Ciao.write(CONNECTOR, SERVER_ADDR, uri);   delay(300);  //this delay does not seem to make any difference even if several times longer.    if (!data.isEmpty())    {      count_no_state = 0;      strcpy(getdata_1, data.get(1)); //get State and copy char[19]      Serial.print(F('State ='));Serial.print(getdata_1);      strcpy(getdata_2, data.get(2)); //get Response      Serial.print(F(' Response ='));Serial.println(getdata_2);I have a ADSL2+ internet connection which provides about 5Mbit/s downloads. My PC is running Mac OS 10.11.6 Thingspeak write function called uploadint =30002 buffer_1 =5 buffer_2 =500 Wh buffer_3 =500 avg Wcount_no_state =3Thingspeak write function called uploadint =30001 buffer_1 =5 buffer_2 =500 Wh buffer_3 =500 avg WState =200 Response =34316Thingspeak write function called uploadint =30001 buffer_1 =5 buffer_2 =500 Wh buffer_3 =500 avg WState =200 Response =34317Thingspeak write function called uploadint =30002 buffer_1 =5 buffer_2 =500 Wh buffer_3 =500 avg Wcount_no_state =1Thingspeak write function called uploadint =30002 buffer_1 =5 buffer_2 =500 Wh buffer_3 =500 avg Wcount_no_state =2Thingspeak write function called uploadint =30003 buffer_1 =5 buffer_2 =500 Wh buffer_3 =500 avg Wcount_no_state =3Thingspeak write function called uploadint =30002 buffer_1 =5 buffer_2 =500 Wh buffer_3 =500 avg Wcount_no_state =4Thingspeak write function called uploadint =30002 buffer_1 =5 buffer_2 =500 Wh buffer_3 =500 avg Wcount_no_state =5Thingspeak write function called uploadint =30003 buffer_1 =5 buffer_2 =500 Wh buffer_3 =500 avg Wcount_no_state =6Thingspeak write function called uploadint =30001 buffer_1 =5 buffer_2 =500 Wh buffer_3 =500 avg Wcount_no_state =7Thingspeak write function called uploadint =30004 buffer_1 =5 buffer_2 =500 Wh buffer_3 =500 avg Wcount_no_state =8Thingspeak write function called uploadint =30003 buffer_1 =5 buffer_2 =500 Wh buffer_3 =500 avg Wcount_no_state =9Thingspeak write function called uploadint =30003 buffer_1 =5 buffer_2 =500 Wh buffer_3 =500 avg Wcount_no_state =10", "num_user_post": " 12", "author": "mac"}, {"date": "July 13, 2018 - 12:13 pm", "content": "", "num_user_post": " 12", "author": "mac"}, {"date": "July 16, 2018 - 9:42 pm", "content": "I have changed the Uno WiFi setting from AP+STA to STA only.The channel writes  now appear to be 100%. Success!Why would AP+STA  be the cause of  periodic no writes to channel? However there are still many frequent State (get(1) ='' and Response (get(2)) =''.Disabling the attachInterupt(...  code has no effect.simple code works OKCiaoData data;data = Ciao.write(CONNECTOR, SERVER_ADDR, uri);if (!data.isEmpty()){  strcpy(getdata1, data.get(1)); //get State", "num_user_post": " 12", "author": "mac"}, {"date": "July 17, 2018 - 4:15 pm", "content": "Fortunately the images are working again.  I suspect when you set the device to work as an access point, the thread that is handling the communication to ThingSpeak gets interrupted somehow and the communication does not complete.  Thank you for posting your solution!Just to be clear, when you get no state and  no  response does your channel still update?  If so, I suspect the function is timing out before the response is sent, but ThingSpeak is still getting the data.  You may be able to add additional delay before the getdata1.If at all possible, I would suggest getting an Ethernet shield for the Uno or an ESP8266 or ESP 32 and using the ThingSpeak communication library .  It handles much of these issues for you.", "num_user_post": " 401", "author": "cstapels"}, {"date": "July 21, 2018 - 11:39 pm", "content": "The graph shows the100%  successful writes to channel  (as +1 or -1), however a significant number of writes have data.isEmpty true. Shown on the graph as -1.Is there an obvious pattern?Variations to the code with delays and or while make no difference. variable declarations as global or local or static also makes no difference. The Uno WiFi runs without crashing and seems quite stable.I note your comments on Ethernet/ESP8266.If a while fn is used then it needs a timeout test else it will loop forever.    strcat(uri, FielD4);//for Response 1 or -1    strcat(uri, Buffer4); //uri now ready for write to channel        //Serial.println();Serial.println(uri);        //Ciao.print(F('Send data on ThingSpeak Channel-'));Ciao.print(F('interval ='));Ciao.println(uploadinterval);        //CiaoData data = Ciao.write(CONNECTOR, SERVER_ADDR, uri);    CiaoData data;    data = Ciao.write(CONNECTOR, SERVER_ADDR, uri);    //delayMicroseconds(3000);   //the results are very similar regardless of delay    if(data.isEmpty()){      Serial.print(F('isEmpty '));      delayMicroseconds(2000);    }    if (!data.isEmpty())    {      strcpy(getdata1, data.get(1)); //get State        //Serial.print(F(' State ='));Serial.print( String (data.get(1)) );      strcpy(getdata2, data.get(2)); //get Response", "num_user_post": " 12", "author": "mac"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/creating-multiple-channels-using-matlab/", "posts": [{"date": "July 20, 2018 - 10:44 am", "content": "Hi everyone,is it possible to create multiple channels in ThingSpeak by writing a matlab script file?thanks in advanceNikolas", "num_user_post": " 3", "author": "teratoulis"}, {"date": "July 20, 2018 - 2:36 pm", "content": "You can use webwrite to make the API call in MATLAB.Have a look at the create channel API.https://www.mathworks.com/help/thingspeak/createchannel.html", "num_user_post": " 401", "author": "cstapels"}]}]}
{"url": "https://community.thingspeak.com/forum/thingspeak-api/page-24/", "threads": [{"url": "https://community.thingspeak.com/forum/thingspeak-api/thingspeakclient-with-node-js/", "posts": [{"date": "January 31, 2016 - 6:13 am", "content": "Hi there,I'm working on a PIR motion sensor connected to an Adafruit Huzzah (ESP8266) which sends its data to a Thingspeak channel. The basic idea is that I show which meeting room is free (no motion detected) using a webapp. For the app I would like to use Node.js and the Thingspeakclient for Node.js. However it does not seem to work, since I receive a null error (debugger: 'throw er; // Unhandled 'error' event'). Can someone tell me what I'm doing wrong or push a bit in the right direction?Much appreciated!Code for attach channel thows null error:var express = require('express');var app = express();var ThingSpeakClient = require('thingspeakclient');var client = new ThingSpeakClient();var yourReadKey = 'MCXHZ8BECFAU1FDJ';var channelID = 79503;client.attachChannel(channelID, { readKey: yourReadKey}, function(err, resp) {    if (!err && resp > 0) {        console.log('update successfully. Entry number was: ' + resp);    }     else {        console.log('There is an error attaching ' + err);    }});", "num_user_post": " 1", "author": "fbossong"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/permanent-database-storage-and-data-retrieval/", "posts": [{"date": "January 20, 2016 - 11:25 am", "content": "Hi, ThingSpeak communityI want to create a large database using thingspeak and retrieve data with arduino + esp8266  wifi module + RFID reader.Suppose that, I manually enter three fields into database - RFID UID code, item name, item cost, such as:04 B6 93 B8   milk    60006C 92 D3 91  bread 75006D 5C 12 2B  toothpaste 45005C DC D1 91  coke 5500this data will be stored in my thingspeak channel.Now, suppose that my device reads UID code - 5C DC D1 91, using its RFID reader. Then, it sends this UID code into thingspeak API via esp8266 module and gets  coke 5500 (item name and cost) in response.So, is this possible using thingspeak? and how can I accomplish it?thanks in advance", "num_user_post": " 1", "author": "Skylordus"}, {"date": "January 20, 2016 - 7:19 pm", "content": "sounds more like a job for an online redis or mongodb service", "num_user_post": " 271", "author": "rw950431"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/parse-table-value-from-url/", "posts": [{"date": "January 11, 2016 - 8:47 am", "content": "HiI am trying to parse table value from url Website url :  http://www.gold-rate.today/ahmedabad-gujarat-india.htmlI am using XPath for string parsingMy parse string : //*[@id='content']/div/div/div[1]/div[3]/div/div/table[1]/tbody/tr[2]/td[2]So thingspeak url is : https://api.thingspeak.com/apps/thinghttp/send_request?api_key=HS3H5FXHDJT3CPU6help me to solve this.Thanks...", "num_user_post": " 1", "author": "dailyappsuse"}, {"date": "January 11, 2016 - 6:35 pm", "content": "This stackoverflow question https://stackoverflow.com/questions/22571267/how-to-verify-an-xpath-expression-in-chrome-developers-tool-or-firefoxs-firebug has some techniques for getting the right syntax for your xpath query.  See also my old post on the same topic http://community.thingspeak.com/forum/thingspeak-apps/why-does-this-xpath-fail/", "num_user_post": " 271", "author": "rw950431"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/ssl-and-security/", "posts": [{"date": "January 7, 2016 - 1:44 pm", "content": "Hi, just wondering if there is any way to connect to thingspeak by SSL or to encrypt and decrypt the data ...I'm new to this just been looking around to see what I might be able to do but the data security comes to mind and I haven't found anything related.thanks", "num_user_post": " 2", "author": "lballaty"}, {"date": "January 7, 2016 - 11:08 pm", "content": "You can connect to the API via https:// to protect your data in transit- is that what you are asking?For example https://au.mathworks.com/help/thingspeak/update-channel-feed.html", "num_user_post": " 271", "author": "rw950431"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/channel-chart-option-slection/", "posts": [{"date": "January 6, 2016 - 4:26 am", "content": "chart option don't have a column to set data time zonehow should i set chart like one point each 30 minutes and data start from 2015-12-28 10:23:19 UTC to 2016-1-4 5:34:03 UTC ?", "num_user_post": " 5", "author": "carryGod"}, {"date": "January 6, 2016 - 10:45 am", "content": "Hi,As you mentioned, the chart options in the channel page doesn't provide a start and end time option for the displayed charts. You can achieve this using either by calling the chart API as below (you will need to change the channel id, field id and the start and end times below:http://api.thingspeak.com/channels/12397/charts/1?start=2015-11-26&end=2015-12-01&timezone=Etc/UTCor by creating a MATLAB Visualization App with code similar to that below:% Define start time for period of interest and set timezonestart_time = datetime('26-Nov-2015 00:00:00', 'TimeZone', 'UTC');% Define end time for period of interest and set timezoneend_time = datetime('30-Nov-2015 11:59:59', 'TimeZone', 'UTC');% Read data from field 1 of channel 12397 for the daterange of interest.[data, time] = thingSpeakRead(12397, 'Fields', 1, 'DateRange', [start_time, end_time]);% Plot the data - note that the visualization is in your local timezonethingSpeakPlot(time, data)", "num_user_post": " 62", "author": "Adarsh_Murthy"}, {"date": "January 6, 2016 - 11:20 pm", "content": "thank you very much", "num_user_post": " 5", "author": "carryGod"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/24-hour-hi-and-low-readings-for-a-specific-field/", "posts": [{"date": "January 6, 2016 - 12:59 am", "content": "I have a working app that display the current temperature and humidity of several locations.I would like to get the Hi and Low values that have occurred during the last 24 hrs.Is there an API call that can give me those specific values only, or do I just need to track them myself in the app?", "num_user_post": " 5", "author": "edcasati"}, {"date": "January 6, 2016 - 3:14 am", "content": "I would investigate the MATLAB Visualizations app within ThingSpeak. I don't have a specific example in mind, but it sounds like a good fit for what you are looking to do.", "num_user_post": " 402", "author": "Hans"}, {"date": "January 6, 2016 - 10:29 am", "content": "Hi edcasati,As Hans mentioned, use the MATLAB Visualization App to visualize the hi/lo values for the last 24 hours. Here is how I have done it in the past:% Read the last 24 hrs worth of humdity data from Field 3 and temperature% data from Field 4 of Channel 12397[data, time] = thingSpeakRead(12397, 'Fields', [3,4], 'NumDays', 1);% Calculate Max temperature and humidity and find the timestamps[mmax, imax] = max(data);maxHumidity = mmax(1);maxTemperature = mmax(2);timeMaxHumidity = time(imax(1));timeMaxTemp = time(imax(2));% Calculate Min temperature and humidity and find the timestamps[mmin, imin] = min(data);minHumidity = mmin(1);minTemperature = mmin(2);timeMinHumidity = time(imin(1));timeMinTemp = time(imin(2));% Plot temperature and Humidityplot(time, data);hold all% Plot maximum valuesplot(timeMaxHumidity, maxHumidity, 'rx')plot(timeMaxTemp, maxTemperature, 'bx')% Plot minimum valuesplot(timeMinHumidity, minHumidity, 'ro')plot(timeMinTemp, minTemperature, 'bo')", "num_user_post": " 62", "author": "Adarsh_Murthy"}, {"date": "January 6, 2016 - 3:45 pm", "content": "Thank you Hans and Adash_Murthy.The answer that you gave me is detailed beyond any reasonable expectations! Thank you!I have ZERO experience using Matlab, and this seems like a good 'Hello World' learning step.", "num_user_post": " 5", "author": "edcasati"}, {"date": "January 6, 2016 - 5:04 pm", "content": "Got it working.Instead of a visualization, I used a Matlab Analysis, plotting the output as High and Low values in separate charts in the same Channel as the original data. So if I am storing 2 values, I need 4 additional fields to store the results of the analysis. Then I can just have my App request the last value for each of 6 fields, and display the data accordingly.The biggest problem that I encountered is figuring out that the 'Write Key' needs to be enclosed in single quotes.I have a separate question about triggering the Matlab analysis, but I will put that in a separate topic.Thanks again for the great help!", "num_user_post": " 5", "author": "edcasati"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/how-to-make-thingspeak-serve-binaries-as-response/", "posts": [{"date": "January 5, 2016 - 12:06 am", "content": "Hi all , i want the following to happen : Whenever a field value in Thingspeak Channel crossses a threashold , the THingspeak should push a binary as response  , how do i do that.Take it in a way like a software update on a remote system , as a particular date passess the Thingspeak should push a binary to it.", "num_user_post": " 3", "author": "hkbiet"}, {"date": "January 5, 2016 - 9:21 am", "content": "Hi hkbiet,ThingSpeak React App allows you to trigger actions based on field values in a channel. For numeric data, the React app allows you to check if the last data value:- is greater than- is greater than or equal to- is less than- is less than or equal to- is equal to- is not equal toa predefined threshold. For further information, refer to this link: http://community.thingspeak.com/forum/thingspeak-api/how-to-make-thingspeak-serve-binaries-as-response/#p2520On detecting a success condition, you can trigger a MATLAB Analysis or ThingHTTP App. Depending on where your binary resides, using either the MATLAB Analysis App or ThingHttp you can push a binary as desired.Thanks,Adarsh", "num_user_post": " 62", "author": "Adarsh_Murthy"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/excel-shows-data-as-text-not-integer/", "posts": [{"date": "January 3, 2016 - 7:27 am", "content": "When I send data to ThingSpeak, entries are being incremented correctly, but they seem to be received as Text not Number, so the Charting does not work and when Data is downloaded into a Spreadsheet it shows as Text.How do I specify numbers instead of text.?Can anyone help a newby?I have edited the code using full words  -return and -newline for readability.Here is a sample of my code:int depth= 100; // for example -real data is collected from a distance measuring deviceString postStr = apiKey;           postStr +='&field1=';           postStr += depth;// ------------------------------------------------------------------------ maybe should be parseInt(depth) ?           postStr += '-return-newline-return-newline';     client.print('POST /update HTTP/1.1-newline');     client.print('Host: api.thingspeak.com-newline');     client.print('Connection: close-newline');     client.print('X-THINGSPEAKAPIKEY: '+apiKey+'-newline');     client.print('Content-Type: application/x-www-form-urlencoded-newline'); // ---- something to change here maybe?     client.print('Content-Length: ');     client.print(postStr.length());     client.print('-newline-newline');     client.print(postStr);     client.print('-return-newline-return-newline');", "num_user_post": " 4", "author": "gyrolen"}, {"date": "January 4, 2016 - 11:20 pm", "content": "Found the problem:Instead ofpostStr += depth; it should be postStr += String(depth, DEC);andpostStr += 'return-newline-return-newline'; is not necessary", "num_user_post": " 4", "author": "gyrolen"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/thinghttp-post-to-pushingbox-pass-value-fields/", "posts": [{"date": "October 30, 2015 - 1:33 pm", "content": "Hi,I am trying to send my last data from my channel fields to my PushingBox scenario. I want to pass my fresh data from my fields.On the PushingBox side i have set up few variables in my body message: '$variable_1$, $variable_2$, $variable_3$'On my ThingSpeak side i have set up ThingHTTP with this:URL: 'http://api.pushingbox.com/pushingbox?devid=[MY PUSHINGBOX DEVICE ID]'HTTP Auth Username: [MY PUSHINGBOX DEVICE ID]HTTP Auth Password:Method: POSTContent Type: application/jsonHTTP Version:1.1Host: api.pushingbox.com-----------------------------------------I tried this:1)URL: http://api.pushingbox.com/pushingbox?devid=%5BMY PUSHINGBOX DEVICE ID]&variable_1='TEST-1'&variable_2='TEST-2'&variable_3='TEST-3'This works and i got notifications with these values. But what i want is not static data but data from my channel fields! So instead of 'TEST-1' i want to have field_1 data and 'TEST-2' i want to have field_2, etc.Probably it has something to do with 'Channel Value Replacements'%%channel_CHANNEL_ID_field_FIELD_NUMBER%% So my URL should look like something like this(but it doesn't work):URL: http://api.pushingbox.com/pushingbox?devid=%5BMY PUSHINGBOX DEVICE ID]&variable_1=channel_[MY CHANNEL ID]_field_1%% &variable_2=channel_[MY CHANNEL ID]_field_1%%&variable_3=channel_[MY CHANNEL ID]_field_1%%But how to use it, could u give me an example.Should i append it in my URL or my body field, where exactly ... example please.Am i missing something?help", "num_user_post": " 3", "author": "mojthingspeakforum"}, {"date": "October 31, 2015 - 7:21 am", "content": "Maybe your second URL is missing the %% at the start of the variable -tryURL: http://api.pushingbox.com/pushingbox?devid=MY PUSHINGBOX DEVICE ID]&variable_1=%%channel_[MY CHANNEL ID]_field_1%% &variable_2=%%channel_[MY CHANNEL ID]_field_1%%&variable_3=channel_[MY CHANNEL ID]_field_1%%If you include all the info in the parameters you probably can changeMethod: POSTtoMethod: GET", "num_user_post": " 271", "author": "rw950431"}, {"date": "October 31, 2015 - 9:57 am", "content": "Hey,i have tried both:1) http://api.pushingbox.com/pushingbox?devid=XXXXXXXXXXXXXXXXXXX&room=livingroom&temperature=%%channel_XXXXXXX_field_1%%&humidity=%%channel_XXXXXX_field_2%%2) Post and Get. I have changed from POST to GET but without result. Could u give me an example of changing info in parameters?", "num_user_post": " 3", "author": "mojthingspeakforum"}, {"date": "November 1, 2015 - 4:19 am", "content": "Does pushingbox have a way to view incoming requests?If not perhaps you can set up a url at  http://requestb.in/  (click on create) then send your requests to there insteadeg  (the 14j2... string will be different for yours)http://requestb.in/14j2jw91?devid=XXXXXXXXXXXXXXXXXXX&room=livingroom&temperature=%%channel_XXXXXXX_field_1%%&humidity=%%channel_XXXXXX_field_2%%The website will display what your program is sending to it and allow you to make changes.   Perhaps thingspeak variable substitution doesnt work in the URL parameters...  If so you may have to put the data in the body and go back to POST.", "num_user_post": " 271", "author": "rw950431"}, {"date": "November 1, 2015 - 2:39 pm", "content": "It works! THANK YOU!\ud83d\ude00I used requestb.in for testing.Changes:URL: http://api.pushingbox.com/pushingbox?devid=XXXXXXXXXXXXXXXXMethod: POSTContent Type: application/x-www-form-urlencodedBody: room=livingroom&temperature=%%channel_XXXXXXXX_field_1%%&humidity=%%channel_XXXXXXXX_field_2%% result is something like this:  ....temperature=33.000001200456&humidity=46.00045660045now i need to limit-format decimals to look something like this'0.00' I know that i can do it from arduino side but what about thingspeak side.format --> %%channel_XXXXXXXX_field_1%%", "num_user_post": " 3", "author": "mojthingspeakforum"}, {"date": "November 1, 2015 - 11:31 pm", "content": "So you confirmed that variable substitution DIDNT happen in the URL parameters?  Thats useful information to know.I suspect there's not much control over the formatting during variable substitution- if you want more control then maybe you have to use a matlab analysis app with the webwrite function.", "num_user_post": " 271", "author": "rw950431"}, {"date": "January 4, 2016 - 3:08 pm", "content": "@mojthingspeakforum   - were you able to get it working with pushingbox?", "num_user_post": " 1", "author": "electronicsguy"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/sim900-without-arduino/", "posts": [{"date": "December 30, 2015 - 8:14 am", "content": "Hi,I am using a SIM900 breakout module that connects to my PC over the USB/serial link. The hardware is setup correctly as I am able to send SMS and FTP files at will.I am writing the following code on Windows Hyperterminal, in hope to send data to ThingSpeak API*** Module Started and Connected to Network CREG etc all ok!--------------------------------------------------------------------------------------------------AT+SAPBR=3,1,'CONTYPE','GPRS' (press enter)*** OKAT+SAPBR=3,1,'APN','ufone.pinternet' (press enter)*** OKAT+SAPBR=1,1 (press enter)*** OKAT+SAPBR=2,1 (press enter)*** +SAPBR: 1,1,'10.68.56.78'AT+CIPSTART='TCP','api.thingspeak.com',80 (press enter)*** OK****** CONNECT OKAT+CIPSEND=70 (press enter) (70 calculated as 66 bytes for the data field listed below and 4 bytes for Carriage Return)*** >GET /update?api_key=1ST90AF1CVQ7OCFH&field1=12&field2=19&field3=94 (press enter)#026*** SEND OK-------------------------------------------------------------------------But nothing gets updated on ThingSpeak?? i have tried to change the CIPSEND count to 66 and 68 but that does not work either. What am I doing wrong? I have read about Arduino code that works but I am on a hyperterminal talking directly to the GSM modem. Any help is appreciated.", "num_user_post": " 1", "author": "usmanasif"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/send-multiple-msg-with-java-error/", "posts": [{"date": "December 28, 2015 - 10:39 am", "content": "Hi!,I try to send a multiple msg to thingSpeak and I have some problems:when I send only one msg, with this class I have no problem:package com.IoT.thingSpeak;import org.apache.log4j.Level;import org.apache.log4j.Logger;import com.angryelectron.thingspeak.Channel;import com.angryelectron.thingspeak.Entry;import com.angryelectron.thingspeak.ThingSpeakException;import com.angryelectron.thingspeak.log4j.ThingSpeakAppender;import com.mashape.unirest.http.exceptions.UnirestException;public class ThingSpeakWebClient {    private String apiWriteKey = 'Q7PHB8FHLU89SBBC';    private int channelNumber = 73899;    private Channel channel;    public ThingSpeakWebClient() {        System.setProperty('org.apache.commons.logging.Log',                'org.apache.commons.logging.impl.Jdk14Logger');        channel = new Channel(channelNumber, apiWriteKey);    }    public synchronized void sendMsg(int field1, Double value) {        ThingSpeakAppender appender = new ThingSpeakAppender();        appender.configureChannel(channelNumber, apiWriteKey, 'http://api.thingspeak.com');        appender.setThreshold(Level.INFO);        appender.activateOptions();        appender.setData(field1, value);        Logger.getRootLogger().addAppender(appender);        Logger.getLogger(this.getClass()).log(Level.INFO, 'Hello World');    }    public static void main(String[] args) throws Exception {        ThingSpeakWebClient ts = new ThingSpeakWebClient();        ts.sendMsg(1, 28.9);    }}But, I try to send a multiple msg, for example using the Observable pattern, the second msg (and all others) has this problem:Dec 28, 2015 3:28:02 PM com.angryelectron.thingspeak.log4j.ThingSpeakAppender appendSEVERE: nullcom.angryelectron.thingspeak.ThingSpeakException: Update failed.    at com.angryelectron.thingspeak.Channel.update(Channel.java:182)    at com.angryelectron.thingspeak.log4j.ThingSpeakAppender.append(ThingSpeakAppender.java:145)    at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:221)    at org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:57)    at org.apache.log4j.Category.callAppenders(Category.java:187)    at org.apache.log4j.Category.forcedLog(Category.java:372)    at org.apache.log4j.Category.log(Category.java:846)    at com.IoT.thingSpeak.ThingSpeakWebClient.sendMsg(ThingSpeakWebClient.java:49)    at com.IoT.TemperatureHumidityMonitoring.ModelReactiveControlSensor.lambda$5(ModelReactiveControlSensor.java:108)    at com.IoT.TemperatureHumidityMonitoring.ModelReactiveControlSensor$$Lambda$9/1811883046.call(Unknown Source)    at rx.Observable$32.onNext(Observable.java:7466)    at rx.observers.SafeSubscriber.onNext(SafeSubscriber.java:130)    at rx.internal.operators.OnSubscribeTimerPeriodically$1.call(OnSubscribeTimerPeriodically.java:51)    at rx.Scheduler$Worker$1.call(Scheduler.java:120)    at rx.internal.schedulers.ScheduledAction.run(ScheduledAction.java:55)    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)    at java.util.concurrent.FutureTask.run(FutureTask.java:266)    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)    at java.lang.Thread.run(Thread.java:744)More precisely: my code has some problem with this function, in Channel.java:/**     * Update channel with new data.     *     * @param entry     *            The new data to be posted.     * @return The id of the new entry.     * @throws UnirestException     *             The request cannot be made.     * @throws ThingSpeakException     *             The request is invalid.     */    public Integer update(Entry entry) throws UnirestException,            ThingSpeakException {        HttpResponse response = Unirest.post(APIURL + '/update')                .header(APIHEADER, this.writeAPIKey)                .header('Connection', 'close').fields(entry.getUpdateMap())                .asString();        if (response.getCode() != 200) {            throw new ThingSpeakException('Request failed with code '                    + response.getCode());        } else if (response.getBody().equals('0')) {            throw new ThingSpeakException('Update failed.');        }        return Integer.parseInt(response.getBody());    }The program crashes on throw new ThingSpeakException('Update failed.');I need help \ud83d\ude42Do you have any idea for solve this problem?!I'm sure that I send all msg with a 15seconds of delay.Thank you!Massimiliano", "num_user_post": " 1", "author": "mmartella"}, {"date": "December 28, 2015 - 12:21 pm", "content": "A response of 0 from the API indicates either the key is wrong or that the rate limit restricted the update. Try waiting 20 seconds and see if that helps.", "num_user_post": " 402", "author": "Hans"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-api/installing-thingspeak/", "posts": [{"date": "December 26, 2015 - 3:59 pm", "content": "Hello, I am fairly new to ThingSpeak and having a bit of a hard time looking for references. My situation is that I don't really know where I stand. Basically, I followed the guide after clean install of Ubuntu 14.04 server. This is the basic guide that I used: ThingSpeak So I followed this guide but I'm not sure how to connect it to my account and use this new ThingSpeak server. I have been having a hard time because I don't know much ruby, gems, mysql, or ThingSpeak really.I'm just unsure what to do after the guide because I need to connect the server with my sensors, arduino, and android app.I am a complete beginner so I apologize for any lack of understanding. Thanks for the help.", "num_user_post": " 1", "author": "mjung43"}]}]}
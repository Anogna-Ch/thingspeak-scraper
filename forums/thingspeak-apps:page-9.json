{"url": "https://community.thingspeak.com/forum/thingspeak-apps/page-9/", "threads": [{"url": "https://community.thingspeak.com/forum/thingspeak-apps/how-do-i-re-insert-a-timestamp-for-my-modified-data/", "posts": [{"date": "April 19, 2016 - 11:29 pm", "content": "I'm getting temperature and moisture data from my channel in the MatLab app like this:\u00a0temperatureData = thingSpeakRead(readChannelID, 'Fields', TemperatureFieldID, 'NumPoints', 1516, 'ReadKey', readAPIKey);humidityData = thingSpeakRead(readChannelID, 'Fields', HumidityFieldID, 'NumPoints', 1516, 'ReadKey', readAPIKey);\u00a0Then I'm using that data to get an array of values called difference, like so:predictMoist = -13.423*temperatureData + 642.67;difference = predictMoist - humidityData;I want to plot the difference array back on my channel\u00a0using the thingspeakWrite function but apparently the array 'difference' does not have a timestmap with each of its datapoints. How do I read the time of each of my original data points so I can make a plot of difference vs time?", "num_user_post": " 3", "author": "polishdude20"}, {"date": "April 21, 2016 - 12:02 am", "content": "The online documentation for thingspeakread() and thingspeakwrite() contain the information about how to retrieve and submit timestamps along with data.If you are going to use the same channel for your differences the more difficult problem is how to ensure your update doesnt get rejected by the 15 second update rule.", "num_user_post": " 271", "author": "rw950431"}, {"date": "April 22, 2016 - 11:05 am", "content": "Hi,\u00a0To display the difference data in your channel, create a MATLAB Visualization App and then add this to your channel by selecting the appropriate channel number in the 'Add this Visualization to a Channel' section.Here is some sample code to get the timestamps and use it in your display:%%% Code %%%[tempData, tempTime] = thingSpeakRead(12397, 'Fields', 4, 'NumPoints', 1000);[humidData, humidTime] = thingSpeakRead(12397, 'Fields', 3, 'NumPoints', 1000);predictMoist = -13.423*tempData + 642.67;difference = predictMoist - humidData;thingSpeakPlot(tempTime, difference);%%% End of Code %%%\u00a0You can also change the plot command to display both the humidity and the difference by using the code below:%%% Code %%%thingSpeakPlot(tempTime, [humidData, difference]);%%% End of Code%%%If you want to save the difference data to a channel, then as\u00a0rw950431\u00a0mentioned, you will need to store the data in a different\u00a0channel to avoid hitting the 15 second rate limit.\u00a0Create a MATLAB Analysis App for this purpose and use thingSpeakWrite function for this.Some example code:%%% Code %%%[tempData, tempTime] = thingSpeakRead(12397, 'Fields', 4, 'NumPoints', 1000);[humidData, humidTime] = thingSpeakRead(12397, 'Fields', 3, 'NumPoints', 1000);predictMoist = -13.423*tempData + 642.67;difference = predictMoist - humidData;thingSpeakWrite(<writeChannelID>, difference, 'TimeStamps', tempTime, 'WriteKey', <write_API_Key>);%%% End of Code %%%If you want this code to run periodically, you will also need to set up a TimeControl.\u00a0~Adarsh", "num_user_post": " 62", "author": "Adarsh_Murthy"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-apps/react-no-data-check-keeps-pushing-wrong/", "posts": [{"date": "April 19, 2016 - 1:09 pm", "content": "Please delete, found the problem.", "num_user_post": " 2", "author": "Acanom"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-apps/react-limitations/", "posts": [{"date": "April 7, 2016 - 5:20 pm", "content": "\u00a0Hello,I'm curious why can't\u00a0I have two REACTs with the same test frequency and options yet the action each one is taking is a different MATLAB analysis code ??", "num_user_post": " 9", "author": "MohanadOdema"}, {"date": "April 7, 2016 - 6:07 pm", "content": "I will have to investigate if that is the intent of the blocking. The core concept is to make sure redundant Reacts do not fire. Thanks for letting us know.", "num_user_post": " 402", "author": "Hans"}, {"date": "April 8, 2016 - 3:12 pm", "content": "OK thank you, please let me know what you came up with.", "num_user_post": " 9", "author": "MohanadOdema"}, {"date": "April 13, 2016 - 6:15 pm", "content": "Mr. Hans,My application requires REACT(1) to run a MATLAB code 1 that updates a certain channel with\u00a0value 2 if a\u00a0field exceeds\u00a0the condition\u00a0value, another REACT(2) runs MATLAB code 2 that updates a certain channel with value 1 if the temperature equals that value. A final REACT(3) runs MATLAB code 3 that updates a certain channel with value 0 if the field value is less than the condition value.\u00a0What can be done as I'm really in a dilemma here due to\u00a0that blocking.", "num_user_post": " 9", "author": "MohanadOdema"}, {"date": "April 14, 2016 - 12:23 am", "content": "If all these reacts are linked to a single channel then perhaps you can set your react to fire every time data is inserted and do a little conditional logic to perform the desired action.\u00a0\u00a0 You will probably have to read the channel value inside the matlab script since there doesnt seem to be a way of passing values from the react to matlab.The example matlab analysis 'eliminate data outliers'\u00a0 might be a good place to start, it demonstrates reading, conditional logic and writing a result.", "num_user_post": " 271", "author": "rw950431"}, {"date": "April 14, 2016 - 10:01 am", "content": "We currently only allow one React that is on insert that triggers MATLAB Analysis code. This might be the error that you are seeing. You can set up other Reacts that are time interval based.", "num_user_post": " 402", "author": "Hans"}, {"date": "April 14, 2016 - 4:58 pm", "content": "rw950431 said If all these reacts are linked to a single channel then perhaps you can set your react to fire every time data is inserted and do a little conditional logic to perform the desired action.\u00a0\u00a0 You will probably have to read the channel value inside the matlab script since there doesnt seem to be a way of passing values from the react to matlab. The example matlab analysis 'eliminate data outliers'\u00a0 might be a good place to start, it demonstrates reading, conditional logic and writing a result.I did just that but there is a slight problem that I haven't figured out\u00a0yet, Here's the code:readChannelID = 89192;TemperatureFieldID = 1;readAPIKey = ' ';writeChannelID = 105620;writeAPIKey = ' ';ControlFieldID = 1;[tempF, timeStamp] = thingSpeakRead(readChannelID, 'fields', TemperatureFieldID, 'numPoints', 1, 'ReadKey', readAPIKey);x = tempF;display(x);if (0 < x < 10) Value = 0;elseif (10 <= x < 20) Value = 1;else Value = 2;enddisplay(Value);thingSpeakWrite(writeChannelID, Value, 'Fields', ControlFieldID, 'writekey', writeAPIKey);Regardless the value of 'x', 'Value' is always assigned to 0 and I can't figure out why. Help ?", "num_user_post": " 9", "author": "MohanadOdema"}, {"date": "April 14, 2016 - 10:47 pm", "content": "I dont claim to be an expert matlab coder but perhaps your if statements need to be more likeif (x>0) && (x<10)", "num_user_post": " 271", "author": "rw950431"}, {"date": "April 15, 2016 - 10:07 am", "content": "rw950431 said I dont claim to be an expert matlab coder but perhaps your if statements need to be more like if (x>0) && (x<10)You are absolutely right it is working fine now.\u00a0Much gratitude.", "num_user_post": " 9", "author": "MohanadOdema"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-apps/thinghttp-get-to-my-file-php/", "posts": [{"date": "April 13, 2016 - 4:39 am", "content": "Help me find out plz. Sorry for bad English but I really need help \ud83d\ude41 How to set Thinghttp. I need to send a GET request to the address (address is fictional): http://suite.com/add_data.php?tr=field1 How do I correctly fill Thinghttp to send data to 'tr' in my file on my server? I tried different options. But instead of my data file receives a '0'.http://s017.radikal.ru/i420/1604/98/3b0f27981ebf.jpg", "num_user_post": " 4", "author": "AlexRyzh"}, {"date": "April 13, 2016 - 10:48 am", "content": "Try a few changes:In the URL, add tr=%%channel_1417_field_1%% (change the 1417 to your channel id).And, delete the parse string (meaning leave that field blank).Let us know if that helps.", "num_user_post": " 402", "author": "Hans"}, {"date": "April 13, 2016 - 1:29 pm", "content": "Not Workhttp://s019.radikal.ru/i610/1604/06/c2baf9c8056e.jpgWorkhttp://s017.radikal.ru/i428/1604/16/2c8112f3f9d7.jpgResulthttp://s017.radikal.ru/i418/1604/46/61dfa1c1bc8d.jpg\u00a0if I do so 'tr_22=%%channel_1417_field_1%%'the database is not transmitted anything. The entry in the database is not happening no.", "num_user_post": " 4", "author": "AlexRyzh"}, {"date": "April 13, 2016 - 2:49 pm", "content": "Thanks for the detailed results.Can you try this?Change URL to: http://doda-media.com/add_data.phphttps://api.thingspeak.com/apps/thinghttp/send_request?api_key=XXXXXXXXXXXXXXXX?tr=%%channel_1417_field_1%% (change 1417 to your channel number - I don't think mine would work for you).If this does not work, make sure you are using your channel number for the replacement. I do not think my channel will work for you.", "num_user_post": " 402", "author": "Hans"}, {"date": "April 13, 2016 - 5:59 pm", "content": "I can't understand where I paste it. If you can send a picture of how it should be written. Thank youIf I write in the URL string, as the string will understand that you need to send this data to a file add_data.php which is on the hosting doda-media.com???In the row indicated parameter to send, but send is not specifiedhttps://api.thingspeak.com/apps/thinghttp/send_request?api_key=T25106VCDCPEEZ7N?tr_22=%%channel_100625_field_1%%", "num_user_post": " 4", "author": "AlexRyzh"}, {"date": "April 14, 2016 - 10:49 am", "content": "Okay, try setting a browser tab in Chrome to the URL for the ThingHTTP request:\u00a0https://api.thingspeak.com/apps/thinghttp/send_request?api_key=XXXXXXXXXXXXXXXX?tr=%%channel_1417_field_1%%", "num_user_post": " 402", "author": "Hans"}, {"date": "April 14, 2016 - 4:01 pm", "content": "\u00a0Not", "num_user_post": " 4", "author": "AlexRyzh"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-apps/can-i-use-any-other-replacements-in-react/", "posts": [{"date": "April 2, 2016 - 12:32 pm", "content": "https://jp.mathworks.com/help/thingspeak/react-app.html#bu4l4qt-1 said that I can use %%trigger%% and %%channel_id%% as replacements but I need some replacement of date and time.", "num_user_post": " 1", "author": "tomotomo"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-apps/matlab-analysis-app-cutting-code-after-first-execution/", "posts": [{"date": "March 30, 2016 - 6:17 am", "content": "Hello,I created a MATLAB Analysis App with 418 lines of code. The App runs fine when I hit the 'Save and Run' button and keeps working until I stay on the page of the app in the browser, but as soon as I leave the page and then I access the app at a later time the code is trimmed to 154 lines and of course the app reports an error if I try to run it.The only way to solve the error is to copy and paste the code again from an offline backup, but again this only works until I stay on the app page.Is this a bug, or is there a limit on the maximum length of the code that can be permanently stored in a MATLAB Analysis app?Thanks,Luca", "num_user_post": " 1", "author": "Luca De Nardis"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-apps/talkback-get-problem/", "posts": [{"date": "March 24, 2016 - 5:27 pm", "content": "Hello,I encountered a problem when I tried to utilize talkback. What I want to do is simply control a LED on pin 13 of an Arduino UNO using an Arduino Ethernet Sheild. I added two commands on the talkback app 'TURN_ON' and 'TURN_OFF'. The problem is that the Arduino doesn't seem to be able to initiate the GET request that executes the intended commands.I would appreciate it if you take a minute of your time to check if I missed out on something in my Arduino code.#include#include 'Ethernet.h'#include 'HttpClient.h'char server[]= 'api.thingspeak.com';String thingSpeakAPI = 'api.thingspeak.com';String talkBackAPIKey = 'UWAFSX0JU71OCGMD';String talkBackID = '7583';const int checkTalkBackInterval = 15 * 1000;    long lastConnectionTime = 0;byte mac[] = { 0xDE, 0xAD, 0xBE, 0xEF, 0xFE, 0xED };IPAddress ip(192,168,1,2);EthernetClient client1;void setup(){  Serial.begin(9600);  while(!Serial);  pinMode(13, OUTPUT);  digitalWrite(13, LOW);  delay(1000);  digitalWrite(13, HIGH);  delay(1000);  digitalWrite(13, LOW);  // Initialize Bridge  if (Ethernet.begin(mac) == 0) {  Serial.println('Failed to configure Ethernet using DHCP');  Ethernet.begin(mac, ip);  }  Serial.println('connecting...');   if (client1.connect(server, 80)) {    Serial.println('connected');}}  void loop(){  checkTalkBack();  delay(checkTalkBackInterval);}void checkTalkBack(){ HttpClient client;  String talkBackCommand;  char charIn;  String talkBackURL =  'http://' + thingSpeakAPI + '/talkbacks/' + talkBackID + '/commands/execute?api_key=' + talkBackAPIKey;  client.get(talkBackURL);  while (client.available()) {    charIn = client.read();    talkBackCommand += charIn;  }  if (talkBackCommand == 'TURN_ON')  {    Serial.println(talkBackCommand);    digitalWrite(13, HIGH);  }  else if (talkBackCommand == 'TURN_OFF')  {    Serial.println(talkBackCommand);    digitalWrite(13, LOW);  }  Serial.flush();  delay(3000);}", "num_user_post": " 9", "author": "MohanadOdema"}, {"date": "March 25, 2016 - 8:37 pm", "content": "A couple of things to check1. If you do 'serial.println(talkbackURL)'  after you have constructed it and paste it into your browser does it work?2. Its possible you arent waiting long enough for the response: do you ever get anything printed out at the 'Serial.println(talkBackCommand);' line? If not perhaps you can print out each individual 'charIn' as you read it to see what is being received.", "num_user_post": " 271", "author": "rw950431"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-apps/bug-in/", "posts": [{"date": "March 24, 2016 - 4:38 am", "content": "Hello!I think I found a little bug in the ThingHTTP Parse String handling.Consider the following example:The URL gives a JSON with a nested object likeShort example: {'a': {'a1': 1}, 'b': {b1: 1}}Long example: https://api.thingspeak.com/apps/thinghttp/send_request?api_key=W2NNAGWNBJ3RFUJFI want to use the Parse String to extract the 'a' object, so I use the Parse String 'a'.It works, but the resulting JSON uses '=>' instead of ': ':Short example: Parse String 'a' gives {'a1'=>1} instead of {'a1':1}Long example: Parse String 'recent_swim_totals' on the above long example gives https://api.thingspeak.com/apps/thinghttp/send_request?api_key=1FIG0PURAOJQFHS4Obviously, Ruby is used for JSON processing, but the Ruby Hash is not converted back to JSON.I worked around the problem simply by replacing '=>' by ': ' in the GET reply.", "num_user_post": " 1", "author": "c.unhold"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-apps/trying-to-parse-weather-data-with-thinghttp-but-keep-getting-error-parsing-document/", "posts": [{"date": "March 16, 2016 - 10:24 pm", "content": "I'm trying to get the current temperature from weather underground (the big green temperature value).In ThingHTTP in the URL I put in : https://www.wunderground.com/ca/bc/port-coquitlam/zmw:00000.14.71775I right click on the temperature value in chrome and select inspect element. Then, I right click on the code that has the temperature and copy the xpath.  Then I paste in what I copied into the parse box on ThingHTTP. The xpath I paste in for this example is : '//*[@id='curTemp']/span/span[1]'When I go visit the URL it gives me, it says:  'Error parsing document, try a different parse string.'This has happened on almost all the weather website I've been to.  Am I doing it right? Is there some other parse string I can put in?", "num_user_post": " 3", "author": "polishdude20"}, {"date": "March 17, 2016 - 12:47 am", "content": "Thingspeak's XPATH implementation is not as advanced as some others- have you looked at the other threads on this forum with similar issues?You can try deleting bits off your xpath to see if that helps.Interestingly enough Firebug on Firefox gives a completely different XPath for the same elements./html/body/div[1]/div[2]/section/div/div[1]/div/div[4]/div[1]/div[1]/div[3]/div[1]/span", "num_user_post": " 271", "author": "rw950431"}, {"date": "March 17, 2016 - 8:18 pm", "content": "rw950431 said Thingspeak's XPATH implementation is not as advanced as some others- have you looked at the other threads on this forum with similar issues?You can try deleting bits off your xpath to see if that helps.Interestingly enough Firebug on Firefox gives a completely different XPath for the same elements./html/body/div[1]/div[2]/section/div/div[1]/div/div[4]/div[1]/div[1]/div[3]/div[1]/spanI've tried just having '//*[@id='curTemp']' as my parse string which is the exact same format thingspeak has in an example of parsing stock data from google and it still doesn't work. Your Xpath that you pasted also doesn't work. \ud83d\ude41", "num_user_post": " 3", "author": "polishdude20"}, {"date": "March 22, 2016 - 12:28 am", "content": "Interestingly when I try your URL without any parse string I get the answer '-1' instead of the web page. Maybe wunderground is blocking thingspeak for some reason.Is it an option for you to sign up for a free  wunderground account  and use the API?  http://www.wunderground.com/weather/api/d/docs?MR=1", "num_user_post": " 271", "author": "rw950431"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-apps/where-to-store-a-configuration-data-for-iot-device/", "posts": [{"date": "March 21, 2016 - 3:40 pm", "content": "Hi,Does ThingSpeak provide any means to provide some configuration data for IoT device? I'm thinking about i.e new firmware to be picked up by my device (it's cheking for it periodically) or to set some other parameters. This can be a simple http location where I store a text file to be obtained by GET by my IoT device.", "num_user_post": " 1", "author": "tml"}, {"date": "March 21, 2016 - 5:09 pm", "content": "How long is the file? You have two options if it is short. You could store up to 256 characters in one field of a channel. There is also an app called TalkBack  - you can store text strings stacked up in the cloud as a queue. And, ask for each piece of data in the queue.", "num_user_post": " 402", "author": "Hans"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-apps/help-how-can-simulate-this-scenario/", "posts": [{"date": "March 19, 2016 - 6:23 pm", "content": "Hii need to simulate this sensor send data to mobile then mobile forward data to cloud.and measure the energy consumption, latency of packet transfer ??How can do that??Where i start ??Thanks", "num_user_post": " 1", "author": "marwa"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-apps/what-is-channel-status-updates-visualization/", "posts": [{"date": "March 15, 2016 - 7:25 am", "content": "Few weeks ago I added 'Channel Status Updates' visualization to my channels.But visualization field is empty. I can't find information what is for and how to use/setup?Best regards", "num_user_post": " 13", "author": "0xFF"}, {"date": "March 15, 2016 - 8:29 am", "content": "The channel status updates visualization is used to show status messages in the ThingSpeak Channel. If you don't send status messages, then you will not see anything. You can hide it from your channel.", "num_user_post": " 402", "author": "Hans"}, {"date": "March 15, 2016 - 2:32 pm", "content": "Hans said The channel status updates visualization is used to show status messages in the ThingSpeak Channel. If you don't send status messages, then you will not see anything. You can hide it from your channel.Thanks Hans,I just tested this feature, now I know what it is \ud83d\ude09Regards", "num_user_post": " 13", "author": "0xFF"}]}]}
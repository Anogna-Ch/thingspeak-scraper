[{'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/page-1/', 'threads': [{'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/esp8266-garbage-values-on-serial-monitor-espcomm_sync-fail/', 'posts': [{'date': u'August 20, 2018 - 3:14 am', 'content': u"I have purchased Wi-Fi module from - https://www.amazon.in/REES52-Serial-Wireless-Transceiver-ESP8266/dp/B00O34AGSU/ref=sr_1_1?s=industrial&ie=UTF8&qid=1534744260&sr=1-1&keywords=Wi-Fi+Wireless+Transceiver+Module+for+IOT+ESP8266.I had also purchased a 5v/1A DC power adapter to externally power the module. With the information at -  https://iotbytes.wordpress.com/3-3v-power-supply-for-esp-8266/, Initially, i used pin #2(3.3v output) & #3 (Ground) of Ams1117 to power the Wi-Fi module.Rest other pin connections is similar as - https://medium.com/@cgrant/using-the-esp8266-wifi-module-with-arduino-uno-publishing-to-thingspeak-99fc77122e82.Esp8266 | Arduino---------------------------        RX | RX        TX | TX GPIO 0 | None GPIO 2 | NoneArduino | Arduino---------------------------  Reset | GNDEsp8266 | Esp8266--------------------------- Vcc       |  3.3v ( external - AMS1117 ) CH_PD | 3.3v ( external - AMS1117 ) GND     |  GND ( external - AMS1117 )Observation:1. On powering up Arduino (Via USB) & esp8266 (AMS1117)- red LED was constant but the blue LED was flickering rapidly. I saw AI thinker WiFi SSID , which assigned 192.168.4.x ip to my cellphone.2.  Arduino IDE's serial monitor: except 115200 baud rate, the terminal was getting filled  with garbage characters at all baud rates. At 115200, the terminal was quiet, and for few \u201cAT/AT+GMR\u201d commands i got garbage symbols in response. (after wards , garbage response stopped - till i re-powered on Wi-Fi)Then, after putting GPIO0 to ground (programming mode)Esp8266 | Arduino--------------------------- GPIO 0 |  GNDi  tried uploading code, ang got following - Global variables use 27968 bytes (34%) of dynamic memory, leaving 53952 bytes for local variables. Maximum is 81920 bytes.warning: espcomm_sync failederror: espcomm_open failederror: espcomm_upload_mem failederror: espcomm_upload_mem failedtried adding 1k resistor with GPIO-Ground, but it didn\u2019t work!!But, when i connected Wifi Module to 5v of arduino as -ESP8266 | Arduino---------------------------      Vcc   | 5v      GND | GNDObservation :1. On powering up Arduino  & esp8266 - red LED was constant but the blue LED was off. I saw AI thinker WiFi SSID , which assigned 192.168.4.x ip to connecting devices . 2.  Arduino IDE's serial monitor: on 115200 baud rate the terminal was quiet, and for  \u201cAT/AT+GMR\u201d  serial commands i got expected response. The blue LED flickered only when i entered AT / AT+GMR command. But the chip heated up (i disconnected as soon as i sensed this  \U0001f609 ) sl l \u2e2e \u2e2e |Ai-Thinker Technology Co. Ltd.ready>ATAT>AT+GMRAT version:1.2.0.0(Jul 1 2016 20:04:45)SDK version:1.5.4.1(39cb9a32)Ai-Thinker Technology Co. Ltd.Dec 2 2016 14:21:16OKOKSame observation with 3.3v - slAi-Thinker Technology Co. Ltd.ready>ATAi-Thinker Technology Co. Ltd.readyATOKWith aforementioned experiments it seems that this is power supply issue - as on using arduino's Vcc & GND, things are moving forward.But i understand that should not rely/use those pins for ESP. Could you please suggest something on this issue - to power the WiFi module externally?.", 'num_user_post': u' 1', 'author': u'puneet336'}, {'date': u'August 30, 2018 - 5:26 pm', 'content': u'Your issue seems to be related to the ESP hardware.  You might try posting this issue on an ESP forum.  Here is one I found:https://www.esp8266.com/index.php', 'num_user_post': u' 401', 'author': u'cstapels'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/sending-update-through-serial-at-command-does-not-update-channel-feed/', 'posts': [{'date': u'August 16, 2018 - 5:42 am', 'content': u"Hello, I am trying to update the channel feed using the Arduino talking to the ESP8266 via AT commands. Everything seems to work fine but when I send the commandGET https://api.thingspeak.com/update?api_key=VB552XQVR6RDJ7ZM&field1=0The serial monitor does not respond back after sending the command. If I send another command afterwards it responds as fail.AT+CIPMUX=1OKAT+CIPSTART=0,'TCP','184.106.153.149',800,CONNECTOKAT+CIPSEND=0,77OK> CIPCLOSE=0busy s...Recv 77 bytes0,CLOSEDSEND FAIL", 'num_user_post': u' 1', 'author': u'rweiser'}, {'date': u'August 16, 2018 - 11:30 am', 'content': u"I'm counting 71 bytes in your message.  I think your connection may fail because its waiting for you to send six more bytes that never come.Try changing to AT+CIPSEND=0,71 or 72 and let us know what happens.", 'num_user_post': u' 401', 'author': u'cstapels'}, {'date': u'August 27, 2018 - 8:06 am', 'content': u'Yes, I count 67 chars + 4  = chr(13) + chr(10) + chr(13) + chr(10). This symbols must be at end of string. Another way the server dont undersand finish operation or wait for 77 bytes, but receive only 67.', 'num_user_post': u' 1', 'author': u'igorok'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/start-getting-spurious-retransmission-errors-after-4-hour-wemos-d1-mini/', 'posts': [{'date': u'August 13, 2018 - 1:49 pm', 'content': u"My garage monitor system worked fine for years but I had to create a new account so a relative's monitor didn't use up too many data points.  The only thing that I changed in the code was the API key.  For troubleshooting, I sniffed packets between a second wifi router and my internet connection and would start getting spurious retransmission messages after 4 hours and then nothing but errors (including spurious retransmissions FROM my device back to thingspeak).  Internet connection very reliable.  I changed my microcontroller from the D1 to the D1 mini, no change.  Removed all sensors and am just sending 4 static values every 20 seconds; no change.  I tried the relative's channel again and it worked normally.  I deleted my channel and re-added, using my own new account; no change.  Any ideas why this is happening?  Just using the ESP8266WiFi.h library.  Any thoughts would be appreciated.  Thanks.Update:  Re-installed the board in Arduino boards manager (same URL in preferences but I did re-paste it) and wired everything up normally again and it worked overnight.  This time it displayed the board as Lolin(Wemos) D1 and D1 Mini R2.  I don't remember the Lolin - the version was the same but the name was different so something changed.  Bizarre that it would work for 4 hours with the other library.  Always something simple but with the 4 hours before failure it was time consuming to troubleshoot.", 'num_user_post': u' 1', 'author': u'djmobley'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/display-tweets-on-lcd/', 'posts': [{'date': u'July 27, 2018 - 2:38 pm', 'content': u"Hi All ,I've an idea to make a news display using nodemcu + 16x2 LCD. The source of the news will be a tweeter account ( it's not available through API, hence this approach). When ever the tweeter account released the tweet I want to display it on lcd. I'm also aware of the thingspeak.com thingtweet  , but don't know how to continue this as I'm a newbie. Can someone help me with this task? Thanks All.", 'num_user_post': u' 1', 'author': u'arduinoslfan'}, {'date': u'August 6, 2018 - 8:52 am', 'content': u'ThingTweet will allow you to send tweets from your device to  twitter via your twitter account.https://www.mathworks.com/help/thingspeak/thingtweet-app.htmlThe direction you are considering is the opposite.  If you have a license for datafeeed add-on toolbox in MATLAB, you can use the twitter object to retrieve tweets and send them to your device.https://www.mathworks.com/help/datafeed/twitter-1.htmlYou can also use the datafeed toolbox in ThingSpeak, if you have a licence.https://www.mathworks.com/help/thingspeak/matlab-toolbox-access.html', 'num_user_post': u' 401', 'author': u'cstapels'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/the-simplest-wi-fi-temperature-measurement/', 'posts': [{'date': u'July 24, 2018 - 4:47 am', 'content': u"I'm looking for the simplest and cheapest way to remotely monitor my flat temperature via Wi-Fi.Requirements:- power supply via micro USB- accuracy +/-0.5\xb0C- temperature reading freq: at least 1 every 10 minutes- possibly also humidity data- power consumption: the lower the better! \U0001f642Googling a bit I found this solution:- module NodeMCU esp8266 Amica V2- sensor DHT22 Do you think it is a good solution?Do you know if there is some simpler module than NodeMCU (that has a lot of I/O and functionalities I would not use)?Do you know if any plug and play cheap solution (<10$/\u20ac) already exist on the market?Thanks for all the suggestions", 'num_user_post': u' 1', 'author': u'doh77'}, {'date': u'July 26, 2018 - 4:55 pm', 'content': u'I think this is a fine solution for flexibility, and probably cost, though perhaps not for durability compared to a commercial solution.ThingSpeak will help nicely with the remote and the analysis parts of your project. I would suggest esp8266-01, can be a few $ cheaper, especially if you order them in medium quantities.It does not have analog io, but you can use the one wire interface.', 'num_user_post': u' 401', 'author': u'cstapels'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/cant-update-fields-in-my-channels/', 'posts': [{'date': u'July 17, 2018 - 12:27 pm', 'content': u"hi ,i'm using esp-01s wifi module with my tm4c123gh microcontroller to upload temperature values to my channel.i'm using this get request 'GET /update?api_key=MY_api_key&field1=%d HTTP/1.1Host:api.thingspeak.comr' to update my field1 , but i'm getting this 400 bad requesthere is a screenshot of the server response:Recv 89 bytesSEND OK+IPD,598:HTTP/1.1 400 Bad RequestContent-Type: text/html; charset=utf-8Transfer-Encoding: chunkedConnection: closeStatus: 400 Bad RequestX-Frame-Options: ALLOWALLAccess-Control-Allow-Origin: *Access-Control-Allow-Methods: GET, POST, PUT, OPTIONS, DELETE, PATCHAccess-Control-Allow-Headers: origin, content-type, X-Requested-WithAccess-Control-Max-Age: 1800Cache-Control: no-cacheX-Request-Id: 26f0dc6f-7e57-4dff-99cc-7873010867a5X-Runtime: 0.004454X-Powered-By: Phusion Passenger 4.0.57Date: Tue, 17 Jul 2018 15:57:04 GMTServer: nginx/1.9.3 + Phusion Passenger 4.0.5710+IPD,5:0CLOSEDAT+CIPSEND=89i'm using these 2 methods to make a tcp connection with the server ://---------ESP8266_MakeTCPConnection----------// Establish TCP connection// Input: IP address or web page as a string// output: 1 if success, 0 if failint ESP8266_MakeTCPConnection(char *IPaddress){  int try=MAXTRY;  SearchStart('ok');  while(try){    sprintf((char*)TXBuffer, 'AT+CIPSTART='TCP','%s',80', IPaddress);    ESP8266SendCommand(TXBuffer);   // open and connect to a socket    DelayMsSearching(8000);    if(SearchFound) return 1; // success    try--;  }  return 0; // fail}//---------ESP8266_SendTCP----------// Send a TCP packet to server// Input: TCP payload to send// output: 1 if success, 0 if failint ESP8266_SendTCP(char* fetch){  volatile uint32_t time,n;  sprintf((char*)TXBuffer, 'AT+CIPSEND=%d', strlen(fetch)+2);  ESP8266SendCommand(TXBuffer);  DelayMs(50);  ESP8266SendCommand(fetch);  ServerResponseSearchStart();  n = 8000;  while(n&&(ServerResponseSearchFinished==0)){    time = (75825*8)/91;  // 1msec, tuned at 80 MHz    while(time){      time--;    }    n--;  }  if(ServerResponseSearchFinished==0) return 0; // no response  return 1; // success}i can read data from thingspeak ,but i can not write datathanks,M.Megawer", 'num_user_post': u' 2', 'author': u'mahmoud.eltobgy4@gmail.com'}, {'date': u'July 17, 2018 - 7:53 pm', 'content': u'You should consider using the ThingSpeak communication library for arduino and ESP.  There are good examples in the documentation that show you how to use it. Foe example,https://www.mathworks.com/help/thingspeak/read-and-post-temperature-data.html Or you can use the wifi library and create the post or GET commands yourself, as in this example.https://www.mathworks.com/help/thingspeak/MoistureMonitor.htmlThese examples show that they are compatible with esp8266-12, but the code will work for ESP8266-01 as well, just not the rest of the example (hardware parts like ADC are needed)  I will consider updating that list of supported hardware to say this.If there is some reason you absolutely need to use the AT command set, please let me know and I will try to help you debug the method above.  However, I really think you can make it much easier on yourself with the other two methods.', 'num_user_post': u' 401', 'author': u'cstapels'}, {'date': u'July 18, 2018 - 5:31 pm', 'content': u"cstapels thank you for your response but i'm afraid that the two methods won't work with me as i'm using the ARM-CORTEX-M4 with the ESP8266-01. i have tried to customize the library to support that hardware ,but that needs time i don't have  ,so i have to absolutely use the AT command set. it would be great if you could help me with that thanks again ,M.Megawer", 'num_user_post': u' 2', 'author': u'mahmoud.eltobgy4@gmail.com'}, {'date': u'July 19, 2018 - 2:27 pm', 'content': u"Ok.  AT challenge accepted.But one last ditch effort - you could communicate to the ESP via serial from the cortex.you wait for events   if ( ESPserial.available() ){ save the text you get over serialset flag NEW_DATA=true}and then once an event is recieved, you can use the wifi library commands to send data to thingspeak:if NEW_DATA{NED_DATA=false;write to thingspeak;}all this is programmed in the ESP using the arduino IDE and you program in C.But, back to your problem above.  First, I would make sure you can update your channel in a web browser with the get command you are showing aboveGET /update?api_key=MY_api_key&field1=%dapi.thingspeak.com/update?api_key=XXXXXXXXXXXXXXXX&field1=123I'd put the server in directly and hard code the data just for testing.try it in the browser just to make sure the syntax is correct and then try it in your code.if you are getting a 400 error, it may mean you are connected to ThingSpeak but you just have the syntax or api key wrong.since the read works, I suspect your connection is fine, its just the syntax for the write command.If that's not it, we can look into how you determine the byte size to send, but It looks initially ok.  Let me know if you can update from the browser.", 'num_user_post': u' 401', 'author': u'cstapels'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/http-request-works-fine-but-no-graph-shows-in-any-chart/', 'posts': [{'date': u'July 15, 2018 - 10:31 am', 'content': u'Hi, I have develloped an application that automatically exports Arduino data into my ThingSpeak channels.The output from ThingSpeak is:Request: https://api.thingspeak.com/update?api_key=4HWA00QRN0EHM1MM#S|TS_API|&field1=112.14&field2=2.50&field3=150.00&field4=2.50&field5=28.56&field6=2.50&field7=22.50&field8=2.50; Request result: 219Request: https://api.thingspeak.com/update?api_key=4HWA00QRN0EHM1MM#S|TS_API|&field1=112.75&field2=2.50&field3=150.00&field4=2.50&field5=28.56&field6=2.50&field7=22.50&field8=2.50; Request result: 220Request: https://api.thingspeak.com/update?api_key=4HWA00QRN0EHM1MM#S|TS_API|&field1=113.05&field2=2.50&field3=150.00&field4=2.50&field5=28.63&field6=2.50&field7=22.50&field8=2.50; Request result: 221Request: https://api.thingspeak.com/update?api_key=4HWA00QRN0EHM1MM#S|TS_API|&field1=114.00&field2=2.50&field3=150.00&field4=2.50&field5=28.44&field6=2.50&field7=22.50&field8=2.50; Request result: 222Request: https://api.thingspeak.com/update?api_key=%5BMyApiKey%5D#S|TS_API|&field1=114.46&field2=2.50&field3=150.00&field4=2.50&field5=28.50&field6=2.50&field7=22.50&field8=2.50; Request result: 223Request: https://api.thingspeak.com/update?api_key=%5BMyApiKey%5D#S|TS_API|&field1=115.19&field2=2.50&field3=150.00&field4=2.50&field5=28.44&field6=2.50&field7=22.50&field8=2.50; Request result: 224Request: https://api.thingspeak.com/update?api_key=%5BMyApiKey%5D#S|TS_API|&field1=115.94&field2=2.50&field3=150.00&field4=2.50&field5=28.38&field6=2.50&field7=22.50&field8=2.50; Request result: 225Request: https://api.thingspeak.com/update?api_key=%5BMyApiKey%5D#S|TS_API|&field1=116.47&field2=2.50&field3=150.00&field4=2.50&field5=28.25&field6=2.50&field7=22.50&field8=2.50; Request result: 226Request: https://api.thingspeak.com/update?api_key=%5BMyApiKey%5D#S|TS_API|&field1=117.07&field2=2.50&field3=150.00&field4=2.50&field5=28.19&field6=2.50&field7=22.50&field8=2.50; Request result: 227As you can see, the data is accepted by ThingSpeak (it returns the written record number as the Request result), but the charts DO NOT show any information.So what is happening here?Please advice.Thanks,Jos.', 'num_user_post': u' 7', 'author': u'Jos'}, {'date': u'July 16, 2018 - 10:43 am', 'content': u'I think this is a duplicate post.  Can we work on this topic on the other post?https://community.thingspeak.com/forum/thingspeak-api/thingspeak-no-show-data-in-charts-bur-request-is-fine/', 'num_user_post': u' 401', 'author': u'cstapels'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/questions-about-post-temperature-data-and-read-from-channel-example/', 'posts': [{'date': u'July 2, 2018 - 7:40 am', 'content': u"I 've built the example project 'Post Temperature Data and Read from Channel' .In this example we have the output of a voltage divider.It ranges from 0 to 3.3Volts and this voltage is read by the ADC of the ESP8266.But I read that the ESP8266 can 'read' from 0 to 1Volt.So this project should not work correctly. But it works fine! (let me remind you that I 've built it and tested it).So, how can this be explained?", 'num_user_post': u' 4', 'author': u'panoss'}, {'date': u'July 3, 2018 - 4:32 pm', 'content': u'That is a good catch, thanks. I think the 3.3 V is mostly dropped across the thermistor, and the voltages measured are close to 1 V anyway.  Perhaps the ADC reading is still proportional to voltage for values outside the suggested range.  I will try the experiment again with a 2k or 5k resistor in series.  If you still have yours set up, can you try it with a lower resistor so we can compare?', 'num_user_post': u' 401', 'author': u'cstapels'}, {'date': u'July 12, 2018 - 10:29 am', 'content': u'I used a NODEMCU, which has a built in voltage divider, to make the range 3.3 V.https://github.com/nodemcu/nodemcu-devkit/blob/master/Documents/NODEMCU_DEVKIT_SCH.pngIll add a note to the example.  Thanks again!', 'num_user_post': u' 401', 'author': u'cstapels'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/nodemcu-suddenly-cannot-connect-to-intenet/', 'posts': [{'date': u'June 25, 2018 - 2:50 am', 'content': u"My NodeMCU was, till yesterday, very easilly connecting to the internet.Untill I installed a library, Thermistor_library-master.From that moment the NodeMCU can no way connect to the internet!!!I removed the library (deleted the library 's folder from C:UsersPanDocumentsArduino), I tried previous sketches that worked 100% in the past, but NOTHING!It cannot connect.I even tried another (unused) NodeMCU and the same thing happens!I 'm desperate, I don't know what to do!Any help is welcome.(I have made no changes to the router 's credentials or any of it 's settings)", 'num_user_post': u' 4', 'author': u'panoss'}, {'date': u'June 25, 2018 - 10:09 am', 'content': u"I replaced this code:WiFi.begin(ssid, password);   with this:    WiFi.disconnect(true);    WiFi.setAutoConnect(false);    WiFi.setPhyMode(WIFI_PHY_MODE_11G);    WiFi.begin(ssid, password);    WiFi.printDiag(Serial);    Serial.println(WiFi.getPhyMode());and...got connected!!!Then I returned to the old code...and works fine too!!!I have no idea why the use of the previous code 'cured' it.", 'num_user_post': u' 4', 'author': u'panoss'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/multiple-sensors-with-nodemcu-esp8266/', 'posts': [{'date': u'June 24, 2018 - 7:34 am', 'content': u"I 've built this example and works fine.Now I want to have multiple sensors (I use NTC thermistors as sensors) and so I 've built this, but I must modify the software.The difference between these 2 circuits is:In the first example, the thermistor is the bottom resistor of the voltage divider.In the second example, the thermistor is the top resistor of the voltage divider.The part of the code that I have to modify is:         float logR = log( 10000 * ( 1024 / readValue - 1 ));                 // Separate the calculation for simplicity and debugging        celsiusTemperature = 1 / ( aConst + bConst * logR + cConst * pow(logR,3) ) - 273.15;   // Calculate the temperature in Celsius        fahrenheitTemperature = celsiusTemperature * 9 / 5 + 32;Any help is welcome.", 'num_user_post': u' 4', 'author': u'panoss'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/iot-made-easy-esp-micropython-mqtt-thingspeak/', 'posts': [{'date': u'June 14, 2018 - 3:06 pm', 'content': u'Hi Guys,I published an article, were using MQTT protocol, I got captured data from sensors, logging them in ThingSpeak. What I did different, was to use  Jupyter Notebook to program my ESP8266 (NodeMCU), using MicroPython. Was amazing how simple was to publish those data on ThingSpeak. Here the article:https://medium.com/@rovai/iot-made-easy-esp-micropython-mqtt-thingspeak-ce05eea27814', 'num_user_post': u' 1', 'author': u'Marcelo Rovai'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/problem-uploading-data-from-nodemcu-to-the-iot-thingspeak/', 'posts': [{'date': u'June 7, 2018 - 7:28 am', 'content': u'Hello, I am uploading data from NodeMCU to the IoT ThingSpeak platform and I have a problem that I do not know where it may come from.When I upload data from my private Wi-Fi network, from home, I see them correctly and everything works fine. When I upload them from the university network, I do not see it in ThingSpeak. The same software and all the same in several examples. I only change the credentials of the wifi.Does anyone have any idea what can happen ???', 'num_user_post': u' 1', 'author': u'victormh'}, {'date': u'June 10, 2018 - 12:09 am', 'content': u'Are you able to update your Thingspeak channel using your browser on the University network?  (see https://au.mathworks.com/help/thingspeak/writedata.html for format of URL). Do you get any return code from the NodeMCU when you try to write?   At what point does it fail?   Are you able to read data from a channel?It may be that your University requires you to use a proxy to access the internet.It is unfortunate that Thingspeak does not have a diagnostic console where you can view the status of incoming requests.', 'num_user_post': u' 271', 'author': u'rw950431'}]}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/page-2/', 'threads': [{'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/esp8266-signal-strength-doesnt-work/', 'posts': [{'date': u'June 1, 2018 - 3:33 pm', 'content': u"I followed all instructions for this app.  It compiled & uploaded.  It does not record any info in serial monitor.  I don't know where to look on the internet to find results. Pleae help.", 'num_user_post': u' 1', 'author': u'drzrudsky34'}, {'date': u'June 6, 2018 - 3:36 pm', 'content': u'Can you share what example you are referring to?  In the MathWorks documentation, there is an ESP32 signal strength example, and another for MKR1000.  There is a bulk update example that is compatible with ESP8266 and uses signal strength. Is this the one you tried?https://www.mathworks.com/help/thingspeak/continuously-collect-data-and-bulk-update-a-thingspeak-channel-using-an-arduino-mkr1000-board-or-an-esp8266-board.htmlIf so, can you tell use what you did see on the serial monitor?  If you saw nothing, then you may just have the baud rate set incorrectly.', 'num_user_post': u' 401', 'author': u'cstapels'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/cant-send-data-to-mulple-fields-in-a-channel/', 'posts': [{'date': u'April 24, 2018 - 5:53 am', 'content': u'how can i send from the esp8266 three data to tree fields indipendently with out the problem of the 15 seconds buffer? i would like to use only one channel', 'num_user_post': u' 7', 'author': u'frenk0'}, {'date': u'April 24, 2018 - 9:05 am', 'content': u'See the write data documentation (https://www.mathworks.com/help/thingspeak/writedata.html) for the correct formats. and the faq for licensing information. (https://thingspeak.com/pages/license_faq)Each update counts towards the 15 second limit, and you can update all eight fields, the location information and the status in a single update (every 15 seconds you can update all fields.)use ? to append the first parameter and & for subsequent parameters.for a GET:  https://api.thingspeak.com/update.json?api_key=XXXXXXXXXXXXXXXX&field1=1&field2=22&field3=234&field4=mush&field5=room&field6=66&field7=7&status=greevyetc.', 'num_user_post': u' 401', 'author': u'cstapels'}, {'date': u'April 25, 2018 - 3:05 am', 'content': u'cstapels said See the write data documentation (https://www.mathworks.com/help/thingspeak/writedata.html) for the correct formats. and the faq for licensing information. (https://thingspeak.com/pages/license_faq)Each update counts towards the 15 second limit, and you can update all eight fields, the location information and the status in a single update (every 15 seconds you can update all fields.)use ? to append the first parameter and & for subsequent parameters.for a GET:  https://api.thingspeak.com/update.json?api_key=XXXXXXXXXXXXXXXX&field1=1&field2=22&field3=234&field4=mush&field5=room&field6=66&field7=7&status=greevyetc.\xa0\xa0thanks but ifi have three esp8266 that i cannot sync how can i make them write each one in a channel with out losing data due to the 15 sec limit', 'num_user_post': u' 7', 'author': u'frenk0'}, {'date': u'April 25, 2018 - 5:17 am', 'content': u'The 15 second update is just about the only limit that thingspeak has so your options appear to be1) 3 separate channels2) paid plan3) re-think your architecture so that you sync your updates.A matlab visualization can combine data from multiple channels if thats your main reason for avoiding the obvious solution.', 'num_user_post': u' 271', 'author': u'rw950431'}, {'date': u'April 26, 2018 - 4:32 pm', 'content': u'rw950431 said A matlab visualization can combine data from multiple channels if thats your main reason for avoiding the obvious solution.\xa0\xa0 can i do a mathlab visualization which looks like a field chart?', 'num_user_post': u' 7', 'author': u'frenk0'}, {'date': u'April 26, 2018 - 4:33 pm', 'content': u'i mean the interesting part of the fiel chart is that when you drag the mouse over a certain spot of the function it gives you the exact x and y value', 'num_user_post': u' 7', 'author': u'frenk0'}, {'date': u'April 26, 2018 - 5:30 pm', 'content': u'After you finish your MATLAB visualization, use thingSpeakWrite() to write the data to another channel.  Then you will have thingSpeak plots for the fields in your new channel, complete with hover capabilities.', 'num_user_post': u' 401', 'author': u'cstapels'}, {'date': u'May 7, 2018 - 10:26 am', 'content': u'thank you this was very helpful! \U0001f642', 'num_user_post': u' 7', 'author': u'frenk0'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/atcipsend-not-returning/', 'posts': [{'date': u'April 20, 2018 - 8:48 pm', 'content': u"I am attempting to send data to thingspeak using a ESP8266  and a arduino mini pro 16.  I am using the example  Arduino code for the 'ESP8266 WIFI TEMPERATURE LOGGER' instructables.  This project is listed as an example on the Thingspeak Support page,  linked  as 'WiFi ESP8266 Wifi Temperature Logger [External]'. I have set up the hardware and have established  serial communication between the Arduino and the 8266 WiFi module.  I believe the serial connection is good. I get the expected appropriate messages on the  Serial monitor when the setup and connectWiFi functions run on the arduino.  There is no error reported when the  AT+CIPSTART command is sent to the web page. However!  the  > is never returned after the AT+CIPSEND= command is sent to thingsspeek.  The AT+CIPCLOSE is sent to the serial monitor and the ESP8266. the RECEIVED Error message is sent to the serial monitor.  The GET command is never sent to thingspeak because the > is never returned after the AT+CIPSEND= command is sent.I have tried everything I can think of to determine where the issue may be.  I am completely out of ideas. I could post the code here but is available here [ http://www.instructables.com/id/ESP8266-Wifi-Temperature-Logger/ ] with a considerable amount of detail about the system I am attempting to replicate.PS The system is reading temperatures correctly. I can modify the code and send the temperature reading to the serial monitor.Also I have bean successful in sending test data to my thingspeak channel by using a web browser address bar and modifying this https://api.thingspeak.com/update?api_key=YOUR WRITE API KEY&field7=0.0000672.  Update;I have now completely removed the  arduino and connected a serial to USB adapter directly to the ESP8266 module.  I have serial com with the module.  The AT, AT+RST, AT+CWMODE, AT+CIPMUX, & AT+CWLAP commands all work as expected. I am getting a full listing of the available WiFi access points with the CWLAP comand. however when I attempt to connect to the thingsreak server I get an error.         AT+CIPSTART='TCP','184.106.153.149',80         no ip         ERRORI would greatly appreciate any suggestions or help if anyone can point the problem. thanks.", 'num_user_post': u' 2', 'author': u'dennis55'}, {'date': u'April 21, 2018 - 1:13 am', 'content': u'Hi dennis55,Please read this post (click link)https://community.thingspeak.com/forum/esp8266-wi-fi/updating-data-in-thingspeak/#p5544if that is no help, please ask again and I can explain in more detail.The idea is to test manually first to send with your ESP some data to Thingspeak. When it is working you put the arduino in charge.This works, I have now more than 1000000 points in my channel with my ESP01-arduino couple ', 'num_user_post': u' 91', 'author': u'piajola'}, {'date': u'April 21, 2018 - 12:33 pm', 'content': u"Hi piajolathanks for the reply, unfortunately I am still not getting any data posted onto my thingspeak channel.I have read the forum post that you linked. I am getting the same 'busy s...' message that is mentioned there.I have set up the serial com using  both PUTTY and the Arduino ide serial monitor. The results are the same every time.  when I send the GET... command after the AT+CIPSEND command I always receive the busy s... . I have tried sending the serial using all the possible line end arrangements.   NL & CR, newline only, carnage return only  and no line ending.  I have adjusted the value of the AT+CIPSEND = ? command, in an attempt to discover if I was not counting the line end charterers as required.    I have tried sending one set and two sets of carnage returns and line ends to the end of the get command statement. I did not see or perhaps never understood what other step I might attempt to resolve this issue from the forum link. I see  /n on the serial monitor after the > symbol that is returned after the AT+CIPSEND command in sent. This leads me to think the issue in related to the end character sent in ether the AT+CIPsend command or the GET... command that where sent. I have attempted to try every combination of line end characters I think may help but nothing works.ATOKAT+RSTOKc_\u2e2eR#\u2e2efJ[:fJ[\u2e2efJ\u2e2e\u2e2eO\u2e2eG\u2e2eG\u2e2e\u2e2eO\u2e2eX\u2e2eXreadyWIFI CONNECTEDWIFI GOT IPAT+CIPMUX=0OKAT+CWMODE=1OKAT+CIPSTART='TCP','184.106.153.149',80CONNECTOKAT+CIPSEND=46OK> nbusy s...Recv 46 bytesSEND OKCLOSED", 'num_user_post': u' 2', 'author': u'dennis55'}, {'date': u'April 21, 2018 - 3:31 pm', 'content': u'Hi dennis55,Have you read this other link mentioned ?( https://community.thingspeak.com/forum/esp8266-wi-fi/dns-fail-error/#p5426 )at the end it is mentioned the effective send (cipstart-cipsend)It seems your troubles are in character count ... and must be ended with CR-LF (ascii 13-10 or 0x0D-0x0A)your--                    AT+CIPSEND=46----                   OK--                   > n----                   busy s...----                   Recv 46 bytes----                   SEND OK--                   CLOSEDhas the busy s... or  Failed  - try another waySee my comments (post #p5426) about PUTTY how to end the strings to sendAs you like to try a lot (good thing! ) you have something to do.Please tell your finds (remember .. this works very well)', 'num_user_post': u' 91', 'author': u'piajola'}, {'date': u'April 26, 2018 - 5:12 pm', 'content': u"Hi DennisYou do not need to worry about counting the length of the update string.  You can just issue the command AT+CIPSEND with no '='.  Terminate the GET request with     SIMSerial.println(updateStr1);     SIMSerial.println();      SIMSerial.print('u001A');SIMSerial.println('at+cipstart='TCP','184.106.153.149','80'');//connect to the thingspeak update URL this is https://api.thingspeak.com  char searchStr[] = 'CONNECT OK';  if (SIMSerial.find(searchStr)) {    Serial.println('Start OK');    SIMSerial.println('at+cipsend');    char searchStr[] = 'ERROR';     if (SIMSerial.find(searchStr)) {      Serial.println('CIPSEND failed');    }    else {      SIMSerial.print('GET /update?key=');      SIMSerial.print(myAPI);      SIMSerial.println(updateStr1);       SIMSerial.println();      SIMSerial.print('u001A');// cntl+Z to terminate the SEND from the GSM since we did not define the request length      char searchStr[] = 'OK';      if (SIMSerial.find(searchStr)) {        Serial.println();        Serial.println('GET sent okay');        passFlag = true;        feedback();      }    }I hope this helps.David", 'num_user_post': u' 4', 'author': u'SailSenseTech'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/problem-rc-4-using-library-pubsub/', 'posts': [{'date': u'April 19, 2018 - 10:56 am', 'content': u"hello everyone,im using the library pubsub based on the example of : https://la.mathworks.com/help/thingspeak/use-arduino-client-to-publish-to-a-channel.html. in my ESP8266 module to connect to my ThingSpeak Channel, in the beginning i dont have any problems, the data was sent without problems, but yesterday, when I was going to try, I got an error in the serial monitor that said: Attempting MQTT connection ... failed, rc = -4 try again in 5 seconds.It's very strange, since I never modify the code since that time it worked for me (April 9 was the last time it worked for me).According to the documentation of the library, the message rc = -4, means: MQTT_CONNECTION_TIMEOUT - the server did not respond within the keep alive time.At first I thought it was my network problem, but I tried all the networks that I had tried before and the problem keeps coming up.I think then that the problem is with ThingSpeak, something changed and I can not access anymore. Any idea what it could be? What solution can I use? I leave attached the code that I am using.Thank you for your attention,Best regards.PS: I'm sorry for my English, I'm learningTHE CODE IS BELOW#include      //SPI.h library#include     // ESP8266.h library#include    // PubSubClient.h library// Variables de medida de energ\xedaconst int slavePin = 15 ;                                     // Salida pin 8 del wemos que controla el Chip Select del ADe7753 (aqui lo ponemos como 15 en la analogia arduino)int voltaje1;                                                //Define la variable voltaje igual a cerofloat corriente1;                                            //Define la variable corriente igual a ceroint energia1;                                                //Define la variable energia igual a cero int v= 0 ; float i= 0; int w= 0 ;//  WiFi Credentialsconst char* ssid     = 'GADYM2013';const char* password = 'Gadym_2013'; //  ThingSpeak MQTT server Credentialschar mqttUserName[]= 'juantv'; // any name userchar mqttPass[]= 'XXXXXXXXX'; //MQTT Key Myprofile thingSpeakchar writeAPIKey[] = 'XXXXXXXXXX';    // Change to your channel Write API Key.long channelID = 426397 ;const char* server= 'mqtt.thingspeak.com';static const char alphanum[] ='0123456789'                              'ABCDEFGHIJKLMNOPQRSTUVWXYZ'                              'abcdefghijklmnopqrstuvwxyz';  // For random generation of client ID // Variables globales para seguir tiempo de ultima actualizacion y definir el intervalo para publicar informacionunsigned long lastConnectionTime = 0;const unsigned long postingInterval = 20L * 1000L; // envia datos cada 20 segundos WiFiClient espClient;      // Inicializaci\xf3n del cliente MQTTPubSubClient client(espClient);void setup() {  // put your setup code here, to run once:  pinMode(LED_BUILTIN, OUTPUT); // definimos para prender el LED que indica que el programa esta corriendo  Serial.begin(115200);  //iniciamos el monitor serie  SPI.begin(); // Iniciamos la libreria SPI   pinMode(slavePin, OUTPUT); //configuramos el pin D8 (aqui lo ponemos como 15 en la analogia arduino) del wemos como salida  // conexi\xf3n con el servidor por el puerto 1883client.setServer(server, 1883);  Serial.begin(115200);  delay(10);   // CONEXI\xd3N CON LA RED WiFi    Serial.println();  Serial.println();  Serial.print('Connecting to ');  Serial.println(ssid);  WiFi.begin(ssid, password);   while (WiFi.status() != WL_CONNECTED) {    delay(500);    Serial.print('.');  }  Serial.println('');  Serial.println('WiFi connected');  Serial.println('IP address: ');  Serial.println(WiFi.localIP());}// CONEXION CON EL SERVIDOR WEB MQTT//  ThingSpeak.begin(client); void loop() {  digitalWrite(LED_BUILTIN, LOW); // encedemos el led // Se espera a la conexi\xf3n con el broker if (!client.connected()) {    reconnect();  }  client.loop();// Se espera a que pase el tiempo transcurrido para enviar de nuevo  if (millis() - lastConnectionTime > postingInterval)  {    mqttpublish();  }  delay(5000);}// FUNCION PARA RECONECTAR EN CASO DE FALLA void reconnect() {  char clientID[10];  // Loop until we're reconnected  while (!client.connected()) {   Serial.print('Attempting MQTT connection...');    // Generate ClientID    for (int i = 0; i  0) {    // Desplazamos el primer byte a la izquierda, entonces obtiene el segundo byte:    result = result << 8;    inByte = SPI.transfer(0x00);    // Combine el byte anterior con el recibido:    result = result | inByte;    // decremente el numero de bytes a leer :    bytesToRead--;  }  // Desactivamos el chip:  digitalWrite(slavePin, HIGH);  // finalizamos la transacion SPI  SPI.endTransaction();  // retorna el resultado    return (result);}", 'num_user_post': u' 5', 'author': u'JuanTV'}, {'date': u'April 19, 2018 - 12:09 pm', 'content': u'I agree that it does seem like a network problem. I can see server logs of MQTT publish messages to channel 426397 a few days ago.  Was that you?', 'num_user_post': u' 34', 'author': u'JasonW'}, {'date': u'April 19, 2018 - 4:42 pm', 'content': u'Hello Jason.Yeah, was me but since yesterday i cant connect again to my Thingspeak Channel. I do not know why it does not work now? If it is the same code that I used a few days ago and as you could see I could send messages but not now. I really need help soon', 'num_user_post': u' 5', 'author': u'JuanTV'}, {'date': u'April 21, 2018 - 11:46 am', 'content': u"Have you included the connection part of your code?  I don't see a call to mqttClient.connect(...) anywhere.  That is the part that would generate the RC=-4 error, as far as I know.", 'num_user_post': u' 401', 'author': u'cstapels'}, {'date': u'April 23, 2018 - 6:04 pm', 'content': u"Hi,I have similar issue with publishing to chanel 393925.It was working great for long time but on 11th April stopped.I realized its not working only today so started to debug.All MQTT connections my ESP8266 is trying to establish are failing with -4 code.I tried to use MQTTlens Chrome extension to check if your broker is up - initially I was able to publish test status with it but after a while it doesn't want to connect anymore.Have you changed anything recently?I'm using free account - how limit of 3 mqtt subscriptsions works? Does it recognise previous subscription died due to timeout/other issues?RegardsMarcin", 'num_user_post': u' 2', 'author': u'wojmonit'}, {'date': u'April 24, 2018 - 1:58 pm', 'content': u"No reply from support but I fixed it myself.Looks like reconnect procedure from example no longer works (that with random client name generation).I replaced it with static client name like below and it started to work again.Please test why your example no longer works and correct it so others won't waste their time on this...void reconnect(){  char clientID[10];  char clientIDset[] = 'Wojmonitclient123';  // Can be any name.  // Loop until we're reconnected  while (!mqttClient.connected())  {    Serial.print('Attempting MQTT connection...');    // Generate ClientID    for (int i = 0; i < 8; i++) {        clientID[i] = alphanum[random(51)];    }    // Connect to the MQTT broker//    if (mqttClient.connect(clientID,mqttUserName,mqttPass))    if (mqttClient.connect(clientIDset,mqttUserName,mqttPass))    {      Serial.println('connected');    } else    {      Serial.print('failed, rc=');      // Print to know why the connection failed.      // See http://pubsubclient.knolleary.net/api.html#state for the failure code explanation.      Serial.print(mqttClient.state());      Serial.println(' try again in 5 seconds');      delay(5000);    }  }}", 'num_user_post': u' 2', 'author': u'wojmonit'}, {'date': u'April 24, 2018 - 7:25 pm', 'content': u"You need to terminate the char array.After this section:Serial.print('Attempting MQTT connection...');// Generate ClientIDfor (int i = 0; i < 8; i++) {clientID[i] = alphanum[random(51)];}Add this line:clientID[8]='0';and the connection should work.", 'num_user_post': u' 401', 'author': u'cstapels'}, {'date': u'April 24, 2018 - 11:34 pm', 'content': u"cstapels said Have you included the connection part of your code?  I don't see a call to mqttClient.connect(...) anywhere.  That is the part that would generate the RC=-4 error, as far as I know.\xa0\xa0Hello cstapels , first at all, thanks for your replies here and in github issue (i am the same user). In this post i do a mistake in copy my code, in the code posted on github: https://github.com/knolleary/pubsubclient/issues/433 , I do not make the same mistake, I'm sorry for that. Okay returning to the main theme here: My solution as well as wojmonit: was to eliminate the random generation of the ClientID in my code, and replace it with a fixed ClientID, that allowed me to connect without problem to my channel. (by the way, thanks for you help wojmonit) . You recommend this change in my code: 'Add this line:clientID[8]='0';and the connection should work. '  but I have not tried it yet. Can you explain in detail this solution that you propose? and another question for you or for some user of the support: Why did the random generation of the ClientID stop working (the same code example of Mathworks proposes)?Thanks for everyones, Regards", 'num_user_post': u' 5', 'author': u'JuanTV'}, {'date': u'April 25, 2018 - 9:05 am', 'content': u"The fixed client ID will work, but it is less reliable.  If you have two devices with the same client ID, the new instance may cause the old one to terminate.  This is why the random client ID generation works. In the publish code, when the un-terminated char array was converted to a string, the program was taking a whole bunch of extra characters, which was causing the server to reject the request to connect.  for examplechar clientID = 'abcdefgh';can get converted toString(clientID)= ... abcdefghandawholebunchofotherstuffinmemorythatoccursafterthecharbutchar clientIDTerminated='abcdefg/0';converts toString(clinetID)='abcdefg'...I am not yet clear why the server changed its requirements, it may have even been a processing issue of how the request was packaged before it was sent to the server.  We are looking into the issue, but the solution here works for my devices.", 'num_user_post': u' 401', 'author': u'cstapels'}, {'date': u'April 25, 2018 - 12:20 pm', 'content': u"cstapels said The fixed client ID will work, but it is less reliable.  If you have two devices with the same client ID, the new instance may cause the old one to terminate.  This is why the random client ID generation works. In the publish code, when the un-terminated char array was converted to a string, the program was taking a whole bunch of extra characters, which was causing the server to reject the request to connect.  for examplechar clientID = 'abcdefgh';can get converted toString(clientID)= ... abcdefghandawholebunchofotherstuffinmemorythatoccursafterthecharbutchar clientIDTerminated='abcdefg/0';converts toString(clinetID)='abcdefg'...I am not yet clear why the server changed its requirements, it may have even been a processing issue of how the request was packaged before it was sent to the server.  We are looking into the issue, but the solution here works for my devices.\xa0\xa0Hello, cstapels I made the changes in my code and it's working fine. Thanks a lot for your help.  I would like to ask you one last question: I have two devices measuring some variables, my purpose is to send data every 5 or 10 minutes using the code posted in  https://github.com/knolleary/pubsubclient/issues/433 (with corrections obviously) , my question is: Will my two devices be able to send the data simultaneously without problem to the same channel or as I should do? What changes in my code should I make so that both send data without problem?Regards,Juan", 'num_user_post': u' 5', 'author': u'JuanTV'}, {'date': u'April 26, 2018 - 8:21 am', 'content': u"We finally figured out the root cause of the issue.  A recent MQTT broker update added UTF-8 validation to client IDs and topics.  We didn't realize it but the code in our example to generate random client IDs had a bug in it which caused an invalid character to be included.   After the the broker update, our example became broken.  (We'll be correcting that.)Validating client IDs and topics for only UTF-8 characters is a good thing in terms of security.  Unfortunately it tripped us up this time.The bottom line: be sure to include only printable characters in the client ID and topic.  Meaning no tabs, line feeds, carriage returns, etc.", 'num_user_post': u' 34', 'author': u'JasonW'}, {'date': u'April 26, 2018 - 8:40 am', 'content': u"Can you start a new thread for this question, and Ill get to it shortly?'I would like to ask you one last question: I have two devices measuring some variables, my purpose is to send data every 5 or 10 minutes using the code posted in  https://github.com/knolleary/pubsubclient/issues/433 (with corrections obviously) , my question is: Will my two devices be able to send the data simultaneously without problem to the same channel or as I should do? What changes in my code should I make so that both send data without problem?'", 'num_user_post': u' 401', 'author': u'cstapels'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/sending-data-serial-from-arduino-to-esp8266-nodemcu/', 'posts': [{'date': u'March 9, 2018 - 7:49 pm', 'content': u"hey guys , 1) i'm trying to send data from my arduino uno to the nodemcu 8266 through serial but i receive nothing , but when i send any data from the node mcu to the arduino things go smoothly 2) so i to access the esp8266 module on the nodemcu esp8266 and made all the wirings so i can access the wifi from the arduino directly then i'll have the benefit of uploading the arduino data through the esp8266 without programing the nodemcu controller , but i failed when i enter any AT command nothing happens---------------------------------------------------------------------------------------------Arduino code :#include <SoftwareSerial.h>SoftwareSerial BTserial(2, 3); // RX | TXchar c = ' ';void setup(){ Serial.begin(9600); BTserial.begin(115200);  pinMode(13,OUTPUT);}void loop(){ if (BTserial.available()) { BTserial.write('a'); digitalWrite(13,1); delay(1000); BTserial.write('b'); digitalWrite(13,0); delay(1000);}}--------------------------------------------------------------------------------------NodeMcu esp8266 code :#include <SoftwareSerial.h>SoftwareSerial BTserial(13, 15); // RX | TXchar c = ' ';void setup(){ Serial.begin(9600);BTserial.begin(115200);  pinMode(LED_BUILTIN,OUTPUT);}void loop(){ if (BTserial.available()) { digitalWrite(LED_BUILTIN,HIGH); c=Serial.read(); Serial.print(c); }}", 'num_user_post': u' 1', 'author': u'zidan'}, {'date': u'March 13, 2018 - 9:57 pm', 'content': u'Which serial ports are being used to connect between the arduino and the NodeMCU?\xa0 Is it Serial or BTserial?I do see a problem in that in the Arduino code you are waiting for some character to be received before you send anything. Perhaps remove the if (BTserial.available()) lines and see if that works.You might also try a lower speed on the BTserial ports to see if that helps.', 'num_user_post': u' 271', 'author': u'rw950431'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/updating-data-in-thingspeak/', 'posts': [{'date': u'March 8, 2018 - 10:35 am', 'content': u"Hi,As part of my project, I'm uploading data to the Thingspek IOT platform. To test the wifi module and to get an idea how the whole thing works. I connected ESP8266 with a USB TTL Serial. I used Serial Prompt in Linux to send AT commands. Module gave a response to every command and connected it to a wifi network. Then I tried to update field value of Thingspeak.1.AT+CIPMUX=02. AT+CIPSTART = 'TCP','www.thingspeak.com',802.AT+CIPSEND=74got reply as>then I pasted the following link GET https://api.thingspeak.com/update?api_key=38X665EABZ5YTRW3&field1=25SEND OKBut the Thingspeak filed values were not updated. Anyone have any idea about this.Thanks", 'num_user_post': u' 4', 'author': u'Athul'}, {'date': u'March 8, 2018 - 10:40 am', 'content': u"Athul said  Hi, As part of my project, I'm uploading data to the Thingspek IOT platform. To test the wifi module and to get an idea how the whole thing works. I connected ESP8266 with a USB TTL Serial. I used Serial Prompt in Linux to send AT commands. Module gave a response to every command and connected it to a wifi network. Then I tried to update field value of Thingspeak.\xa0 \xa0 AT+CIPMUX=0\xa0 \xa0 AT+CIPSTART = 'TCP','www.thingspeak.com',80\xa0 \xa0 AT+CIPSEND=74 got reply as\xa0 \xa0> then I pasted the following link\xa0 \xa0 \xa0 \xa0 GET https://api.thingspeak.com/update?api_key=38X665EABZ5YTRW3&field1=25 \xa0 \xa0SEND OK But the Thingspeak filed values were not updated. Anyone have any idea about this. Thanks\xa0\xa0", 'num_user_post': u' 4', 'author': u'Athul'}, {'date': u'March 8, 2018 - 10:21 pm', 'content': u"First make sure you can update your channel by pasting the GET command into the browser.\xa0 Make sure your API key is the write API Key.\xa0 Then look at other AT command examples. There is not yet one in the ThingSpeak documentation, but there are a lot of them out there. I'm sure you didn't show all the details of your code, but there are other steps, such as sending the size of our data packet, and connecting to the server and access point.\xa0Even better, you can use the Arduino IDE to program your ESP 8266, and then the steps are a lot easier than using AT commands.\xa0 See the examples in the ThingSpeak Documentation, for example the temperature monitor or the soil moisture monitor.", 'num_user_post': u' 401', 'author': u'cstapels'}, {'date': u'March 9, 2018 - 12:09 am', 'content': u'Hi\xa0Athul,please see this post in this forumhttp://community.thingspeak.com/forum/esp8266-wi-fi/dns-fail-error/#p5426I have more than 900000 records in my channel here with an arduino+esp-01 (it does not matter if the ESP8266 is esp-01 or esp-12 or nodemcu or any model)Less than ten US dollars for esp-01+arduino nano clone+sensor-better-than-DHT-11/22 is enough to have temperature+humidity data in thingspeakI use Win10 with Chrome, but this does not matter either, with linux is the same thing.As\xa0cstapels\xa0suggets,first use the IP address line in your browser, this try worked for mehttp://api.thingspeak.com/update?key=16ALPHANUMBERkey&field1=30&field2=80second try your serial software to send to ESP8266If you need more help just askGood luck', 'num_user_post': u' 91', 'author': u'piajola'}, {'date': u'March 9, 2018 - 11:58 am', 'content': u"Hi,Thanks for the reply.I am using LPC2148(ARM7) for my projects, not Arduino. I could find a lot of projects with ESP8266 and Arduino using thingspeak library. But there's no such library available for ARM(couldn't find one). I have to write all AT codes in my code and then send\xa0'GET https://api.thingspeak.com/update?api_key=38X665EABZ5YTRW3&field1=25'\xa0\xa0I could update my Filed with directly pasting the following link in any browser with the required field value\xa0https://api.thingspeak.com/update?api_key=38X665EABZ5YTRW3&field1=25\xa0Today I tried again,1. configured my wifi module and connected it with a wifi network2.Connected to 'api.thingspeak.com'3. AT+CIPSEND=74since my GET https://api.thingspeak.com/update?api_key=38X665EABZ5YTRW3&field1=25\xa0\xa0link has 72 characters and extra 2 for 3. then I sent the link without\xa0 at the end and pressed enter key() and ctrl+enter(),\xa0\xa0by following above method I could update my field values.\xa0But the thing is if I add  at the end of the link(GET https://api.thingspeak.com/update?api_key=38X665EABZ5YTRW3&field1=25) instead of pressing\xa0enter key() and ctrl+enter(),\xa0\xa0 and past it\xa0to the command prompt\xa0\xa0i got the following response\xa0>busy s...sendbut the field value was not updated.\xa0So my question is how should I write my code.\xa0Can i use something like this,\xa0 \xa0 char wifi[]='GET https://api.thingspeak.com/update?api_key=38X665EABZ5YTRW3&field1=25';\xa0 \xa0 int l = strlen(wifi);\xa0\xa0 \xa0 sprintf(b, 'AT+CIPSEND=%d',l);\xa0 \xa0 UART_TX(wifi);\xa0Since sending data in\xa0GET https://api.thingspeak.com/update?api_key=38X665EABZ5YTRW3&field1=25' this format didn't update values, not sure I could use something as aboveI am confused", 'num_user_post': u' 4', 'author': u'Athul'}, {'date': u'March 9, 2018 - 12:05 pm', 'content': u"Updating answer due to missing charactersHi,Thanks for the reply.I am using LPC2148(ARM7) for my projects, not Arduino. I could find a lot of projects with ESP8266 and Arduino using thingspeak library. But there's no such library available for ARM(couldn't find one). I have to write all AT codes in my code and then send\xa0'GET\xa0https://api.thingspeak.com/update?api_key=38X665EABZ5YTRW3&field1=25'\xa0\xa0I could update my Filed with directly pasting the following link in any browser with the required field value\xa0https://api.thingspeak.com/update?api_key=38X665EABZ5YTRW3&field1=25\xa0Today I tried again,1. configured my wifi module and connected it with a wifi network2.Connected to 'api.thingspeak.com'3. AT+CIPSEND=74since my\xa0GET\xa0https://api.thingspeak.com/update?api_key=38X665EABZ5YTRW3&field1=25\xa0\xa0link has 72 characters and extra 2 for\xa0<carraige return><new line>3. then I sent the link without\xa0<carraige return><new line>at the end and pressed\xa0enter\xa0key(<carraige return>)\xa0and\xa0ctrl+enter(<new line>),\xa0by following above method I could update my field values.\xa0But the thing is if I add <carraige return><new line>\xa0at the end of the link(GET\xa0https://api.thingspeak.com/update?api_key=38X665EABZ5YTRW3&field1=25<carraige return><new line>)\xa0instead of pressing\xa0enter key(<carriage return>) and ctrl+enter(<new line>),\xa0\xa0\xa0and past it\xa0to the command prompt\xa0\xa0I got the following response\xa0><new line>busy s...sendbut the field value was not updated.\xa0So my question is how should I write my code.\xa0Can i use something like this,\xa0 \xa0\xa0char wifi[]='GET\xa0https://api.thingspeak.com/update?api_key=38X665EABZ5YTRW3&field1=25<carraige return><new line>';\xa0 \xa0 int l = strlen(wifi);\xa0\xa0 \xa0 sprintf(b, 'AT+CIPSEND=%d',l);\xa0 \xa0 UART_TX(wifi);\xa0Since sending data in\xa0GET\xa0https://api.thingspeak.com/update?api_key=38X665EABZ5YTRW3&field1=25<carriage return><new line>this format didn't update values, not sure I could use something as aboveI am confused", 'num_user_post': u' 4', 'author': u'Athul'}, {'date': u'March 9, 2018 - 7:45 pm', 'content': u"Hi,to add to the confusion ... \U0001f642I tried your link in my W10 chrome ... twice and got 14 and 15 so I think I put two 25 values in your field1 channel xxxxI am assuming you are talking your adventures with your serial software to control/use your ESP8266so ...><new line>busy s...sendmust be interpreted as a failure ... if you receive busy s... the ESP826 was confused and did nothing, you must try again and differently.Also there are differences in the different versions of the ESP 'AT' firmware, there is no ONE firmware version.Another also ESP has ATE0 NO echo from ESP\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0ATE1 echo from ESP - more chars in RS232I used 3 serial software: YAT, Termite and PUTTY- in YAT I press button SEND to send the chars in the command text- in Putty I must add ^M^J at the end of chars and press ENTER- in Termite I put the chars in the command text and press ENTERall 3 are GUI and choice cr only, nl only or cr+nlI do not know your philips(NXP) compiler, but read parts of my arduino code next, note arduino has print and println (ascii 13 and ascii 13+ascii 10)initialize ESPSerial.println('AT+RST'); wait 5000 ms Serial.println('ATE0'); wait 500 ms Serial.println('AT');wait 500 ms if (Serial.find('OK')) {\xa0 wait 1000 ms\xa0 // try to connect to wifi } else {\xa0 there is AT error ESP is not ready }TCP connection to send one more timeSerial.println('AT+CIPSTART='TCP','184.106.153.149',80'); if (Serial.find('ERROR')) {\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 // Error in other fw version\xa0 // something very bad there is NO TS } // send data length Serial.println('AT+CIPSEND=66'); if (Serial.find('>')) {\xa0 Serial.print('GET /update?api_key=');\xa0 \xa0// 20\xa0 Serial.print(apiKey);\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0// 16\xa0 Serial.print('&field1=');\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 // 8\xa0 Serial.print(String(valTemperature));\xa0 \xa0// 5 00.00 adjust your style\xa0 Serial.print('&field2=');\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 // 8\xa0 Serial.print(String(valHumidity));\xa0 \xa0 \xa0 \xa0 \xa0// 5 98.76\xa0 Serial.print('|r|n|r|n');\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 // 4 [CR][NL][CR][NL] } else {\xa0 Serial.println('AT+CIPCLOSE'); }Gooooood luck", 'num_user_post': u' 91', 'author': u'piajola'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/delay-in-uploading-to-thingspeak-website/', 'posts': [{'date': u'March 7, 2018 - 6:43 am', 'content': u'Is the 15 sec delay constant in uploading the data to the server. Why does it cannot be uploaded instantly without any delay. I am using NodeMCU to upload data online but the requirement is that the data has to be processed and visualized instantly.\xa0Kindly help.Thanks\xa0', 'num_user_post': u' 1', 'author': u'Abhinandan'}, {'date': u'March 7, 2018 - 12:49 pm', 'content': u'The free offering offers an update interval limit of 15 seconds. Data sent faster than that will be dropped.\xa0 For your application, you need the one second update interval which is only available with a paid license. See this page on ThingSpeak Licenses for more information about the paid license options.The MQTT API\xa0or the client post method seen in the\xa0soil monitor example may offer some small speed improvements.', 'num_user_post': u' 401', 'author': u'cstapels'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/help-with-a-code/', 'posts': [{'date': u'February 24, 2018 - 1:50 pm', 'content': u'Hello,I have two ESP8266-01 modules. I use one of them to upload data to my thingspeak channel directly from the DHT11 Sensor. So I can see temperature and humidty from the channel. Thats great I have no problem with that. But I am planning to use my other ESP module to show these datas in an LCD screen. I do not know how to retrive data from thingspeak channels. I would appriciate any help. I am using Ardunio IDE to program.\xa0', 'num_user_post': u' 1', 'author': u'dozcakir'}, {'date': u'February 26, 2018 - 11:52 am', 'content': u"There are several examples in the ThingSpeak documentation to help you.\xa0 The first example in the ESP section Post Temperature Data and Read from Channel\xa0 provides code using the ThingSpeak communication library.\xa0 If you don't want to use the ThingSpeak communication library, you can consider the Moisture Monitor with Deep Sleep.\xa0 This one also shows how to put the device in deep sleep.\xa0 These examples are specifically tested with NODE MCU devices (ESP-8266-12), but you can use the ESP-8266-01.\xa0 Your device wont have an ADC which is used in come of these examples, and the programming process is slightly different, but it seems you already have the programming part down.The Arduino code is similar, and you can look in the first section for more examples.The first example with a sonar sensor and\xa0 an Arduino MKR should port well to your ESP, with some changes.\xa0 The others can give you some ideas as well.", 'num_user_post': u' 401', 'author': u'cstapels'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/dns-fail-error/', 'posts': [{'date': u'February 24, 2018 - 5:50 am', 'content': u"HI EVERYONEI am new to this forumi am getting dns fail issue when i enter AT+CIPSTART=0,'TCP','https://thingspeak.com/',80can anyone help plzthank u", 'num_user_post': u' 1', 'author': u'GOURISH'}, {'date': u'February 24, 2018 - 4:53 pm', 'content': u"Hi GOURISH,Can you tell us a little (lot) more about what are you doing? I have 1 year of data with an (avrmega 168 antidiluvian) Arduino with a ESP-01 4 megabit flash (512 mByte) so ... this AT thing works very well Note you need 3.3 V 750 ma capable power supply, otherwise you will have electrical issues when the RADIO part transmit Also the number of ' r  n' (return-new line 13-10 0x0D-0x0A) at the end of line is important (vital for the internet trip) Another also, the syntax can vary a little in different firmware (try AT+GMR) my try 10 minutes ago saidAT+GMR (6)\xa0\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 meAT version:1.4.0.0(May 5 2017 16:10:59) (40)\xa0 \xa0ESP-01SDK version:2.1.0(116b762) (26)compile time:May 5 2017 16:37:48 (33)OK (2)with the ESP-01 connected to a serial terminal (ie. Arduino serial monitor with cr+nl) ANY serial terminal - Google is your friend ...better to type this, copy/paste sometimes tries his jokes-- AT+CIPSTART='TCP','api.thingspeak.com',80 (41 char) you get CONNECT -- AT+CIPSEND=142 (14 char) you get > -- GET /update?api_key=16-alpha-numeric&field1=10.45&field2=15.40&field3=20.35&field4=25.30&field5=30.25&field6=35.20&field7=40.15&field8=45.10 (142 char) you get the next record number in your collected data(1 if starting)in 2-5 seconds you see in the TS channel associated with the api_key the 8 little points in the 8 fields and so you know you did this well (life-warranty-batteries-included)then you can start your fight with arduino to control the ESP-01 but you are sure the data arrives\xa0", 'num_user_post': u' 91', 'author': u'piajola'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/problema-para-recibir-datos-en-thingspeak-con-esp8266-y-arduino-mega/', 'posts': [{'date': u'February 18, 2018 - 3:01 pm', 'content': u"Hola buenas tardes. He intentado recibir datos de un sensor para leer voltaje pero no he tenido \xe9xito. Puedo conectar mi ESP8266 a una red WiFi exitosamente pero no recibo los datos en mi Channel ID de Thingspeak, espero puedan ayudarme, ya he revisado el APIkey que est\xe9 bien, lo actualizo por otro y hago el copy/paste en el c\xf3digo y nada, se hacen las lecturas de voltaje las puedo ver en el monitor serial de Arduino.\xc9ste es el c\xf3digo para la lectura del sensor y env\xedo de datos a Thingspeak\xa0#include <SoftwareSerial.h>// LEDint ledPin = 13;int sensor_pin=A0; // variable for sensorfloat sample=0;float bat_volt =0; // for temperature// replace with your channel's thingspeak API keyString apiKey = 'HERE YOUR APIKEY CODE';// connect 2 to TX of Serial USB// connect 3 to RX of serial USBSoftwareSerial ser(14,15); // RX, TX// this runs oncevoid setup() { // initialize the digital pin as an output. pinMode(ledPin, OUTPUT);// enable debug serial Serial.begin(115200); // enable software serial ser.begin(115200); // reset ESP8266 ser.println('AT+RST');}\xa0// the loopvoid loop() { // blink LED on board digitalWrite(ledPin, HIGH); delay(200); digitalWrite(ledPin, LOW);voltage(); esp_8266();}void voltage(){ sample=0; for(int i=0;i<150;i++) { sample+=analogRead(sensor_pin); //read the value from the sensor delay(2); } sample=sample/150; bat_volt = sample*(4.76/1024)*(12/2); // R1+R2/R2 // R1=10k and R2=2k}void esp_8266(){ // convert to string char buf[32]; String strVolt = dtostrf( bat_volt, 4, 1, buf); Serial.print(strVolt); Serial.println(' V'); // TCP connection String cmd = 'AT+CIPSTART='TCP',''; cmd += '184.106.153.149'; // api.thingspeak.com cmd += '',80'; ser.println(cmd); if(ser.find('Error')){ Serial.println('AT+CIPSTART error'); return; } // prepare GET string String getStr = 'GET /update?api_key='; getStr += apiKey; getStr +='&field1='; getStr += String(strVolt); getStr += '';// send data length cmd = 'AT+CIPSEND='; cmd += String(getStr.length()); ser.println(cmd);if(ser.find('>')){ ser.print(getStr); } else{ ser.println('AT+CIPCLOSE'); // alert user Serial.println('AT+CIPCLOSE'); } // thingspeak needs 15 sec delay between updates delay(16000);}", 'num_user_post': u' 3', 'author': u'adrian'}, {'date': u'February 18, 2018 - 5:42 pm', 'content': u"Hola\xa0adrian,Parece que esta de moda el esp8266 con comando AT (hayes ?) Se necesitaria mas informacion de lo que haces.Yo uso un esp-01 con UNO y\xa0AT desde hace 1 a\xf1o y SI funciona sin problemasMencionas que usas wifi, pero hay contradicciones en tu software. El MEGA tiene 2 com hardware y usas 1. El softserial es para el UNO que solo tiene 1 com hardware y no funciona mas arriba de 19200 baud y tu intentas usarlo a 115200 baud. Tambien la version del firmware del esp8266 tiene sus cosas, tu linea\xa0if(ser.find('Error')){\xa0 en mi firmware debe ser\xa0if(ser.find('ERROR')){\xa0mayusculas y sino asi haya error no te lo va a decir y jalate los pelos. No dices que ves en el monitor arduino, si ves\xa0strVolt quiere decir solo que leiste voltaje y no que paso con el esp8266Mis pasos fueron:\xa0 \xa0 - probar manualmente que ponia data en thingspeak con el programa\xa0 Termite (puede ser el que manejes mas comodamente)\xa0 \xa0 - probar programaticamente controlar el esp-01 para que envie data a\xa0thingspeakSi te parece podemos intentar mis sugerencias paso a pasoSaludos\xa0", 'num_user_post': u' 91', 'author': u'piajola'}, {'date': u'February 19, 2018 - 10:38 pm', 'content': u'Hola Piajola. Como ver\xe1s no soy experto en Arduino, y en efecto ese c\xf3digo se utiliz\xf3 en un Arduino Uno y pens\xe9 que podr\xeda utilizarlo en el Mega sin problema. Quisiera saber si podr\xedas orientarme, por correo de preferencia.\xa1Muchas gracias!', 'num_user_post': u' 3', 'author': u'adrian'}, {'date': u'February 20, 2018 - 9:06 am', 'content': u'hola, si puedo decirte mi opinion y mis experiencias sin problema ... el problema esta en como intercambiar correos.Si sabes como mandar mensajes personales en este foro prueba mandarme privadamente un correo \U0001f642', 'num_user_post': u' 91', 'author': u'piajola'}, {'date': u'February 20, 2018 - 11:26 pm', 'content': u"No pues no le encontr\xe9, aparece 'contact piajola' pero no hay nada para selecionar, nada. ramgua gmail", 'num_user_post': u' 3', 'author': u'adrian'}, {'date': u'February 21, 2018 - 8:53 am', 'content': u'hola, en tu perfil igual contact adrian no funciona, parece este forum no permite los usuarios se comuniquen. La idea debe ser todo el mundo comparta lo que se diga. Es la ultima parte como escribirte? sino plantea tus dudas por aqui \U0001f642', 'num_user_post': u' 91', 'author': u'piajola'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/problem-compiling-example-code/', 'posts': [{'date': u'February 8, 2018 - 6:01 pm', 'content': u"\xa0Hi.\xa0 I was using this code from the examples:https://www.mathworks.com/help/thingspeak/read-and-post-temperature-data.htmlto do a simple 1820 temp read and post.\xa0 When i copied and pasted into arduino and tried to compile, I get this error:Arduino: 1.8.5 (Windows 8.1), Board: 'SparkFun ESP8266 Thing Dev, 80 MHz, 512K (no SPIFFS), v2 Prebuilt (MSS=536), Disabled, None, 115200'D:arduino sketches backupsketch_feb08csketch_feb08c.ino: In function 'void loop()':sketch_feb08c:58: error: 'write2TSData' was not declared in this scopewrite2TSData( channelID , dataFieldOne , celsiusTemperature , dataFieldTwo , fahrenheitTemperature , dataFieldThree , millis() ); // Write the temperature in F, C, and time since starting.^exit status 1'write2TSData' was not declared in this scopeThis report would have more information with'Show verbose output during compilation'option enabled in File -> Preferences.I'm not very experienced at writing this code so I would appreciate any help.\xa0 thanks", 'num_user_post': u' 3', 'author': u'mtmtntop'}, {'date': u'February 9, 2018 - 10:36 am', 'content': u"\xa0Your compiler cannot find the function write2TSData().\xa0 Make sure you copied it, its down at the bottom.\xa0 If its there and the compiler still cannot find it, this is most likely due to a missing open or close brace: '{' or '}' .\xa0I checked out the code on the site and there doesn't seem to be a missing brace there. (both the full version and the step by step code compiles as copied for me)\xa0 You should go through carefully and make sure each open brace has a corresponding close brace, or you could recopy the code (remembering to adjust the constants at the top.)If you copied form the section where each bit of code is explained separately, it would be very easy to miss a close brace.Let us know how it goes.", 'num_user_post': u' 401', 'author': u'cstapels'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/cant-send-data-via-mobile-data/', 'posts': [{'date': u'January 21, 2018 - 11:33 am', 'content': u"Hello,I've ESP 8266 12-E on Nodemcu board. I've programmed it via Arduino IDE to send data to two channels (8+7 fields) on Thingspeak every minute. When ESP is connected to my home WiFi it takes approximately 6-8 seconds (3-4s per channel) to send a data.I want to have more portable device so I programmed it to send data via my phone tethering (access point) by changing SSID and password to my phone. ESP12-E connected to it (1 connected client on statusbar), sending data took almost 12 seconds - probably because of weaker range.Unfortunately it wasn't sent (or received?). I tried to use second (older and worse) phone. Sending took almost 20 seconds but the result was the same.It works only on my home WiFi (didn't test other routers). Should I change something or ThingSpeak isn't compatible with phones? Or it takes too long? What could be a reason?", 'num_user_post': u' 2', 'author': u'Atex'}, {'date': u'January 21, 2018 - 6:59 pm', 'content': u'Do you still have the serial monitor connected on your NODE MCU when you are sending?\xa0 Are you parsing the response from the server?\xa0 Can you share what the server is returning?', 'num_user_post': u' 401', 'author': u'cstapels'}, {'date': u'January 22, 2018 - 10:47 am', 'content': u"Yes... and no. At the beginning I had tried it with serial monito. Later I tried resetting ESP, using it without serial monitor and without connecting it to my PC. My ESP is plugged to my PCB and has external power supply. With it and without connecting to PC it works on my home wifi, but hOn serial monitor I wrote Serial.printlns under calling the following function. They contained sending times thanks to millis() function.\xa0Sending is divided into 2 parts because only in that way I am able to send data to 2 channels at once. I've commented one but result was the same.void sendDataToCloud(){\xa0\xa0\xa0\xa0\xa0 for(a=0; a<8; a++)\xa0\xa0\xa0\xa0\xa0 {\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 ThingSpeak.setField(a+1, power[a]);\xa0\xa0\xa0\xa0\xa0 }\xa0\xa0\xa0\xa0\xa0 ThingSpeak.writeFields(channelNumber1, writeAPIKey1);\xa0\xa0\xa0\xa0\xa0 ESP.wdtFeed(); //optional to prevent watchdog triggering\xa0\xa0\xa0\xa0\xa0 for(a=8; a<15; a++)\xa0\xa0\xa0\xa0\xa0 {\xa0\xa0\xa0\xa0\xa0 ThingSpeak.setField(a-7, power[a]);\xa0\xa0\xa0\xa0\xa0 }\xa0\xa0\xa0\xa0\xa0 ThingSpeak.writeFields(channelNumber2, writeAPIKey2);}\xa0I don't parse any data on server. ON ESP I'm deleting min/max values only, then solving few equations and then writing them using ThingSpeak.setField. Even ESP is connected to my phone, the data doesn't leave it. Phone isn't on sleep mode and has all permissions.\xa0My sending code is based on these two from Mathworks examples:https://www.mathworks.com/help/thingspeak/read-and-post-temperature-data.htmlhttps://www.mathworks.com/help/thingspeak/continuously-collect-data-and-bulk-update-a-thingspeak-channel-using-an-arduino-mkr1000-board-or-an-esp8266-board.html", 'num_user_post': u' 2', 'author': u'Atex'}]}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/page-3/', 'threads': [{'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/cant-connect-with-thingspeak-esp8266-01/', 'posts': [{'date': u'November 3, 2017 - 5:46 pm', 'content': u"Hi Everyone,I been trying to do a project of IOT so I want to send data to my channel in Thingspeak but I don't know how. There's a general code to do it?\xa0I'm using ESP8266-01 and AT commands.\xa0Could you help me, please?\xa0Thanks!!!AiR\xa0\xa0Serial.print('Connecting to '); Serial.println(ssid); WiFi.begin(ssid, pass);  while (WiFi.status() != WL_CONNECTED) { delay(1000); Serial.println('.');\xa0}\xa0This part doesn't conect my ESP to my WiFi network. Help me please.", 'num_user_post': u' 1', 'author': u'AiR'}, {'date': u'November 14, 2017 - 1:19 pm', 'content': u'Hi,please show us the whole code here and tell us something about your infrastructure. Did you include the necessary libraries?Try to understand the function of the libraries you use by trying the examples and then try to modify it to your wishes.\xa0Michael', 'num_user_post': u' 5', 'author': u'beekeeper'}, {'date': u'January 1, 2018 - 2:50 pm', 'content': u"You have not supplied enough information about your networkIf trying from home, do you have One Router or more than one?Are you using DHCP or Static IP addresses?\xa0\xa0 (Probably DHCP, but if you know that helps)\xa0Does your ESP8266 show up in the list of available networks on your cellphone?Can you issue AT commands to the ESP8266 and get response 'OK' ?", 'num_user_post': u' 15', 'author': u'Piez'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/http-get-response-2-but-data-are-sent-properly/', 'posts': [{'date': u'December 27, 2017 - 2:14 pm', 'content': u"I need to check data are correctly handled. Now I try to get httpcode and always returns -2 but data are sent properly. The code is:if (client.connect('api.thingspeak.com',80)) { writeAPIKey = 'key=XXXXXXXXXXX'; tsfield1Name = '&field1=10'; request_string = thingSpeakAddress; request_string += 'key='; request_string += 'XXXXXXXXXXXX'; request_string += '&'; request_string += 'field5'; request_string += '='; request_string += (tempe); http.begin(request_string); http.GET(); int httpCode = http.GET(); Serial.println(httpCode); String payload = http.getString(); //Get the request response payload Serial.println(payload); http.end();I am sure something is wrong.", 'num_user_post': u' 3', 'author': u'alcapar'}, {'date': u'December 28, 2017 - 9:27 pm', 'content': u'Perhaps you want to try modifying one of the many examples listed here:https://www.mathworks.com/help/thingspeak/examples.html', 'num_user_post': u' 225', 'author': u'Vinod'}, {'date': u'December 31, 2017 - 12:50 pm', 'content': u'Thank you, I did it and it works.', 'num_user_post': u' 3', 'author': u'alcapar'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/esp-8266-wifi-not-collecting-data-from-ts/', 'posts': [{'date': u'December 29, 2017 - 12:10 am', 'content': u"My Thing Speak is attached to my ESP 8266 but no data is being recorded. I did a test on it with my public channel and it worked. However it will not update data on my current private channel. Here is the code. Any help will be appreciated!\xa0\xa0\xa0#include <ESP8266WiFi.h>#include 'DHT.h'\xa0/*************************** * Begin Settings **************************/\xa0const char* ssid = 'WuTangLAN';const char* password = 'spranktank7664A';const char* host = 'api.thingspeak.com';const char* THINGSPEAK_API_KEY = '9DAGDL2109WC8DIJ';// DHT Settings#define DHTPIN D6 // what digital pin we're connected to. If you are not using NodeMCU change D6 to real pin\xa0// Uncomment whatever type you're using!//#define DHTTYPE DHT11 // DHT 11#define DHTTYPE DHT22 // DHT 22 (AM2302), AM2321//#define DHTTYPE DHT21 // DHT 21 (AM2301)const boolean IS_METRIC = true;// Update every 420 seconds = 7 minutes. Min with Thingspeak is ~20 secondsconst int UPDATE_INTERVAL_SECONDS = 420;/*************************** * End Settings **************************/// Initialize the temperature/ humidity sensorDHT dht(DHTPIN, DHTTYPE);void setup() { Serial.begin(115200); delay(10);// We start by connecting to a WiFi networkSerial.println(); Serial.println(); Serial.print('Connecting to '); Serial.println(ssid); WiFi.begin(ssid, password); while (WiFi.status() != WL_CONNECTED) { delay(500); Serial.print('.'); }Serial.println(''); Serial.println('WiFi connected'); Serial.println('IP address: '); Serial.println(WiFi.localIP());}void loop() { Serial.print('connecting to '); Serial.println(host); // Use WiFiClient class to create TCP connections WiFiClient client; const int httpPort = 80; if (!client.connect(host, httpPort)) { Serial.println('connection failed'); return; }// read values from the sensor float humidity = dht.readHumidity(); float temperature = dht.readTemperature(!IS_METRIC); // We now create a URI for the request String url = '/update?api_key='; url += THINGSPEAK_API_KEY; url += '&field1='; url += String(temperature); url += '&field2='; url += String(humidity); Serial.print('Requesting URL: '); Serial.println(url); // This will send the request to the server client.print(String('GET ') + url + ' HTTP/1.1' + 'Host: ' + host + '' + 'Connection: close'); delay(10); while(!client.available()){ delay(100); Serial.print('.'); } // Read all the lines of the reply from server and print them to Serial while(client.available()){ String line = client.readStringUntil(''); Serial.print(line); } Serial.println(); Serial.println('closing connection');\xa0// Go back to sleep. If your sensor is battery powered you might // want to use deep sleep here delay(1000 * UPDATE_INTERVAL_SECONDS);}", 'num_user_post': u' 8', 'author': u'ashebray'}, {'date': u'December 29, 2017 - 10:56 am', 'content': u'I think the order of your commands is wrong.\xa0 You are printing the GET verb after you provide the address.\xa0 Have a look at the soil moisture example in the doc.\xa0 It uses POST instead of GET, but the process is similar.\xa0 Let us know if you get it going.', 'num_user_post': u' 401', 'author': u'cstapels'}, {'date': u'December 30, 2017 - 9:40 pm', 'content': u"cstapels said  I think the order of your commands is wrong.\xa0 You are printing the GET verb after you provide the address.\xa0 Have a look at the soil moisture example in the doc.\xa0 It uses POST instead of GET, but the process is similar.\xa0 Let us know if you get it going.\xa0\xa0How do I change the order? Or change from GET to POST? Sorry for the questions, I'm just having a rough time with this!", 'num_user_post': u' 8', 'author': u'ashebray'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/support-for-esp32-added-to-thingspeak-library/', 'posts': [{'date': u'December 13, 2017 - 2:17 pm', 'content': u'There is a new release of the ThingSpeak Client Libraries for Arduino that adds support for ESP32.The new v1.3.3 release and is accessible from github or through the Arduino IDE library manager.In order to make it work, the Arduino Core for ESP32 will need to be installed.\xa0 Some installation instruction can be found here.', 'num_user_post': u' 34', 'author': u'JasonW'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/esp32-library/', 'posts': [{'date': u'November 14, 2017 - 1:06 pm', 'content': u"Hi,is there any ARDUINO-library working fine with the ESP32 Development-board? I would like to change a Arduino MKR1000 (everything works fine) by using a ESP32. Now uploading the sketch aborts with message 'Platform not supported' .Thanks for your replies.Michael", 'num_user_post': u' 5', 'author': u'beekeeper'}, {'date': u'November 14, 2017 - 1:56 pm', 'content': u"Check out the instructions on the ThingSpeak examples page for the ESP32 WIFi monitor.\xa0 I've used those instructions to program my ESP32 dev board with Arduino.", 'num_user_post': u' 401', 'author': u'cstapels'}, {'date': u'December 13, 2017 - 2:10 pm', 'content': u'The latest release (1.3.3) of the ThingSpeak Client Libraries adds support for ESP32.\xa0\xa0The ESP32 Arduino Core will need to be installed to make it work.\xa0 Some installation instruction can be found here.', 'num_user_post': u' 34', 'author': u'JasonW'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/esp8266-comunicating-to-thingspeak/', 'posts': [{'date': u'December 10, 2017 - 9:48 am', 'content': u"I'm trying to via WiFi internet router update a ThingSpeak channel by posting a feed with HTTP POST. I just try ESP8266 to generate numbers a and load them into a graph. I get answer 200 OK, however, nothing appears in the graph. Problem is in strings to send or where else?Answer on Serial monitor:HTTP/1.1 200 OKContent-Type: text/html; charset=utf-8Content-Length: 1Connection: closeStatus: 200 OKX-Frame-Options: ALLOWALLAccess-Control-Allow-Origin: *Access-Control-Allow-Methods: GET, POST, PUT, OPTIONS, DELETE, PATCHAccess-Control-Allow-Headers: origin, content-type, X-Requested-WithAccess-Control-Max-Age: 1800ETag: '5ef059938ba799aaa845e1c2e8a762bd'Cache-Control: max-age=0, private, must-revalidateSet-Cookie: request_method=POST; path=/X-Request-Id: a7d6719b-d8c3-4f5e-9039-b13f44d6050eX-Runtime: 0.190082X-Powered-By: Phusion Passenger 4.0.57Date: Sun, 10 Dec 2017 14:21:03 GMTServer: nginx/1.9.3 + Phusion Passenger 4.0.57\xa01..disconnected\xa0code part:\xa0void loop() {if (client.available()){char c=client.read();Serial.print(c);}if (!client.connected()&&lastConnected){Serial.println('..disconnected');Serial.println();client.stop();}if (!client.connected()&&(millis()-lastConnectionTime>updateThingSpeakInterval)) {String data='field1=';data+=a;if (client.connect(thingSpeakAddress,80)) {client.print('POST /update HTTP/1.1');client.print('Host: api.thingspeak.com');client.print('Connection: close');client.print('X-THINGSPEAKAPIKEY:' +APIKey+ '');client.print('Content-Type: application/x-ww-form-urlencoded');client.print('Content-Lenght:');client.print(data.length());client.print('');client.print(data);Serial.print('data:');Serial.println(data);lastConnectionTime=millis();if (client.connected()) {Serial.println('Connecting to ThingSpeak...');}}a+=1;} lastConnected=client.connected();}\xa0Any help would be great.\xa0", 'num_user_post': u' 4', 'author': u'Diena'}, {'date': u'December 11, 2017 - 8:36 am', 'content': u"One thing I noticed is that you have a small error in one of your HTTP headers.\xa0 You have the word Length spelled as\xa0 'Lenght', I'm not sure if that would cause the problem.Is it possible for you to share you channel ID, or share the channel privately with me (my user name\xa0 <at> mathworks.com)?\xa0\xa0", 'num_user_post': u' 401', 'author': u'cstapels'}, {'date': u'December 11, 2017 - 12:50 pm', 'content': u'My channel ID 375555.\xa0I am correcting the word, but there are still no positive changes. By the way thingspeak account my entries, but nothing in graf.', 'num_user_post': u' 4', 'author': u'Diena'}, {'date': u'December 11, 2017 - 2:06 pm', 'content': u"Can you show the serial output for this line?\xa0\xa0Serial.print('data:');Perhaps that will show what is happening to the data.\xa0Your channel is private, so I cannot see the data.\xa0 You can share it with me privately using the sharing tab if this is possible for you to share your information.\xa0You could also consider using the ThingSpeak Communication Library for Arduino and ESP8266.\xa0 If you are interested, have a look at the temperature posting example for ESP8266.You may also have a look at the Soil Monitor example \xa0This example uses the client directly like you are and does not use the ThingSpeak communication library.", 'num_user_post': u' 401', 'author': u'cstapels'}, {'date': u'December 11, 2017 - 3:50 pm', 'content': u"You may also want to look at the chart options.\xa0 Press the pencil on the upper right of your field 1 chart and make sure that you don't have any averaging or change in time scale settings on.\xa0 Also make sure there aren't modifications to the axis limits.\xa0 These settings may make your data not appear on the chart.", 'num_user_post': u' 401', 'author': u'cstapels'}, {'date': u'December 12, 2017 - 2:18 am', 'content': u"No problem, I share chanel with you.Serial output, data:&field1=0, next, data:&field1=1 ...I try with '&' and without, no positive change.my feeling that it's really something with a scale or other parameter of interpretation, but I do not really understand exactly what it is.In chart options. Only 4 parameters: Color:#d62020, Bacground:#ffffff, type:line, Dinamic?:true.Any ideas?", 'num_user_post': u' 4', 'author': u'Diena'}, {'date': u'December 12, 2017 - 8:50 am', 'content': u'Thank you very much for the cooperation. It was felt that this had almost happened, but some inaccuracies prevented understanding the problem.Cstapels, thanks to your attention, I discovered another inaccuracy and everything is happening.It turns out that the error in the content type queue is more relevant than the content length error.One w came out.Best regards!', 'num_user_post': u' 4', 'author': u'Diena'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/bad-request-400/', 'posts': [{'date': u'December 8, 2017 - 5:37 am', 'content': u"Hello , i use a WeMos D1 mini with a BME280 on my channel . It has worked with this sketch , but now i get bad request 400 . What went wrong ??\xa0\xa0#include <BME280_MOD-1022.h>#include <Wire.h>// Wifi and ThingSpeak settings#include <ESP8266WiFi.h>const char* ssid = 'XXXXXX';const char* password = 'XXXXXXXXX';const char* server = 'api.thingspeak.com';const char* api_key = 'DFFSB76BCWGXXXX';// Measurement interval (seconds)const int interval = 300; //5 mins#define LED D4WiFiClient client;void printFormattedFloat(float x, uint8_t precision) {char buffer[10];dtostrf(x, 7, precision, buffer); Serial.print(buffer);}void printCompensatedMeasurements(void) {float temp, humidity, pressure, pressureMoreAccurate;double tempMostAccurate, humidityMostAccurate, pressureMostAccurate;char buffer[80];temp = BME280.getTemperature(); humidity = BME280.getHumidity(); pressure = BME280.getPressure(); pressureMoreAccurate = BME280.getPressureMoreAccurate(); // t_fine already calculated from getTemperaure() above tempMostAccurate = BME280.getTemperatureMostAccurate(); humidityMostAccurate = BME280.getHumidityMostAccurate(); pressureMostAccurate = BME280.getPressureMostAccurate(); Serial.print('Temperature: '); printFormattedFloat(tempMostAccurate, 2); Serial.println(); Serial.print('Humidity: '); printFormattedFloat(humidityMostAccurate, 2); Serial.println();Serial.print('Pressure: '); printFormattedFloat(pressureMostAccurate, 2); Serial.println();// Post data to ThingSpeak postData(tempMostAccurate, humidityMostAccurate, pressureMostAccurate); Serial.println();}void postData(float temperature, float humidity, float pressure){ // Send data to ThingSpeak if (client.connect(server,80)) { Serial.println('Connect to ThingSpeak - OK');String dataToThingSpeak = ''; dataToThingSpeak+='GET /update?api_key='; dataToThingSpeak+=api_key; dataToThingSpeak+='&field1='; dataToThingSpeak+=String(temperature);dataToThingSpeak+='&field2='; dataToThingSpeak+=String(humidity);dataToThingSpeak+='&field3='; dataToThingSpeak+=String(pressure); dataToThingSpeak+=' HTTP/1.1Host: a.c.dConnection: close'; dataToThingSpeak+=''; client.print(dataToThingSpeak);int timeout = millis() + 5000; while (client.available() == 0) { if (timeout - millis() < 0) { Serial.println('Error: Client Timeout!'); client.stop(); return; } }} while(client.available()){ String line = client.readStringUntil(''); Serial.print(line); }}\xa0// Setup wire and serialvoid setup(){ Wire.begin(); Serial.begin(115200); pinMode(LED, OUTPUT); delay(10); Serial.println('Connecting to wifi...'); WiFi.begin(ssid, password);while (WiFi.status() != WL_CONNECTED){ // Blink LED when connecting to wifi digitalWrite(LED, LOW); delay(250); digitalWrite(LED, HIGH); delay(250); } Serial.println('WiFi connected');// Prepare LED to turn on when measuring and send data}// main loopvoid loop(){ // need to read the NVM compensation parameters BME280.readCompensationParams();// We'll switch into normal mode for regular automatic samples BME280.writeStandbyTime(tsb_0p5ms); // tsb = 0.5ms BME280.writeFilterCoefficient(fc_16); // IIR Filter coefficient 16 BME280.writeOversamplingPressure(os16x); // pressure x16 BME280.writeOversamplingTemperature(os2x); // temperature x2 BME280.writeOversamplingHumidity(os1x); // humidity x1 BME280.writeMode(smNormal); while (1) { //digitalWrite(LED, LOW); while (BME280.isMeasuring()) { //Serial.println('Measuring...'); //delay(100); } // read out the data - must do this before calling the getxxxxx routines BME280.readMeasurements(); printCompensatedMeasurements(); // digitalWrite(LED, HIGH); delay(interval*1000); Serial.println(); }}", 'num_user_post': u' 1', 'author': u'Bulldogbob'}, {'date': u'December 11, 2017 - 9:08 am', 'content': u"Can you look at the output that is generated from 'client.print(dataToThingSpeak);'\xa0 You could add a Serial.println(dataToThingSpeak); and then copy and paste that line to the address bar in your browser (don't forget to delete the 'GET').\xa0 This might help show why it is failing. Can you post it here?", 'num_user_post': u' 401', 'author': u'cstapels'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/can-i-use-two-esp8266-on-one-arduino-unoxbee-s2c-to-sending-sensor-data-to-thingspeak/', 'posts': [{'date': u'December 8, 2017 - 9:51 am', 'content': u"hi all,I use 4 XBee for temperature monitoring using cluster tree. Two XBee+Arduino as end devices so they send temperature data (I use LM35) to another XBee+Arduino as router, and then the router send the receive data from two end devices to the last XBee+Arduino as coordinator (2 end devices -> 1 router -> 1 coordinator). So, can I use two ESP8266 for sending the temperature data on one coordinator to separate them as Field1 and Field2? Or there is another way to show them to Thingspeak?So far, I can show the data to Thingspeak from 1 end device although the data is not correct but it can connect to Thingspeak (1 end device -> 1 router -> 1 coordinator).I'm new to this and not really good in english so sorry if i made some mistakes. Thankyou so much the Arduino code://for end device 1int temp;int tempPin = 0;void setup(){Serial.begin(115200);}void loop(){temp = analogRead(tempPin);temp = (temp * 0.48820125);Serial.print(temp);delay(3000);}--------------------------------------------------------------------//for routerint incomingByte=0;void setup() { Serial.begin(115200);}void loop() { while(Serial.available()>0){ incomingByte = Serial.read(); Serial.print(incomingByte); }}--------------------------------------------------------------------//for server#include <SoftwareSerial.h>#include <stdlib.h>int incomingByte = 0;String apiKey = 'X4QOYQUT5ZN1OZ58';SoftwareSerial ser(10,11); void setup() { Serial.begin(115200); ser.begin(115200);}void loop() { while (Serial.available() > 0) { incomingByte = Serial.read(); char buf[16]; String strtemp = dtostrf(incomingByte,5,1,buf); Serial.print(strtemp); String cmd = 'AT+CIPSTART='TCP',''; cmd += '184.106.153.149'; // api.thingspeak.com cmd += '',80'; ser.println(cmd);if(ser.find('Error')){ Serial.println('AT+CIPSTART error'); return; }String getStr = 'GET /update?api_key='; getStr += apiKey; getStr += '&field1='; getStr += String(strtemp); getStr += '';cmd = 'AT+CIPSEND='; cmd += String(getStr.length()); ser.println(cmd); if(ser.find('>')){ ser.print(getStr); } else{ ser.println('AT+CIPCLOSE'); Serial.println('AT+CIPCLOSE'); } }}", 'num_user_post': u' 1', 'author': u'valenciaa'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/need-some-help-regarding-esp8266-thingspeak/', 'posts': [{'date': u'December 2, 2017 - 1:18 am', 'content': u"I'm using ESP8266 as WiFi cloud posting device for my sensor nodes.Taking data from a sensor node via UART (Software UART) -> Get Timestamp from RTC -> Store that data into SD card -> On regular time interval Post collected data to Thingspeak using Bulk Data update API.Issue I'm facing is while ESP8266 posting data to Thingspeak it remains busy to get back the response from thingspeak for successful posting. It takes 6 - 8 seconds normally and sometimes if internet is down it takes 25 - 30 seconds.So during this time, ESP8266 not able to get data from Sensor node via UART.Is there any way to get data via UART during the time of posting also???I'm usingArduino IDENodeMCU as ESP8266 boardThingspeak REST API bulk updateUART communication between sensor node and ESP8266Any other alternative way is also acceptable like instead of using UART, use SPI.", 'num_user_post': u' 2', 'author': u'deep_kap'}, {'date': u'December 3, 2017 - 8:42 pm', 'content': u'If you post the code you are now using for the upload you may get more help in improving it.\xa0 In my experience most of the wifi upload time is spent waiting for the network or the other end so it may well be possible to go on collecting data in the meantime, if you have the right code.', 'num_user_post': u' 271', 'author': u'rw950431'}, {'date': u'December 7, 2017 - 1:02 am', 'content': u"rw950431 said If you post the code you are now using for the upload you may get more help in improving it.\xa0 In my experience most of the wifi upload time is spent waiting for the network or the other end so it may well be possible to go on collecting data in the meantime, if you have the right code.\xa0\xa0Here is the part of code that post the data.\xa0client.stop();String data_length = String(http_data.length() + 1);if (client.connect(server, 80)){String temp_buffer = const_http_header + data_length;client.println(temp_buffer); client.println(); client.println(http_data);}else{Serial.println('Failure: Failed to connect to ThingSpeak');}delay(250);client.parseFloat();String resp = String(client.parseInt());if(resp == '202'){Serial.println('Posted Successfully');}else{Serial.println('Error in posting');Serial.println('Error : ' + resp);}", 'num_user_post': u' 2', 'author': u'deep_kap'}, {'date': u'December 7, 2017 - 6:24 pm', 'content': u'There is discussion about problems similar to yours at https://github.com/esp8266/Arduino/issues/1420', 'num_user_post': u' 271', 'author': u'rw950431'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/extraer-datos-de-thingspeak-sin-utilizar-libreria/', 'posts': [{'date': u'November 13, 2017 - 5:54 pm', 'content': u"Buenas tardes, quisiera saber como hacer para extraer o bajar datos de un canal de thingspeak sin necesidad de utilizar su librer\xeda. Este es el c\xf3digo que llevo por ahora. Les agradezco su colaboraci\xf3n.\xa0#include <ESP8266WiFi.h>\xa0String apiKey = 'MMRSR6BEWE7CZ26Z';const char *ssid = '--------';const char *pass = '++++++++';const char* host = 'api.thingspeak.com';void setup(){Serial.begin(9600); Serial.println('Connecting to '); Serial.println(ssid); WiFi.begin(ssid, pass); while (WiFi.status() != WL_CONNECTED) { delay(500); Serial.print('.'); } Serial.println(''); Serial.println('WiFi connected');}void loop(){ WiFiClient client_1; //Inicializamos el cliente (client_1) Serial.printf('[Conectando a %s ... ', host); //Establecemos la conexi\xf3n con el servidor if (client_1.connect(host, 80)) { Serial.println('conectado]'); Serial.println('[Enviando peticion]'); //Enviamos la petici\xf3n de datos client_1.print(String('GET /') + ' HTTP/1.1' + 'Host: ' + host + '' + 'Connection: close' + '' ); Serial.println('[Respuesta:]'); //Leemos la respuesta del servidor while (client_1.connected()) { if (client_1.available()) { Serial.println(client_1.read()); Serial.println('-------------------------------------------'); delay(5000); } } client_1.stop(); //Finalizamos la conexi\xf3n con el servidor Serial.println('[Desconectado]'); } else { Serial.println('conexion con el servidor no lograda!]'); client_1.stop(); } delay(10000);}", 'num_user_post': u' 1', 'author': u'Sergio_Tolosa'}, {'date': u'November 14, 2017 - 3:24 pm', 'content': u"El ejemplo del monitor de suelo muestra c\xf3mo enviar datos sin la biblioteca.Puede ver la sintaxis correcta para que GET recupere datos en Obtener un canal de informaci\xf3n.Parece que te perdiste el texto de la solicitud en el c\xf3digo anterior.'\xa0GET to\xa0https://api.thingspeak.com/channels/CHANNEL_ID/feeds'Aqu\xed hay un fragmento que podr\xeda ayudar:if (client.connect(thingSpeakAddress, 80)) {\xa0 \xa0 client.println('GET /channels/'+tsChannel+tsFolder+tsField+'/last.txt');\xa0 \xa0 client.println();} else {\xa0 failedCounter++;\xa0 \xa0 lastConnectionTime = millis(); } delay(500); String response; char charIn; do { charIn = client.read(); // read a char from the buffer response += charIn; // append that char to the string response } while (client.available() > 0);client.stop();\xa0The soil monitor example shows how to send data without the library.\xa0You can see the correct syntax for the GET to retrieve data on Get a Channel Feed.\xa0It looks like you missed the text of the request in the code above.'\xa0GET to\xa0https://api.thingspeak.com/channels/CHANNEL_ID/feeds'Here is a snippet that might help:if (client.connect(thingSpeakAddress, 80)) {\xa0 \xa0 client.println('GET /channels/'+tsChannel+tsFolder+tsField+'/last.txt');\xa0 \xa0 client.println();} else {\xa0 failedCounter++;\xa0 \xa0 lastConnectionTime = millis(); } delay(500); String response; char charIn; do { charIn = client.read(); // read a char from the buffer response += charIn; // append that char to the string response } while (client.available() > 0);client.stop();Hope the Spanish is ok.\xa0 I used Google translate but checked it with my Spanish immersion student son.\xa0 I think he is going to charge me for the service.", 'num_user_post': u' 401', 'author': u'cstapels'}, {'date': u'December 5, 2017 - 9:01 am', 'content': u"The\xa0soil monitor example\xa0shows how to\xa0send\xa0data without the library.\xa0You can see the correct syntax for the GET to\xa0retrieve\xa0data on\xa0Get a Channel Feed.\xa0It looks like you missed the text of the request in the code above.'\xa0GET to\xa0https://api.thingspeak.com/channels/CHANNEL_ID/feeds'\xa0Here is a snippet that might help:if (client.connect(thingSpeakAddress, 80)){\xa0 \xa0 client.println('GET /channels/'+tsChannel+tsFolder+tsField+'/last.txt');\xa0 \xa0 client.println();}else{\xa0 failedCounter++;\xa0 \xa0 lastConnectionTime = millis();}delay(500);String response;char charIn;do {charIn = client.read(); // read a char from the bufferresponse += charIn; // append that char to the string response}while (client.available() > 0);client.stop();", 'num_user_post': u' 401', 'author': u'cstapels'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/cant-access-192-168-4-1-ip/', 'posts': [{'date': u'October 30, 2017 - 9:45 am', 'content': u"Dear all member!I've finished a project Mega2560 & esp8266, esp8266's like picture. I used Sky phone & Asus phone to access in wifi, then accessed in 192.168.4.1 IP by Chrome okey! But when I used Iphone & Samsung phone, I just only accessed in wifi ok, then I couldn't access in 192.168.4.1 IP by Safari of Iphone & Chrome of Samsung. Please help me for accessing in 192.168.4.1 IP ok with all type of smart phone! Thank you.", 'num_user_post': u' 1', 'author': u'duydt2'}, {'date': u'November 14, 2017 - 1:23 pm', 'content': u'Are you using the same WIFI-Access, or are you using the mobile-data-function of your smartphone?', 'num_user_post': u' 5', 'author': u'beekeeper'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/try-to-read-a-temperature-and-humidity-sensor-si7020-using-i2c-on-the-esp32/', 'posts': [{'date': u'November 13, 2017 - 3:27 am', 'content': u"I am trying to read a temperature and humidity sensor (SI7020:http://www.kynix.com/Parts/2489506/SI7020-A10-GM.html) using I2C on the ESP32.I modified their example code to read just from one slave device (0x40) but some commands do not work. I tried resetting the device with 0xFE as well.I can read the device ID (0xFA):*******************TASK[0] MASTER READ SENSOR( SI7020 )*******************data_h: 48data_l: 52sensor val: 15428.333333However if I try and read the temperature (0xE3), I get:data_h: 00data_l: 00If I use 0xE0 I always get:data_h: 39data_l: 9fWhy am I not able to read the temperature from SI7020?The code I'm using:#include <stdio.h>#include 'driver/i2c.h'\xa0#define DATA_LENGTH 512 /*!<Data buffer length for test buffer*/#define RW_TEST_LENGTH 127 /*!<Data length for r/w test, any value from 0-DATA_LENGTH*/#define DELAY_TIME_BETWEEN_ITEMS_MS 2000 /*!< delay time between different test items */#define I2C_EXAMPLE_MASTER_SCL_IO 19 /*!< gpio number for I2C master clock */#define I2C_EXAMPLE_MASTER_SDA_IO 18 /*!< gpio number for I2C master data */#define I2C_EXAMPLE_MASTER_NUM I2C_NUM_1 /*!< I2C port number for master dev */#define I2C_EXAMPLE_MASTER_TX_BUF_DISABLE 0 /*!< I2C master do not need buffer */#define I2C_EXAMPLE_MASTER_RX_BUF_DISABLE 0 /*!< I2C master do not need buffer */#define I2C_EXAMPLE_MASTER_FREQ_HZ 100000 /*!< I2C master clock frequency */#define SI7020_SENSOR_ADDR 0x40 /*!< slave address for SI7020 sensor */#define SI7020_CMD_READ 0xE0 /*!< Command to set measure mode *///#define ESP_SLAVE_ADDR 0x28 /*!< ESP32 slave address, you can set any 7bit value */#define WRITE_BIT I2C_MASTER_WRITE /*!< I2C master write */#define READ_BIT I2C_MASTER_READ /*!< I2C master read */#define ACK_CHECK_EN 0x1 /*!< I2C master will check ack from slave*/#define ACK_CHECK_DIS 0x0 /*!< I2C master will not check ack from slave */#define ACK_VAL 0x0 /*!< I2C ack value */#define NACK_VAL 0x1 /*!< I2C nack value */xSemaphoreHandle print_mux;/** * @brief test code to write esp-i2c-slave * * 1. set mode * _________________________________________________________________ * | start | slave_addr + wr_bit + ack | write 1 byte + ack | stop | * --------|---------------------------|---------------------|------| * 2. wait more than 24 ms * 3. read data * ______________________________________________________________________________________ * | start | slave_addr + rd_bit + ack | read 1 byte + ack | read 1 byte + nack | stop | * --------|---------------------------|--------------------|--------------------|------| */static esp_err_t i2c_example_master_sensor_test(i2c_port_t i2c_num, uint8_t* data_h, uint8_t* data_l){ i2c_cmd_handle_t cmd = i2c_cmd_link_create(); i2c_master_start(cmd); i2c_master_write_byte(cmd, SI7020_SENSOR_ADDR << 1 | WRITE_BIT, ACK_CHECK_DIS); i2c_master_write_byte(cmd, SI7020_CMD_READ, ACK_CHECK_EN); i2c_master_stop(cmd); int ret = i2c_master_cmd_begin(i2c_num, cmd, 1000 / portTICK_RATE_MS); i2c_cmd_link_delete(cmd); if (ret == ESP_FAIL) { return ret; } vTaskDelay(1000 / portTICK_RATE_MS);cmd = i2c_cmd_link_create(); i2c_master_start(cmd); i2c_master_write_byte(cmd, SI7020_SENSOR_ADDR << 1 | READ_BIT, ACK_CHECK_DIS); i2c_master_read_byte(cmd, data_h, ACK_VAL); i2c_master_read_byte(cmd, data_l, NACK_VAL); i2c_master_stop(cmd); ret = i2c_master_cmd_begin(i2c_num, cmd, 1000 / portTICK_RATE_MS); i2c_cmd_link_delete(cmd); if (ret == ESP_FAIL) { return ESP_FAIL; } return ESP_OK;}/** * @brief i2c master initialization */static void i2c_example_master_init(){ int i2c_master_port = I2C_EXAMPLE_MASTER_NUM; i2c_config_t conf; conf.mode = I2C_MODE_MASTER; conf.sda_io_num = I2C_EXAMPLE_MASTER_SDA_IO; conf.sda_pullup_en = GPIO_PULLUP_ENABLE; conf.scl_io_num = I2C_EXAMPLE_MASTER_SCL_IO; conf.scl_pullup_en = GPIO_PULLUP_ENABLE; conf.master.clk_speed = I2C_EXAMPLE_MASTER_FREQ_HZ; i2c_param_config(i2c_master_port, &conf); i2c_driver_install(i2c_master_port, conf.mode, I2C_EXAMPLE_MASTER_RX_BUF_DISABLE, I2C_EXAMPLE_MASTER_TX_BUF_DISABLE, 0);}static void i2c_test_task(void* arg){ int i = 0; int ret; uint32_t task_idx = (uint32_t) arg; uint8_t* data = (uint8_t*) malloc(DATA_LENGTH); uint8_t sensor_data_h, sensor_data_l;while (1) { ret = i2c_example_master_sensor_test( I2C_EXAMPLE_MASTER_NUM, &sensor_data_h, &sensor_data_l); xSemaphoreTake(print_mux, portMAX_DELAY); printf('*******************'); printf('TASK[%d] MASTER READ SENSOR( SI7020 )', task_idx); printf('*******************'); if (ret == ESP_OK) { printf('data_h: %02x', sensor_data_h); printf('data_l: %02x', sensor_data_l); printf('sensor val: %f', ( sensor_data_h << 8 | sensor_data_l ) / 1.2); } else { printf('No ack, sensor not connected...skip...'); } xSemaphoreGive(print_mux); vTaskDelay(( DELAY_TIME_BETWEEN_ITEMS_MS * ( task_idx + 1 ) ) / portTICK_RATE_MS);//--------------------------------------------------- for (i = 0; i < DATA_LENGTH; i++) { data[i] = i; } }}void app_main(){ print_mux = xSemaphoreCreateMutex(); //i2c_example_slave_init(); i2c_example_master_init();xTaskCreate(i2c_test_task, 'i2c_test_task_0', 1024 * 2, (void* ) 0, 10, NULL); //xTaskCreate(i2c_test_task, 'i2c_test_task_1', 1024 * 2, (void* ) 1, 10, NULL);}\xa0Can anyone help me out?Thanks!", 'num_user_post': u' 2', 'author': u'Linaa'}]}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/page-4/', 'threads': [{'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/parameter-timeout_ms_serverresponse-do-not-reflect-actual-system-time/', 'posts': [{'date': u'November 8, 2017 - 3:53 pm', 'content': u"Hello guys,I have an application running a Server and a Client together, along with the need to count coins, responding pretty much in real time, which has been a challenge. As we all know the\xa0server.handleClient()\xa0function is the bottleneck of the system, having to be instantiated very often under risk of resetting the system by watchdog timer.So, to prevent the system from getting stuck in an overly long loop, I reduced the Timeout of the client function parameter that talks to the cloud, namely the TIMEOUT_MS_SERVERRESPONSE value was reduced from 5,000ms to 1,500ms in the ThingSpeak.h file (C:UsersDocumentsArduinolibrariesThingSpeaksrc).But this seemed have not being reflected in the actual execution of the program, because when surrounding the function below, sometimes due to network issues, it takes a lot of time to get away, much more than the value that I have modified above.Serial.println ('Start-Upload'); ThingSpeak.WriteField ( .... );\xa0 Serial.println ('Stop-Upload');Perhaps it is needed to perform a correction factor multiplication on that (\xa0I'm on a module running at 80MHz ).\xa0Does anybody know hot to fix that ?", 'num_user_post': u' 1', 'author': u'andre_teprom'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/reading-back-data-from-thingspeak/', 'posts': [{'date': u'July 30, 2017 - 8:15 am', 'content': u"\xa0Hi All.I have set up \xa0a Thingspeak channel with the purpose of logging how many times a tweet hashtag is used. This is OK.I have also set up a ThingHTTP with a TweetControl to do the above and log it to field 1 of the channel. This is OK. I make a Tweet and the number of events increases. I can also achieve the same by using the ThingHTTP code in a browser too. All happy.I have also set up another ThingHTTP to read just the entry_id of the channel to obtain just the number of events. I'm not interested in what else is in the tweet just the number of times the hashtag is utilised at an event I will be running. This works OK.I can use the Get command give from the last ThingHTTP in a browser and it gives me on the page just the number of events. Great.I have also found some code to GET the ThingHTTP data from the channel into the serial of my ESP8266.\xa0But. What the serial shows is a load of preceding information before the actual event_id info I'm after. I only what the event_id number with which I can then use to activate some lights or something. Not sure what at the moment but something eye catching!The information on the serial is this:Connecting to api.thingspeak.comRequesting URL: api.thingspeak.com/apps/thinghttp/send_request?api_key=XXXXXXXXXXXXXXTRY: 2.HTTP/1.1 200 OKContent-Type: text/html; charset=utf-8Content-Length: 1Connection: closeStatus: 200 OKETag: 'eccbc87e4b5ce2fe28308fd9f2a7baf3'Cache-Control: max-age=0, private, must-revalidateX-Request-Id: 6fb2b657-ab0a-4d4d-a63b-bf5515d7c827X-Runtime: 0.272793X-Powered-By: Phusion Passenger 4.0.57Date: Sun, 30 Jul 2017 12:09:09 GMTServer: nginx/1.9.3 + Phusion Passenger 4.0.57\xa03\xa0It is just the number 3 at the end that I want. How do I do this? I've been looking around for hours but have not found anything that can help that I can understand. Any help would be appreciated.The code I have to GET is this:// We now create a URI for the request String url = '/apps/thinghttp/send_request?api_key=XXXXXXXXXXXXX'; Serial.print('Requesting URL: '); Serial.println(host + url); Serial.println(String('TRY: ') + value + '.'); // This will send the request to the server Client.print(String('GET ') + url + '&headers=false' + ' HTTP/1.1' + 'Host: ' + host + '' + 'Connection: close'); delay(500);\xa0// Read all the lines of the reply from server and print them to Serial while(Client.available()){ String line = Client.readStringUntil(''); Serial.println(line); }", 'num_user_post': u' 3', 'author': u'astrotutor'}, {'date': u'July 31, 2017 - 6:37 am', 'content': u"Unfortunately, as you have found, the Arduino web client lacks many of the sophisticated features of more advanced programming environments so you are left to deal with the raw strings by yourself.\xa0If you are certain that the line you want is the only one that starts with a number then the procedure isnt too hard.\xa0\xa0while(Client.available()){ String line = Client.readStringUntil(' ');\xa0 if ( line.charAt(0)>='0' and line.charAt(0)<='9') { \xa0 \xa0 Serial.println(line);\xa0 };};See https://www.arduino.cc/en/Reference/StringObject particularly https://www.arduino.cc/en/Tutorial/StringCharactersYou may also wish to convert your string to a useable number instead - see https://www.arduino.cc/en/Reference/StringToInt", 'num_user_post': u' 271', 'author': u'rw950431'}, {'date': u'August 1, 2017 - 8:48 am', 'content': u"Hi rw950431Thanks for the info. The result it gives is as below. I'm thinking is the answer to get the length of the string and read the last characters backwards until a blank space is reached? It's odd that a web browser only prints the 3 at the bottom that is the entry_id and nothing else.Connecting to api.thingspeak.comRequesting URL: api.thingspeak.com/apps/thinghttp/send_request?api_key=xxxxxxxxxxxxxxTRY: 2.2001Connection:2000.035260X-Powered-By:4.0.57Date:01201712:43:374.0.573Try nr. 2 is finished.Waiting for next try...", 'num_user_post': u' 3', 'author': u'astrotutor'}, {'date': u'August 2, 2017 - 3:08 am', 'content': u"Not sure why its doing that. \xa0Are you sure your code is reading the complete line and not just one character at a time? \xa0(Maybe you need readStringUtil('') \xa0instead).", 'num_user_post': u' 271', 'author': u'rw950431'}, {'date': u'August 3, 2017 - 4:19 am', 'content': u"Thanks for the help but I found this video:which demonstrated an Example from Arduino which does exactly what I want. I have also now managed to convert the result from a string to an integer. So hopefully I can now get the code to do something more interesting with the result than just multiply it./** * BasicHTTPClient.ino * * Created on: 24.05.2015 * */#include <Arduino.h>#include <ESP8266WiFi.h>#include <ESP8266WiFiMulti.h>#include <ESP8266HTTPClient.h>#define USE_SERIAL SerialESP8266WiFiMulti WiFiMulti;void setup() {USE_SERIAL.begin(115200); // USE_SERIAL.setDebugOutput(true);USE_SERIAL.println(); USE_SERIAL.println(); USE_SERIAL.println();for(uint8_t t = 4; t > 0; t--) { USE_SERIAL.printf('[SETUP] WAIT %d...', t); USE_SERIAL.flush(); delay(1000); }WiFiMulti.addAP('ssis', 'password');}void loop() { // wait for WiFi connection if((WiFiMulti.run() == WL_CONNECTED)) {HTTPClient http;USE_SERIAL.print('[HTTP] begin...'); // configure traged server and url // get the entry_id from Thingspeak from the ThingHTTP TweetControl http.begin('api.thingspeak.com', 80, '/apps/thinghttp/send_request?api_key=XXXXXXXXXXXXXXX'); //HTTPUSE_SERIAL.print('[HTTP] GET...'); // start connection and send HTTP header int httpCode = http.GET();// httpCode will be negative on error if(httpCode > 0) { // HTTP header has been send and Server response header has been handled USE_SERIAL.printf('[HTTP] GET... code: %d', httpCode);// file found at server if(httpCode == HTTP_CODE_OK) { String payload = http.getString(); // Print the string value from Thingspeak USE_SERIAL.println(payload); // Convert string to integer so that we can utilise the number int number_tweets = payload.toInt(); USE_SERIAL.println(2*number_tweets); } } else { USE_SERIAL.printf('[HTTP] GET... failed, error: %s', http.errorToString(httpCode).c_str()); }http.end(); }delay(10000);}", 'num_user_post': u' 3', 'author': u'astrotutor'}, {'date': u'October 30, 2017 - 5:48 am', 'content': u'Dear Friends,I have tried the above code and the output value is getting printed on the serial monitor from thingspeak. Please help me to display the value on the LED Matrix display with max7219 and fonts.h libraries.Thanks in adavnce.', 'num_user_post': u' 2', 'author': u'2SEAN2'}, {'date': u'October 30, 2017 - 2:29 pm', 'content': u'Hi 2SEAN2,From Andreas Spiess in video #86 MAX7219 Dot Matrix Display, Thingspeak, ESP8266 ...and read the description and commentsI think there is enough info for your cause\xa0Good luck', 'num_user_post': u' 91', 'author': u'piajola'}, {'date': u'October 31, 2017 - 2:40 am', 'content': u'Thanks for the quick response\xa0piajola.Will check the same and update.\xa0Thanks again.', 'num_user_post': u' 2', 'author': u'2SEAN2'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/how-to-read-data/', 'posts': [{'date': u'October 26, 2017 - 5:43 pm', 'content': u"Hi to All, I'm new and I'm sorry if I'm not in the right place.Thare is any simple exampleHow to read data from my chanel-field1With ESP8266 NodMcu to serial monitor in IDE?\xa0Thanks a lot.", 'num_user_post': u' 2', 'author': u'Moshe055'}, {'date': u'October 27, 2017 - 10:10 am', 'content': u'See the examples page in the documentation.\xa0 There is one example using the ThingSpeak communication library to read a thermistor and output the temperature.\xa0 It also shows how to read data from a channel in the form of calibration parameters.\xa0The moisture monitor example shows you how to write to a channel without using the library.\xa0 You can modify the command to write into a read command using the API commands for getting field information from a channel.\xa0Or for getting all the channel feed info.', 'num_user_post': u' 401', 'author': u'cstapels'}, {'date': u'October 29, 2017 - 10:06 am', 'content': u"Thank you very much.I'll try and report results.", 'num_user_post': u' 2', 'author': u'Moshe055'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/esp-8266-node-mcu-and-dht-11-to-thingspeak-problems/', 'posts': [{'date': u'October 20, 2017 - 5:46 am', 'content': u"Dear friends I am new at thingspeak, and have problems to program and work with thingspeak, please could you help me? bellow is the program, the program may be wrong ?\xa0//Include da lib de Wifi do ESP8266#include 'ESP8266WiFi.h'//Include da lib do sensor DHT11 e DHT22#include 'DHT.h'//Define do pino a ser utilizado no ESP para o sensor = GPIO4#define DHT_DATA_PIN 2#define DHTTYPE DHT11//Definir o SSID da rede WiFiconst char* ssid = 'Multilaser_2.4G_2FC158';//Definir a senha da rede WiFiconst char* password = '96243911';//Colocar a API Key para escrita neste campo//Ela \xe9 fornecida no canal que foi criado na aba API KeysString apiKey = '***********************';const char* server = 'api.thingspeak.com';DHT dht(DHT_DATA_PIN, DHTTYPE);WiFiClient client;void setup() { //Configura\xe7\xe3o da UART Serial.begin(9600); //Inicia o WiFi WiFi.begin(ssid, password); //Espera a conex\xe3o no router while (WiFi.status() != WL_CONNECTED) { delay(500); Serial.print('.'); } dht.begin(); //Logs na porta serial Serial.println(''); Serial.print('Conectado na rede '); Serial.println(ssid); Serial.print('IP: '); Serial.println(WiFi.localIP());}void loop() { //Espera 20 segundos para fazer a leitura delay(20000); //Leitura de umidade float umidade = dht.readHumidity(); //Leitura de temperatura float temperatura = dht.readTemperature(); //Se n\xe3o for um numero retorna erro de leitura if (isnan(umidade) || isnan(temperatura)) { Serial.println('Erro ao ler o sensor!'); return; } //Inicia um client TCP para o envio dos dados if (client.connect(server,80)) { String postStr = apiKey; postStr +='&amp;field1='; postStr += String(temperatura); postStr +='&amp;field2='; postStr += String(umidade); postStr += ''; client.print('POST /update HTTP/1.1'); client.print('Host: api.thingspeak.com'); client.print('Connection: close'); client.print('X-THINGSPEAKAPIKEY: '+apiKey+''); client.print('Content-Type: application/x-www-form-urlencoded'); client.print('Content-Length: '); client.print(postStr.length()); client.print(''); client.print(postStr); //Logs na porta serial Serial.print('Temperatura: '); Serial.print(temperatura); Serial.print(' Umidade: '); Serial.println(umidade); } client.stop();}", 'num_user_post': u' 1', 'author': u'npctecnologia@gmail.com'}, {'date': u'October 24, 2017 - 3:47 pm', 'content': u'Welcome to ThingSpeak!\xa0 What responses are you getting from the server on the serial monitor?Also, I would make sure you can update your channel manually, using the command format for update a channel field.https://api.thingspeak.com/update?api_key=XXXXXXXXXXXXXXXX&field1=1230You can enter the format above in your browser address bar, use your channel write API key on place of XXXX...(not the user API key or the read API Key).', 'num_user_post': u' 401', 'author': u'cstapels'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/coding-how/', 'posts': [{'date': u'October 12, 2017 - 8:11 am', 'content': u"HI Guys,\xa0I'm new\xa0 user of Thingspeak and have some difficulty to send data from ESP8266 NodeMCU with Arduino IDE..I don't know how to add the right code to The\xa0 sketch below for sending the data to thingspeak.Is there anybody to help me ??Thanks in advance for your reply\xa0Gilles\xa0*/// lowest and highest sensor readings:const int sensorMin = 0; // sensor minimumconst int sensorMax = 1024; // sensor maximumvoid setup() { // initialize serial communication @ 9600 baud: Serial.begin(9600);}void loop() { // read the sensor on analog A0: int sensorReading = analogRead(A0); // map the sensor range (Six options): // ex: 'long int map(long int, long int, long int, long int, long int)' int range = map(sensorReading, sensorMin, sensorMax, 0, 5); // range value: switch (range) { case 0: // Sensor getting wet Serial.println('Forte pluie'); break; case 1: // Sensor getting wet Serial.println('Pluie'); break; case 2: // Sensor getting wet Serial.println('Pluie faible'); break; case 3: // Sensor getting wet Serial.println('Brumeux'); break; case 4: // Sensor getting wet Serial.println('Humide'); break; case 5: // Sensor dry - To shut this up delete the ' Serial.println('Sec'); ' below. Serial.println('Sec'); break; } delay(1); // delay between reads}", 'num_user_post': u' 6', 'author': u'gillesroszak'}, {'date': u'October 12, 2017 - 5:37 pm', 'content': u'Gilles,There are several new examples available at ThingSpeak, just posted. There is a temperature example that uses the ThingSpeak Library to handle the HTTP stuff.There is a moisture sensor example that uses an ESP8266-12 to post a voltage reading to a ThingSpeak channel.\xa0 This one does not use the communication library and does use deep sleep between readings.\xa0\xa0There are some differences depending on what version of the ESP8266 you have, let me know if you have trouble.', 'num_user_post': u' 401', 'author': u'cstapels'}, {'date': u'October 14, 2017 - 8:03 am', 'content': u"Here is what works for me:\xa0#include <Esp.h>#include <user_interface.h>#include 'display.h'#include 'button.h'#include 'onewire.h'#include <ESP8266WiFi.h>\xa0// boot log - connect putty to com port at 74880 baud to see boot log// Thermostat GPIO pin defines// pins to avoid GPIO0 (D3), GPIO2(D4), GPIO15(D8)\xa0#define DS18B20 2 // D4 on mini = GPIO2 on ESP8266#define SCL 12 // D6 on mini = GPIO12 on ESP8266#define SDA 13 // D7 on mini = GPIO13 on ESP8266#define BUTTON 14 // D5 on mini = GPIO14 on ESP8266#define TIMEOUT 500 // 5 seconds// ------------- wifi and http defines --------------------#define ssid 'xxxxx'#define password 'xxxxx'#define THINGSPEAKIP '184.106.153.149' // thingspeak.com#define host 'api.thingspeak.com'uint32_t RTC_Memory[10];int Current_Temperature, Current_Setpoint;struct rst_info *Reset_Info; // first int32 is the reason 5 = reset button, 6 = deep sleepint SleepTime = TIMEOUT;bool Temp_displayed = false;bool Show_Setpoint_or_Temperature = false; // Setpoint = false, Temperature = trueString httpstring;String ThingSpeak = 'GET http://api.thingspeak.com/update?api_key=VPTOJBWMJSADEDO806RQM&field1=';\xa0void setup(){ Serial.begin(9600); pinMode(SCL, OUTPUT); pinMode(SDA, OUTPUT); pinMode(DS18B20, OUTPUT); pinMode(BUTTON, INPUT_PULLUP); digitalWrite(BUILTIN_LED, HIGH); // make sure the LED is off Reset_Info = ESP.getResetInfoPtr(); Serial.print('System Reset Reason: '); Serial.print(Reset_Info->reason); Serial.print(' '); Serial.println(ESP.getResetReason()); //get last temperature and setpoint ESP.rtcUserMemoryRead(0, (uint32_t*) &RTC_Memory, 10) ; Current_Temperature = (int)RTC_Memory[0]; if (Current_Temperature < 0 || Current_Temperature > 30) Current_Temperature = 19; Current_Setpoint = (int)RTC_Memory[1]; if (Current_Setpoint < 10 || Current_Setpoint > 25) Current_Setpoint = 20;// get the current temperature Request_Temperature(); if (Reset_Info->reason == 5) // we have awoken from deep sleep { Report_Temperature(); // report the current temperature over wifi and go back to sleep Goto_Sleep(); } else // the user pushed the button - show the display { Display_init(); Display_clear(); Show_Setpoint_or_Temperature = true; }}void loop(){ if (Timer()) // do this every 10 milliseconds { ESP.wdtFeed(); // watchdog is reset if (Temp_displayed == false) { Display_clear(); if (Show_Setpoint_or_Temperature) Show_Temperature(); else Show_Setpoint(); Temp_displayed = true; } byte but = Check_Button(); if (but > 0) SleepTime = TIMEOUT; switch (but) { case 3: // 3 = Button was pressed for COUNT_UP Current_Setpoint++; if (Current_Setpoint > 25) Current_Setpoint = 25; Temp_displayed = false; Show_Setpoint_or_Temperature = false; break; case 4: // 4 = Button was pressed for COUNT_DOWN Current_Setpoint--; if (Current_Setpoint <15) Current_Setpoint = 15; Temp_displayed = false; Show_Setpoint_or_Temperature = false; break; } SleepTime--; if (SleepTime == 0) Goto_Sleep(); // shutdown  }}bool Timer(void){ static unsigned long Time; if (millis() > Time) { Time += 10; return true; } return false;}void Goto_Sleep(void) // sleep for 10 minutes{ Display_off(); RTC_Memory[0] = (uint32_t)Current_Temperature; RTC_Memory[1] = (uint32_t)Current_Setpoint; ESP.rtcUserMemoryWrite(0, (uint32_t*) &RTC_Memory, 10) ; // save Setpoint ESP.deepSleep(600e6, (RFMode)(2)); // no RF calibration on startup}void Show_Temperature(void){ Display_setfont(1); Display_goto(30,0); Display_chars('Temperature'); Display_setfont(4); Display_goto(40,20); Display_char(Current_Temperature/10+0x30); Display_char(Current_Temperature%10+0x30); Display_update();}void Show_Setpoint(void){ Display_setfont(1); Display_goto(30,0); Display_chars(' Setpoint '); Display_setfont(4); Display_goto(40,20); Display_char(Current_Setpoint/10+0x30); Display_char(Current_Setpoint%10+0x30); Display_update();}void Show_Failure_Reason(const char *reason){ long timenow; Display_init(); Display_clear(); Display_setfont(1); Display_goto(20,26); Display_chars(reason); Display_update(); timenow = millis(); while ((millis() - timenow) < 3000); // show for 3 seconds}void Report_Temperature(void){ long timenow; long WiFiTime; // time to establish wifi connection long ClientTime; // time to connect to thingspeak server // start wifi station WiFi.persistent(false); //WiFi.mode(WIFI_OFF); WiFi.mode(WIFI_STA); WiFi.begin(ssid, password); timenow = millis(); while (WiFi.isConnected() == false) { delay(100); ESP.wdtFeed(); WiFiTime = millis() - timenow; if (WiFiTime > 10000) { Serial.println('WiFi Connection Timeout !'); Show_Failure_Reason('WiFi Timeout'); Goto_Sleep(); // if no connection after 10 seconds - give up } } Serial.print('WiFi Connection after '); Serial.print(WiFiTime/1000); Serial.print('.'); Serial.print(WiFiTime%1000); Serial.println(' seconds');Current_Temperature = Get_Temperature(); Serial.print('Current Temperature = '); Serial.println(Current_Temperature); WiFiClient client;httpstring = ThingSpeak + Current_Setpoint + '&field2=' + Current_Temperature + '&field3=' + WiFiTime; if (client.connect(host, 80)) { Serial.println('connected'); Serial.println(httpstring); client.println(httpstring);timenow = millis(); while (client.connected()) { if (client.available()) { String line = client.readStringUntil(''); Serial.println(line); } ClientTime = millis() - timenow; if (ClientTime > 5000) { Serial.println('thingspeak Connection Timeout !'); Show_Failure_Reason('Server Timeout'); Goto_Sleep(); // if no connection after 5 seconds - give up } } client.stop(); Serial.println('Disconnected'); } else { Serial.println('connection failed !'); client.stop(); } client.stop(); WiFi.mode(WIFI_OFF);}", 'num_user_post': u' 1', 'author': u'chputney'}, {'date': u'October 16, 2017 - 2:43 pm', 'content': u'OK Guys thanks a lot I\xa0progress well with your help!!!!Another question please, can we send text and display it to Thingspeak ?', 'num_user_post': u' 6', 'author': u'gillesroszak'}, {'date': u'October 16, 2017 - 4:32 pm', 'content': u"Gilles,Can you post how you solved the problem you had above if you got it resolved for the sake of future forum readers?You can post text to ThingSpeak.\xa0 If you read text data back with thingSpeakRead() you will want to use 'outputFormat','timetable'.\xa0 The limit for a single field feed is 256 characters.If you update your channel status with text, you can click the 'Show Status' box on your channel settings page and then your main channel page will show the status text.ThingSpeak also recently added support for the Text analytics toolbox.\xa0 If you have a license for that toolbox, you can also use its functions in ThingSpeak to analyze text.", 'num_user_post': u' 401', 'author': u'cstapels'}, {'date': u'October 17, 2017 - 3:34 pm', 'content': u"Hi Guys ,\xa0Can you help me one more time?\xa0I want to use this sketch to send data to thingspeak see below)Which code line should i add to do this\xa0[code]/* Flame Sensor analog example. Code by Reichenstein7 (thejamerson.com)For use with a Rain Sensor with an analog out!To test view the output, point a serial monitor such as Putty at your Arduino.- If the Sensor Board is completely soaked; 'case 0' will be activated and ' Flood ' will be sent to the serial monitor. - If the Sensor Board has water droplets on it; 'case 1' will be activated and ' Rain Warning ' will be sent to the serial monitor. - If the Sensor Board is dry; 'case 2' will be activated and ' Not Raining ' will be sent to the serial monitor.*/// lowest and highest sensor readings:const int sensorMin = 0; // sensor minimumconst int sensorMax = 960; // sensor maximumvoid setup() { // initialize serial communication @ 9600 baud: Serial.begin(9600);}void loop() { // read the sensor on analog A0: int sensorReading = analogRead(A0); // map the sensor range (Six options): // ex: 'long int map(long int, long int, long int, long int, long int)' int range = map(sensorReading, sensorMin, sensorMax, 0, 15);// range value: switch (range) { case 0: // Sensor getting wet Serial.println('15'); break; case 1: // Sensor getting wet Serial.println('14'); break; case 2: // Sensor getting wet Serial.println('13'); break; case 3: // Sensor getting wet Serial.println('12'); break; case 4: // Sensor getting wet Serial.println('11'); break; case 5: // Sensor getting wet Serial.println('10'); break; case 6: // Sensor getting wet Serial.println('9'); break; case 7: // Sensor getting wet Serial.println('8'); break; case 8: // Sensor getting wet Serial.println('7'); break; case 9: // Sensor getting wet Serial.println('6'); break; case 10: // Sensor getting wet Serial.println('5'); break; case 11: // Sensor getting wet Serial.println('4'); break; case 12: // Sensor getting wet Serial.println('3'); break; case 13: // Sensor getting wet Serial.println('2'); break; case 14: // Sensor getting wet Serial.println('1'); break; case 15: // Sensor dry - To shut this up delete the ' Serial.println('Sec'); ' below. Serial.println('0'); break; } delay(2000); // delay between reads}[/code]", 'num_user_post': u' 6', 'author': u'gillesroszak'}, {'date': u'October 20, 2017 - 12:01 pm', 'content': u'cstapels said Gilles, Can you post how you solved the problem you had above if you got it resolved for the sake of future forum readers?Hi,\xa0Sorry for the late reply,.I just use Tuniot\xa0 for ESP8266\xa0See here\xa0\xa0', 'num_user_post': u' 6', 'author': u'gillesroszak'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/controlloing-led-status-using-kivy/', 'posts': [{'date': u'September 20, 2017 - 10:45 am', 'content': u'I want to control the swtiching of LED with APP made in KIVY through MQTT . I am not able to find single tutorial or code which can demeonstrate how to switch ON/OFF LED through an APP ,', 'num_user_post': u' 1', 'author': u'angy1551'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/esp8266-sending-voltage-readings-to-thingspeak/', 'posts': [{'date': u'May 7, 2017 - 12:41 pm', 'content': u"Hello,\xa0I'm trying to send voltage data to thingspeak, there are tons of tutorial using the DHT sensor, but I'm trying to send a normal voltage reading from the ESP8266 GIPO 2 to thingspeak.\xa0I'm trying to do something like this, but only to read voltage output from a sensor.\xa0can someone do the code for me, I've been trying for months. it should be very simple for you guys, please help me.\xa0", 'num_user_post': u' 1', 'author': u'7asson93'}, {'date': u'September 10, 2017 - 9:45 pm', 'content': u'Arduino mode or Lua mode?Here is a way by Lua:https://github.com/BLavery/esuite-lua/blob/master/projects/project18.lua', 'num_user_post': u' 1', 'author': u'blavery'}, {'date': u'September 13, 2017 - 2:05 pm', 'content': u'Have a look at the bulk update code for Arduino, it also works for ESP8266. \xa0 \xa0You can modify the POST command to just do a single channel update using the command structure you can copy from your API Keys page or shown here. \xa0', 'num_user_post': u' 401', 'author': u'cstapels'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/esp8266-sends-a-constant-to-thinkspeak-but-there-are-many-outliers-why/', 'posts': [{'date': u'August 25, 2017 - 4:36 am', 'content': u"I measure the value in Arduino Pro\xa0and send it to Thinkspeak via ESP8266, but there are many outliers (stupid weird value out of range). That's why I tried send to Thinkspeak only one constant (3.33) stored directly in ESP8266 and the situation is the same. There are many outliers too, why??....void loop() { if (Serial.available() >= sizeof(int)) { float i = Serial.parseInt(); sendDataToThingspeak(3.33); }....time@email.cz", 'num_user_post': u' 3', 'author': u'Jerry'}, {'date': u'August 25, 2017 - 3:32 pm', 'content': u'Can you describe what the function sendDataToThingspeak() does? \xa0', 'num_user_post': u' 401', 'author': u'cstapels'}, {'date': u'August 31, 2017 - 1:01 pm', 'content': u'Here you will find the whole file: \xa0 \xa0 \xa0 https://www.dropbox.com/s/betiilykyrnhho1/MainProduct_317961.ino?dl=0thaks Jerry', 'num_user_post': u' 3', 'author': u'Jerry'}, {'date': u'September 11, 2017 - 7:34 am', 'content': u'Hello,I tried another piece of ESP8266 but the result is still bad. I attach a link where I keep doing it all the time. Thus Thinkspeak is inapplicable.Thank you for your advice. Jerryhttps://thingspeak.com/channels/87384', 'num_user_post': u' 3', 'author': u'Jerry'}, {'date': u'September 12, 2017 - 1:00 am', 'content': u'For those of us not willing to download random files from dropbox can you post the complete code of the sendDataToThingspeak() function? Did you try the official thinkspeak package (https://blogs.mathworks.com/iot/2015/10/09/official-thingspeak-library-for-arduino-and-particle/)\xa0 Its possible your API call is failing in some way that you are not detecting.', 'num_user_post': u' 271', 'author': u'rw950431'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/wemos-d1-mini-vodafone-new-zealand-4g/', 'posts': [{'date': u'August 11, 2017 - 4:56 am', 'content': u"Hello AllI thought it would be of some help to this community to share my experiences with getting a thingspeak device working here in New Zealand.I am using a wemos D1 mini to upload my temperature data to thingspeak for a year or so before it \u201cstopped\u201d working. \xa0My original project used LUA and worked fine.I thought the problem was that the code had become corrupted (I found a few people who mentioned the same problems as I was having) so I set about converting the LUA code to Arduino.I could not for the life of me get any of the example code on the web working at all. \xa0I could connect to the wifi no problem; it would allocate my wemos an IP address. \xa0When the code ran I could even see the IP address of the thingspeak servers, and it connected to them fine.The problem was when the code got to the following line, it would time out and fail. client.print('POST /update HTTP/1.1');I took the device to work(a fibre connection to the internet), and the code work perfectly, but I could not get it to work at my home, or even through a wifi hotspot from my cellphone.I discovered that the problem was with my internet connection at my home. \xa0My internet connection is through Vodafone using their wireless broadband 4G network. \xa0It appears that Vodafone (I won\u2019t say blocks) but doesn\u2019t allow the particular ports used by the WiFiClient connection through.I changed my code so that it uses the HTTP client instead. \xa0This worked well, and I have been successfully using this for a few months now.Relevant Snippets of the code I used is below.I am sending two strings of information to thing speak. \xa0The temperature outside my house, and the voltage of my batteries, thus the two values being passed to the function.\xa0#include <ESP8266HTTPClient.h> \xa0// instead of #include <ESP8266WiFi.h>......void PostToThingSpeak(float celsius, float voltage){ String updateURL = 'http://';updateURL += String(server);updateURL +='/update?api_key=';updateURL += String(apiKey);updateURL +='&field1=';updateURL += String(celsius);updateURL +='&field2=';updateURL += String(voltage);client.begin(updateURL);int httpCode = client.GET(); \xa0// I guess I could check that I get a \u201c1\u201d as confirmation but I implemented that yetclient.end();}\xa0For those of us who like a \xa0\u201cTLDR\u201d Summary:Could not connect using normal 'client' code through vodafones network here in new Zealand, so had to adjust the code to use the httpclient method.", 'num_user_post': u' 2', 'author': u'SteveMcC'}, {'date': u'August 12, 2017 - 7:51 am', 'content': u'For the record what port was your original code connecting to?', 'num_user_post': u' 271', 'author': u'rw950431'}, {'date': u'August 14, 2017 - 10:24 pm', 'content': u"I was connecting using port 80...for example the code below was one of the examples I tried to use.....and I could not get it to work....(I have since then spoken to a friend who works in IT, and apparently there are different APN's that can be used with vodafone NZ network, and some of them allow different ports access through their firewalls, but I am not sure I can confirm or deny this)if (client.connect(server,80)) {String postStr = apiKey;postStr +='&field1=';postStr += String(t);postStr +='&field2=';postStr += String(h);postStr += '';\xa0client.print('POST /update HTTP/1.1');client.print('Host: api.thingspeak.com');client.print('Connection: close');client.print('X-THINGSPEAKAPIKEY: '+apiKey+'');client.print('Content-Type: application/x-www-form-urlencoded');client.print('Content-Length: ');client.print(postStr.length());client.print('');client.print(postStr);\xa0Serial.print('Temperature: ');Serial.print(t);Serial.print(' degrees Celsius Humidity: ');Serial.print(h);Serial.println('Sending data to Thingspeak');}", 'num_user_post': u' 2', 'author': u'SteveMcC'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/sensor-data-in-js-as-an-ifelse/', 'posts': [{'date': u'July 31, 2017 - 10:40 am', 'content': u"In my JavaScript I have a number of variables as shown:\xa0stop = new google.maps.LatLng(59.093914487013, -122.71569423377514)waypts.push({location: stop,stopover: true\xa0The line in Bold\xa0is what I need help with. I have data transmitted to Thingspeak. I have an API that allows me to select the exact value to query; what I need to know is how to use a GET statement (Or anything that would work) to have that Stopover\xa0line be True or False based on the result. So IF the result queried by the API is over 8, it's TRUE, if it's under it is false.\xa0The API line looks like this:\xa0\xa0GET https://api.thingspeak.com/channels/****/fields/1.json?results=2So How do I set that Bold\xa0field to query this and either be TRUE or FALSE based upon the result of this query?\xa0If you need any more info please reply and I can fill in any blanks, but I'm reallllly needing some help here.\xa0Thank you!\xa0", 'num_user_post': u' 8', 'author': u'jteindl'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/thinghttp-to-serial-monitor/', 'posts': [{'date': u'July 27, 2017 - 8:52 am', 'content': u"Hello everyone, i am fairly new to this community. I am currently working on ThingHTTP with ESP8266 nodeMCU. My little project should read in total subscribers from youtube channel and lets say for now print them out to the serial monitor.\xa0I have created a new ThingHTTP and filled in URL, parsing string and method. After the link was generated i clicked into it and it seems to be working just fine, while displaying only the total number of subscribers. Now, the problem is the code itself.. i don't know how to properly call the function and how it should be printed out to the serial. I would really appreciate some help here.\xa0There is my code so far :\xa0\xa0 #include const char* ssid = 'ssidName'; const char* password = 'password'; const char* host = 'api.things.com';const char URL_youtube[] = 'GET https://api.thingspeak.com/apps/thinghttp/send_request?api_key=XXXXXXXXXXXXXXX HTTP/1.0';void setup() {Serial.begin(115200); delay(10);WiFi.begin(ssid, password);Serial.println(); Serial.println(); Serial.print('tConnecting to: '); Serial.println(ssid);while (WiFi.status() != WL_CONNECTED) {delay(100); Serial.print('.');}Serial.println(''); Serial.println('tWiFi Connected');}void loop() {getYoutube(); delay(15000);}\xa0void getYoutube() {if (WiFi.status() == WL_CONNECTED) { // function goes here } }", 'num_user_post': u' 2', 'author': u'RytisBe'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/tinkercad-esp8266-simulator-posting-null-values-to-thingspeak/', 'posts': [{'date': u'July 9, 2017 - 11:55 am', 'content': u"Hi All,I'm running into a weird error where my HTTP GET request will successfully post to a ThingSpeak channel, but the data is 'null.' Any idea on why this might be occurring? I'm planning to use Tinkercad and ThingSpeak as part of an 'Introduction to Arduino' (with an IoT section) class in the next couple of weeks, so any help is appreciated!The Tinkercad simulation can be found here: https://tinkercad.com/things/iIz3ZdsHG3BIf I paste in the URL (api.thingspeak.com/update?api_key=I72PI7HCKYI1MD9Q&field1=0) into my browser, I can post a '0' to my ThingSpeak channel.Also, if I send a GET request for example.com/index.html, I successfully get a properly formatted HTML page in the Tinkercad simulator, so I know that the emulated Internet connection is working.However, when I run the GET request to post something to ThingSpeak, I receive a 200 OK and the channel is updated with a 'null' value, which makes me think that something is formatted incorrectly. Here is a JSON of the data after posting 2 values:{'channel':{'id':299689,'name':'Temperature Logger','latitude':'0.0','longitude':'0.0','field1':'Temperature','created_at':'2017-07-08T17:26:56-06:00','updated_at':'2017-07-09T09:33:53-06:00','last_entry_id':2},'feeds':[{'created_at':'2017-07-09T09:33:07-06:00','entry_id':1,'field1':null},{'created_at':'2017-07-09T09:33:53-06:00','entry_id':2,'field1':null}]}\xa0I've posted my code below. Please note that the ESP8266 is attached to the Arduino's Serial and SoftSerial is being used for debugging/status codes.\xa0#include 'SoftwareSerial.h'// WiFi configString ssid     = 'Simulator Wifi';String password = '';// Server, file, and portconst String hostname = 'api.thingspeak.com';const String uri = '/update?api_key=I72PI7HCKYI1MD9Q&field1=0';const int port = 80;// This works: Basic GET of a page/*const String hostname = 'example.com';const String uri = '/index.html';const int port = 80;*/// Software serial objectSoftwareSerial soft(8, 9); // RX, TXvoid setup() {    // Initialize serial connections  Serial.begin(115200);  soft.begin(9600);    // Talk to ESP8266  soft.println('Init ESP8266...');  Serial.println('AT');  delay(10);  if ( Serial.find('OK') == 0 ) {    soft.println('ESP8266 not found');    while(1);  }    // Connect to WiFi  soft.println('Connecting to WiFi...');  Serial.println('AT+CWJAP='' + ssid + '','' + password + ''');  delay(10);  if ( Serial.find('OK') == 0 ) {    soft.println('Could not connect to WiFi');    while(1);  } else {    soft.println('Connected!');  }}void loop() {    // Open TCP connection  Serial.println('AT+CIPSTART='TCP','' + hostname + '',' + port);  delay(50);  if ( Serial.find('OK') == 0 ) {    soft.println('Error');  }  // Construct HTTP request  String req = 'GET ' + uri + ' HTTP/1.1' + 'Host: ' + hostname + '' +\xa0 \xa0 'Connection: close' +\xa0 \xa0 '';  int len = req.length();    // Send our request length  Serial.print('AT+CIPSEND=');  Serial.println(len);  delay(10);  if ( Serial.find('>') == 0 ) {    soft.println('Error');  }  // Send our http request  Serial.print(req);  delay(10);  if (!Serial.find('SEND OK')) {    soft.println('Error');  }    // Wait for a response from the server  while( Serial.available() == 0 ) {    delay(5);  }    // Print reply from server  while ( Serial.available() ) {    String ln = Serial.readStringUntil('');    soft.print(ln);  }    // Close TCP connection  Serial.println('AT+CIPCLOSE=0');  delay(50);  if ( Serial.find('OK') == 0 ) {    soft.println('Error');  } else {    soft.println();    soft.println('Connection closed');  }    delay(20000);}", 'num_user_post': u' 3', 'author': u'sgmustadio'}, {'date': u'July 10, 2017 - 1:00 am', 'content': u"I do not know if this can help you56 // Construct HTTP request57 String req = 'GET ' + uri + ' HTTP/1.158 ' + 'Host: ' + hostname + '59 ' + \xa0 \xa0'Connection: close60 ' + \xa0 \xa0'61 ';62 int len = req.length();63 \xa064 // Send our request length65 Serial.print('AT+CIPSEND=');66 Serial.println(len);67 delay(10);68 if ( Serial.find('>') == 0 ) {69 \xa0soft.println('Error');70 }7172 // Send our http request73 Serial.print(req);74 delay(10);75 if (!Serial.find('SEND OK76 ')) {77 \xa0soft.println('Error');78 }my way in my real life (nothing against simulators) \xa0600000+ records and counting ...\xa0 // TCP connection\xa0 String cmd = 'AT+CIPSTART='TCP','';\xa0 cmd += '184.106.153.149'; // api.thingspeak.com -- not working\xa0 cmd += '',80';\xa0 altSer.println(cmd);\xa0 // \xa0if (altSer.find('Error')) { \xa0 \xa0 one 'AT commands' version\xa0 if (altSer.find('ERROR')) { \xa0 \xa0 \xa0another 'AT commands' version\xa0 \xa0 Serial.println('AT+CIPSTART error');\xa0 \xa0 delay(4000);\xa0 \xa0 return;\xa0 }\xa0 // prepare GET string\xa0 String getStr = 'GET /update?api_key=';\xa0 getStr += apiKey;\xa0 getStr += '&field1=';\xa0 getStr += String(strTemp); \xa0 \xa0 \xa0 \xa0 \xa0\xa0number to string\xa0 getStr += '&field2=';\xa0 getStr += String(strHume);\xa0 \xa0 \xa0 \xa0 \xa0 \xa0number to string\xa0 getStr += ' r  n  r  n'; \xa0 \xa0 \xa0must be  r \xa0and \xa0 n \xa0without the space between so 2 CRs and 2 NLs\xa0 // send data length\xa0 cmd = 'AT+CIPSEND=';\xa0 cmd += String(getStr.length());\xa0 \xa0 number to string\xa0 altSer.println(cmd);\xa0 if (altSer.find('>')) {\xa0 \xa0 altSer.print(getStr);\xa0 } else {\xa0 \xa0 altSer.println('AT+CIPCLOSE');\xa0 \xa0 // alert user\xa0 \xa0 Serial.println('AT+CIPCLOSE');\xa0 } \xa0 // thingspeak needs 15 sec delay between updates\xa0 Serial.println('- * - * - * - * - * - * - * -');\xa0 delay(59800); \xa0 \xa0 almost 60 points/hour -- Better to use millis()}** altSer to ESP8266** Serial to consoleMaybe number 0 is received as NULL in your code (thinking aloud)Also there are more than one 'AT commands' versions", 'num_user_post': u' 91', 'author': u'piajola'}, {'date': u'July 10, 2017 - 9:30 am', 'content': u"sgmustadio,From what I see in your code, you aren't sending any values in your GET request. \xa0You can see this link\xa0for sample code. \xa0This code uses the bulk post method, but it allows you to see the formatting. \xa0Also try this link.\xa0In lines 56-62, you need to include the api key and field 1 info, as in the request you listed 'api.thingspeak.com/update?api_key=XXXXXXXXXXXXXXXX&field1=0)'56 \xa0// Construct HTTP request57 \xa0String req\xa0=\xa0'GET '\xa0+ uri + ' HTTP/1.158 ' + 'Host:\xa0' +\xa0hostname\xa0+ '59 ' +\xa0 \xa0 'Connection: close60 ' +\xa0 \xa0 '61 ';62 \xa0int len\xa0=\xa0req.length();", 'num_user_post': u' 401', 'author': u'cstapels'}, {'date': u'July 12, 2017 - 9:07 pm', 'content': u"Thanks for the suggestions,\xa0piajola and cstapels. Still no luck on my end. The weird thing is that the GET request (with exactly the same formatting) successfully posts to ThingSpeak from a real ESP8266 (SparkFun Thing Dev), so it must be something with the Tinkercad ESP8266. My request does have a value for field1, as per the URI: '/update?api_key=I72PI7HCKYI1MD9Q&field1=0' (don't worry, I've since changed my Write API key, so this one is pretty useless).I've even tried a POST request (replace lines 56-62 with the following):// POST Test (no spaces for newline/return carriage symbols)String body = 'api_key=I72PI7HCKYI1MD9Q&field1=0';\xa0String req = String('POST /update HTTP/1.1 r  n') +                  'Host: ' + hostname + ' r  n' +\xa0 \xa0                   'User-Agent: Arduino/1.0 r  n' +\xa0 \xa0                   'Content-Type: application/x-www-form-urlencoded; r  n' +              \xa0 \xa0 'Content-Length: ' + body.length() + ' r  n' +\xa0 \xa0                   'Connection: close r  n' +\xa0 \xa0                   ' r  n' +             \xa0\xa0 \xa0 body + ' r  n';\xa0 int len = req.length();\xa0 Once again, it works great in real hardware as well as from something like hurl.it, but gives me a 404 Not Found in the simulator.", 'num_user_post': u' 3', 'author': u'sgmustadio'}, {'date': u'July 13, 2017 - 6:41 pm', 'content': u'You had the right information in the uri variable (I missed that above). \xa0Since you are getting a 404, perhaps its your line endings? There is a space between them, perhaps your encoder (in the simulator) is changing that space to a %20?', 'num_user_post': u' 401', 'author': u'cstapels'}, {'date': u'July 14, 2017 - 8:52 pm', 'content': u"Oops, forgot to mention (sorry!): I added spaces to the slash-r-slash-n line endings because this forum tool actually tries to parse the newline-return carriage characters, and the normal  escape character doesn't work. There are no spaces there in the code.", 'num_user_post': u' 3', 'author': u'sgmustadio'}]}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/page-5/', 'threads': [{'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/export-all-data-to-the-computer/', 'posts': [{'date': u'July 9, 2017 - 7:53 am', 'content': u'Hello everyone;I need to export all my data to a file, but the Data Export button only exports the last 100 entries. How can I export them all?Thanks in advance', 'num_user_post': u' 2', 'author': u'Sommoh'}, {'date': u'July 9, 2017 - 8:14 pm', 'content': u'SommohIn my case with windows 10, having one free account in Thimgspeak channels (not the forum one) signed in and the webpage changes a little showingCHANNEL NAMEChannel ID: 000000Author: xxxxxxxAccess: Public (or Private)\xa0-------------- -------------- ------------------- ----------- --------------------------Private View|Public View|Channel Setting|API Keys|Data Import / Export| \xa0(5 tabs)----------------------- \xa0 ------------------------------------|Add Visualizations| |Data Export MATLAB Analysis| (2 buttons)----------------------- \xa0 ------------------------------------then press the last tab (5th) Data Import / Export NOT any buttonwill change to next screen, you will see 2 zonesImport\xa0---------|Upload| ( green button)\xa0---------Export\xa0------------|Download| ( green button)\xa0------------press Download green button then it will shows a dialogBox asking for place & name for the .csv file that will be in your machineIn my case:start 18:03 \xa0-- \xa0end \xa018:2731,0 MB (32.518.144 bytes)665907 lines of csv datacreated_at, \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0\xa0entry_id,field1,field2,field3,field4,field5,field6,field7,field82016-02-03 00:19:58 UTC,1, \xa0 \xa0 \xa0 \xa0 5,10,15,15,,,,2016-02-03 00:20:15 UTC,2, \xa0 \xa0 \xa0 \xa0 5,10,15,15,,,,2016-02-03 00:20:33 UTC,3, \xa0 \xa0 \xa0 \xa0 5,10,15,15,,,,2016-02-03 00:20:50 UTC,4, \xa0 \xa0 \xa0 \xa0 5,10,15,15,,,,...2017-07-09 23:24:36 UTC,665904,21.59,66.86,,,,,,2017-07-09 23:25:37 UTC,665905,21.53,66.84,,,,,,2017-07-09 23:26:38 UTC,665906,21.56,67.06,,,,,,Hope this is some helpYou are welcome in advance \U0001f642', 'num_user_post': u' 91', 'author': u'piajola'}, {'date': u'July 10, 2017 - 9:39 am', 'content': u"piajola said Sommoh In my case with windows 10, having one free account in Thimgspeak channels (not the forum one) signed in and the webpage changes a little showing CHANNEL NAME Channel ID: 000000 Author: xxxxxxx Access: Public (or Private) \xa0-------------- -------------- ------------------- ----------- -------------------------- Private View|Public View|Channel Setting|API Keys|Data Import / Export| \xa0(5 tabs) ----------------------- \xa0 ------------------------------------ |Add Visualizations| |Data Export MATLAB Analysis| (2 buttons) ----------------------- \xa0 ------------------------------------ then press the last tab (5th) Data Import / Export NOT any button will change to next screen, you will see 2 zones Import \xa0--------- |Upload| ( green button) \xa0--------- Export \xa0------------ |Download| ( green button) \xa0------------ press Download green button then it will shows a dialogBox asking for place & name for the .csv file that will be in your machine In my case: start 18:03 \xa0-- \xa0end \xa018:27 31,0 MB (32.518.144 bytes) 665907 lines of csv data created_at, \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0\xa0entry_id,field1,field2,field3,field4,field5,field6,field7,field8 2016-02-03 00:19:58 UTC,1, \xa0 \xa0 \xa0 \xa0 5,10,15,15,,,, 2016-02-03 00:20:15 UTC,2, \xa0 \xa0 \xa0 \xa0 5,10,15,15,,,, 2016-02-03 00:20:33 UTC,3, \xa0 \xa0 \xa0 \xa0 5,10,15,15,,,, 2016-02-03 00:20:50 UTC,4, \xa0 \xa0 \xa0 \xa0 5,10,15,15,,,, . . . 2017-07-09 23:24:36 UTC,665904,21.59,66.86,,,,,, 2017-07-09 23:25:37 UTC,665905,21.53,66.84,,,,,, 2017-07-09 23:26:38 UTC,665906,21.56,67.06,,,,,, Hope this is some help You are welcome in advance \U0001f642\xa0\xa0Thank you very much. The Export Data button in Private View won't do it, but this button does the trick.Very nice", 'num_user_post': u' 2', 'author': u'Sommoh'}, {'date': u'July 10, 2017 - 3:53 pm', 'content': u'The export data button in Private view will export \xa0what you see in your private view. \xa0If you want to export more data, try changing the number of data points on your plot (using the pencil icon on top of the chart), and then the number of data points exported should change accordingly. \xa0Or you can use the export tab as suggested above.', 'num_user_post': u' 401', 'author': u'cstapels'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/retrieve-value-30-writes-ago/', 'posts': [{'date': u'July 5, 2017 - 3:15 pm', 'content': u'Hi,on ESP8266 with Arduino, I want to calculate if the temperature went up or down: compare the last write to ThingSpeak with 30 writes ago.Anybody ideas on if it is possible to pull the last entry_ID and the value of field1 of entryID-30?Thanks!', 'num_user_post': u' 1', 'author': u'Flying_Dutchman'}, {'date': u'July 6, 2017 - 7:58 pm', 'content': u"Hi\xa0Flying_Dutchman\xa0In\xa0Apps -\xa0MATLAB AnalysisRun this as is (copy-paste) and see ouput windows\xa0% semicolon at the end hides data (not shown)readChannelID = YoUrChAnNeLnUmBeR0123;%% Read Data %%%power = thingSpeakRead(readChannelID, 'OutputFormat','table' , 'NumDays', 3);%power = thingSpeakRead(readChannelID, 'OutputFormat','table' , 'Numpoints', 30);power = thingSpeakRead(readChannelID, 'fields',[1] , 'Numpoints', 30)%% Read Data %%%disp(power); another way to view data%% find your Data %%ulti=power(30) % data of interestvieji=power(1) % newest data%% find your Data %%cono=' ^ up';if ulti-vieji < 0 cono=' v down';enddisp(['diff ' num2str(ulti-vieji) cono]) ; % new + or - than old -- your math here%% quick & dirty way%hope this helps?\xa0", 'num_user_post': u' 91', 'author': u'piajola'}, {'date': u'July 7, 2017 - 7:59 am', 'content': u'If you need to do this client-side and cant run the Matlab script the API can be usedsee https://au.mathworks.com/help/thingspeak/get-channel-field-feed.html for the details but the basic API call is something likehttps://api.thingspeak.com/channels/9/fields/1.csv?results=30(You may have to include api_key if your channel is not public).\xa0Unfortunately there is no way to only read the 30th value ago on its own. \xa0You can only read all 30 values and pick the one you want. \xa0', 'num_user_post': u' 271', 'author': u'rw950431'}, {'date': u'July 7, 2017 - 9:22 am', 'content': u"if you know the entry ID of the last entry, you can subtract 30 and get it like thisGET https://api.thingspeak.com/channels/CHANNEL_NUMBER/fields/FIELD_NUMBER/'+String(entryID-30)+'.json';If you dont know the entry id of the last entry: read the last \xa0entry, the JSON object will return the entry id for youGET https://api.thingspeak.com/channels/CHANNEL_NUMBER/feeds/last.json\xa0The return format is shown here. \xa0I use\xa0<ArduinoJson.h> to parse it, there is a bit of overhead with it, but not too bad.", 'num_user_post': u' 401', 'author': u'cstapels'}, {'date': u'July 9, 2017 - 8:42 am', 'content': u'@cstapels- nice.. \xa0Is that documented anywhere?', 'num_user_post': u' 271', 'author': u'rw950431'}, {'date': u'July 9, 2017 - 8:34 pm', 'content': u'rw950431,You are not asking me, but gladly I can tell you one of my findingshttps://www.mathworks.com/help/thingspeak/get-a-channel-feed.html?searchHighlight=http%3A%2F%2Fapi.thingspeak.com%2Fchannels%2F&s_tid=doc_srchtitleFriendly\xa0', 'num_user_post': u' 91', 'author': u'piajola'}, {'date': u'July 9, 2017 - 11:01 pm', 'content': u"Thanks piajola- its right at the bottom under the heading 'Get specific entry in channel' for anyone else who overlooked it.", 'num_user_post': u' 271', 'author': u'rw950431'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/udp-and-thingspeak-on-8266/', 'posts': [{'date': u'July 8, 2017 - 2:51 pm', 'content': u"Hello, I'm using the Arduino IDE with ESP8266. (NodeMCU v1.0)Using WiFiUDP class to get NTP time.ThingSpeak does not work with UDP class. It does work with WiFiClient class.I\u2019m fairly new to this and didn\u2019t see anything on the forums or web. Any workarounds to get ThingSpeak to work with UDP library?", 'num_user_post': u' 1', 'author': u'markInSF'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/why-esp8266-can-not-send-more-entries-than-8000/', 'posts': [{'date': u'July 3, 2017 - 1:39 pm', 'content': u'The last week I have development a solution with Arduino Uno and the ESP8266 WiFi Module to measure the temperature and humidity of the enviroment.It was working perfect, but when the number of entries reach the 8000, it stopped and I could not save more data at my thingspeak channel.The only solution I found was to save the information and clear the data of the channel, after this, I reset my Arduino and validated that the little station was working again without any problem.Why this happend? I think one of the reasons it is that I am using an a free license/session, after all, I dont know if it is possible to reset the channel and save the data before do that, or maybe do this automatically What else could it be done for this?Does anyone know what can I do to keep recolecting data avoiding this manually reset?Thanks a lot for your help!', 'num_user_post': u' 1', 'author': u'Abraham Levy'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/thingspeak-does-not-logs-data-from-sensor-to-server/', 'posts': [{'date': u'April 18, 2017 - 5:07 am', 'content': u"I am having this same problem using a DHT11 Sensor. No matter what I try, My thingspeak channel is not at all recording data sent to it. I am working on a IOT Project for my college. I have tried almost 15-19 tutorials on the internet. Using functions like\xa0ThingSpeak.writeField(channel, 1, t, apiKey), ThinkSpeak.setFields() to using POST methods from arduino etc.\xa0None Seems to work. I don't know where i am going wrong. However if I type the post method with the api key and field values in the address bar of the browser, the data gets logged into ThinkSpeak.\xa0Here is my Code: Parts of it, like the network ssid, passwords and API Keys are hidden. I have it in my sketch though.#include#include#include#include#define dht_apin 4// Analog Pin sensor is connected to#define IP '184.106.153.149'DHT dht(dht_apin, DHT11,15);const char* apiKey = '';\xa0//Hidden due to privacyString apiKey1 = '';\xa0//Hidden due to privacyunsigned long channel =;\xa0//Hidden due to privacyconst char* ssid = '//Hidden due to privacy';const char* password = '//Hidden due to privacy';const char* server = 'api.thingspeak.com';int h,t;WiFiClient client;void setup(){Serial.begin(115200);delay(500);//Delay to let system bootdht.begin();delay(1000);//Wait before accessing SensorWiFi.begin(ssid, password);Serial.println();Serial.println();Serial.print('Connecting to ');Serial.println(ssid);WiFi.begin(ssid, password);while (WiFi.status() != WL_CONNECTED) {delay(500);Serial.print('.');}Serial.println('');Serial.println('WiFi connected');ThingSpeak.begin(client);}//end 'setup()'void loop(){//Start of Program// DHT.read11(dht_apin);Serial.print('Current humidity = ');Serial.print(dht.readHumidity());h=dht.readHumidity();Serial.print('% ');Serial.print('temperature = ');Serial.print(dht.readTemperature());t=dht.readTemperature();Serial.println('C ');if (isnan(h) || isnan(t)) {Serial.println('Failed to read from DHT sensor!');return;}This is creating the Headache i think. Please Look into this part of Code specifically.\xa0if (client.connect(server,80)) { // '184.106.153.149' or api.thingspeak.comSerial.print('Temperature: ');Serial.print(t);ThingSpeak.setField(1,t); Serial.print(' degrees Celcius Humidity: ');Serial.print(h);ThingSpeak.setField(2,h);Serial.println('% send to Thingspeak');String postStr = apiKey;postStr +='&field1=';postStr += String(t);postStr +='&field2='; postStr += String(h);postStr += '';client.print('POST /update HTTP/1.1');client.print('Host: api.thingspeak.com');client.print('Connection: close');client.print('X-THINGSPEAKAPIKEY: '+apiKey1+'');client.print('Content-Type: application/x-www-form-urlencoded');client.print('Content-Length: ');client.print(postStr.length());client.print('');client.print(postStr);// wait for response/*while(!!!client.available()) {delay(10);}*/// Read all the lines of the reply from server and print them to SerialSerial.println('Response: ');while(client.available()){String line = client.readStringUntil('');Serial.print(line);}Serial.println();Serial.println('closing connection');//ThingSpeak.writeField(channel, 1, t, apiKey); //ThingSpeak.writeField(channel, 2, h, apiKey);// Write the fields that you've set all at once.//ThingSpeak.writeFields(channel,apiKey);}else{Serial.print('Cannot connect to the internet. Check Mobile Data');Serial.print('');}client.stop();Serial.println('Waiting\u2026');// thingspeak needs minimum 15 sec delay between updatesdelay(20000);//Fastest should be once every two seconds.}// end loop()\xa0Thanking YouRegardsSteelBullets", 'num_user_post': u' 3', 'author': u'steelbullets'}, {'date': u'April 18, 2017 - 9:40 pm', 'content': u'have you tried the example from here? https://github.com/mathworks/thingspeak-arduino/tree/master/examples/WriteMultipleVoltagesAt the moment your code is confused- for example you assemble a query string like you are going to do a GET but you end up POST-ing instead.\xa0 I always start with a working example then gradually modify it to work the way I want.', 'num_user_post': u' 271', 'author': u'rw950431'}, {'date': u'April 19, 2017 - 2:58 am', 'content': u"rw950431 said have you tried the example from here? https://github.com/mathworks/thingspeak-arduino/tree/master/examples/WriteMultipleVoltages At the moment your code is confused- for example you assemble a query string like you are going to do a GET but you end up POST-ing instead.\xa0 I always start with a working example then gradually modify it to work the way I want.\xa0\xa0I am so much thankful to your advice. I looked into my code and found that I made a mistake of using POST method instead of GET. Thank you so much.Here is the final code i created now: Only the data sending part if (client.connect(IP,80)) { // '184.106.153.149' or api.thingspeak.com Serial.print('Temperature: '); Serial.print(t); ThingSpeak.setField(1,t);  Serial.print(' degrees Celcius Humidity: '); Serial.print(h); ThingSpeak.setField(2,h); Serial.println('% send to Thingspeak'); String postStr = apiKey; postStr +='&field1='; postStr += String(t); postStr +='&field2=';  postStr += String(h); postStr += '';//This is the changed partString cmd = 'GET https://api.thingspeak.com/update?api_key='; cmd += postStr; client.print(cmd);\xa0Thank you\xa0rw950431RegardsSteelBullets", 'num_user_post': u' 3', 'author': u'steelbullets'}, {'date': u'April 19, 2017 - 8:00 am', 'content': u"It seems that you are combining thingspeak library commands with client write commands. \xa0It is possible to write to ThingSpeak using the ThingSpeak library - these are the ThingSpeak.setField and ThingSpeak.writeFields etc. commands. \xa0It is also possible to use your own client and build the HTTP POST call yourself, which is the client.print(cmd) method. \xa0There are good reasons to use either, but I wouldn't suggest using both\xa0simultaneously. \xa0I would recommend using the library, but if you want to use the client version, I think you need a string that says 'api_key=' before you append the actual apikey. \xa0I haven't checked your code completely so you will want to follow the example closely.\xa0", 'num_user_post': u' 401', 'author': u'cstapels'}, {'date': u'June 23, 2017 - 3:50 am', 'content': u"Hi. I have similar problem. My data does not log to server, when I switch to different Wifi access point (of course SSID and PASSWORD are changed in the code before switching).Here is my code:#include #include #include #include #define ONE_WIRE_BUS 2char ssid[] = 'MY_SSID';char pass[] = 'MY_PASSWORD';WiFiClient client;OneWire oneWire(ONE_WIRE_BUS);DallasTemperature DS18B20(&oneWire);unsigned long myChannelNumber = MY_CHANNEL_NUMBER;const char * myWriteAPIKey = 'MY_API_KEY';void setup() { WiFi.begin(ssid, pass); ThingSpeak.begin(client); pinMode(LED_BUILTIN, OUTPUT);}void loop() { digitalWrite(LED_BUILTIN, HIGH); DS18B20.requestTemperatures(); float temp = DS18B20.getTempCByIndex(0); ThingSpeak.writeField(myChannelNumber, 1, temp, myWriteAPIKey); delay(1000); digitalWrite(LED_BUILTIN, LOW); delay(19000);}", 'num_user_post': u' 1', 'author': u'tomski'}, {'date': u'June 26, 2017 - 6:16 pm', 'content': u'Some networks may need more time to connect, I would suggest adding some delay and a loop to trying connection repeatedly. \xa0You could add it to your main loop in case the device looses connection after start up. The antenna on an ESP8266 is pretty small...Have a look at the methods for connecting to wifi in here.', 'num_user_post': u' 401', 'author': u'cstapels'}, {'date': u'June 27, 2017 - 7:48 am', 'content': u"I also built my first Thingspeak project for monitoring temperature using DHT11, but I always send values through URL using POST function like belowsprintf(postUrl, 'update?api_key=%s&field1=%s&field2=%s',api_key,humidStr,tempStr);httpGet('api.thingspeak.com', postUrl, 80);I followed this Arduino temperature monitoring article, and it worked for me as it is. I will try to use ThingSpeak.writeField function next time, till then you can also try to send values to server using POST URL, read the referred article for detailed instruction.", 'num_user_post': u' 1', 'author': u'jaysha4'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/mdns-alternative/', 'posts': [{'date': u'May 22, 2017 - 1:59 pm', 'content': u"Hi all,\xa0Need help! The problem is:The user needs to access a webserver web page installed on esp8266 and connected as a client.For this it is necessary to know the IP assigned by the DHCP of the network router.I'm trying to use the mDNS library to access the device as 'mydevice.local'.This is not working. (Even using Bonjour on Win 10, and also does not work on Android 6.0)Does anyone suggest another technique or method to achieve for the same purpose?\xa0Tks!", 'num_user_post': u' 5', 'author': u'avoletta'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/esp8266-and-arduino-ide/', 'posts': [{'date': u'May 14, 2017 - 5:26 pm', 'content': u"HiI'm new to this forum and very confused / bewildered.I was excited to find what I thought to be a simple way to log data via the internet. The ESP8266 looked very promising (and simple?).\xa0I've spent several hours trying to test the RSSI send example and found it impossible to load into my ESP. Code compilation took several minutes, generated some 250k of code, and just could not upload - errors half way.\xa0Please advise me if I'm missing something:Is it normal that compilation takes forever?Can the code really be >250k?I'm used to programming using PIC micros using the Mikroe development system and it is lightning fast, and generates very economical code.\xa0I'm really keen to use the ESP, but does it work\xa0ThanksJohn", 'num_user_post': u' 1', 'author': u'TheFossil'}, {'date': u'May 14, 2017 - 9:01 pm', 'content': u'It is quite normal to generate that kind of code size.\xa0 The Arduino interface is basically an emulator built on top of the expressif SDK so the code is not that efficient.\xa0 I suspect that you could write much smaller and more efficient code using the native SDK (https://espressif.com/en/support/download/sdks-demos) but you would need to learn a new environment and set up a new toolchain. That being said the ESP8266 is a much more sophisticated and capable board than a Pic or AtMega so code is going to be larger by necessity.\xa0You may get more assistance with your upload problems on the arduino forums (http://forum.arduino.cc/index.php#c3)', 'num_user_post': u' 271', 'author': u'rw950431'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/lm35-sensor-cant-see-data-on-chart/', 'posts': [{'date': u'April 17, 2017 - 7:32 pm', 'content': u"Hello everyone, newbie hereI'v started using an ESP8266 12E with an LM35 Temperature sensor, I can read data correctly and show the on my serial monitor, but when I created a new channel on thingspeak and added the API key to my code to show the data, I can't see nothing, Entries value keep incrementing, but I can't see anything on the chart.Help, Thanks.", 'num_user_post': u' 1', 'author': u'Khorne666'}, {'date': u'April 17, 2017 - 9:34 pm', 'content': u'Have you had a look at this tutorial? Does following this tutorial give you the right results in your ThingSpeak channel? Can you compare your code with what is in the tutorial to figure out what is different in your code that causes it to not work?', 'num_user_post': u' 225', 'author': u'Vinod'}, {'date': u'April 18, 2017 - 5:02 am', 'content': u"Even i am having this same problem using a DHT11 Sensor. No matter what I try, My thingspeak channel is not at all recording data sent to it. I am working on a IOT Project for my college. I have tried almost 15-19 tutorials on the internet. Using functions like\xa0ThingSpeak.writeField(channel, 1, t, apiKey), ThinkSpeak.setFields() to using POST methods from arduino etc.\xa0None Seems to work. I don't know where i am going wrong. However if I type the post method with the api key and field values in the address bar of the browser, the data gets logged into ThinkSpeak.\xa0Here is my Code: Parts of it, like the network ssid, passwords and API Keys are hidden. I have it in my sketch though.#include #include #include #include #define dht_apin 4// Analog Pin sensor is connected to #define IP '184.106.153.149'DHT dht(dht_apin, DHT11,15); const char* apiKey = '';\xa0//Hidden due to privacy String apiKey1 = '';\xa0//Hidden due to privacy unsigned long channel =;\xa0//Hidden due to privacy const char* ssid = '//Hidden due to privacy'; const char* password = '//Hidden due to privacy'; const char* server = 'api.thingspeak.com'; int h,t;WiFiClient client;void setup(){Serial.begin(115200); delay(500);//Delay to let system boot dht.begin(); delay(1000);//Wait before accessing Sensor WiFi.begin(ssid, password); Serial.println(); Serial.println(); Serial.print('Connecting to '); Serial.println(ssid); WiFi.begin(ssid, password);while (WiFi.status() != WL_CONNECTED) { delay(500); Serial.print('.'); } Serial.println(''); Serial.println('WiFi connected'); ThingSpeak.begin(client);}//end 'setup()'void loop(){ //Start of Program// DHT.read11(dht_apin);Serial.print('Current humidity = '); Serial.print(dht.readHumidity()); h=dht.readHumidity(); Serial.print('% '); Serial.print('temperature = '); Serial.print(dht.readTemperature()); t=dht.readTemperature(); Serial.println('C '); if (isnan(h) || isnan(t)) { Serial.println('Failed to read from DHT sensor!'); return; }This is creating the Headache i think. Please Look into this part of Code specifically.\xa0if (client.connect(server,80)) { // '184.106.153.149' or api.thingspeak.com Serial.print('Temperature: '); Serial.print(t); ThingSpeak.setField(1,t);  Serial.print(' degrees Celcius Humidity: '); Serial.print(h); ThingSpeak.setField(2,h); Serial.println('% send to Thingspeak'); String postStr = apiKey; postStr +='&field1='; postStr += String(t); postStr +='&field2=';  postStr += String(h); postStr += '';client.print('POST /update HTTP/1.1 '); client.print('Host: api.thingspeak.com '); client.print('Connection: close '); client.print('X-THINGSPEAKAPIKEY: '+apiKey1+' '); client.print('Content-Type: application/x-www-form-urlencoded '); client.print('Content-Length: '); client.print(postStr.length()); client.print(' '); client.print(postStr);// wait for response /*while(!!!client.available()) { delay(10); }*/// Read all the lines of the reply from server and print them to Serial Serial.println('Response: '); while(client.available()){ String line = client.readStringUntil(''); Serial.print(line); }Serial.println(); Serial.println('closing connection'); //ThingSpeak.writeField(channel, 1, t, apiKey);  //ThingSpeak.writeField(channel, 2, h, apiKey); // Write the fields that you've set all at once. //ThingSpeak.writeFields(channel,apiKey); } else{ Serial.print('Cannot connect to the internet. Check Mobile Data'); Serial.print(' '); } client.stop();Serial.println('Waiting\u2026'); // thingspeak needs minimum 15 sec delay between updates delay(20000);//Fastest should be once every two seconds.}// end loop()\xa0Thanking YouRegardsSteelBullets", 'num_user_post': u' 3', 'author': u'steelbullets'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/error-while-attempting-http-get-with-sim808-1/', 'posts': [{'date': u'March 12, 2017 - 10:16 am', 'content': u"\xa0im trying to update thinkspeak from sim808 but getting network error . kindly please check below and let me know if this is anything wrong in my methodology. im using terminal.exe to send command via RS232.ATOKAT+CREG?+CREG: 0,5   //connected in roamingAT+SAPBR=3,1,'Contype','GPRS'OKAT+SAPBR=3,1,'APN','www'     //VODAFONE INDIA 'www' is APN (as per the operator)OKAT+SAPBR=3,1,'USER',''       //blank (as per the operator)OKAT+SAPBR=3,1,'PWD',''       //blank  (as per the operator)AT+SAPBR=1,1OKAT+HTTPINITOKAT+HTTPPARA='CID','1'OKAT+HTTPARA='URL','https://api.thingspeak.com/update?api_key=MY_KEY&amp;field1=VALUE'OKAT+HTTPACTION=0+HTTPACTION: 0,603,0 // as per documentnote: while im typing in browser url box, https://api.thingspeak.com/update?api_key=MY_KEY&field1=VALUE, i can able to update my field. i can able make call, send sms, i have internet packPLEASE HELP\xa0", 'num_user_post': u' 2', 'author': u'SankarSaba'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/esp8266-cant-connect-to-thinkspeak/', 'posts': [{'date': u'February 9, 2017 - 1:23 pm', 'content': u"I am using this tutorial - [https://www.instructables.com/id/Flowmeter-NodeMcu-Counting-Litres/][1]i am also using a same Node MCU ESP8266i connected it to my home network the local ip address is also displayed but it doesn't connected to my thingspeak channel and it struck at the waiting for the clienti also check a my thingspeak API its correct and my home network is also workingThanks in advance", 'num_user_post': u' 1', 'author': u'abhishek123'}, {'date': u'February 10, 2017 - 11:28 am', 'content': u'That sounds like a connectivity problem. Are you using a kind of WiFi security that the microcontroller cannot handle (WPA2 perhaps?) Maybe you can set up a WiFi that does not require authentication?The first step in debugging this would be to see if you can reach the internet from your nodeMCU micro.\xa0', 'num_user_post': u' 225', 'author': u'Vinod'}, {'date': u'February 26, 2017 - 12:06 pm', 'content': u'hello,I cannot send data to thingspeak with esp8266 (I had thingspeak library and added the apikey number in the arduino ide...) ; I get only on my serial monitor the following information :Temperature: 23.00 degrees Celcius Humidity: 42.00% send to ThingspeakWaiting...Failed to read from DHT sensor!but nothing is arriving into my channelWhat could be the causes ? help', 'num_user_post': u' 2', 'author': u'herge'}, {'date': u'February 26, 2017 - 12:22 pm', 'content': u"I'd recommend starting from something that works. Try this tutorial modified with your channel info:http://nothans.com/measure-wi-fi-signal-levels-with-the-esp8266-and-thingspeakDoes this work?", 'num_user_post': u' 225', 'author': u'Vinod'}, {'date': u'February 27, 2017 - 3:54 pm', 'content': u"I have a very similar issue, I try the DHT sensor, and is taking measurements, and I check if it is connected to the network and it also is, the code get stocked in this line.(from this code source http://www.instructables.com/id/Send-sensor-data-DHT11-BMP180-to-ThingSpeak-with-a/?ALLSTEPS){if (client.connect(thingSpeakAddress, 80)){I review that the variable\xa0thingSpeakAddress, has the correct address.I'm trying to connect to my plant router, so I can't\xa0change the security type.I know my network is encrypted in WPA2-Personal with AES.I also set up a webserver in the same network with no issues, I was able to connect to the esp from a different computer in the same network.Hope you can help.Have a nice day.", 'num_user_post': u' 1', 'author': u'kgd'}, {'date': u'March 1, 2017 - 8:57 am', 'content': u"kgd,Does your plant router require additional authentication after connecting to the Wi-Fi? \xa0Often times on an office or business network, there is a captive portal which will not allow any traffic through until a username/password is supplied.If that is the case, then your device won't be able to connect to ThingSpeak.", 'num_user_post': u' 34', 'author': u'JasonW'}, {'date': u'March 1, 2017 - 3:52 pm', 'content': u'I just tested the ESP8266 --> ThingSpeak Channel via MKR1000 Wi-Fi\xa0\xa0This sketch sends the Wi-Fi Signal Strength (RSSI) of an ESP8266 to a ThingSpeak\xa0channel using the ThingSpeak API (https://www.mathworks.com/help/thingspeak).\xa0On my serial monitoe it is OK =RSSI: -56RSSI: -53RSSI: -55RSSI: -55RSSI: -55RSSI: -52RSSI: -53but I see nothing on my channel ; I selected RSSI in Field 1 ; METADATA=JSON ; and Showstatus + SAVEDo I have missed something ? Thanks in advance', 'num_user_post': u' 2', 'author': u'herge'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/measure-wi-fi-signal-levels-with-the-esp8266-and-thingspeak/', 'posts': [{'date': u'February 22, 2017 - 11:21 am', 'content': u"I created a tutorial that uses the ESP8266 (NodeMCU version from Amazon) and sends data to ThingSpeak. I tried to document all of the steps to get the Arduino IDE configured and use it to program the ESP8266.Here's a link to my tutorial: http://nothans.com/measure-wi-fi-signal-levels-with-the-esp8266-and-thingspeak", 'num_user_post': u' 402', 'author': u'Hans'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/problem-with-adafruit-cc3000-wifi-sheild-sending-data-to-thingspeak/', 'posts': [{'date': u'February 9, 2017 - 10:36 am', 'content': u"Hello.I am try to send data thingspeak using adafruit cc3000 wifi shield.After 3-4 times it sending off data.Here is the code.I am using Lm35 for sensing temperature....Help me out.Thank you all/*************************************************** * This is a sketch to use the online temperature and humidity sensor using Xively * * Actual code was written by Marco Schwartz for Open Home Automation . ****************************************************/// Libraries#include <Adafruit_CC3000.h>#include <ccspi.h>#include <SPI.h>#include <string.h>#include<stdlib.h>#include 'utility/debug.h'//#include 'DHT.h'#include <avr/wdt.h>// Define CC3000 chip pins#define ADAFRUIT_CC3000_IRQ 3#define ADAFRUIT_CC3000_VBAT 5#define ADAFRUIT_CC3000_CS 10// temperature and humidity sensor//#define DHTPIN 7//#define DHTTYPE DHT11// Create CC3000 instancesAdafruit_CC3000 cc3000 = Adafruit_CC3000(ADAFRUIT_CC3000_CS, ADAFRUIT_CC3000_IRQ, ADAFRUIT_CC3000_VBAT,SPI_CLOCK_DIV2); // you can change this clock speed// WLAN parameters#define WLAN_SSID 'domain'#define WLAN_PASS 'ATR@5645'// Security can be WLAN_SEC_UNSEC, WLAN_SEC_WEP, WLAN_SEC_WPA or WLAN_SEC_WPA2#define WLAN_SECURITY WLAN_SEC_WPA2// Xively parameters// ThingSpeak Settingschar thingSpeakAddress[] = 'api.thingspeak.com';String writeAPIKey = 'MSQA5TY5V7UK1H6X';uint8_t temperature;uint32_t ip;// Variable Setuplong lastConnectionTime = 0;boolean lastConnected = false;int failedCounter = 0;int tempPin = A0;int val;// for themperature and humidity//DHT dht(DHTPIN, DHTTYPE);void setup(void){ // Initialize Serial.begin(115200); ConnectWifi(); //// Connect with Wifi}void loop(void){ // Get data & transform to integers //float h = dht.readHumidity(); val = analogRead(tempPin); float mv = (val/1024.0)*5000; float cel = mv/10; Serial.print('Temperature = '); Serial.println(cel); //Serial.print('Humidity = '); //Serial.println(h);int temperature = (float) cel; //int humidity = (int) h; String tem=String(temperature, DEC); //Thingspeak only data stream is string type //String hum=String(humidity, DEC); // Converting integer data to string Serial.print(F('api.thingspeak.com -> ')); while (ip == 0) { if (! cc3000.getHostByName('api.thingspeak.com', &ip)) { Serial.println(F('Couldn't resolve!, Restarting.....')); wdt_enable(WDTO_8S); // if host does not response wait 8 sec and restart while(1){} } delay(500); } cc3000.printIPdotsRev(ip); Serial.println(F('')); Adafruit_CC3000_Client client = cc3000.connectTCP(ip, 80); // Print Update Response to Serial Monitor if (client.available()) { char c = client.read(); Serial.print(c); }// Update ThingSpeak if(client.connected()) { // Send temperature and humidity data to Thingspeak site updateThingSpeak('1='+tem); delay(20000); // Thingspeak needs a 15s delay between 2 data stream. failedCounter=0;} else { Serial.println(F('Connection failed')); failedCounter++; if (failedCounter==15) { Serial.println(F('Connection failed for 15 times, Restarting......')); wdt_enable(WDTO_8S); // if 10 continuous data upload failed, restart host after 8s. while(1){} } }}void updateThingSpeak(String tsData){ Adafruit_CC3000_Client client = cc3000.connectTCP(ip, 443); Serial.println('Connecting to ThingSpeak...'); Serial.println('Sending Data'); client.print('POST /update HTTP/1.1'); client.print('Host: api.thingspeak.com'); client.print('Connection: close'); client.print('X-THINGSPEAKAPIKEY: '+writeAPIKey+''); client.print('Content-Type: application/x-www-form-urlencoded'); client.print('Content-Length: '); client.print(tsData.length()); client.print('');client.print(tsData); Serial.println(F('Done')); Serial.println(F('Waiting 25 sec for next sending'));}void ConnectWifi(){ Serial.println(F('Initializing...')); if (!cc3000.begin()) { Serial.println(F('Couldn't begin()! Check your wiring?')); while(1); } // Connect to WiFi network cc3000.connectToAP(WLAN_SSID, WLAN_PASS, WLAN_SECURITY); Serial.println(F('Connected!'));/* Wait for DHCP to complete */ Serial.println(F('Request DHCP')); while (!cc3000.checkDHCP()) { delay(100); }}", 'num_user_post': u' 1', 'author': u'Rakibul Sharif'}]}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/page-6/', 'threads': [{'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/urgent-helpwifi-shiled/', 'posts': [{'date': u'February 9, 2017 - 10:03 am', 'content': u'Arduino uno cc3000 wifi data stops sending to the thinkspeak server after 3-4 times,how can i solve this problem .', 'num_user_post': u' 1', 'author': u'pilkar'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/esp8288-at-command-parsing-and-escape-characters-help-with-the-rules-needed/', 'posts': [{'date': u'February 7, 2017 - 3:08 pm', 'content': u"HiI am developing an application whereby two ESP8266's inter communicate using the TCP and I am using the ESP8266_TCP library to develop functions to Tx and Rx data between the TCP client and server ESP's. However, despite many hours looking at related posts on various forums I am still somewhat confused on how to parse the commands correctly, with or without string literals.\xa0 I am aware that I should use the backslash character '' to precede double quotes INSIDE the overall string as shown.\xa0 So, example 1 I fully understand given this rule.Example 1:[code]Write('AT+CWSAP=2,'CG_BRST','abcdefgh');[/code]But this 'rule' doesn't seem to fully apply with the next two typical examples encountered by way way of Internet searching on the topic. Can anyone please enlighten me on parsing rules and using escape characters.I assume ssid and password are string variables i the examples given.Example 2[code]sendData('AT+CWJAP='' + ssid + '','' +password + ''');[/code]Example 3[code]write('AT+CWSAP='' + ssid +'',''+password+'','+String(channel)+',4');[/code]Many thanks in anticipation of any help.", 'num_user_post': u' 2', 'author': u'Hafod'}, {'date': u'February 7, 2017 - 10:29 pm', 'content': u"As a sanity check\xa0you may want to use some\xa0Serial.print(someString); statements. in your code and look in the Arduino IDE's serial monitor. For example the following code in an Arduino\xa0sketchvoid setup() { // put your setup code here, to run once:}void loop() { // put your main code here, to run repeatedly:String ssid = 'Foo';String password = 'Bar';String cmdString = 'AT+CWJAP='' + ssid + '','' + password + ''' + '';Serial.print(cmdString);delay(1000);}Shows me:AT+CWJAP='Foo','Bar'in the serial monitor. This is exactly what\xa0I expect.If you are a beginner you may want to start with some tutorials on C programming.", 'num_user_post': u' 225', 'author': u'Vinod'}, {'date': u'February 8, 2017 - 11:52 am', 'content': u"Thanks for your very helpful response Vinod and I will persue this straightforward approach with the Arduino IDE.\xa0 I'm sure I will encounter issues as I progress and will post them here for assistance if that's ok.\xa0", 'num_user_post': u' 2', 'author': u'Hafod'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/connection-only-works-once/', 'posts': [{'date': u'January 13, 2017 - 8:29 am', 'content': u"Hi,\xa0I'm doing an update using the GET verb in request.This mechanism is important.It works the first time and then all subsequent connections fail.\xa0I have used the domain url and IP address with the same results.I have used a 1minute and 2minute loop to no avail.Code (-keys):DERIVED FROM: https://github.com/squix78/esp8266-projects/blob/master/arduino-ide/thingspeak-data-logger/thingspeak-data-logger.ino/* *\xa0 This sketch sends data via HTTP GET requests to thingspeak service every 10 minutes *\xa0 You have to set your wifi credentials and your thingspeak key. */#include extern 'C' { #include 'user_interface.h' }const char* ssid = 'Virgin Mobile 4G_38AB4B'; const char* password = 'XXX';const char* host = 'api.thingspeak.com';void setup() { \xa0 \xa0Serial.begin(115200); \xa0 \xa0Serial.println(); \xa0 \xa0Serial.println(); \xa0 \xa0Serial.print('Connecting to '); \xa0 \xa0Serial.println(ssid); \xa0 \xa0WiFi.begin(ssid, password); \xa0 \xa0while (WiFi.status() != WL_CONNECTED) { \xa0 \xa0\xa0 \xa0delay(500); \xa0 \xa0\xa0 \xa0Serial.print('.'); \xa0 \xa0} \xa0 \xa0Serial.println(''); \xa0 \xa0Serial.println('WiFi connected'); \xa0 \xa0Serial.println('IP address: '); \xa0 \xa0Serial.println(WiFi.localIP()); \xa0 \xa0delay(5000); }int value = 0;void loop() { \xa0 \xa0++value; \xa0 \xa0logThingSpeak(value); \xa0 \xa0delay(60000); }void logThingSpeak(int value) { \xa0 \xa0Serial.print('connecting to '); \xa0 \xa0Serial.println(host); \xa0 \xa0// Use WiFiClient class to create TCP connections \xa0 \xa0WiFiClient client; \xa0 \xa0const int httpPort = 80; \xa0 \xa0if (!client.connect(host, httpPort)) { \xa0 \xa0\xa0 \xa0Serial.println('connection failed'); \xa0 \xa0\xa0 \xa0return; \xa0 \xa0} \xa0 \xa0String url = '/update?api_key=XXX&field1=' + String(value); \xa0 \xa0Serial.print('Requesting URL: '); \xa0 \xa0Serial.println(url); \xa0 \xa0// This will send the request to the server \xa0 \xa0client.print(String('GET ') + url + ' HTTP/1.1 ' + \xa0 \xa0\xa0 \xa0'Host: ' + host + ' ' + \xa0 \xa0\xa0 \xa0'Connection: close'); \xa0 \xa0delay(10); \xa0 \xa0// Read all the lines of the reply from server and print them to Serial \xa0 \xa0while (client.available()) { \xa0 \xa0\xa0 \xa0String line = client.readStringUntil(' '); \xa0 \xa0\xa0 \xa0Serial.print(line); \xa0 \xa0} \xa0 \xa0Serial.println(); \xa0 \xa0Serial.println('closing connection. '); }The serial output:Opening port Port openConnecting to Virgin Mobile 4G_38AB4B . WiFi connected IP address: 192.168.0.134 connecting to api.thingspeak.com Requesting URL: /update?api_key=XXX&field1=1closing connection. connecting to api.thingspeak.comconnection failed connecting to api.thingspeak.comconnection failed connecting to api.thingspeak.comconnection failed connecting to api.thingspeak.comconnection failed\xa0Is there something fundamental I am missing?\xa0Thanks", 'num_user_post': u' 4', 'author': u'Nic Roche'}, {'date': u'January 13, 2017 - 9:35 am', 'content': u'Hi. I would try commenting out the return line to see if the code continues. If that does not work, then I would try restarting the client. Let us know what you discover.', 'num_user_post': u' 402', 'author': u'Hans'}, {'date': u'January 13, 2017 - 9:47 am', 'content': u"Are you actually closing the connection that you opened? \xa0I don't see a call to stop()...Consider using the ThingSpeak Communication Library, which supports more ESP-8266 devices. \xa0 The code is public, so you can use it as a reference.https://github.com/mathworks/thingspeak-arduino-Rob", 'num_user_post': u' 47', 'author': u'Rob Purser'}, {'date': u'January 13, 2017 - 6:15 pm', 'content': u"\xa0>\xa0I don't see a call to stop()...This is linked github code refactored.In my many iterations I have tried stop(), global\xa0WiFiClient, local\xa0WiFiClient, timeouts etc.>\xa0using the ThingSpeak Communication LibraryIt needs to be a plain get using a querystrings with no specific headers.>\xa0so you can use it as a reference.Will have a look.\xa0Thanks Rob.", 'num_user_post': u' 4', 'author': u'Nic Roche'}, {'date': u'January 13, 2017 - 6:25 pm', 'content': u'Hans said  Hi. I would try commenting out the return line to see if the code continues. If that does not work, then I would try restarting the client. Let us know what you discover.\xa0\xa0as there is no response from\xa0// Read all the lines of the reply I could not verify an actual success (serial side) doing this, but will try and check the channel feed.\xa0EDIT: removed return and no requests received in my channel (other than the first).EDIT2: tried http://www.google.com and had the same issue.', 'num_user_post': u' 4', 'author': u'Nic Roche'}, {'date': u'January 13, 2017 - 7:55 pm', 'content': u'I _seem_ to have resolved it.I have modified the order before for\xa0WiFi.mode(WIFI_STA);Now it sits just beforeWiFi.begin (ssid, pw);Also I modified the number of connection my access point can handle.It was repoerting 4 \xa0connections on a limit of 5; now the limit is 10 - mainly mentioned this for transparency as it does not explain the initial successful connection...\xa0Thanks all', 'num_user_post': u' 4', 'author': u'Nic Roche'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/how-measure-several-18d20-on-esp8266/', 'posts': [{'date': u'August 12, 2016 - 2:45 pm', 'content': u'Hello All\xa0Im trying to find out how can i setup on one ESP8266 E12 with thingspeak\xa0 dallas sensors?i have an ESP8266 with 3 18D20 sensors that working fine, how do i setup 3 reading in the same time via thingspeak ?\xa0can anybody direct me to the right process or code ?thanks', 'num_user_post': u' 1', 'author': u'prince1'}, {'date': u'August 14, 2016 - 8:44 pm', 'content': u'Currently you can only post to a specific channel once every 15 seconds. So, if you want 3 devices to post, you may need to do some sort of aggregation where a device collects the data from the other two devices and posts to ThingSpeak every 15 seconds.Alternatively, you can create 3 channels and have each device post to its own channel.', 'num_user_post': u' 225', 'author': u'Vinod'}, {'date': u'August 14, 2016 - 8:57 pm', 'content': u'You can certainly post up to 8 values from the same device in a single update.See the example at https://github.com/mathworks/thingspeak-arduino/blob/master/examples/WriteMultipleVoltages/WriteMultipleVoltages.ino\xa0\xa0If you post the code that you have it might be easier to get help.', 'num_user_post': u' 271', 'author': u'rw950431'}, {'date': u'August 14, 2016 - 10:31 pm', 'content': u'rw950431\xa0is correct - you can\xa0update any number of fields in a particular channel at a rate of up to once every 15 seconds.I may have misread the question as needing to have 3 separate ESP8266s updating the same channel. prince1,\xa0are you looking to have 3 microcontrollers with 3 sensors each, or one microcontroller with 3 sensors?\xa0', 'num_user_post': u' 225', 'author': u'Vinod'}, {'date': u'August 15, 2016 - 2:14 am', 'content': u'Hope this code snippet will\xa0help:http://pastebin.com/2qTujkvN', 'num_user_post': u' 4', 'author': u'TomSim'}, {'date': u'October 3, 2016 - 6:04 am', 'content': u"Hello All,I came across 'ItKindaWorks' video on YouTube about a month ago and have been working with ESP8266 every since.Currently I am trying to get my ESP01 to publish a topic\xa0and upload to Thingspeak the temp of the room.So far it works but I have an odd issue that every time it publishes to Thingspeak the connection is lost and has to reconnect.\xa0Please have a look at my code on GitHub and tell me where I have gone wrong.https://raw.githubusercontent.com/ian-tait/ESP8266/master/TempNode/TempNode.inoAny help would be great.Thanks", 'num_user_post': u' 1', 'author': u'taity'}, {'date': u'December 5, 2016 - 1:52 pm', 'content': u'If you are using the ESP8266 you only have a limited number of pins. Still possible to connect several\xa0 DS18B20 probes as well as other sensors.Have a look here.', 'num_user_post': u' 1', 'author': u'Edwin'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/cant-see-temperature-data/', 'posts': [{'date': u'December 1, 2016 - 11:23 pm', 'content': u"Please disregard this post. I figured it out. Thanks\xa0I just started using Thingspeak. I'm totally new to IoT methods. The hardware is Huzzah esp8266 and DS18B20 one wire temperature sensor. Using Arduino IDE.\xa0 This is sketch I'm using:http://internetofthinking.blogspot.com/2016/02/upload-ds18b20-temperature-sensor-data.htmlI can see the Temperature fine on Serial Terminal of IDE. I see WiFi Client connected and and then 230 Temperature:\xa0 19.94\xa0\xa0\xa0 But nothing on Thingspeak graph except 'Add Visualizations'I also see this over and over when I start this forum:Warning: in_array() [function.in-array]: Wrong datatype for second argument in /home/content/56/7318356/html/community/wp-content/plugins/simple-press/forum/content/classes/sp-list-topic-class.php on line 337I'm lost!", 'num_user_post': u' 1', 'author': u'donde'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/cyber-monday-iot-hobby-kit-by-sparkfun/', 'posts': [{'date': u'November 27, 2016 - 8:53 pm', 'content': u"I saw a blog post from SparkFun announcing their, 'Cyber Monday IoT Hobby Kit'. The kit is based on the ESP8266 board and includes some other parts to build some connected projects. They also published tutorials that use ThingSpeak that go along with the kit. If you have all of the parts in the kit, you can build the sample projects with the code on GitHub.If you have been wanting to dive into the world of Internet of Things (IoT) but didn\u2019t know where to start, this kit will certainly get your feet wet. By using the popular Arduino development environment to program the included ESP8266 Thing Dev board, you will learn how to post temperature and humidity data to the open source ThingSpeak\xa0data channel. The other exercises show you how to send yourself emails or text messages with the push of a (physical) button and, for the coup de gr\xe2ce, remotely control 120 V home or office appliances from anywhere in the world. No soldering required!Kit Includes:1x ESP8266 Thing - Dev Board1x Jumper Wires - Connected 6in. (M/M, 20 pack)1x Humidity and Temperature Sensor - RHT031x Breadboard - Self-Adhesive (White)1x Resistor 10K Ohm 1/6th Watt PTH - 20 pack1x USB microB Cable - 6 Foot1x PowerSwitch Tail II1x SparkFun Mini Screwdriver3x Momentary Pushbutton Switch - 12mm Square1x Wall Charger - 5V USB (1A)Documents:Experiment Guide", 'num_user_post': u' 402', 'author': u'Hans'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/string-from-nodemcu-to-thing-speak-not-working/', 'posts': [{'date': u'November 25, 2016 - 9:07 am', 'content': u"Hey Guys,I am trying to interface nodemcu to thingspeak. I have used a generic thingspeak api. Everything about numeric values is fine, but when i try to print a string data on the field the field seems to look empty. i have used the followig code to write my data\xa0ThingSpeak.writeField(myChannelNumber, 1, 'High', myWriteAPIKey);please help me out.....thanks in advance", 'num_user_post': u' 1', 'author': u'Kavindran'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/arduino%c2%b5panelthigspeak/', 'posts': [{'date': u'November 24, 2016 - 10:44 am', 'content': u"Hello to all.For over a year I use this site to show the temperature inside and outside of my house. I do it through a ESP8266 module, connected to the Arduino Mega and use the code shown in the example 'ESP8266 Wifi Temperature Logger' seen in the tutorial.I purchased a \xb5Panel module (http://www.miupanel.com/en-us/) to display the same information on my smartphone.Does anyone know if you can use \xb5Panel to send data to the smartphone and also ThingSpeak to display them in a graph, since the module is a ESP8266 with a particular firmware installed?\xa0Thanks in advanceBest regardsMarcoP.S. I do not know if this is the right section, or would be better to post it in the Apps \xa0", 'num_user_post': u' 3', 'author': u'marco508286'}, {'date': u'November 24, 2016 - 1:30 pm', 'content': u'Hi Marco,I am not familiar with the miupanel. You may want to reach out to the creators of that hardware and ask if you can modify the firmware on the ESP8266 on the miupanel. If you can modify the firmware, then you should be able to put your own code on there to send data to ThingSpeak, just like you are doing with your temperature logger.If you do end up doing this, it would be great if you can share the steps needed to do this on the forum.-Vinod', 'num_user_post': u' 225', 'author': u'Vinod'}, {'date': u'November 24, 2016 - 4:55 pm', 'content': u"Hi Vinod,given my inexperience, I was not clear enough with my question, because I meant just the opposite. I'll better explain it .The miuPanel can also be set in the 'AT'way and then works as a normal ESP8266. In this case, however, you can not use the app for your smartphone. Since, however, it can operate as TCP socket - file and data transfer (http://www.miupanel.com/Wi-Fi-Module/TCP-SOCKETS-File-Data-Transfer),that I do not know, I was wondering if anyone knew if in this way it was possible to send data to ThingSpeak and, in parallel to the app of smsrtphone.Thank youMarco", 'num_user_post': u' 3', 'author': u'marco508286'}, {'date': u'November 24, 2016 - 8:59 pm', 'content': u"There are already several apps available to view thingspeak data on your mobile- suggest you search 'thingspeak mobile app' or similar.\xa0\xa0\xa0that being said you could relay data onwards from thingspeak by combining the React and ThingHTTP apps to push data to whatever other system you like. Use the 'on data insertion' trigger.", 'num_user_post': u' 271', 'author': u'rw950431'}, {'date': u'November 25, 2016 - 9:01 am', 'content': u'Thanks for the answer, it will be very helpful, but at a later time because first I have to be able to send data from miuPanel to ThingSpeak, not with the AT command, but in TCP Socket mode, assuming it is feasible (the question is this ).\xa0Thanks again', 'num_user_post': u' 3', 'author': u'marco508286'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/setup-mywriteapikey/', 'posts': [{'date': u'November 10, 2016 - 5:24 pm', 'content': u'Hi there,I am using ESP module to write some values to Thingspeak and that is working great with the library. I am trying to have user set ssid and password, as well as Thingspeak write key from webpage, but in examples it is hard coded, any idea how I can get this to work? Best regards,vceklic', 'num_user_post': u' 1', 'author': u'vceklic'}, {'date': u'November 10, 2016 - 7:51 pm', 'content': u'How are you intending to connect to the webpage without already having correct SSID/password in order to get a WiFi connection?I guess you could store new values in ESP8266 flash memory using the EEPROM function (https://github.com/esp8266/Arduino/tree/master/libraries/EEPROM/examples) and read them back again during startup.', 'num_user_post': u' 271', 'author': u'rw950431'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/add-google-guage-to-esp-12e-webserver/', 'posts': [{'date': u'October 3, 2016 - 4:02 am', 'content': u"Hi there, this is my first post. I recently got my esp-12e sending data to thingspeak thanks to the blog post\xa0https://eryk.io/2016/04/temperature-logging-to-thingspeak-using-esp8266-and-dht22/My channel is up and I've configured the google gauge plugins to show temp and humidity.I'd like to know if can now modify the sketch to have my esp host a home page with the html/java for two gauges, so that I can use a browser from my local wifi network to view the two dials.Thanks in advance.", 'num_user_post': u' 1', 'author': u'Aususer5'}, {'date': u'October 4, 2016 - 1:09 am', 'content': u"You can re-assemble the complete web-page by copying the contents of the HTML window (in edit mode) to wherever you want then replacing the line %%PLUGIN_CSS%% with the contents of the CSS window, then replacing the line %%PLUGIN_JAVASCRIPT%% with the contents of the javascript windowHowever this web page will still need to download javascript code from https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js and https://www.google.com/jsapi as well as data from https://api.thingspeak.com/channels/ in order to work so I'm not sure what you will achieve by hosting the HTML code locally.If you want to completely remove all dependency on the internet you will have to include copies of the javascript files in your sketch (not sure if they will fit in the memory of your ESP-12E) as well as work out a way to serve the data directly rather than via thingspeak.", 'num_user_post': u' 271', 'author': u'rw950431'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/receiving-data-from-iot-to-esp8266-using-psoc-4200-ble/', 'posts': [{'date': u'September 24, 2016 - 10:56 am', 'content': u'I have interfaced the ESP8266 WIFI to the PSoC4200 BLE board via UART interface.Now I have to receive data from the IOT via a GET request.I searched many forums but I only found solutions with Arduino, and i cant find any solution where they have interfaced it to the PSoC board.So, can you please help me with the solution as to how can i use the esp8266 to receive the data from iot using the GET request.\xa0Thank YouRegards', 'num_user_post': u' 1', 'author': u'Parth18'}, {'date': u'September 24, 2016 - 10:32 pm', 'content': u'If you are just looking to GET the last datapoint on a channel, you could GET the\xa0https://thingspeak.com/channels/<CHANNEL_NUMBER>/fields/<FIELD_NUMBER>/last.json , for example.If you are looking to do more than just read the last value, you may be interested in learning more\xa0about the TalkBack app\xa0on ThingSpeak.\xa0', 'num_user_post': u' 225', 'author': u'Vinod'}, {'date': u'September 28, 2016 - 1:25 pm', 'content': u"Hi,\xa0I am not sure what you are looking for. If you are just looking for the format of the GET request t fetch a channel feed, Vinod's answer should help you. For more documentation on this you can visit: GET a Channel Feed, Get a Channel Field Feed. Else, if you are looking for a generic C program and not an Arduino sketch to send a GET request to fetch data from a channel field feed, you can use the following program as a starting point.\xa0#include <stdio.h>#include <stdlib.h>#include <unistd.h>#include <sys/socket.h>#include <string.h>#include <sys/types.h>#include <netinet/in.h>#include <netdb.h>void error(const char *msg) { perror(msg); exit(0); }int main(int argc, char** argv){/* Send data to ThingSpeak*/ int portno = 80; char *host = 'api.thingspeak.com';struct hostent *server; struct sockaddr_in serv_addr; int sockfd, bytes;/* Message to send to send to server. Note change the channel number, field number and read API key to that of your channel */ char *message = 'GET /channels/<channelnumber>/fields/<fieldnumber>.json?api_key=<readAPIkey>&results=1 HTTP/1.0';//Buffer to receive the response char response[4096];// Create the socket int sockfd = socket(AF_INET, SOCK_STREAM, 0); if (sockfd < 0) error('ERROR opening socket');// Look for the ip address server = gethostbyname(host); if (server == NULL) error('ERROR, no such host'); // Set the struct settings memset(&serv_addr,0,sizeof(serv_addr)); serv_addr.sin_family = AF_INET; serv_addr.sin_port = htons(portno); memcpy(&serv_addr.sin_addr.s_addr,server->h_addr,server->h_length);// Connect the socket to the server if (connect(sockfd,(struct sockaddr *)&serv_addr,sizeof(serv_addr)) < 0) error('ERROR connecting'); // Send the request bytes = write(sockfd, message, strlen(message)); // Receive the response bytes = read(sockfd, response, 4096); //close the socket close(sockfd); // View the response printf('Response:%s', response); return 0;}\xa0The C program shows how to create a socket to connect to ThingSpeak, lookup the IP address for ThingSpeak, connect the socket to ThingSpeak, send the GET request, receive the channel field data\xa0and close the socket.\xa0You can make this more complicated by checking the number of bytes read and reading more if the buffer was full but this is just a simple and direct way. Hope this helps.", 'num_user_post': u' 12', 'author': u'jvasudev'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/connecting-arduino-to-my-android-application/', 'posts': [{'date': u'August 12, 2016 - 3:32 pm', 'content': u'so i am using arduino uno with ESP8266-01 wifi module and i made my own application that receives notifications so i want to connect the arduino to this application to send notifications when something specific happens so can you help me please ?', 'num_user_post': u' 2', 'author': u'abduu'}, {'date': u'August 14, 2016 - 8:42 pm', 'content': u'Please refer to the tutorials section to see some examples.', 'num_user_post': u' 225', 'author': u'Vinod'}]}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/page-7/', 'threads': [{'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/inconsistent-data-readings-from-thingspeak-thingspeak-library-arduino-esp8266/', 'posts': [{'date': u'August 8, 2016 - 4:31 am', 'content': u"hi all.\xa0i try this forum since i had no success in the arduino thinspeak forum.sorry for double posting - !!\xa0i try to read last values of 3 field set \xa0of thhingspeak channel.like that:-after setting up client with these\xa0libraries#include <WiFiEsp.h>#include <WiFiEspClient.h>#include <WiFiEspServer.h>#include <WiFiEspUdp.h>#include <ThingSpeak.h> ////<<<<<<<<<<<<<<etc.etc.\xa0void loop() {int field1 = ThingSpeak.readIntField(141045,1);Serial.println();delay(1000);Serial.print('field 1 is: ');Serial.print(field1);Serial.println();int field2 = ThingSpeak.readIntField(141045,2);Serial.println();delay(10000);Serial.print('field 2 is: ');Serial.print(field2);Serial.println();int field3 = ThingSpeak.readIntField(141045,3);Serial.println();delay(10000);Serial.print('field 3 is: ');Serial.println(field3);Serial.println();delay(10000); // Note that the weather station only updates once a minute;};\xa0PROBLEM:I set the data to be\xa0\xa0 600 , 600,600\xa0i get unstable readings (of same line wihch i try to read for testing purposes over the loop),as follows \xa0over the arduino \xa0mega serial terminal\xa0\xa0field 1 is: 0[WiFiEsp] Connecting to api.thingspeak.com[WiFiEsp] TIMEOUT: 605[WiFiEsp] Disconnecting 0field 2 is: 0[WiFiEsp] Connecting to api.thingspeak.comfield 3 is: 600\xa0[WiFiEsp] Connecting to api.thingspeak.comfield 1 is: 600[WiFiEsp] Connecting to api.thingspeak.com[WiFiEsp] TIMEOUT: 605[WiFiEsp] Disconnecting 0field 2 is: 0[WiFiEsp] Connecting to api.thingspeak.comfield 3 is: 600[WiFiEsp] Connecting to api.thingspeak.comfield 1 is: 600[WiFiEsp] Connecting to api.thingspeak.com[WiFiEsp] TIMEOUT: 607[WiFiEsp] Disconnecting 0field 2 is: 0[WiFiEsp] Connecting to api.thingspeak.comfield 3 is: 600[WiFiEsp] Connecting to api.thingspeak.comfield 1 is: 600[WiFiEsp] Connecting to api.thingspeak.com[WiFiEsp] TIMEOUT: 605[WiFiEsp] Disconnecting 0field 2 is: 0[WiFiEsp] Connecting to api.thingspeak.comfield 3 is: 600\xa0any body can explain \xa0whats wrong here ?\xa0is it low memory of arduino as one suggested \xa0somewhere \xa0?\xa0wifi is strong , and all results come ok over http terminal .\xa0thanks \xa0Oded,", 'num_user_post': u' 3', 'author': u'oded'}, {'date': u'August 8, 2016 - 9:48 pm', 'content': u"Is your device having a brownout?Frequently the power consumption of the device will momentarily increase when it\xa0needs to transmit data over WiFi.\xa0If the\xa0power source is not capable of supplying the required power, a brownout may occur. I've had this happen to me with\xa0several ESP8266 devices.Some things to try:Connect your device using an ethernet cable (if that is an option) and power it by external power (as opposed to battery power) and see if it\xa0reliably retrieves dataIf (1) works, then power it by new battery/freshly charged battery and ensure it works reliablyIf (2) works, then switch to wifi at a spot that has strong Wifi signal and ensure it works reliably\xa0If (3) works, deploy device in field", 'num_user_post': u' 225', 'author': u'Vinod'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/error-400-bad-request/', 'posts': [{'date': u'June 22, 2015 - 2:11 am', 'content': u"I have a little project using a ESP8266 on an Arduino Uno that simply reads a value (well, 3 values) from a serial device (UV dosimeter).  I finally have everything talking together nicely (the arduino's serial monitor, so that I can see what's going on; the serial UV sensor; and the ESP8266).  I have not had any success in getting the updates - I have now been trying to update manually using Terminal v1.93b.  Here is the process I am using (I have no problem connecting):AT+CIPSTART=4,'TCP','184.106.153.149',804, CONNECTOKAT+CIPSEND=4,67OK>GET /update?key={my_API_key}&field1=5&field2=255&field3=300+IPD,4,172:400 Bad Request400 Bad Requestnginx/1.7.54,CLOSEDI have tried updating my channel via my browser and that works fine.I would appreciate any help I can get.", 'num_user_post': u' 4', 'author': u'SESupply'}, {'date': u'June 22, 2015 - 12:10 pm', 'content': u"Try this:GET /update?key={my_API_key}&field1=5&field2=255&field3=300&headers=false HTTP/1.1{CrLf}Host: api.thingspeak.com{CrLf}Connection: close{CrLf}Accept: */*{CrLf}{CrLf}Replace {CrLf} by CrLf ( 13, 10 )The keyword 'headers=false' will remove extra headers from response.The keyword 'Connection: close' will close the connection automatically.HTH", 'num_user_post': u' 13', 'author': u'Michel_J'}, {'date': u'June 23, 2015 - 2:14 am', 'content': u"Hi Michael, thanks for the reply - I'm getting so frustrated with this that I'm starting to chew on my keyboard!I tried your suggestion, but I get an error - I'm replacing your {CrLf} with  in the string I'm sending but it doesn't seem to work. (How exactly can I put the {CrLf} chars into the string in Terminal?)   At the moment I'm trying to send an update manually using Terminal so I can send exactly the string I want & see the response. Everything works perfectly right up till the GET statement.I've tried updating my channel from a browser and that works fine.  Could it be the ESP module itself??", 'num_user_post': u' 4', 'author': u'SESupply'}, {'date': u'June 24, 2015 - 4:05 pm', 'content': u"Make sure your terminal software send CrLf when you hit the return key on your keyboard. If you have Visual Studio I suggest you try with Visual Basic or C# to test your commands:           dim _SerialPort As New System.IO.Ports.SerialPort('COM3')            With _SerialPort                .BaudRate = '9600'                .Parity = IO.Ports.Parity.None                .DataBits = 8                .StopBits = IO.Ports.StopBits.One                .Handshake = IO.Ports.Handshake.None                .ReadTimeout = 10000                .NewLine = Microsoft.VisualBasic.Constants.vbCrLf                .Open()                'Clear the buffer                .DiscardInBuffer()                .DiscardOutBuffer()                .WriteLine('ATE0')            End With        cmd = _            'GET /update?key={my_API_key}&field1=20.0200&headers=false HTTP/1.1' & vbCr & vbLf & 'Host: api.thingspeak.com' & vbCr & vbLf & 'Connection: close' & vbCr & vbLf & 'Accept: */*' & vbCr & vbLf & vbCr & vbLf        _SerialPort.WriteLine('AT+CIPSEND=' & cmd.Length.ToString)        System.Threading.Thread.Sleep(100)        _SerialPort.Write(cmd)", 'num_user_post': u' 13', 'author': u'Michel_J'}, {'date': u'June 28, 2015 - 12:30 am', 'content': u'Hi Michael, thanks so much for your help - it is now finally working.', 'num_user_post': u' 4', 'author': u'SESupply'}, {'date': u'September 23, 2015 - 2:23 pm', 'content': u"Hi,Im trying to create simple Arduino project. 2 Arduino Uno boards, first one is sending sensor data to Thingspeak by ESP8266, second one is responding to received data. I managed to setup sending device without any problems, but i get 400 error while im trying to receive data with second device. To make sure it's not problem with my code i used Termite terminal and simply send AT commands to ESP. CR and LF signs are enabled. This is the field im trying to get data from: https://thingspeak.com/channels/39433/fields/2/lastThis is my terminal window:AT+CWMODE=1AT+CWMODE=1OKAT+CWJAP='test','12345678'AT+CWJAP='test','12345678'OKAT+CIPSTART='TCP','184.106.153.149',80AT+CIPSTART='TCP','184.106.153.149',80CONNECTOKAT+CIPSEND=51AT+CIPSEND=51OK> https://thingspeak.com/channels/39433/fields/2/lasthttps://thingspeak.com/channels/39433/fields/2/lastbusy s...SEND OK+IPD,323:HTTP/1.1 400 Bad RequestServer: nginx/1.7.5Date: Wed, 23 Sep 2015 18:21:41 GMTContent-Type: text/htmlContent-Length: 172Connection: close400 Bad Request400 Bad Requestnginx/1.7.5CLOSEDWhat am i doing wrong? Thanks for any help.", 'num_user_post': u' 3', 'author': u'MatHoff'}, {'date': u'September 23, 2015 - 2:42 pm', 'content': u'Hi,You may have more success using our API URL which bypasses HTTPS, for example: http://api.thingspeak.com/channels/39433/fields/2/last .lee', 'num_user_post': u' 457', 'author': u'lee'}, {'date': u'September 23, 2015 - 3:43 pm', 'content': u'Just tried your suggestion, i still get the same error. Any more ideas?', 'num_user_post': u' 3', 'author': u'MatHoff'}, {'date': u'September 23, 2015 - 3:51 pm', 'content': u'Hi MatHoff,Are you able to provide more details as to what your HTTP request looks like?  Are you able to make HTTP requests to other websites?lee', 'num_user_post': u' 457', 'author': u'lee'}, {'date': u'September 26, 2015 - 8:29 am', 'content': u"Hi.Im not sure if i understand you well, this is my first IoT project. Im not using HTTP POST request, im using GET method from this tutorial https://thingspeak.com/docs/channels#update_feed , paragraph 'Get last entry in a field feed'. Im just sending URL from example to ThingSpeak server just like i did in code from post 6. Am i doing it right?", 'num_user_post': u' 3', 'author': u'MatHoff'}, {'date': u'September 28, 2015 - 8:51 am', 'content': u'Hi MatHoff,Yes that is the right API command to update a feed.  Instead of sending a request to ThingSpeak, can you try sending a HTTP GET request to google.com, yahoo.com, or some other service to determine if your HTTP requests are formatted correctly and sending correctly?  My guess is that before the request is sent, in your code the request is somehow being formed incorrectly.lee', 'num_user_post': u' 457', 'author': u'lee'}, {'date': u'January 18, 2016 - 2:55 pm', 'content': u"I've just tried to send the followingGET /update?key=[apikey]&field1=200&headers=false HTTP/1.1Host: api.thingspeak.comConnection: closeAccept: */*and   got the folowing back: wrong syntaxERRORSEND OK+IPD,4,323:HTTP/1.1 400 Bad RequestServer: nginx/1.7.5Date: Mon, 18 Jan 2016 19:50:43 GMTContent-Type: text/htmlContent-Length: 172Connection: closeI'm using an Arduino +ESP8266 set up and can't seem to get my channel update to work.I've also triedGET http://api.thingspeak.com/update?key=%5Bkey%5D&field1=800/r/n/r/nWhich seem to be recognised by my channel as data, as the last update read 'less than a minute ago'. However, the point isn't plotted or not visible on my chart. when i paste thehttp://api.thingspeak.com/update?key=[key]&field1=800/r/n/r/n into my browser it updates the field fine.. Is the ESP not sending the GET command in the right format? Would really appreciate some help ", 'num_user_post': u' 2', 'author': u'yukimach'}, {'date': u'January 18, 2016 - 3:17 pm', 'content': u"yukimach said wrong syntaxERRORSEND OK'wrong syntax' comes from the ESP8266. Inspect carrefully your code. If you have a spare USB to TTL serial use a terminal to spy on what you actually send to the ESP, that helps a lot.", 'num_user_post': u' 13', 'author': u'Michel_J'}, {'date': u'July 4, 2016 - 9:11 am', 'content': u"i get 400 error while im trying to receive data with second device. To make sure it's not problem with my code i used Termite terminal and simply send AT commands to ESP. CR and LF signs are enabled.", 'num_user_post': u' 3', 'author': u'jenifferhomes'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/data-do-not-show-in-thingspeak/', 'posts': [{'date': u'June 23, 2016 - 7:58 am', 'content': u"Hi AllI in my earliest stages of trying to post data to my Thingspeak channel via an ESP8266. I have managed to successfully send data via my browser, but via my ESP does not seem to work. I have my ESP connected via a FTDI converter and am using Terminal V1.93b as a serial terminal program. The data I attempt to send seems to be successfully sent according to the Terminal program. However, when I check my thingspeak channel, there are no updates. I've been at this for 3 days and I've tried all sorts of permutations, incl the number of /r/n's at the end of the GET line. Now I am at a total loss. Can someone please help?Log of terminal connection:Terminal log fileDate: 23/06/2016 - 9:26:09 PM-----------------------------------------------AT+CIPSTART=1,'TCP','api.thingspeak.com',80OKLinkedAT+CIPSEND=1,52> GET /update?api_key=27YZ7P1D60A7X1CH&field2=41busy s...SEND OKOKUnlink-----------------------------------------------Date: 23/06/2016 - 9:27:26 PMEnd log file", 'num_user_post': u' 13', 'author': u'rberkelm'}, {'date': u'June 23, 2016 - 6:36 pm', 'content': u"Hi\xa0rberkelm,Please read this post, my aswer is part 2.http://community.thingspeak.com/forum/thingspeak-projects/esp8266-and-thingspeakI use windows and termite (http://www.compuphase.com/software_termite.htm) but ANY RS232 terminal will do.Please check AT+GMR because different AT versions have 'different syntax'. (In my case I must test in my Arduino program for the answer\xa0'ERROR' because with other version the test must be done against 'Error' and the program\xa0fails. UPPERCASE ... lowercase)ESP8266 -> Thingspeak works!Hope this helps ... questions?\xa0Regards", 'num_user_post': u' 91', 'author': u'piajola'}, {'date': u'June 24, 2016 - 7:53 am', 'content': u"Yeehah!! It worked - I am stoked! Piajol, you have made my day, thank you!So, for the record, at the time of my original post I was running the default version of the AT firmware (008000901) with its 115200 baud rate. Later in the night I reflashed to AT firmware 008000902 (AI Thinker) with a baud rate of 9600 hoping I would do better. Unfortunately it made it even worse as I now could not even link to the ThingSpeak site with my syntax above.However thanks to you I was successful with the following syntax and settings:AT+GMR \xa0 \xa0 \xa0'008000902.AT+CWMODE=3 \xa0'ESP is both a station and a serverAT+CIPMODE=0AT+CIPMUX=0 \xa0 'Single channelAT+CIPSTART='TCP','api.thingspeak.com',80AT+CIPSEND=62GET /update?api_key=27YZ7P1D60A7X1CH&field1=33.5&field2=65.5To all first-timers like me, the ESP is incredibly sensitive to syntax variation between Firmware variations, so beware! Thanks again for setting me straight!Ray", 'num_user_post': u' 13', 'author': u'rberkelm'}, {'date': u'June 24, 2016 - 2:47 pm', 'content': u'Hi Ray,Glad you are in the game \U0001f600Any further help ... askRegardsH.S.', 'num_user_post': u' 91', 'author': u'piajola'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/data-not-show-on-thingspeak/', 'posts': [{'date': u'June 18, 2016 - 4:57 am', 'content': u"Dear ALLI am sending temperature data to thingspeak but it did't show in my channel. Below is my code. Please give me the suggestion.t=require('ds18b20_1')pin = 1t.setup(pin)addrs = t.addrs()if (addrs ~= nil) then\xa0 print('Total DS18B20 sensors: '..table.getn(addrs))\xa0\xa0 end-------------------------------------------------------------------------------wifi.setmode(wifi.STATIONAP)wifi.sta.config('INNEXIV', 'innexiv$1')tmr.alarm(0,5000,1, function()\xa0\xa0\xa0 -- 5sec for get the ip address for router\xa0\xa0 add = wifi.sta.getip()\xa0\xa0 if(add == nil) then\xa0\xa0\xa0\xa0\xa0 print('Connecting to AP...')\xa0\xa0 else\xa0\xa0\xa0\xa0\xa0 ip, nm, gw=wifi.sta.getip()\xa0\xa0\xa0\xa0\xa0 print('IP Info:IP Address: ',ip)\xa0\xa0\xa0\xa0\xa0 print('Netmask: ',nm)\xa0\xa0\xa0\xa0\xa0 print('Gateway Addr: ',gw,'')\xa0\xa0\xa0\xa0\xa0 tmr.stop(0)\xa0\xa0 endend)-------------------------------------------------function sendData()\xa0 value=ds18b20_1.read()-- print('temp',value)print('Sending data to thingspeak.com')conn=net.createConnection(net.TCP,false)conn:on('receive', function(conn, payload) print(payload) end)-- api.thingspeak.com 184.106.153.149conn:connect(80,'184.106.153.149')conn:send('GET /update?key=XDKWXU7SQ39WXXPY&field1='..value..' HTTP/1.1')conn:send('Host: api.thingspeak.com')conn:send('Accept: */*')conn:send('User-Agent: Mozilla/4.0 (compatible; esp8266 Lua; Windows NT 5.1)')conn:send('')conn:on('sent',function(conn)\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 print('Closing connection')\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 conn:close()\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 end)conn:on('disconnection', function(conn)\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 print('Got disconnection...')\xa0 end)end-- send data every X ms to thing speaktmr.alarm(2, 60000, 1, function() sendData() end )--------------------------------------------------------", 'num_user_post': u' 1', 'author': u'fahimhaider'}, {'date': u'June 20, 2016 - 9:21 am', 'content': u'The charts only show numeric data such as 77.9 or 80 - you can use the IoT Debugger tool to see what the data looks like. Sometimes this helps you troubleshoot formatting issues. https://github.com/nothans/iot-debugger', 'num_user_post': u' 402', 'author': u'Hans'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/thinspeak-unreachable/', 'posts': [{'date': u'June 4, 2016 - 8:03 am', 'content': u"Hello,I use an Arduino Uno linked to a LM35 temperature sensor, to ESP8266 01 and to my laptop, and I intend to send the data collected by the sensor to the ThingSpeak platform, and to do that I use the following code.---------------------------------------------------------------------------------------------------------------------------------------------------------int ledPin = 13;// LM35 analog inputint lm35Pin = 0;// replace with your channel's thingspeak API keyString apiKey = 'T2RJXWQAVXG4ZV39';// connect 10 to TX of Serial USB// connect 11 to RX of serial USBSoftwareSerial ser(10, 11); // RX, TX// this runs oncevoid setup() {                  // initialize the digital pin as an output.  pinMode(ledPin, OUTPUT);      // enable debug serial  Serial.begin(9600);   // enable software serial  ser.begin(9600);    // reset ESP8266  ser.println('AT+RST');}// the loop void loop() {    // blink LED on board  digitalWrite(ledPin, HIGH);     delay(200);                 digitalWrite(ledPin, LOW);  // read the value from LM35.  // read 10 values for averaging.  int val = 0;  for(int i = 0; i < 10; i++) {      val += analogRead(lm35Pin);         delay(500);  }  // convert to temp:  // temp value is in 0-1023 range  // LM35 outputs 10mV/degree C. ie, 1 Volt => 100 degrees C  // So Temp = (avg_val/1023)*5 Volts * 100 degrees/Volt  float temp = val*50.0f/1023.0f;  // convert to string  char buf[16];  String strTemp = dtostrf(temp, 4, 1, buf);    Serial.println(strTemp);    // TCP connection  String cmd = 'AT+CIPSTART='TCP','';  cmd += '184.106.153.149'; // api.thingspeak.com  cmd += '',80';  ser.println(cmd);     if(ser.find('Error')){    Serial.println('AT+CIPSTART error');    return;  }    // prepare GET string  String getStr = 'GET /update?api_key=';  getStr += apiKey;  getStr +='&field1=';  getStr += String(strTemp);  getStr += '';  // send data length  cmd = 'AT+CIPSEND=';  cmd += String(getStr.length());  ser.println(cmd);  if(ser.find('>')){    ser.print(getStr);  }  else{    ser.println('AT+CIPCLOSE');    // alert user    Serial.println('AT+CIPCLOSE');  }      // thingspeak needs 15 sec delay between updates  delay(16000);  }----------------------------------------------------------------------------------------------------------------------------------------------------------When I upload the code the ESP8266 connects to my WiFi network and I get an IP address, I can PING it .. in brief, no connection problems.But the upload of my data to ThingSpeak does not work, I can not visualize anything in the platform and the serial monitor shows the temperature value and 'AT + CIPCLOSE' (which means, I think, that after 'AT + = CIPSEND data_length' I do not get a '>')If you can see my error(s) and how to correct it: DThank you.", 'num_user_post': u' 3', 'author': u'aissam'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/arduinoesp8266thingspeak/', 'posts': [{'date': u'June 3, 2016 - 11:12 am', 'content': u"Hello,I have problem to send data taken from temperature sensor on arduino using wifi shield 'ESP8266'. Neeeeed helpHere is the code:#include <SoftwareSerial.h>//#include <stdlib.h> // LEDint ledPin = 13;// LM35 analog inputint lm35Pin = 0;// replace with your channel's thingspeak API keyString apiKey = 'QWXWVLWCV42QPFFT';// connect 10 to TX of Serial USB// connect 11 to RX of serial USBSoftwareSerial ser(10, 11); // RX, TX// this runs oncevoid setup() {\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 \xa0\xa0 // initialize the digital pin as an output.\xa0 pinMode(ledPin, OUTPUT);\xa0\xa0 \xa0\xa0 // enable debug serial\xa0 Serial.begin(9600);\xa0 // enable software serial\xa0 ser.begin(9600);\xa0\xa0 // reset ESP8266\xa0 ser.println('AT+RST');}// the loopvoid loop() {\xa0\xa0 // blink LED on board\xa0 digitalWrite(ledPin, HIGH);\xa0 \xa0\xa0 delay(200);\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 \xa0\xa0 digitalWrite(ledPin, LOW);\xa0 // read the value from LM35.\xa0 // read 10 values for averaging.\xa0 int val = 0;\xa0 for(int i = 0; i < 10; i++) {\xa0\xa0\xa0\xa0\xa0 val += analogRead(lm35Pin);\xa0 \xa0\xa0\xa0\xa0\xa0\xa0 delay(500);\xa0 }\xa0 // convert to temp:\xa0 // temp value is in 0-1023 range\xa0 // LM35 outputs 10mV/degree C. ie, 1 Volt => 100 degrees C\xa0 // So Temp = (avg_val/1023)*5 Volts * 100 degrees/Volt\xa0 float temp = val*50.0f/1023.0f;\xa0 // convert to string\xa0 char buf[16];\xa0 String strTemp = dtostrf(temp, 4, 1, buf);\xa0\xa0 Serial.println(strTemp);\xa0\xa0 // TCP connection\xa0 String cm = 'AT+CIPMUX=1';\xa0 ser.println(cm);\xa0\xa0 String cmd = 'AT+CIPSTART=,'TCP','';\xa0 cmd += '52.7.53.111'; // api.thingspeak.com\xa0 cmd += '',80';\xa0 ser.println(cmd);\xa0 \xa0\xa0 if(ser.find('Error')){\xa0\xa0\xa0 Serial.println('AT+CIPSTART error');\xa0\xa0\xa0 return;\xa0 }\xa0\xa0 // prepare GET string\xa0 String getStr = 'GET /update?api_key=';\xa0 getStr += apiKey;\xa0 getStr +='&field1=';\xa0 getStr += String(strTemp);\xa0 getStr += '';\xa0 // send data length\xa0 cmd = 'AT+CIPSEND=';\xa0 cmd += String(getStr.length());\xa0 ser.println(cmd);\xa0 if(ser.find('>')){\xa0\xa0\xa0\xa0 // I thing problems begin here ! am i right ??????????????,\xa0\xa0\xa0 ser.print(getStr);\xa0 }\xa0 else{\xa0\xa0\xa0 ser.println('AT+CIPCLOSE');\xa0\xa0\xa0 // alert user\xa0\xa0\xa0 Serial.println('AT+CIPCLOSE');\xa0 }\xa0\xa0 \xa0\xa0 // thingspeak needs 15 sec delay between updates\xa0 delay(16000); \xa0}AND I get on the monitor serie something like this :AT+CIPCLOSE27.5AT+CIPCLOSE28.0AT+CIPCLOSE27.4AT+CIPCLOSE27.4AT+CIPCLOSE27.4AT+CIPCLOSE27.4AT+CIPCLOSESo i thing the shield is connected but data not sent. Help me to solve pleeeeeaaaaaaaaaase", 'num_user_post': u' 1', 'author': u'Nasser05'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/gaps-in-data-recording/', 'posts': [{'date': u'May 6, 2016 - 1:11 pm', 'content': u"Hello everyone!\xa0I have a nasty problem and I have searched whole Internet but I haven't found any result \U0001f641 Please look at my results: I get gaps, spmetimes they last for\xa0 hours. I use NodeMcu (ESP8266) programmed in Arduino. I have tried using DS18B20 or simple code i=i+1. I I wait one minute before posting another data. I get server response '0' anyway. After some time it starts working again. Could you help me please? What may be the reason for it?", 'num_user_post': u' 2', 'author': u'Frog_Qmak'}, {'date': u'May 7, 2016 - 7:07 am', 'content': u"Probably solved. I was using two ESP's sending data to the same channel. From time to time they synchronized - and TS needs 15 sec interval between consecutive updates, so servers were rejecting the latter.", 'num_user_post': u' 2', 'author': u'Frog_Qmak'}, {'date': u'May 7, 2016 - 8:07 am', 'content': u'Happy that you got to the bottom of it!\xa0', 'num_user_post': u' 402', 'author': u'Hans'}, {'date': u'June 1, 2016 - 7:43 am', 'content': u'I agree on the cause, as I have the same issue. How did you fix the sync problem?', 'num_user_post': u' 1', 'author': u'DavidB'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/thingspeak-library-failure-with-returned-error-codes-with-cryptic-meanings/', 'posts': [{'date': u'May 22, 2016 - 5:40 pm', 'content': u"I'm new here and trying to post to a new channel via the Arduino IDE and a\xa0NodeMcu 0.9 ESP8266 board. I can post direct from a browser and see the results OK BUT when I run some code via the\xa0#include <ThingSpeak.h>library e.g. the lines below...\xa0ThingSpeak.setField(1, float(20.2)); ThingSpeak.setField(2, float(23.4)); int ExitCode = ThingSpeak.writeFields(MyTSChannelNumber, MyTSWriteAPIKey); if (ExitCode == 200) { Serial.print (' 200=Success! '); } else { Serial.print (' \U0001f641 Thingspeak Error Code = '); Serial.print(ExitCode); }I get a -302 error code! \xa0and of course no data is written. Otherwise I am quite close to getting something done.This is a '#define ERR_UNEXPECTED_FAIL \xa0 \xa0 -302 \xa0 \xa0// Unexpected failure during write to ThingSpeak'Can anyone help with demystifying the library exit code or see a problem in what I have done? How can I test things better. I get a -301 when I sever the connection which is what I would expect.Paul", 'num_user_post': u' 1', 'author': u'PlStrss'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/sample-code-to-retrive-last-value-from-thinkspeak-using-esp8266/', 'posts': [{'date': u'April 20, 2016 - 3:20 am', 'content': u"Hi,I am new with Arduino & esp8266 and using the below code to upload data to ThinkSpeak. Everything works fine, but now I want to retrieve some data back from ThinkSpeak. Can some one help in developing the code for retrieval?// Using XXXXX here as my channel is privateGET https://api.thingspeak.com/channels/XXXXXX/fields/1.json?results=2 From what I am checking, I have to use the above GET string to get the fields data. But I don't know how to create the request string.Help would be appreciated. Thanks// Uploading data to Thinkspeak<br />uploadData() {String apiKey = 'ESDS8678890SDDS';String myData = '45.5'; // example of data to sendif (espClient.connect(server,80)) { String postStr = apiKey; postStr +='&amp;field1=';postStr += String(myData);postStr += '';espClient.print('POST /update HTTP/1.1');espClient.print('Host: api.thingspeak.com');espClient.print('Connection: close');espClient.print('X-THINGSPEAKAPIKEY: '+apiKey+'');espClient.print('Content-Type: application/x-www-form-urlencoded');espClient.print('Content-Length: ');espClient.print(postStr.length());espClient.print('');espClient.print(postStr);Serial.print(postStr);Serial.print('My Data: ');Serial.print(myData);Serial.print('');}espClient.stop();}<br /><br />\xa0", 'num_user_post': u' 1', 'author': u'theindianapple'}, {'date': u'May 8, 2016 - 12:52 pm', 'content': u"If you just want to retrieve the last value for a channel you could use the official thingspeak/arduino library. That works fine. But if you also would like the date/time for the last value I don't think you could use that library. I'm having the same problem, I would like to get the timestamp for the last value as well.", 'num_user_post': u' 10', 'author': u'mdahlb'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/thingspeak-and-wemos-d1-mini/', 'posts': [{'date': u'May 1, 2016 - 12:01 pm', 'content': u"I have been trying to use the Arduino IDE examples posted on GitHub, with Wemos D1 Mini.\xa0 I am using the ReadPrivateChannel example.\xa0 The code compiles and I get no error messages.\xa0 However, the data returned is always either '0.00' or null.\xa0 I am posting data to thingspeak using other code, I am not able to get the WriteVoltage Example to work either.\xa0Does anyone know why this does not work with Wemos D1 mini? Is there a work around?Thanks.\xa0Tim", 'num_user_post': u' 1', 'author': u'tgibbs99'}, {'date': u'May 8, 2016 - 12:37 pm', 'content': u"Hello TimI have managed to read the last value (a temperature) from my private thingspeak channel with a Wemos D1 mini.. just replace the XXXXX in the code below with your personal settings:\xa0#include 'ThingSpeak.h'#include <SPI.h>#include <ESP8266WiFi.h> char ssid[] = 'XXXXXXX'; // your network SSID (name) char pass[] = 'XXXXXX'; // your network passwordWiFiClient client;unsigned long myChannelNumber = XXXXXXX; \xa0// your channel numberconst char * myReadAPIKey = 'XXXXXX'; \xa0// your read api keyvoid setup() { Serial.begin(115200); WiFi.begin(ssid, pass); ThingSpeak.begin(client);}void loop() { float temperature = ThingSpeak.readFloatField(myChannelNumber, 1, myReadAPIKey); \xa0// reads a float, in this case a temperature Serial.print('Last temperature: '); Serial.print(temperature); Serial.println(' *C'); delay(15000); }", 'num_user_post': u' 10', 'author': u'mdahlb'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/inconsistent-data-upload-to-thingspeak-via-arduino-using-esp8266/', 'posts': [{'date': u'April 17, 2016 - 5:50 am', 'content': u'I have been successfully sent data using esp8266, thingspeak and arduino.\xa0I ran the code again after a couple of days and thingspeak no longer updates my data onto field1.\xa0 I use my android phone and tether a hotspot connection to esp8266. I can see that the esp8266 is connected to the internet properly. I always get ping response from my command prompt window.\xa0I am able to connect to the thingspeak static ip. Send using AT+CIPSEND=48, for a (abc.x) floating value.\xa0But still i am not getting response on my thingspeak channel...Please help me find a solution, kind of a permanent fix. Thank you in advance.Regards, K. Raghavendran\xa0', 'num_user_post': u' 2', 'author': u'sinet666'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/esp8266-missed-events-on-thingspeak/', 'posts': [{'date': u'April 12, 2016 - 1:14 pm', 'content': u'I am trying to display value on thingspeak\xa0 and per image below we can see that number of entries are :22 and points plotted are just 3.And every time to see the data plot i need to refresh the page to get updated plot.I dont think so code has anything to do with this but, how can solve this?http://cdn.instructables.com/F2M/BA50/IMRYGF7H/F2MBA50IMRYGF7H.LARGE.jpg', 'num_user_post': u' 4', 'author': u'disha'}, {'date': u'April 13, 2016 - 10:44 am', 'content': u'If you click the edit icon (pencil), you will see the chart options. If you are only showing the last day of day you might only see the last few points. If you are showing, results = 60 then you should see all of the most recent results. Also, set dynamic to true to get the charts to update themselves.', 'num_user_post': u' 402', 'author': u'Hans'}, {'date': u'April 17, 2016 - 3:39 am', 'content': u'Hans said If you click the edit icon (pencil), you will see the chart options. If you are only showing the last day of day you might only see the last few points. If you are showing, results = 60 then you should see all of the most recent results. Also, set dynamic to true to get the charts to update themselves.Ya i did that and you can see two pics below the field chart settings changed and then another of: plot image where 45 entries and you can see only one point on the plothttps://drive.google.com/open?id=0B9S6uuNt7m4OMHV3aTJFMVRfdDQhttps://drive.google.com/open?id=0B9S6uuNt7m4OOUVHRERrMjVHTUU', 'num_user_post': u' 4', 'author': u'disha'}, {'date': u'April 17, 2016 - 4:12 am', 'content': u"My code:#include <SoftwareSerial.h>#include <stdlib.h>SoftwareSerial ser(2,3); // RX, TXint ledpin=13;int sense=A0;float volt=0.0;String apiKey='PT41QR66HL1NH8LU';// this runs oncevoid setup() {\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 \xa0\xa0 // initialize the digital pin as an output.\xa0 pinMode(ledpin, OUTPUT);\xa0\xa0 \xa0\xa0 // enable debug serial\xa0 Serial.begin(9600);\xa0 // enable software serial\xa0 ser.begin(9600);\xa0\xa0 // reset ESP8266ser.println('AT+RST');}void loop(){\xa0\xa0 digitalWrite(ledpin, HIGH);\xa0 \xa0\xa0 delay(500);\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 \xa0\xa0 digitalWrite(ledpin, LOW);\xa0\xa0\xa0 delay(500); \xa0\xa0\xa0\xa0 volt=analogRead(sense)*(5.0f/1023.0f);\xa0 char buf[16];\xa0 String strvolt1 = dtostrf(volt, 4, 1, buf);\xa0\xa0 Serial.println(strvolt1);\xa0 \xa0\xa0\xa0\xa0 String cmd = 'AT+CIPSTART='TCP','';\xa0 cmd += '184.106.153.149'; // api.thingspeak.com\xa0 cmd += '',80';\xa0 ser.println(cmd);\xa0 \xa0\xa0 if(ser.find('Error')){\xa0\xa0\xa0 Serial.println('AT+CIPSTART error');\xa0\xa0\xa0 return;\xa0 }\xa0 String getStr = 'GET /update?api_key=';\xa0 getStr += apiKey;\xa0 getStr +='&field1=';\xa0 getStr += String(strvolt1);\xa0 getStr += '';\xa0 cmd = 'AT+CIPSEND=';\xa0 cmd += String(getStr.length());\xa0 ser.println(cmd);\xa0 if(ser.find('>')){\xa0\xa0\xa0 ser.print(getStr);\xa0 }\xa0 else{\xa0\xa0\xa0 ser.println('AT+CIPCLOSE');\xa0\xa0\xa0 // alert user\xa0\xa0\xa0 Serial.println('AT+CIPCLOSE');\xa0 }\xa0\xa0\xa0 delay(16000); \xa0}", 'num_user_post': u' 4', 'author': u'disha'}]}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/page-8/', 'threads': [{'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/talk-back-response-problem/', 'posts': [{'date': u'March 17, 2016 - 3:49 am', 'content': u"hello everyone,I am trying to get a TalkBack Command using Arduino IDE but i am not getting any response on Serial Monitor .. I have tested the following GET request with the Poster. it works perfectly. https://api.thingspeak.com/talkbacks/7441/commands/1145081?api_key=WSMCMVFUJBI6Z115[code]#include const char* ssid     = 'Wing';const char* password = 'wnRn56';String apiKey = 'WSMCMVFUJBI6Z115';const char* host = 'api.thingspeak.com';// Use WiFiClient class to create TCP connectionsWiFiClient client;int t = 200;int h = 400; void setup() {  Serial.begin(115200);  delay(100);  // We start by connecting to a WiFi network  Serial.println();  Serial.println();  Serial.print('Connecting to ');  Serial.println(ssid);  WiFi.begin(ssid, password);  while (WiFi.status() != WL_CONNECTED) {    delay(500);    Serial.print('.');  }  Serial.println('');  Serial.println('WiFi connected');  Serial.println('IP address: ');  Serial.println(WiFi.localIP());}void loop() {  Serial.print('connecting to ');  Serial.println(host);if (client.connect(host,80)) { // '184.106.153.149' or api.thingspeak.comString postStr = 'GET /talkbacks/7441/commands/1145000?api_key=WSMCMVFUJBI6Z115 HTTP/1.1';//client.print('POST /update HTTP/1.1');client.print(postStr);client.print('Host: api.thingspeak.com');client.print('Connection: close');//client.print('X-THINGSPEAKAPIKEY: '+apiKey+'');//client.print('Content-Type: application/x-www-form-urlencoded');//client.print('Content-Length: ');//client.print(postStr.length());client.print('');}client.stop();  // Read all the lines of the reply from server and print them to Serial  while(client.available()){    //String line = client.readStringUntil('');    //Serial.print(line);    char c = client.read();    Serial.print(c);  }  Serial.println();  Serial.println('closing connection');   delay(15000);}[/code]i think something is wrong with my GET requestWhat is the correct way to send Talkback GET  request ?", 'num_user_post': u' 1', 'author': u'parasbhanot'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/table-creation-from-esp8266/', 'posts': [{'date': u'March 4, 2016 - 11:05 am', 'content': u"I want to create a table in thingspeak  and update it from the values i'm getting from esp8266.How can i do that?", 'num_user_post': u' 1', 'author': u'Harikishore'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/suddenly-no-entries-from-esp8266-to-thingspeak/', 'posts': [{'date': u'February 8, 2016 - 2:46 pm', 'content': u"I'm a real real real newly.And today I managed to get some data from the esp8266 to thingspeak. I followed the following tutorial http://www.arduinesp.com/thingspeakWith this code:http://www.arduinesp.com/arduinesp/wp-content/uploads/2015/04/ThingspeakESP8266.txtI changed my ssid and password and the API i received after signing to thingspeak and made a channel with 2 fields. I also changed DHT11 to DHT22 and changed the pin to '0'This morning i got some entry's but that stopped a couple of hours ago and I don't know why.I can ping to my esp8266 and when I use the following code with my browser it will show up in thingspeak.https://api.thingspeak.com/update?api_key=MY_API_CODE&field1=7I also changed API several times with no luck \U0001f641 Serial monitor does output correctly likeTemperature: 21.20 degrees Celcius Humidity: 46.00% send to ThingspeakWaiting...Temperature: 21.30 degrees Celcius Humidity: 46.10% send to ThingspeakWaiting...Temperature: 21.30 degrees Celcius Humidity: 46.10% send to ThingspeakWaiting...Temperature: 21.30 degrees Celcius Humidity: 46.10% send to ThingspeakWaiting...Temperature: 21.30 degrees Celcius Humidity: 46.10% send to ThingspeakWaiting...I don't know why my esp8266 data is not visible anymore on TS.com", 'num_user_post': u' 3', 'author': u'lxx33'}, {'date': u'February 8, 2016 - 3:34 pm', 'content': u'Hi, same problem here.I posted a reply :http://community.thingspeak.com/forum/thingspeak-api/thindspeak-api-not-updating-to-my-channel/#p2653not using wifi but the same behavior... if i type in the browser it works.', 'num_user_post': u' 8', 'author': u'oskimark1'}, {'date': u'February 8, 2016 - 7:28 pm', 'content': u"Please try again and let us know if anything else doesn't look right. What was odd is that everything worked in the browser.", 'num_user_post': u' 402', 'author': u'Hans'}, {'date': u'February 9, 2016 - 4:48 am', 'content': u'I will try later this day. Tnx Hans', 'num_user_post': u' 3', 'author': u'lxx33'}, {'date': u'February 9, 2016 - 8:55 am', 'content': u"Somehow it now starts working again.Don't know why but, am happy it does hahaha", 'num_user_post': u' 3', 'author': u'lxx33'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/expected-responses-from-esp8266-after-posting-data-to-channel/', 'posts': [{'date': u'April 7, 2015 - 7:57 am', 'content': u"I am having success posting data to multiple fields of the one channel in thinkspeak.I have an issue that after several 'posts' to a channel, thinkspeak doesn't send back a 'disconnect' represented by the ESP8266 as an 'Unlink'. When it 'works', after post of data, the ESP8266 sends the text 'Unlink'.  I'm assuming (Lack of good ESP8266 Documentation) that this signifies the host, in this case thinkspeak, has send a disconnect after receiving the channel data. The problem I experience is that I sometimes don't receive this 'Unlink' from ESP8266 after successfully updating a channel. I don't know if it's the ESP8266 not sending the 'Unlink' or it's thinkspeak not requesting a disconnect.Here is a Serial terminal listing of two successful postings, with 'Unlink' and the third one with no 'Unlink'- AT+CIPSTART=0,'TCP','api.thingspeak.com',80OKLinkedAT+CIPSEND=0,58> GET /update?key=xxxxxBIBAMJMCU7E&field1=23.5&field2=64.5SEND OK+IPD,0,1:3OKOKUnlink(one minute later- )AT+CIPSTART=0,'TCP','api.thingspeak.com',80OKLinkedAT+CIPSEND=0,58> GET /update?key=xxxxxBIBAMJMCU7E&field1=23.5&field2=64.8SEND OK+IPD,0,1:4OKOKUnlink(one minute later- )AT+CIPSTART=0,'TCP','api.thingspeak.com',80OKLinkedAT+CIPSEND=0,58> GET /update?key=xxxxxBIBAMJMCU7E&field1=23.6&field2=64.9SEND OK+IPD,0,1:5OKAfter this last +IPD and subsequent 'OK', I never receive the unsolicited 'Unlink' that I'm relying on. Either thinkspeak is not sending a disconnect to the ESP8266, or the ESP8266 is receiving it and not passing it on by way of a 'Unlink' text. Does this mean anything to anyone?.   I am using my own custom PIC 24 board with MPLABX  C.  I'm not using Arduino.", 'num_user_post': u' 1', 'author': u'tom_croft402'}, {'date': u'April 16, 2015 - 9:32 am', 'content': u'i am very new to thingspeak. please tell me how to communicate between esp8266 and thingspeak?Well I got my esp8266 sensor output correctly.And I have log in on thinkspeak. i have created channel but what is next.', 'num_user_post': u' 1', 'author': u'ashwinispatil'}, {'date': u'May 2, 2015 - 2:44 am', 'content': u'Thank you Tom for the details, i was stuck down a hole until i read your post here ', 'num_user_post': u' 11', 'author': u'rayellam'}, {'date': u'June 14, 2015 - 5:07 pm', 'content': u"Tom since I am having no luck in updating my ThingSpeak channel, even using your example in post one. Could you please post your AT sequence for the setup of the esp8266?Since I am not able to update with your string and the string works with your module then it must be the wrong setup in my module. ( my firmware is 0018000902), I always receive '+IPD,0,1:0'  no metter how many times I send the string.I am driving the esp module via a pic18F2620 @ 32 MHz.Thank you in advance for caring.CheersAlberto", 'num_user_post': u' 7', 'author': u'R_Alberto'}, {'date': u'January 18, 2016 - 2:35 pm', 'content': u"Has Anyone managed to make this work recently? I think its not running so well now. Whenever I request the GET request it returns with:ERRORSEND OK+IPD,4,5:32153OKOKUnlinkI've tried all different formats GET http://api.thingspeak.com/update?api_key=%5Bapikey%5D&field1=800 GET http://api.thingspeak.com/update?key=%5Bapikey%5D&field1=800 GET http://api.thingspeak.com/update?key=%5Bapikey%5D&field1=800 GET http://api.thingspeak.com/update?key=%5Bapikey%5D&field1=800GET =/update?key=[apikey]&field1=800GET =/update?key=[apikey]&field1=800The thingspeak chart manages to update a point when I put the link into a browser http://api.thingspeak.com/update?key=%5Bapikey%5D&field1=800When I use the arduino + ESP, thingpeak recognises an input as I can see that the last Updated value become 'less than a minute ago' however the plot isn't added to the field 1 chart. :s", 'num_user_post': u' 2', 'author': u'yukimach'}, {'date': u'January 27, 2016 - 5:39 am', 'content': u"@TomWhy are you relying on 'Unlink' string? Is that any special to you or you perform any action based on it?@yukimachI am able to update my channel and every graph, but my code is quite big, I am not sure how will it help you..", 'num_user_post': u' 2', 'author': u'Syed Rafay'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/thinghttp-keep-changing-get-response/', 'posts': [{'date': u'January 8, 2016 - 10:51 pm', 'content': u"I've been running a test with a very precise code which counts the lines returned by ThingHTTP GET so I was able to detect strange changes over time -- in the past month they have changed TWICE the format of responses to GET requests.Specifically the headers, it just changed again this week from total of 15 lines to 14 lines? I don't know what additional line was being sent in mid-December since I didn't save a sample response but I know they decreased the number of headers by 1 line this week.Anyone else seeing this?", 'num_user_post': u' 8', 'author': u'bubba198'}, {'date': u'January 11, 2016 - 12:04 pm', 'content': u"Hi,We're working to track down what's going on.  We haven't changed ThingSpeak itself, but clearly something has changed.  By chance, have you captured the GET responses from before the change?  It would be interesting to see what they used to look like, and what they look like now.As an aside, I released a new version of the Arduino Library that handles the change in the response format, and should be resilient to future changes.  See the post here:http://community.thingspeak.com/forum/arduino/thingspeak-communication-library-for-arduino/", 'num_user_post': u' 47', 'author': u'Rob Purser'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/how-to-send-data-from-thingspeak-to-esp8266-arduino-using-thinghttp/', 'posts': [{'date': u'January 4, 2016 - 6:37 am', 'content': u"Hi. I have made Arduino Kit acting as weather station. It sends data of the sensors connected (DHT11 & LDR) to the ThingSpeak web-server.Now I want to perform some actions according to data on ThingSpeak Server ( like if temperature exceeds turn on fan e.t.c).I've searched and I found that there's a React App on thingspeak which will trigger event if data exceeds some values,The problem where I got stuck is that I want to send signal from thingspeak webserver to my ESP8266 (arduino) kit to turn on/off the device connected to relay on arduino.I've figured out that there's also a ThingHTTP feature which sends HTTP requestBut don't know how to send request/signal to my kit to perform some actions.I've already spent my 2 months building this project, and now just stuck in the last part . Please give your valuable suggestions and solutions.", 'num_user_post': u' 2', 'author': u'Syed Rafay'}, {'date': u'January 7, 2016 - 1:05 pm', 'content': u"If your kit is behind a NAT then you'll need to know the IP address on the public side and have your GW/NAT forward to your device from the outside.I think ... I'm new to this particular tech but that is how I solved it before.", 'num_user_post': u' 2', 'author': u'lballaty'}, {'date': u'January 7, 2016 - 11:33 pm', 'content': u"Alternatively you can consider the Talkback app- this allows you to send a text string in response to a POST command from the ESP8266.  This will require the ESP8266 to poll thingSpeak rather than listen for an incoming request.  Whether this is more convenient than the suggestion by Iballaty depends on your application.If your esp8266 is doing updates anyway you can combine an update with a talkback response.  https://au.mathworks.com/help/thingspeak/talkback-app.html#update_and_executeYou may need to write a matlab analysis app to interface your React with your Talkback.   Matlab's 'webwrite' command is useful as I dont think there is a thingspeak wrapper function for talkback like there is for channel read and update.", 'num_user_post': u' 271', 'author': u'rw950431'}, {'date': u'January 8, 2016 - 11:01 pm', 'content': u"What you are asking for is a game changer. You would need mqtt https://learn.adafruit.com/adafruit-io/arduinoIt's a totally different game; although library does exist the entire back-end is a different concept from ThingSpeak. Again this mqtt business is the only way to send data to IoT devices without being able to reach them via IP (behind NAT). For example that will automatically qualify all mobile IoT things since the cell carriers, although assigning public IPs to the customer do block any and all incoming traffic from the 'outside' world and my ESP8266 connected to an AT&T hot spot is basically unreachable from the Internet directly. So with mqtt the thing maintains persistent connection to the mqtt broker and when I send a message via the broker that live connection is how the message gets delivered to the ESP in real time without the thing having to poll some php script all the time for 'new data'", 'num_user_post': u' 8', 'author': u'bubba198'}, {'date': u'January 9, 2016 - 1:54 am', 'content': u'MQTT still requires a internet connection between client and broker- it avoids the NAT issues by having the client (behind NAT) initiate the connection.  Last time I looked at MQTT the code required to maintain the connection, handle drop-outs etc seemed harder than it should be- perhaps things are better now.Whilst its possible to write a Thingspeak to MQTT bridge it would be great if Thingspeak supported this natively..', 'num_user_post': u' 271', 'author': u'rw950431'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/error-on-sending-data-to-esp8266-module/', 'posts': [{'date': u'November 26, 2015 - 12:30 pm', 'content': u"I try to connect the esp8266-01 module to thingspeak using http post. When I start the this code, it shows just one value and then 'AT+CIPCLOSE' Which means that it doesn't find '>'.Please help me if I'm missing something.My code follows, #include SoftwareSerial.h#include stdlib.h//I don't know why I can't use '' above.String apiKey = '9ZLX2FFEMQ79G9CZ';SoftwareSerial ser(0, 1); // RX, TX// this runs oncevoid setup() {  // enable debug serial  Serial.begin(9600);  // enable software serial    ser.begin(9600);  // reset ESP8266  ser.println('AT+RST');}// the loopvoid loop() {  int val;  val = analogRead(A0);  char buf[16];  String strSound = dtostrf(val, 4, 1, buf);  Serial.println(strSound);  // TCP connection  String cmd = 'AT+CIPSTART='TCP','';  cmd += '184.106.153.149'; // api.thingspeak.com  cmd += '',80';  ser.println(cmd);  if(ser.find('Error')){    Serial.println('AT+CIPSTART error');    return;  }  // prepare GET string  String getStr = 'GET /update?key=';  getStr += apiKey;  getStr +='&field6=';  getStr += String(strSound);  getStr += '';   // send data length  cmd = 'AT+CIPSEND=';  cmd += String(getStr.length());  ser.println(cmd);Serial.println(cmd);Serial.println(getStr);  if(ser.find('>')){    ser.print(getStr);  }  else{    ser.println('AT+CIPCLOSE');    // alert user    Serial.println('AT+CIPCLOSE');  }  // thingspeak needs 15 sec delay between updates  delay(16000);}", 'num_user_post': u' 1', 'author': u'nonoise1'}, {'date': u'November 26, 2015 - 4:34 pm', 'content': u"@nonoise1I have not tried your code, but I would do 2 things- - I would write#include ?SoftwareSerial.h?#include ?stdlib.h?note the ? sourronding the name of the files must be in the left side 'less than symbol' and in the right side 'greater than symbol'- - You try to use hard UART (Serial.)  and a software one (Ser.)SoftwareSerial ser(0, 1); // RX, TXBUT you only use pins 1 and 0 for Tx and Rx  ... and you are mixing both UARTs and sending and receiving all serial comunication to BOTH the ESP8266 and I think the Arduino serial monitor.You must use diferent pins for Serial and Ser. Use pins 0 and 1 (fixed for hard UART) and conect that to ESP8266DIFFERENT pins for soft UART (Not 0 nor 1) maybe pins 2 and 3  and connect an USB to serial converter to those pins and put that COM in the arduino serial monitor looking for the BAUD and line ending.I hope this can help you HS", 'num_user_post': u' 91', 'author': u'piajola'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/how-to-read-responses-to-a-get-request/', 'posts': [{'date': u'November 16, 2015 - 12:46 pm', 'content': u"Hi everyone,I'm using native ESP Arduino code (not the AT firmware) and all is well except the API response to GET includes ton of headers, for example this is what I get in response to GET using ThingHTTP app for simple web site scraping:HTTP/1.1 200 OKContent-Type: text/html; charset=utf-8Transfer-Encoding: chunkedConnection: closeStatus: 200 OKX-Frame-Options: ALLOWALLAccess-Control-Allow-Origin: *Access-Control-Allow-Methods: GET, POST, PUT, OPTIONS, DELETE, PATCHAccess-Control-Allow-Headers: origin, content-type, X-Requested-WithAccess-Control-Max-Age: 1800ETag: 'f7635f54b0bd41fb88a1bf6d98af3c5f'Cache-Control: max-age=0, private, must-revalidateX-Request-Id: 32432325324-10aa-42e6-12312141323412312X-Runtime: 0.267168X-Powered-By: Phusion Passenger 4.0.57Date: Mon, 16 Nov 2015 00:59:48 GMTServer: nginx/1.9.3 + PhusionMy value follows all that output so I wonder whether:a) there's a way to suppress the headers using ThingHTTP API somehow?b) good way to parse the API's output stream and get to my value?I'm using the sample ThingHTTP app example for getting data from Google Finance! It works like a charm using curl on Linux but with ESP 8266 code I get much more than I bargained for...Thanks", 'num_user_post': u' 8', 'author': u'bubba198'}, {'date': u'November 16, 2015 - 2:24 pm', 'content': u"Hi,You can suppress HTTP headers by adding 'headers=false' to the request: https://thingspeak.com/docs#headers .lee", 'num_user_post': u' 457', 'author': u'lee'}, {'date': u'November 16, 2015 - 7:21 pm', 'content': u"Thank you, that did work and *REDUCED* the headers but still had ton of unwanted data to get rid of. Ultimately I ended up figuring out which line of the response contains my stuff and only copied that one:int lines_received = 0;  while(client.available()) {    String line = client.readStringUntil('');   if (lines_received == 14) { // this is the 14th line with text coming as a result of the GET request, the lines before 14 are headers etc, after 14 who knows what...    module1640.setDisplayToString(line.substring(1,line.length()));    }    lines_received++;  }", 'num_user_post': u' 8', 'author': u'bubba198'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/inconsistent-acknowledgement-after-the-command-atcipsend/', 'posts': [{'date': u'October 23, 2015 - 11:55 am', 'content': u"I try to connect the esp8266-01 module to thingspeak using http post. When I start the TCP Server and send the data I receive acknowledgement from thingspeak only thrice in 10 times. If I receive the acknowledgement '>' there is no problem and its displayed on my channel. Please help me if I'm missing something.void connect(){softSerial.println('AT+RST');  delay(2000);  softSerial.println('AT+CWMODE=1');  delay(2000);  String cmd='AT+CWJAP='';  cmd+=SSD;  cmd+='','';  cmd+=PAS;  cmd+=''';  softSerial.println(cmd);  delay(3000);}void sendData(){   String cmd = 'AT+CIPSTART='TCP',''; //start TCP server    cmd += DST_IP;    cmd += '',80';    softSerial.println(cmd);    delay(5000);    if(softSerial.available() > 0)      {        String ts= dateTime();        String req = 'field1=' + String(data1) + '&field2=' + String(data2) + '&created_at=' + ts + '+05:30' ;         cmd = 'POST /update HTTP/1.1'; //post the values in http server        cmd += 'Host:'; //destination ip        cmd += DST_IP;        cmd += '';        cmd += 'Connection:close';';        cmd += 'X-THINGSPEAKAPIKEY:write_key';        cmd += 'Content-Type:application/x-www-form-urlencoded';        cmd += 'Content-Length:';        cmd += req.length(); //length of the string sent to http server        cmd += '';        cmd += req;        //softSerial.print('cmd='); softSerial.println(cmd);softSerial.println('cmd end');        softSerial.print('AT+CIPSEND='); //send data        softSerial.println(cmd.length());          if(softSerial.available())        {          if((softSerial.find('>'))) //server acknowledgement          {            //Serial.println('>');            softSerial.println(cmd);}}}", 'num_user_post': u' 1', 'author': u'1rn07ee058'}, {'date': u'October 23, 2015 - 12:09 pm', 'content': u'Hi,ThingSpeak will rate limit your requests and only allow one channel update every 15 seconds: https://thingspeak.com/docs/channels#rate_limits .  If y ou change your delay from 5000 ms to 15000 ms, then you should be able to successfully write data each time.lee', 'num_user_post': u' 457', 'author': u'lee'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/problem-to-sending-getpost-request/', 'posts': [{'date': u'October 15, 2015 - 2:59 pm', 'content': u"(using arduino uno, esp8266, Arduino 1.6.5 sketch)I am trying to send GET request through AT command, here are my commands bellow;AT+CWJAP='*******','*******'AT+CIPSTART='TCP','shotlu.usrs0.com',80AT+CIPSEND=73 (length of the url)>GET /receiver.php?apples=56&oranges=23 HTTP/1.1Host: shotlu.usrs0.com*******************************/******************************But after sending the url it's giving me this message;GET /receiver.php?apples=56&oranges=23 HTTP/1.1Host: shotlu.usrs0.combusy s...SEND OK+IPD,168:400 Bad Request400 Bad RequesthostingOKCLOSEDOKany guess why this happened? ", 'num_user_post': u' 2', 'author': u'asadujjaman'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/lightdeep-sleep-dht1122/', 'posts': [{'date': u'July 4, 2015 - 7:19 pm', 'content': u'I am working on a dht11/22 temp and humidity sensor that uploads to thingspeak.Needs some more work, feel free to make pull requests and forks as necessaryMy fork;https://github.com/Tom-Neverwinter/esp8266-dht11based on;https://github.com/bpangrati/esp8266-dht11', 'num_user_post': u' 1', 'author': u'Tom_Neverwinter'}, {'date': u'September 29, 2015 - 6:20 am', 'content': u'Tom_Neverwinter said I am working on a dht11/22 temp and humidity sensor that uploads to thingspeak.Needs some more work, feel free to make pull requests and forks as necessaryMy fork;https://github.com/Tom-Neverwinter/esp8266-dht11based on;https://github.com/bpangrati/esp8266-dht11I have all the time that message:Error reading from DHT. retry 0Error reading from DHT. retry 1Error reading from DHT. retry 2Error reading from DHT. retry .....the dht11 and dht22 same', 'num_user_post': u' 19', 'author': u'kniazio'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/esp8266ds18b20/', 'posts': [{'date': u'September 13, 2015 - 4:03 pm', 'content': u"Does not update the temperature thingspeak.ESPlorer code:Communication with MCU...Got answer! AutoDetect firmware...NodeMCU firmware detected.=node.heap()stdin:2: unexpected symbol near '='> Last temp: 257500Temp:25.7500 CSending data to thingspeak.comClosing connectionGot disconnection...Last temp: 252500Temp:25.2500 CSending data to thingspeak.comClosing connectionGot disconnection...my configuration:init.lua--init.luaprint('Setting up WIFI...')wifi.setmode(wifi.STATION)--modify according your wireless router settingswifi.sta.config('my-ssid','my-password')wifi.sta.connect()tmr.alarm(1, 1000, 1, function()if wifi.sta.getip()== nil thenprint('IP unavaiable, Waiting...')elsetmr.stop(1)print('Config done, IP is '..wifi.sta.getip())dofile('ds1820.lua')endend)ds1820.lua-- Measure temperature and post data to thingspeak.com-- 2014 OK1CDJ--- Tem sensor DS18B20 is conntected to GPIO0--- 2015.01.21 sza2 temperature value concatenation bug correctionpin = 3ow.setup(pin)counter=0lasttemp=-999function bxor(a,b)   local r = 0   for i = 0, 31 do      if ( a % 2 + b % 2 == 1 ) then         r = r + 2^i      end      a = a / 2      b = b / 2   end   return rend--- Get temperature from DS18B20function getTemp()      addr = ow.reset_search(pin)      repeat        tmr.wdclr()      if (addr ~= nil) then        crc = ow.crc8(string.sub(addr,1,7))        if (crc == addr:byte(8)) then          if ((addr:byte(1) == 0x10) or (addr:byte(1) == 0x28)) then                ow.reset(pin)                ow.select(pin, addr)                ow.write(pin, 0x44, 1)                tmr.delay(1000000)                present = ow.reset(pin)                ow.select(pin, addr)                ow.write(pin,0xBE, 1)                data = nil                data = string.char(ow.read(pin))                for i = 1, 8 do                  data = data .. string.char(ow.read(pin))                end                crc = ow.crc8(string.sub(data,1,8))                if (crc == data:byte(9)) then                   t = (data:byte(1) + data:byte(2) * 256)         if (t > 32768) then                    t = (bxor(t, 0xffff)) + 1                    t = (-1) * t                   end         t = t * 625                   lasttemp = t         print('Last temp: ' .. lasttemp)                end                tmr.wdclr()          end        end      end      addr = ow.search(pin)      until(addr == nil)end--- Get temp and send data to thingspeak.comfunction sendData()getTemp()t1 = lasttemp / 10000t2 = (lasttemp >= 0 and lasttemp % 10000) or (10000 - lasttemp % 10000)print('Temp:'..t1 .. '.'..string.format('%04d', t2)..' C')-- conection to thingspeak.comprint('Sending data to thingspeak.com')conn=net.createConnection(net.TCP, 0)conn:on('receive', function(conn, payload) print(payload) end)-- api.thingspeak.com 184.106.153.149conn:connect(80,'184.106.153.149')conn:send('GET /update?key=MYAPIKEY&field1='..t1..'.'..string.format('%04d', t2)..' HTTP/1.1')conn:send('Host: api.thingspeak.com')conn:send('Accept: */*')conn:send('User-Agent: Mozilla/4.0 (compatible; esp8266 Lua; Windows NT 5.1)')conn:send('')conn:on('sent',function(conn)                      print('Closing connection')                      conn:close()                  end)conn:on('disconnection', function(conn)                                print('Got disconnection...')  end)end-- send data every X ms to thing speaktmr.alarm(0, 60000, 1, function() sendData() end )Please Help Me", 'num_user_post': u' 19', 'author': u'kniazio'}, {'date': u'September 14, 2015 - 9:02 am', 'content': u"kniazio,In the following line:conn:send('GET /update?key=MYAPIKEY&field1='..t1..'.'..string.format('%04d', t2)..' HTTP/1.1I want to confirm that have you replaced 'MYAPIKEY' with the destination Channel's API Key?", 'num_user_post': u' 4', 'author': u'hans'}, {'date': u'September 14, 2015 - 10:44 am', 'content': u"jklol said kniazio,In the following line:conn:send('GET /update?key=MYAPIKEY&field1='..t1..'.'..string.format('%04d', t2)..' HTTP/1.1I want to confirm that have you replaced 'MYAPIKEY' with the destination Channel's API Key?I do not really understand.I typed Write your API KeyWhere do I find another API Key", 'num_user_post': u' 19', 'author': u'kniazio'}, {'date': u'September 14, 2015 - 11:35 am', 'content': u"kniazio,From the ThingSpeak Documentation (https://thingspeak.com/docs/channels#api_keys): Write API KeyUse the Write API Key to update a channel. If your Write API Key is compromised you can generate a new key. If you use MATLAB\xae Analysis or MATLAB\xae Visualization, the API info is displayed in the right pane of the app. To find your Write API Key:\u2022Click Channels > My Channels.\u2022Select the channel to update.\u2022Select API Keys tab.Read API KeyThe Read API Key enables your application to read data from the API. You can generate multiple Read API Keys for different applications.To get a Read API Key:\u2022Click Channels > My Channels.\u2022Select the channel to update\u2022Select API Keys tab.\u2022Click  Generate New Read API Key.For example, if I had the channel 123I would find the Channel's read/write api keys at the following page (after signing in)https://thingspeak.com/channels/123/api_keys", 'num_user_post': u' 4', 'author': u'hans'}, {'date': u'September 14, 2015 - 1:03 pm', 'content': u"jklol said kniazio,From the ThingSpeak Documentation (https://thingspeak.com/docs/channels#api_keys): Write API KeyUse the Write API Key to update a channel. If your Write API Key is compromised you can generate a new key. If you use MATLAB\xae Analysis or MATLAB\xae Visualization, the API info is displayed in the right pane of the app. To find your Write API Key:\u2022Click Channels > My Channels.\u2022Select the channel to update.\u2022Select API Keys tab.Read API KeyThe Read API Key enables your application to read data from the API. You can generate multiple Read API Keys for different applications.To get a Read API Key:\u2022Click Channels > My Channels.\u2022Select the channel to update\u2022Select API Keys tab.\u2022Click  Generate New Read API Key.For example, if I had the channel 123I would find the Channel's read/write api keys at the following page (after signing in)https://thingspeak.com/channels/123/api_keysI do not want to only read information from and write information urza\u0105dzenia esp8266I wrote it in the first postMy device sends temperature readings-- api.thingspeak.com 184.106.153.149conn:connect(80,'184.106.153.149')conn:send('GET /update?key=ID9D358UQUxxxxxx&field1='..t1..'.'..string.format('%04d', t2)..' HTTP/1.1')conn:send('Host: api.thingspeak.com')conn:send('Accept: */*')conn:send('User-Agent: Mozilla/4.0 (compatible; esp8266 Lua; Windows NT 5.1)')conn:send('')The device esp8266  log I see:Communication with MCU...Got answer! AutoDetect firmware...NodeMCU firmware detected.=node.heap()stdin:2: unexpected symbol near '='> Last temp: 257500Temp:25.7500 CSending data to thingspeak.comClosing connectionGot disconnection...Last temp: 252500Temp:25.2500 CSending data to thingspeak.comClosing connectionGot disconnection...So like device sends data to thingspeakBut on the side of the chanell do not see changes", 'num_user_post': u' 19', 'author': u'kniazio'}, {'date': u'September 14, 2015 - 1:12 pm', 'content': u"Ok otherwise.My write API Key isID9D358UQURTFIMUMy chanell ID is 55753How will this line with me:conn:send('GET /update?key=ID9D358UQURTFIMU&field1='..t1..'.'..string.format('%04d', t2)..' HTTP/1.1')", 'num_user_post': u' 19', 'author': u'kniazio'}, {'date': u'September 14, 2015 - 2:34 pm', 'content': u"I don't know the UA syntax but you need a couple of CrLf. See http://community.thingspeak.com/forum/esp8266-wi-fi/esp8266-module-using-at-comands/#p1802", 'num_user_post': u' 13', 'author': u'Michel_J'}, {'date': u'September 14, 2015 - 4:01 pm', 'content': u"Michel_J said I don't know the UA syntax but you need a couple of CrLf. See http://community.thingspeak.com/forum/esp8266-wi-fi/esp8266-module-using-at-comands/#p1802I think I do not understand.I want to do something like on this page is describedhttp://www.instructables.com/id/Low-cost-WIFI-temperature-data-logger-based-on-ESP/?ALLSTEPS", 'num_user_post': u' 19', 'author': u'kniazio'}, {'date': u'September 14, 2015 - 7:27 pm', 'content': u'One screen shot (http://cdn.instructables.com/FS2/5UBI/I4CMNUCJ/FS25UBII4CMNUCJ.LARGE.jpg) of this instructable shows some  backslash r backslash n inside the string of the GET. Those  backslash r backslash n are CrLf, carriage and line feed. Your string should look like this:GET /update?key=ID9D358UQURTFIMU&field1=1.23&headers=false HTTP/1.1{CrLf}Host: api.thingspeak.com{CrLf}Connection: close{CrLf}Accept: */*{CrLf}{CrLf}I this example the value passed to field1 is 1.23.', 'num_user_post': u' 13', 'author': u'Michel_J'}]}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/page-9/', 'threads': [{'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/reading-values-from-a-thinghttp-page/', 'posts': [{'date': u'September 7, 2015 - 11:18 pm', 'content': u"I am very new to this, so please forgive my noob question.I have an ESP8266 connected to a 3.3v FTDI card and a breadboard power supply and everything seems to work great. I can talk to the card using a Termite serial terminal and I can connect it to my router and attach to ThingSpeak using:AT+CIPSTART=4,'TCP','api.thingspeak.com',80So far so good.I have also created a very simple web page using ThingHTTP here:https://api.thingspeak.com/apps/thinghttp/send_request?api_key=G3A43TF4BYEJ3CEZAll I want to do now is read the 3 values listed on the web page. Once I get the data I can write all the parsing algorithm stuff no worries, but for the life of me I can't work out the AT string I need to send the ESP8266 to make the web page return any useful information.Any guidance would be much apprectiated. Thanks!", 'num_user_post': u' 1', 'author': u'dsnaith'}, {'date': u'September 9, 2015 - 10:03 am', 'content': u"dsnaith,It is possible to scrape the data from the website using the MATLAB Analysis app and the MATLAB function 'urlfilter'. There are also two example templates which show how to use 'urlfilter' in the MATLAB Analysis app:- Scrape web data for ships at the Boston port- Scrape web temperature dataBased on those examples, the following MATLAB code will get the 3 data values on the page:values = urlfilter('https://api.thingspeak.com/apps/thinghttp/send_request?api_key=G3A43TF4BYEJ3CEZ', 'bold;'> ', 3)More information about how to use 'urlfilter' is available in the documentation:https://thingspeak.com/docs/matlab_analysis#urlfilter", 'num_user_post': u' 4', 'author': u'hans'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/my-esp8266-based-stackable-iot-lego-blocks/', 'posts': [{'date': u'August 10, 2015 - 5:37 pm', 'content': u"Hi Guys and Gals,I just wanted to share my latest hardware project with you all.I have designed and built a modular family of boards that can be used to create anything from simple connected sensors to very complex systems. It is based on the ESP8266 microcontroller on a custom PCB with integrated USB transceiver and voltage regulator. All ESP8266 GPIO's are routed to two stackable header connectors that can easily be mounted in a breadboard.To match this base board I have also created a number of different add on modules that can be snapped together in to a stack of boards to form the desired functionality.I'm currently Kickstarting this project and if you're interested in learning more about the project please go ahead and visit: http://kck.st/1IVY0C6. We also have a demo there running against Thingspeak. I also have a more technical Wiki were the project is documented at: http://wiki.sweetpeas.se/index.php?title=Node.ITQuestions comments ? Let me know./Pontus", 'num_user_post': u' 2', 'author': u'SweetPeas'}, {'date': u'August 18, 2015 - 10:02 am', 'content': u'I hope your project goes very well for you. Thanks for the ThingSpeak example. I have included your project on our blog.http://community.thingspeak.com/2015/08/kickstarter-nodeit-small-stackable-iot-device/', 'num_user_post': u' 402', 'author': u'Hans'}, {'date': u'September 2, 2015 - 3:40 pm', 'content': u"Hi guys,Just wanted to make the final push for our Kickstarter campaign. It ends in just a few hours so hurry over and have a look if you're interested. Quite a few of you have already signed up and we are really looking forward to seeing what you will make.http://kck.st/1IVY0C6Thanks a lot/Pontus", 'num_user_post': u' 2', 'author': u'SweetPeas'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/clear-feed-data-channel/', 'posts': [{'date': u'August 9, 2015 - 11:29 pm', 'content': u'Hi every one. I use stm32f0 for my current project. Every time i check my channel, there is very long string data recived. So i wanna clear my chanel after i get data. Can i use /channels/24430/clear or any way else. Thank you for every suport. Have a nice day', 'num_user_post': u' 3', 'author': u'swat_heliket'}, {'date': u'August 10, 2015 - 8:59 am', 'content': u'Hi,Yes you can clear your channel using the API at: https://thingspeak.com/docs/channels#clear .  You can also view your channel using a web browser, go to your channel settings, and use the button at the bottom of the page to clear your channel.lee', 'num_user_post': u' 457', 'author': u'lee'}, {'date': u'August 10, 2015 - 9:58 am', 'content': u'thank you very much Mr.Lee ^^', 'num_user_post': u' 3', 'author': u'swat_heliket'}, {'date': u'August 11, 2015 - 8:51 pm', 'content': u"Please help me. Why whenever i use https://api.thingspeak.com/channels/CHANNEL_ID/feeds/lastfor cheack last entry. I away receve '-1'?. I replaced CHANNEL_ID with 24430 (my channel id)", 'num_user_post': u' 3', 'author': u'swat_heliket'}, {'date': u'August 12, 2015 - 9:04 am', 'content': u'Hi,Please add your API key to your request if your channel is private, or make your channel public to allow the request to work without an API key.lee', 'num_user_post': u' 457', 'author': u'lee'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/how-to-configure-esp8266-to-connect-to-different-password-protected-networks/', 'posts': [{'date': u'June 5, 2015 - 4:33 am', 'content': u"I'm working on a sensor running an esp8266 on an arduino board.I was wondering if there's any way to configure the esp to different password protected networks since I'm looking for a setup that's portable and enclosed in a casing.So basically, I wanted to know if there's a way to connect to new WiFi networks without reprogramming the board? Any help would be appreciated.Thanks in advance.", 'num_user_post': u' 2', 'author': u'fusdorah'}, {'date': u'June 12, 2015 - 3:41 pm', 'content': u"I would work with the wifi examples and use the 'scan' function and the 'deepsleep' function to look around say each  30 seconds or so because battery use will be a big factor .I use a remote control airplane battery on mine .(5000 mAh 7.4... 2 in series LiPo and use the charging port to get about 3.6V and that can be used directly or through a diode to further reduce it )You would need a screen I suppose to see whats happening  but it will just register any network it sees . You can't connect unless you have the password and you will need some way to enter a password? If there are only say 10 known wifi's you will connect to then you could code an if..then statement to try each one and join the one found.Then its a matter of what you want to do thereKnown passwords could be stored on the chip and applied as needed.You don't need the Arduino board specificallyl as the ESP8266 has 5 times as much memory capacity and works 5 times faster than a ATMega328P", 'num_user_post': u' 4', 'author': u'tytower'}, {'date': u'June 24, 2015 - 8:41 am', 'content': u"Hi fusdorah,we've done SMART Config feature in ESP8266. Take a look at this. (function(d, s, id) {  var js, fjs = d.getElementsByTagName(s)[0];  if (d.getElementById(id)) return;  js = d.createElement(s); js.id = id;  js.src = 'https://connect.facebook.net/en_US/sdk.js#xfbml=1&#038;version=v3.1';  fjs.parentNode.insertBefore(js, fjs);}(document, 'script', 'facebook-jssdk'));Demo IoT application: WiFi sensor node update data to Thingspeak.com with LabVIEW Embedded+ESP8266 Hardware: Arduino...Posted by LabVIEW Embedded for Arduino on\xa0Wednesday, June 24, 2015", 'num_user_post': u' 1', 'author': u'Amornthep'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/esp8266-module-using-at-comands/', 'posts': [{'date': u'June 14, 2015 - 2:36 pm', 'content': u"I am trying to send value to a channel I have open but without any luck!I Use the following command to connect:AT +CIPSTART=4,'TCP','184.106.153.149'Esp linksThen I send the following string:'GET /update?key=apiwritekey&field=15' Esp reports SEND OK+IPD,4,1:0OKI close the link with AT+CIPCLOSE=4Resulta: nothing appears in the ThingSpeak channel and esp will not link to the server any more. To link I need to reset the esp and do all the setup to join my router.I suspect the the string I am sending has something wrong in it but what?Any suggestion?Thank you in advanceCheersAlberto", 'num_user_post': u' 7', 'author': u'R_Alberto'}, {'date': u'June 14, 2015 - 3:30 pm', 'content': u"Fields must be enumerated (field1, field2, field3...): 'GET /update?key=apiwritekey&field1=15'This is how I do it:GET /update?key=apiwritekey&field1=9.99&field2=123&headers=false HTTP/1.1{CrLf}Host: api.thingspeak.com{CrLf}Connection: close{CrLf}Accept: */*{CrLf}{CrLf}Replace {CrLf} by CrLf  ( 13, 10 )The keyword 'headers=false' will remove extra headers from response.The keyword 'Connection: close' will close the connection automatically.HTH", 'num_user_post': u' 13', 'author': u'Michel_J'}, {'date': u'June 14, 2015 - 4:37 pm', 'content': u'Thank you HTH for the quick answer. The missing index number is a typo, in the code field is correctly written with the proper index (field1), so the problem is not there since your string is similar to mine (you just use more fields than me)Question : I am sending data using TCP protocol, can I use your string example along with the HTTP/........ Part?CheersAlberto', 'num_user_post': u' 7', 'author': u'R_Alberto'}, {'date': u'June 14, 2015 - 7:02 pm', 'content': u"I'm new to TCP communications so I can't explain the HTTP part but this is what I do just after calling AT+CIPSTART. I do not specify an ID on AT+CIPSTART because  is use AT+CIPMUX=0Your command should look like this:AT+CIPMUX=0 //call just one time at initializationAT+CIPSTART='TCP','184.106.153.149', 80AT+CIPSEND=xx    //xx= length of string  to sendGET /update?key=apiwritekey&field1=9.99&headers=false HTTP/1.1{CrLf}Host: api.thingspeak.com{CrLf}Connection: close{CrLf}Accept: */*{CrLf}{CrLf}HTH = hope this helpsMichel", 'num_user_post': u' 13', 'author': u'Michel_J'}, {'date': u'June 15, 2015 - 5:17 am', 'content': u"Michel, thank you for explaining that HTH are not your initials but just an abbreviation (I am not very clever with abbreviations)I have the esp8266 module connected to a microcontroller pic18F2620 clocked @ 32 MHz, so the long string must be coded byte per byte. I will try to send your string and report here the result.Up to now I succeded in uploading one value, but if I want to upload a second value I need to reset the esp module. It seems that after the first connection, the esp module doesn't link anymore.Let see if your string solve the problem!My firmware is 0018000902, can you please let me know your firmware number?CheersAlberto", 'num_user_post': u' 7', 'author': u'R_Alberto'}, {'date': u'June 15, 2015 - 7:32 am', 'content': u'R_Alberto after  CIPSTART , you send this GET https://api.thingspeak.com/update?api_key=YOUR_CHANNEL_API_KEY&field1=7.54', 'num_user_post': u' 3', 'author': u'oddspin'}, {'date': u'June 15, 2015 - 3:28 pm', 'content': u"Thank you oddspin for the get string. I tried it but got an error (400 bad request).......?api key=...... Between 'api' and 'key' you have a space, can you please confirm it?'YOUR_CHANNEL_API_KEY' is ment the 16 digits api key?CheersAlberto", 'num_user_post': u' 7', 'author': u'R_Alberto'}, {'date': u'June 15, 2015 - 9:53 pm', 'content': u'R_Alberto said My firmware is 0018000902, can you please let me know your firmware number?My firmware is AT version:0.22.0.0(Mar 20 2015 10:04:26)SDK version:1.0.0compile time:Mar 20 2015 11:00:32I think you need to flash your ESP with the latest firware if you have one with 1024kB flash. If you have the one with only 512kB then the last firmware you can use is the one with AT_v0.22: http://bbs.espressif.com/viewtopic.php?f=5&t=286The files you need are in the folders BIN and BINATFlash download tool: http://bbs.espressif.com/viewtopic.php?f=7&t=25Files and addresses:boot_v1.2+.bin @ 0x00000user1.512.new.bin @ 0x01000blank.bin @ 0x3e000blank.bin @ 0x7e000How to connect your ESP to flash it: http://www.xess.com/blog/esp8266-reflash/Good luck!', 'num_user_post': u' 13', 'author': u'Michel_J'}, {'date': u'June 16, 2015 - 7:26 am', 'content': u'Thank you Michel for the links and the tips. I have downloaded and updated my module succesfully.Reading the AT commands document (pdf) it seems that I cannot act as a client if the module is set as a server! (AT+CIPMUX=1)This is a severe limitation (unless some workaround can be found) So far I collect the data from ESP8266 using my Smart phone (Android) acting as a client and once the data  in the phone, I route it to ThingSpeak.com using the same phone and it works. I had in mind to send the data directly but it is more important that ESP module act as server for the kind of automation I have in mind..You can see the graph at this link: https://thingspeak.com/channels/42377 By the way, now the module firmware is:AT version: 0.22.0.0SDK version: 1.0.0How do I know if my module flash is 1024 Kb or 512 Kb ?CheersAlberto', 'num_user_post': u' 7', 'author': u'R_Alberto'}, {'date': u'June 16, 2015 - 3:45 pm', 'content': u'You are reading 12 bit ADC count. Can you tell me how this is done in your program?In Arduino here are some of the useful functions    //Serial.println(ESP.getChipId());    //Serial.println(ESP.getFlashChipId());    //Serial.println(ESP.getFlashChipSpeed());    //Serial.println(ESP.getFlashChipSize());I think in LUA you have similarAlso I think the esp8266 can act as server and client at the same time.', 'num_user_post': u' 4', 'author': u'tytower'}, {'date': u'June 16, 2015 - 4:27 pm', 'content': u"I am using the ADC on board of my pic18F2620. I have five 10 bits ADC available plus planty of digital I/O. I use the oversampling technique to obtain 12 bits out of a 10 bits ADC. I don't know much about the 'arduino' world since I have always used Microchip MCU.'Also I think the esp8266 can act as server and client at the same time.'Yes I can confirm it. I did try with two esp modules connected to my Router (so that was a LAN connection) and it did work fine. When I try to connect with ThingSpeak.com I get an error 'DNS Fail' while if I use the IP address I get just 'Error' and it does not connect.It is a little frustrating, and as I said in a previous post I am sending data to ThingSpeak via my Smart phone. This is a temporary solution, I will succed in sending data via esp8266 directly.I will post the solution found!Edited: Since this new firmware has a PING command, I have use it to Ping 184.106.153.149Well it pings the IP for 5/6 times than it gives always timeout. To re-Ping I must reset the module and re-connect to the web. The pinging with Windows is always positive!Things are becoming darker!CheersAlberto", 'num_user_post': u' 7', 'author': u'R_Alberto'}, {'date': u'June 16, 2015 - 10:48 pm', 'content': u"FYI, just after calling AT+CIPSTART I call AT+CIPSTATUS to make sure I'm connected. I had a few connection problems with ThingSpeak. I do a couple of retry when CIPSTART fails.  About the flash only a few newer ones have 1024kB like this one: http://www.banggood.com/Upgraded-Version-1M-Flash-ESP8266-ESP-01-WIFI-Transceiver-Wireless-Module-p-979509.htmlThey are sold as '1M' or sometimes '4M'. Just Google the flash's part number to get some infos.", 'num_user_post': u' 13', 'author': u'Michel_J'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/http-https-with-esp8266/', 'posts': [{'date': u'February 10, 2015 - 6:42 am', 'content': u'Hi there, I created a new ThingSpeak account and using various turotials, blog posts got my ESP8266 with nodemcu and lua scripts to log temperature using a DS18b20 sensor.With my new thingspeak account if I push data using http from a web browser as follows:.http://api.thingspeak.com/update?key=KEYCHANGEDFORSECURITY&field1=23.6I get an error 0If I use https I get the new record ID returned as followshttps://api.thingspeak.com/update?key=KEYCHANGEDFORSECURITY&field1=23.61160I have tried our makerspace Thingspeak install and that works fine with http, but we do not have any plugins on our install - I guess that is a premium feature that needs to be paid for.I can not figure how to send data using https from a lua script. Is there a library that I need? Or is there a magic way to tell ThingSpeak to accept http GET requests? Happy to pay for a premium accountThank you', 'num_user_post': u' 2', 'author': u'preseli'}, {'date': u'February 10, 2015 - 8:55 am', 'content': u"Hi,You should be able to update a channel via HTTP without any problems.  Please make sure you are waiting at least 15 seconds between updates, or the 'error 0' will be returned as the rate limiting is activated.lee", 'num_user_post': u' 457', 'author': u'lee'}, {'date': u'February 11, 2015 - 9:09 am', 'content': u'thank you for your reply Lee.I have just requested a new API key and tried again via the web browser address bar and it works using http.I will program another ESP chip tonight and see if it works then. How frustrating.your post encouraged me to try again.Emyr', 'num_user_post': u' 2', 'author': u'preseli'}, {'date': u'April 17, 2015 - 1:03 pm', 'content': u"lee said Hi,You should be able to update a channel via HTTP without any problems.  Please make sure you are waiting at least 15 seconds between updates, or the 'error 0' will be returned as the rate limiting is activated.leeI am getting a 301 redirect to an https url. I am unable to update via http. Is there a channel setting to allow http?", 'num_user_post': u' 1', 'author': u'SoggyB'}, {'date': u'June 14, 2015 - 10:10 am', 'content': u"preseli said ....With my new thingspeak account if I push data using http from a web browser as follows:.http://api.thingspeak.com/update?key=KEYCHANGEDFORSECURITY&field1=23.6I get an error 0If it happens again, change 'http://api.thingspeak.com....' to 'http://thingspeak.com'Brad", 'num_user_post': u' 9', 'author': u'AYAduino'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/how-to-read-data-on-arduino/', 'posts': [{'date': u'December 6, 2014 - 5:47 pm', 'content': u"I'm currently running an esp8266 on and arduino with a temp sensor, and am writing to my channel just fine. I'd like to be able to use a second arduino to read the data I'm posting, for use in an arduino thermostat. I've looked around quite a bit and can't seem to find any examples on how to pull/read the data from thingspeak. Any help would be awesomeThanks.", 'num_user_post': u' 1', 'author': u'cwhummel'}, {'date': u'March 29, 2015 - 4:58 pm', 'content': u'Me too.  Any help would be appreciated.Thanks', 'num_user_post': u' 4', 'author': u'steg'}, {'date': u'April 3, 2015 - 12:15 pm', 'content': u'There are many, many ESP8266 projects with ThingSpeak floating around the web. What exactly are you looking to do and I can point you in the right direction.', 'num_user_post': u' 402', 'author': u'Hans'}, {'date': u'June 12, 2015 - 4:02 pm', 'content': u"You don't need the Arduino board specificallyl as the ESP8266 has 16 times as much memory capacity and works 5 times faster than a ATMega328P. Its limited to one analog input though. http://www.esp8266.com/viewtopic.php?f=6&t=2872&start=10 ......data to many servershttp://www.esp8266.com/viewtopic.php?f=6&t=3486...emailLook deeper on thingspeak you have to request the csv download by http I think", 'num_user_post': u' 4', 'author': u'tytower'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/unable-to-read-last-field-value-with-lua-nodemcu/', 'posts': [{'date': u'May 9, 2015 - 9:41 am', 'content': u"Hi,I have upadated a channel without any problem and I would like to read it back with another ESP8266.Here is my code (replace MyAPIkey with the right value)wifi.setmode(wifi.STATION)wifi.sta.autoconnect(1)function DoIt()conn = nilconn = net.createConnection(net.TCP, 0)conn:on('receive', function(conn, payload)success = true print('receive'..payload) end) --send and deep sleepconn:on('connection',function(conn, payload)print('Connected TS')conn:send('GET /channels/37123/fields/1/last?key=MyAPIKEY'..'HTTP/1.1Host: api.thingspeak.comAccept: */*User-Agent: Mozilla/4.0 (compatible; esp8266 Lua; Windows NT 5.1)')end)conn:on('disconnection', function(conn, payload) print('Disconnected') end)conn:connect(80,'184.106.153.149')end-- every 5 second, check thingspeaktmr.alarm(0, 5000, 1, function() DoIt() end)This code is working but always returns '-1' as the field1 value...If I ask the same request directly from my browser then it works...So should be a problem into the GET syntax but where ?Thanks for your helpJP", 'num_user_post': u' 1', 'author': u'freedom2000'}, {'date': u'May 19, 2015 - 11:57 am', 'content': u"freedom2000 said I have upadated a channel without any problem and I would like to read it back with another ESP8266.Here is my code (replace MyAPIkey with the right value)conn:send('GET /channels/37123/fields/1/last?key=MyAPIKEY'..'HTTP/1.1Host: api.thingspeak.comAccept: */*User-Agent: Mozilla/4.0 (compatible; esp8266 Lua; Windows NT 5.1)')end)This code is working but always returns '-1' as the field1 value...If I ask the same request directly from my browser then it works...So should be a problem into the GET syntax but where ?Thanks for your helpJPInteresting because I will by trying something similar soon. I dont have a definitive answer because I have not tried it out, however in your conn:send string after you send your API key would it need a delimiter (if that is the correct term) before sending 'HTTP1/1 ??Dave", 'num_user_post': u' 3', 'author': u'nsadventurer'}, {'date': u'May 19, 2015 - 8:24 pm', 'content': u"Just an update, what was missing was a couple of carriage returns. I removed all the extra formatting to cut down on bandwidth. What works for me was:edit: on the line  ..READKEY..' should read 'slash r slash n single quote bracket. Not sure how to include a couple of crlf without it becoming mangled in this post.WRITEKEY='YOUR_WRITE_KEY'     -- set your thingspeak.com keysREADKEY='YOUR_READ_KEY'CHANNEL='YOUR_CHANNEL_ID'wifi.setmode(wifi.STATION)--wifi.sta.config('yourSSID','yourPASSWORD')wifi.sta.connect()tmr.delay(1000000)function readTSfield()conn = nilconn = net.createConnection(net.TCP, 0)conn:on('receive', function(conn, payload)success = true print('received '..payload) end)conn:on('connection',function(conn, payload)print('Connected TS')conn:send('GET /channels/'..CHANNEL..'/fields/1/last?key='..READKEY..'')end)conn:on('disconnection', function(conn, payload) print('Disconnected') end)conn:connect(80,'184.106.153.149')endtmr.alarm(0, 5000, 1, function() readTSfield() end)HTH, Dave", 'num_user_post': u' 3', 'author': u'nsadventurer'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/urgent-help-please-thingstweet/', 'posts': [{'date': u'April 27, 2015 - 9:17 pm', 'content': u"HelloI'm working on my final project and got stuck on my code. I am using ESP8266 wifi module and I have the connection right and can post value to my channel. But I need to send a tweet through thing tweet , anyone can help how I should construct a code for that???I have linked my thingspeaks with twitter already .", 'num_user_post': u' 4', 'author': u'Mona_kh'}, {'date': u'April 28, 2015 - 8:52 am', 'content': u'Hi,Please take a look at this forum post: http://community.thingspeak.com/forum/thingspeak-apps/thingtweet-esp8266-400-bad-request/ .lee', 'num_user_post': u' 457', 'author': u'lee'}, {'date': u'April 28, 2015 - 10:19 am', 'content': u'Thanks Lee for your replyyes I visited that link but I think this form would work with Ethernet Shield while I am using a wifi module that ESP8266, do you think that would work?', 'num_user_post': u' 4', 'author': u'Mona_kh'}, {'date': u'April 28, 2015 - 4:06 pm', 'content': u"I'm not sure of the differences between them, sorry.lee", 'num_user_post': u' 457', 'author': u'lee'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/how-to-trigger-events-on-an-esp8266/', 'posts': [{'date': u'April 23, 2015 - 1:20 pm', 'content': u"Hi,Well i can publish finally on your platform using both espduino and native esp. I haven't figured out how to use talkback or triggers to trigger events on my esp8266. One of the advantages of MQtt (if i could ever get it working) is the pub/sub that works with the esp.Any thoughts on how to get this working or suggestions for code?", 'num_user_post': u' 1', 'author': u'prussiap'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/help-with-getting-data-from-talkback-app-with-the-esp8266/', 'posts': [{'date': u'January 29, 2015 - 9:30 am', 'content': u"hey guys needed little help with getting data back from 'talk back' app using the esp8266 in serial terminal in windows...... may be im doin something wrong with the AT commandsthis is what i tried doin manually in a serial terminal---------------------------------------------------------------------ATOKAT+CIPMODE=0OKAT+CIPMUX=1OKAT+CIPSTART=0,'TCP','api.thingspeak.com',800,CONNECTOKAT+CIPSEND=0,110> GET https://api.thingspeak.com/talkbacks/1203/commands/execute?api_key=0OT6Y43XC6Y5YVJ9  HTTP/1.0SEND OK0,CLOSEDOK--------------------------------------------------------------------------------------------i got commands cued but it just doesn't get any content back....... after a long time it says  '0,CLOSEDOK'im still trying to get this to work in serial terminal(to study it) before implementing it in a microcontroller....... any help will be useful.....", 'num_user_post': u' 6', 'author': u'waynebraganza'}, {'date': u'February 8, 2015 - 10:49 pm', 'content': u'AT+CIPSEND=0,xxxwhere xxx is the string lenght + 1then you send:GET /update?key=0OT6Y43XC6Y5YVJ9&field1=4HTH', 'num_user_post': u' 13', 'author': u'Michel_J'}, {'date': u'February 21, 2015 - 9:58 pm', 'content': u'I am also having trouble with executing callback api with esp8266 and arduino uno. I am getting error_auth_required error.I think the issue is arduino trimming more than 64 chars for serial input.is there way to shorten the url ( less than 64 chars).', 'num_user_post': u' 8', 'author': u'rkgarg'}, {'date': u'February 22, 2015 - 11:07 am', 'content': u'hi,I have the same problem as you tried almost everything but no luck, can however see a point on my channel graph if I use the Poster ad on from firefox.Did you have success now or do you still struggle, hope somebody can helpregardsKoen', 'num_user_post': u' 1', 'author': u'tongdeng'}, {'date': u'April 21, 2015 - 12:05 pm', 'content': u'still trying...... determined to make it work........ whats the point of only posting data from the esp module??? my goal was to make a cheap networked control system with many esp8266 modules putting commands and executing commands as doors open.etc...will update when im successful ....', 'num_user_post': u' 6', 'author': u'waynebraganza'}, {'date': u'April 22, 2015 - 6:08 am', 'content': u"guys i have done it....... after playing around with the esp8266 as a TCP client and observing how my computer browser tries to execute a GET command i have tried to make the esp8266 imitate my computer browser  and am successful with executing commands with the esp8266 im surprised that the esp8266 being so cheap has so little support and verry few people use it...but anyways here is what i had to do to get it workingfirst of all i ditched using cipmux=1 as i dont need to start multiple connections for my applicationso i directly start with------------------------------------------AT+CIPSTART='TCP','184.106.153.149',80AT+CIPSEND='xx'                                                (where 'xx' is the length if the line below +1)GET /talkbacks/1203/commands/execute?api_key=0OT6Y43XC6Y5YVJ9------------------------------------------and this is that i get back------------------------------+IPD,5:test4OKCLOSED------------------------------note :- '184.106.153.149' is the ip address of api.thingspeak.com u can use the url too but ip works fine for me as i had encountered dns error once so using ip address makes it more reliable in my caseand when u send 'T+CIPSEND=' u dont need to specify the domain / ip again so that was my mistake.... hope this helps every 1 who is struggling with the same prob that i hadwill be implementing this with a micro controller soon  ", 'num_user_post': u' 6', 'author': u'waynebraganza'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/read-the-value-from-parse-string/', 'posts': [{'date': u'April 21, 2015 - 1:38 pm', 'content': u"can you help me the code to get value fromhttps://api.thingspeak.com/apps/thinghttp/send_request?api_key=0AGGWTN8KU5C5QN8 I get the code which can connect Wifi through esp8266, but I dont know how to get the value can you help me below is the code that i can run with esp8266 & uno #include  #include LiquidCrystal_I2C lcd(0x27, 2, 1, 0, 4, 5, 6, 7, 3, POSITIVE); #include #include #define SSID '' #define PASS '' #define IP '184.106.153.149' // thingspeak.com String GET = 'GET /update?key=IJO0IVY7KD6PAA5E&field1='; SoftwareSerial monitor(0, 1); // RX, TXvoid setup() { monitor.begin(9600); Serial.begin(9600); lcd.begin(16,2); // columns, rows. size of display lcd.clear(); sendDebug('AT'); delay(1000); if(Serial.find('OK')){ monitor.println('RECEIVED: OK'); connectWiFi(); } }void loop(){ updateTemp( 4); delay(1000); }void updateTemp( ){ String cmd = 'AT+CIPSTART='TCP',''; cmd += IP; cmd += '',80'; sendDebug(cmd); delay(1000); if(Serial.find('Error')){ monitor.print('RECEIVED: Error'); return; } cmd = GET +' '; Serial.print('AT+CIPSEND='); Serial.println(cmd.length()); if(Serial.find('>')){ monitor.print('>'); monitor.print(cmd); Serial.print(cmd); lcd.setCursor(0,0); lcd.print('C'); }else{ sendDebug('AT+CIPCLOSE'); lcd.setCursor(0,0); lcd.print('N'); } if(Serial.find('OK')){ monitor.println('RECEIVED: OK'); }else{ monitor.println('RECEIVED: Error'); } } void sendDebug(String cmd){ monitor.print('SEND: '); monitor.println(cmd); Serial.println(cmd); } boolean connectWiFi(){ Serial.println('AT+CWMODE=1'); delay(1000); String cmd='AT+CWJAP=''; cmd+=SSID; cmd+='',''; cmd+=PASS; cmd+='''; sendDebug(cmd); delay(1000); if(Serial.find('OK')){ monitor.println('RECEIVED: OK'); return true; }else{ monitor.println('RECEIVED: Error'); return false; } }", 'num_user_post': u' 4', 'author': u'hanguyen'}]}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/page-10/', 'threads': [{'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/blynk-app-for-iot-will-supports-esp8266-and-thingspeak/', 'posts': [{'date': u'February 13, 2015 - 2:44 pm', 'content': u'Check out a Kickstarter project called Blynk - they are planning to support the ESP8266 Wi-Fi module and ThingSpeak!', 'num_user_post': u' 402', 'author': u'Hans'}]}, {'url': u'https://community.thingspeak.com/forum/esp8266-wi-fi/error-400-with-different-isp/', 'posts': [{'date': u'November 30, 2014 - 6:06 pm', 'content': u"HiI have a rather odd problem. I am running a Micromite with an ESP8266 wifi module. If I use my home ISP everything works as expected If I use my work ISP I get an error 400 response. The web site works from both ISP's I have attached the trace routesand ideas are welcome.Working ISPTracing route to thingspeak.com [184.106.153.149]over a maximum of 30 hops:  1     1 ms    <1 ms    <1 ms  192.168.114.254  2    41 ms    40 ms    40 ms  192.168.0.100  3     *        *        *     Request timed out.  4     *        *        *     Request timed out.  5    60 ms    60 ms    60 ms  122.56.116.5  6    60 ms    60 ms    60 ms  210.55.202.213  7    61 ms    61 ms    61 ms  202.50.232.37  8   217 ms   217 ms   217 ms  122.56.127.22  9   194 ms   194 ms   216 ms  122.56.127.25 10   217 ms   217 ms   217 ms  203.96.120.74 11   191 ms   190 ms   191 ms  4.28.172.109 12   269 ms   268 ms   268 ms  4.69.158.221 13   270 ms   269 ms   268 ms  4.69.158.221 14   269 ms   269 ms   271 ms  4.71.248.54 15     *        *        *     Request timed out. 16   277 ms   278 ms   277 ms  50.56.6.165 17   245 ms   245 ms   246 ms  184.106.126.125 18   277 ms   276 ms   277 ms  173.203.0.177 19   244 ms   243 ms   242 ms  184.106.153.149Trace CompleteNot Working ISPTracing route to thingspeak.com [184.106.153.149]over a maximum of 30 hops:  1    <1 ms    <1 ms    <1 ms  192.168.14.250  2    20 ms    15 ms     9 ms  131.203.224.229  3    18 ms    18 ms    18 ms  202.53.187.193  4    21 ms    20 ms    20 ms  202.53.187.194  5    23 ms    21 ms    20 ms  175.45.93.117  6   144 ms   144 ms   145 ms  114.31.202.121  7   146 ms   146 ms   146 ms  114.31.199.83  8   146 ms   145 ms   147 ms  114.31.199.243  9   157 ms   160 ms   157 ms  67.92.171.25 10   158 ms   158 ms   158 ms  207.88.13.224 11   157 ms   156 ms   156 ms  207.88.13.227 12   160 ms   160 ms   161 ms  206.111.6.110 13   156 ms   156 ms   156 ms  64.125.31.201 14   208 ms   208 ms   208 ms  64.125.20.241 15   210 ms   211 ms   209 ms  64.125.24.106 16   210 ms   211 ms   211 ms  64.125.24.94 17   214 ms   213 ms   214 ms  208.185.125.6 18     *        *        *     Request timed out. 19   226 ms   226 ms   226 ms  173.203.0.131 20   201 ms   201 ms   201 ms  184.106.126.131 21   227 ms   228 ms   226 ms  23.253.15.39 22   214 ms   214 ms   213 ms  184.106.153.149Trace complete.Any suggestions are welcomeRegardsJman", 'num_user_post': u' 1', 'author': u'Jman'}]}]}]
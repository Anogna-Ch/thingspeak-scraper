{"url": "https://community.thingspeak.com/forum/esp8266-wi-fi/page-1/", "threads": [{"url": "https://community.thingspeak.com/forum/esp8266-wi-fi/esp8266-garbage-values-on-serial-monitor-espcomm_sync-fail/", "posts": [{"date": "August 20, 2018 - 3:14 am", "content": "I have purchased Wi-Fi module from - https://www.amazon.in/REES52-Serial-Wireless-Transceiver-ESP8266/dp/B00O34AGSU/ref=sr_1_1?s=industrial&ie=UTF8&qid=1534744260&sr=1-1&keywords=Wi-Fi+Wireless+Transceiver+Module+for+IOT+ESP8266.I had also purchased a 5v/1A DC power adapter to externally power the module. With the information at -  https://iotbytes.wordpress.com/3-3v-power-supply-for-esp-8266/, Initially, i used pin #2(3.3v output) & #3 (Ground) of Ams1117 to power the Wi-Fi module.Rest other pin connections is similar as - https://medium.com/@cgrant/using-the-esp8266-wifi-module-with-arduino-uno-publishing-to-thingspeak-99fc77122e82.Esp8266 | Arduino---------------------------        RX | RX        TX | TX GPIO 0 | None GPIO 2 | NoneArduino | Arduino---------------------------  Reset | GNDEsp8266 | Esp8266--------------------------- Vcc       |  3.3v ( external - AMS1117 ) CH_PD | 3.3v ( external - AMS1117 ) GND     |  GND ( external - AMS1117 )Observation:1. On powering up Arduino (Via USB) & esp8266 (AMS1117)- red LED was constant but the blue LED was flickering rapidly. I saw AI thinker WiFi SSID , which assigned 192.168.4.x ip to my cellphone.2.  Arduino IDE's serial monitor: except 115200 baud rate, the terminal was getting filled  with garbage characters at all baud rates. At 115200, the terminal was quiet, and for few \u201cAT/AT+GMR\u201d commands i got garbage symbols in response. (after wards , garbage response stopped - till i re-powered on Wi-Fi)Then, after putting GPIO0 to ground (programming mode)Esp8266 | Arduino--------------------------- GPIO 0 |  GNDi  tried uploading code, ang got following - Global variables use 27968 bytes (34%) of dynamic memory, leaving 53952 bytes for local variables. Maximum is 81920 bytes.warning: espcomm_sync failederror: espcomm_open failederror: espcomm_upload_mem failederror: espcomm_upload_mem failedtried adding 1k resistor with GPIO-Ground, but it didn\u2019t work!!But, when i connected Wifi Module to 5v of arduino as -ESP8266 | Arduino---------------------------      Vcc   | 5v      GND | GNDObservation :1. On powering up Arduino  & esp8266 - red LED was constant but the blue LED was off. I saw AI thinker WiFi SSID , which assigned 192.168.4.x ip to connecting devices . 2.  Arduino IDE's serial monitor: on 115200 baud rate the terminal was quiet, and for  \u201cAT/AT+GMR\u201d  serial commands i got expected response. The blue LED flickered only when i entered AT / AT+GMR command. But the chip heated up (i disconnected as soon as i sensed this  \ud83d\ude09 ) sl l \u2e2e \u2e2e |Ai-Thinker Technology Co. Ltd.ready>ATAT>AT+GMRAT version:1.2.0.0(Jul 1 2016 20:04:45)SDK version:1.5.4.1(39cb9a32)Ai-Thinker Technology Co. Ltd.Dec 2 2016 14:21:16OKOKSame observation with 3.3v - slAi-Thinker Technology Co. Ltd.ready>ATAi-Thinker Technology Co. Ltd.readyATOKWith aforementioned experiments it seems that this is power supply issue - as on using arduino's Vcc & GND, things are moving forward.But i understand that should not rely/use those pins for ESP. Could you please suggest something on this issue - to power the WiFi module externally?.", "num_user_post": " 1", "author": "puneet336"}, {"date": "August 30, 2018 - 5:26 pm", "content": "Your issue seems to be related to the ESP hardware.  You might try posting this issue on an ESP forum.  Here is one I found:https://www.esp8266.com/index.php", "num_user_post": " 401", "author": "cstapels"}]}, {"url": "https://community.thingspeak.com/forum/esp8266-wi-fi/sending-update-through-serial-at-command-does-not-update-channel-feed/", "posts": [{"date": "August 16, 2018 - 5:42 am", "content": "Hello, I am trying to update the channel feed using the Arduino talking to the ESP8266 via AT commands. Everything seems to work fine but when I send the commandGET https://api.thingspeak.com/update?api_key=VB552XQVR6RDJ7ZM&field1=0The serial monitor does not respond back after sending the command. If I send another command afterwards it responds as fail.AT+CIPMUX=1OKAT+CIPSTART=0,'TCP','184.106.153.149',800,CONNECTOKAT+CIPSEND=0,77OK> CIPCLOSE=0busy s...Recv 77 bytes0,CLOSEDSEND FAIL", "num_user_post": " 1", "author": "rweiser"}, {"date": "August 16, 2018 - 11:30 am", "content": "I'm counting 71 bytes in your message.  I think your connection may fail because its waiting for you to send six more bytes that never come.Try changing to AT+CIPSEND=0,71 or 72 and let us know what happens.", "num_user_post": " 401", "author": "cstapels"}, {"date": "August 27, 2018 - 8:06 am", "content": "Yes, I count 67 chars + 4  = chr(13) + chr(10) + chr(13) + chr(10). This symbols must be at end of string. Another way the server dont undersand finish operation or wait for 77 bytes, but receive only 67.", "num_user_post": " 1", "author": "igorok"}]}, {"url": "https://community.thingspeak.com/forum/esp8266-wi-fi/start-getting-spurious-retransmission-errors-after-4-hour-wemos-d1-mini/", "posts": [{"date": "August 13, 2018 - 1:49 pm", "content": "My garage monitor system worked fine for years but I had to create a new account so a relative's monitor didn't use up too many data points.  The only thing that I changed in the code was the API key.  For troubleshooting, I sniffed packets between a second wifi router and my internet connection and would start getting spurious retransmission messages after 4 hours and then nothing but errors (including spurious retransmissions FROM my device back to thingspeak).  Internet connection very reliable.  I changed my microcontroller from the D1 to the D1 mini, no change.  Removed all sensors and am just sending 4 static values every 20 seconds; no change.  I tried the relative's channel again and it worked normally.  I deleted my channel and re-added, using my own new account; no change.  Any ideas why this is happening?  Just using the ESP8266WiFi.h library.  Any thoughts would be appreciated.  Thanks.Update:  Re-installed the board in Arduino boards manager (same URL in preferences but I did re-paste it) and wired everything up normally again and it worked overnight.  This time it displayed the board as Lolin(Wemos) D1 and D1 Mini R2.  I don't remember the Lolin - the version was the same but the name was different so something changed.  Bizarre that it would work for 4 hours with the other library.  Always something simple but with the 4 hours before failure it was time consuming to troubleshoot.", "num_user_post": " 1", "author": "djmobley"}]}, {"url": "https://community.thingspeak.com/forum/esp8266-wi-fi/display-tweets-on-lcd/", "posts": [{"date": "July 27, 2018 - 2:38 pm", "content": "Hi All ,I've an idea to make a news display using nodemcu + 16x2 LCD. The source of the news will be a tweeter account ( it's not available through API, hence this approach). When ever the tweeter account released the tweet I want to display it on lcd. I'm also aware of the thingspeak.com thingtweet  , but don't know how to continue this as I'm a newbie. Can someone help me with this task? Thanks All.", "num_user_post": " 1", "author": "arduinoslfan"}, {"date": "August 6, 2018 - 8:52 am", "content": "ThingTweet will allow you to send tweets from your device to  twitter via your twitter account.https://www.mathworks.com/help/thingspeak/thingtweet-app.htmlThe direction you are considering is the opposite.  If you have a license for datafeeed add-on toolbox in MATLAB, you can use the twitter object to retrieve tweets and send them to your device.https://www.mathworks.com/help/datafeed/twitter-1.htmlYou can also use the datafeed toolbox in ThingSpeak, if you have a licence.https://www.mathworks.com/help/thingspeak/matlab-toolbox-access.html", "num_user_post": " 401", "author": "cstapels"}]}, {"url": "https://community.thingspeak.com/forum/esp8266-wi-fi/the-simplest-wi-fi-temperature-measurement/", "posts": [{"date": "July 24, 2018 - 4:47 am", "content": "I'm looking for the simplest and cheapest way to remotely monitor my flat temperature via Wi-Fi.Requirements:- power supply via micro USB- accuracy +/-0.5\u00b0C- temperature reading freq: at least 1 every 10 minutes- possibly also humidity data- power consumption: the lower the better! \ud83d\ude42Googling a bit I found this solution:- module NodeMCU esp8266 Amica V2- sensor DHT22 Do you think it is a good solution?Do you know if there is some simpler module than NodeMCU (that has a lot of I/O and functionalities I would not use)?Do you know if any plug and play cheap solution (<10$/\u20ac) already exist on the market?Thanks for all the suggestions", "num_user_post": " 1", "author": "doh77"}, {"date": "July 26, 2018 - 4:55 pm", "content": "I think this is a fine solution for flexibility, and probably cost, though perhaps not for durability compared to a commercial solution.ThingSpeak will help nicely with the remote and the analysis parts of your project. I would suggest esp8266-01, can be a few $ cheaper, especially if you order them in medium quantities.It does not have analog io, but you can use the one wire interface.", "num_user_post": " 401", "author": "cstapels"}]}, {"url": "https://community.thingspeak.com/forum/esp8266-wi-fi/cant-update-fields-in-my-channels/", "posts": [{"date": "July 17, 2018 - 12:27 pm", "content": "hi ,i'm using esp-01s wifi module with my tm4c123gh microcontroller to upload temperature values to my channel.i'm using this get request 'GET /update?api_key=MY_api_key&field1=%d HTTP/1.1Host:api.thingspeak.comr' to update my field1 , but i'm getting this 400 bad requesthere is a screenshot of the server response:Recv 89 bytesSEND OK+IPD,598:HTTP/1.1 400 Bad RequestContent-Type: text/html; charset=utf-8Transfer-Encoding: chunkedConnection: closeStatus: 400 Bad RequestX-Frame-Options: ALLOWALLAccess-Control-Allow-Origin: *Access-Control-Allow-Methods: GET, POST, PUT, OPTIONS, DELETE, PATCHAccess-Control-Allow-Headers: origin, content-type, X-Requested-WithAccess-Control-Max-Age: 1800Cache-Control: no-cacheX-Request-Id: 26f0dc6f-7e57-4dff-99cc-7873010867a5X-Runtime: 0.004454X-Powered-By: Phusion Passenger 4.0.57Date: Tue, 17 Jul 2018 15:57:04 GMTServer: nginx/1.9.3 + Phusion Passenger 4.0.5710+IPD,5:0CLOSEDAT+CIPSEND=89i'm using these 2 methods to make a tcp connection with the server ://---------ESP8266_MakeTCPConnection----------// Establish TCP connection// Input: IP address or web page as a string// output: 1 if success, 0 if failint ESP8266_MakeTCPConnection(char *IPaddress){  int try=MAXTRY;  SearchStart('ok');  while(try){    sprintf((char*)TXBuffer, 'AT+CIPSTART='TCP','%s',80', IPaddress);    ESP8266SendCommand(TXBuffer);   // open and connect to a socket    DelayMsSearching(8000);    if(SearchFound) return 1; // success    try--;  }  return 0; // fail}//---------ESP8266_SendTCP----------// Send a TCP packet to server// Input: TCP payload to send// output: 1 if success, 0 if failint ESP8266_SendTCP(char* fetch){  volatile uint32_t time,n;  sprintf((char*)TXBuffer, 'AT+CIPSEND=%d', strlen(fetch)+2);  ESP8266SendCommand(TXBuffer);  DelayMs(50);  ESP8266SendCommand(fetch);  ServerResponseSearchStart();  n = 8000;  while(n&&(ServerResponseSearchFinished==0)){    time = (75825*8)/91;  // 1msec, tuned at 80 MHz    while(time){      time--;    }    n--;  }  if(ServerResponseSearchFinished==0) return 0; // no response  return 1; // success}i can read data from thingspeak ,but i can not write datathanks,M.Megawer", "num_user_post": " 2", "author": "mahmoud.eltobgy4@gmail.com"}, {"date": "July 17, 2018 - 7:53 pm", "content": "You should consider using the ThingSpeak communication library for arduino and ESP.  There are good examples in the documentation that show you how to use it. Foe example,https://www.mathworks.com/help/thingspeak/read-and-post-temperature-data.html Or you can use the wifi library and create the post or GET commands yourself, as in this example.https://www.mathworks.com/help/thingspeak/MoistureMonitor.htmlThese examples show that they are compatible with esp8266-12, but the code will work for ESP8266-01 as well, just not the rest of the example (hardware parts like ADC are needed)  I will consider updating that list of supported hardware to say this.If there is some reason you absolutely need to use the AT command set, please let me know and I will try to help you debug the method above.  However, I really think you can make it much easier on yourself with the other two methods.", "num_user_post": " 401", "author": "cstapels"}, {"date": "July 18, 2018 - 5:31 pm", "content": "cstapels thank you for your response but i'm afraid that the two methods won't work with me as i'm using the ARM-CORTEX-M4 with the ESP8266-01. i have tried to customize the library to support that hardware ,but that needs time i don't have  ,so i have to absolutely use the AT command set. it would be great if you could help me with that thanks again ,M.Megawer", "num_user_post": " 2", "author": "mahmoud.eltobgy4@gmail.com"}, {"date": "July 19, 2018 - 2:27 pm", "content": "Ok.  AT challenge accepted.But one last ditch effort - you could communicate to the ESP via serial from the cortex.you wait for events   if ( ESPserial.available() ){ save the text you get over serialset flag NEW_DATA=true}and then once an event is recieved, you can use the wifi library commands to send data to thingspeak:if NEW_DATA{NED_DATA=false;write to thingspeak;}all this is programmed in the ESP using the arduino IDE and you program in C.But, back to your problem above.  First, I would make sure you can update your channel in a web browser with the get command you are showing aboveGET /update?api_key=MY_api_key&field1=%dapi.thingspeak.com/update?api_key=XXXXXXXXXXXXXXXX&field1=123I'd put the server in directly and hard code the data just for testing.try it in the browser just to make sure the syntax is correct and then try it in your code.if you are getting a 400 error, it may mean you are connected to ThingSpeak but you just have the syntax or api key wrong.since the read works, I suspect your connection is fine, its just the syntax for the write command.If that's not it, we can look into how you determine the byte size to send, but It looks initially ok.  Let me know if you can update from the browser.", "num_user_post": " 401", "author": "cstapels"}]}, {"url": "https://community.thingspeak.com/forum/esp8266-wi-fi/http-request-works-fine-but-no-graph-shows-in-any-chart/", "posts": [{"date": "July 15, 2018 - 10:31 am", "content": "Hi, I have develloped an application that automatically exports Arduino data into my ThingSpeak channels.The output from ThingSpeak is:Request: https://api.thingspeak.com/update?api_key=4HWA00QRN0EHM1MM#S|TS_API|&field1=112.14&field2=2.50&field3=150.00&field4=2.50&field5=28.56&field6=2.50&field7=22.50&field8=2.50; Request result: 219Request: https://api.thingspeak.com/update?api_key=4HWA00QRN0EHM1MM#S|TS_API|&field1=112.75&field2=2.50&field3=150.00&field4=2.50&field5=28.56&field6=2.50&field7=22.50&field8=2.50; Request result: 220Request: https://api.thingspeak.com/update?api_key=4HWA00QRN0EHM1MM#S|TS_API|&field1=113.05&field2=2.50&field3=150.00&field4=2.50&field5=28.63&field6=2.50&field7=22.50&field8=2.50; Request result: 221Request: https://api.thingspeak.com/update?api_key=4HWA00QRN0EHM1MM#S|TS_API|&field1=114.00&field2=2.50&field3=150.00&field4=2.50&field5=28.44&field6=2.50&field7=22.50&field8=2.50; Request result: 222Request: https://api.thingspeak.com/update?api_key=%5BMyApiKey%5D#S|TS_API|&field1=114.46&field2=2.50&field3=150.00&field4=2.50&field5=28.50&field6=2.50&field7=22.50&field8=2.50; Request result: 223Request: https://api.thingspeak.com/update?api_key=%5BMyApiKey%5D#S|TS_API|&field1=115.19&field2=2.50&field3=150.00&field4=2.50&field5=28.44&field6=2.50&field7=22.50&field8=2.50; Request result: 224Request: https://api.thingspeak.com/update?api_key=%5BMyApiKey%5D#S|TS_API|&field1=115.94&field2=2.50&field3=150.00&field4=2.50&field5=28.38&field6=2.50&field7=22.50&field8=2.50; Request result: 225Request: https://api.thingspeak.com/update?api_key=%5BMyApiKey%5D#S|TS_API|&field1=116.47&field2=2.50&field3=150.00&field4=2.50&field5=28.25&field6=2.50&field7=22.50&field8=2.50; Request result: 226Request: https://api.thingspeak.com/update?api_key=%5BMyApiKey%5D#S|TS_API|&field1=117.07&field2=2.50&field3=150.00&field4=2.50&field5=28.19&field6=2.50&field7=22.50&field8=2.50; Request result: 227As you can see, the data is accepted by ThingSpeak (it returns the written record number as the Request result), but the charts DO NOT show any information.So what is happening here?Please advice.Thanks,Jos.", "num_user_post": " 7", "author": "Jos"}, {"date": "July 16, 2018 - 10:43 am", "content": "I think this is a duplicate post.  Can we work on this topic on the other post?https://community.thingspeak.com/forum/thingspeak-api/thingspeak-no-show-data-in-charts-bur-request-is-fine/", "num_user_post": " 401", "author": "cstapels"}]}, {"url": "https://community.thingspeak.com/forum/esp8266-wi-fi/questions-about-post-temperature-data-and-read-from-channel-example/", "posts": [{"date": "July 2, 2018 - 7:40 am", "content": "I 've built the example project 'Post Temperature Data and Read from Channel' .In this example we have the output of a voltage divider.It ranges from 0 to 3.3Volts and this voltage is read by the ADC of the ESP8266.But I read that the ESP8266 can 'read' from 0 to 1Volt.So this project should not work correctly. But it works fine! (let me remind you that I 've built it and tested it).So, how can this be explained?", "num_user_post": " 4", "author": "panoss"}, {"date": "July 3, 2018 - 4:32 pm", "content": "That is a good catch, thanks. I think the 3.3 V is mostly dropped across the thermistor, and the voltages measured are close to 1 V anyway.  Perhaps the ADC reading is still proportional to voltage for values outside the suggested range.  I will try the experiment again with a 2k or 5k resistor in series.  If you still have yours set up, can you try it with a lower resistor so we can compare?", "num_user_post": " 401", "author": "cstapels"}, {"date": "July 12, 2018 - 10:29 am", "content": "I used a NODEMCU, which has a built in voltage divider, to make the range 3.3 V.https://github.com/nodemcu/nodemcu-devkit/blob/master/Documents/NODEMCU_DEVKIT_SCH.pngIll add a note to the example.  Thanks again!", "num_user_post": " 401", "author": "cstapels"}]}, {"url": "https://community.thingspeak.com/forum/esp8266-wi-fi/nodemcu-suddenly-cannot-connect-to-intenet/", "posts": [{"date": "June 25, 2018 - 2:50 am", "content": "My NodeMCU was, till yesterday, very easilly connecting to the internet.Untill I installed a library, Thermistor_library-master.From that moment the NodeMCU can no way connect to the internet!!!I removed the library (deleted the library 's folder from C:UsersPanDocumentsArduino), I tried previous sketches that worked 100% in the past, but NOTHING!It cannot connect.I even tried another (unused) NodeMCU and the same thing happens!I 'm desperate, I don't know what to do!Any help is welcome.(I have made no changes to the router 's credentials or any of it 's settings)", "num_user_post": " 4", "author": "panoss"}, {"date": "June 25, 2018 - 10:09 am", "content": "I replaced this code:WiFi.begin(ssid, password);   with this:    WiFi.disconnect(true);    WiFi.setAutoConnect(false);    WiFi.setPhyMode(WIFI_PHY_MODE_11G);    WiFi.begin(ssid, password);    WiFi.printDiag(Serial);    Serial.println(WiFi.getPhyMode());and...got connected!!!Then I returned to the old code...and works fine too!!!I have no idea why the use of the previous code 'cured' it.", "num_user_post": " 4", "author": "panoss"}]}, {"url": "https://community.thingspeak.com/forum/esp8266-wi-fi/multiple-sensors-with-nodemcu-esp8266/", "posts": [{"date": "June 24, 2018 - 7:34 am", "content": "I 've built this example and works fine.Now I want to have multiple sensors (I use NTC thermistors as sensors) and so I 've built this, but I must modify the software.The difference between these 2 circuits is:In the first example, the thermistor is the bottom resistor of the voltage divider.In the second example, the thermistor is the top resistor of the voltage divider.The part of the code that I have to modify is:         float logR = log( 10000 * ( 1024 / readValue - 1 ));                 // Separate the calculation for simplicity and debugging        celsiusTemperature = 1 / ( aConst + bConst * logR + cConst * pow(logR,3) ) - 273.15;   // Calculate the temperature in Celsius        fahrenheitTemperature = celsiusTemperature * 9 / 5 + 32;Any help is welcome.", "num_user_post": " 4", "author": "panoss"}]}, {"url": "https://community.thingspeak.com/forum/esp8266-wi-fi/iot-made-easy-esp-micropython-mqtt-thingspeak/", "posts": [{"date": "June 14, 2018 - 3:06 pm", "content": "Hi Guys,I published an article, were using MQTT protocol, I got captured data from sensors, logging them in ThingSpeak. What I did different, was to use  Jupyter Notebook to program my ESP8266 (NodeMCU), using MicroPython. Was amazing how simple was to publish those data on ThingSpeak. Here the article:https://medium.com/@rovai/iot-made-easy-esp-micropython-mqtt-thingspeak-ce05eea27814", "num_user_post": " 1", "author": "Marcelo Rovai"}]}, {"url": "https://community.thingspeak.com/forum/esp8266-wi-fi/problem-uploading-data-from-nodemcu-to-the-iot-thingspeak/", "posts": [{"date": "June 7, 2018 - 7:28 am", "content": "Hello, I am uploading data from NodeMCU to the IoT ThingSpeak platform and I have a problem that I do not know where it may come from.When I upload data from my private Wi-Fi network, from home, I see them correctly and everything works fine. When I upload them from the university network, I do not see it in ThingSpeak. The same software and all the same in several examples. I only change the credentials of the wifi.Does anyone have any idea what can happen ???", "num_user_post": " 1", "author": "victormh"}, {"date": "June 10, 2018 - 12:09 am", "content": "Are you able to update your Thingspeak channel using your browser on the University network?  (see https://au.mathworks.com/help/thingspeak/writedata.html for format of URL). Do you get any return code from the NodeMCU when you try to write?   At what point does it fail?   Are you able to read data from a channel?It may be that your University requires you to use a proxy to access the internet.It is unfortunate that Thingspeak does not have a diagnostic console where you can view the status of incoming requests.", "num_user_post": " 271", "author": "rw950431"}]}]}
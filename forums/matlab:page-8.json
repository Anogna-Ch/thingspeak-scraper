{"url": "https://community.thingspeak.com/forum/matlab/page-8/", "threads": [{"url": "https://community.thingspeak.com/forum/matlab/request-error-bars/", "posts": [{"date": "August 24, 2015 - 3:30 pm", "content": "Hi,Would it be possible to add error bars to the data in a chart? I'd like to be able to plot the mean value of some sample data +/- one standard deviation on each point represented by an error bar... something like this for example:http://3.bp.blogspot.com/-aiPECwSj0VE/Uep8hsQ0qtI/AAAAAAAABN0/Iwv5Sv9OJ1I/s1600/error_bars_both.pngThanks!", "num_user_post": " 4", "author": "BMcC"}, {"date": "August 25, 2015 - 7:59 am", "content": "Yes -- you can using the MATLAB errorbar plot.I'll try to post an example later, but here's the documentation:http://www.mathworks.com/help/matlab/ref/errorbar.html-Rob", "num_user_post": " 47", "author": "Rob Purser"}, {"date": "August 25, 2015 - 3:07 pm", "content": "Hi Rob,Thank you for your reply. I'll have a look at the MATLAB link and see if I can figure out what I need to do \ud83d\ude42Thanks!", "num_user_post": " 4", "author": "BMcC"}, {"date": "August 25, 2015 - 3:54 pm", "content": "Hi again,Is it possible to create an error bar plot using  MATLAB Visualizations? I can't see an option using thingsSpeakPlot. If I try to use MATLAB Analysis and the errorbar(x,y,e) function I get an error that states..'Cannot use MATLAB visualization code 'bar(x,y,e)' in the MATLAB Analysis app. You must create a MATLAB Visualization.'", "num_user_post": " 4", "author": "BMcC"}, {"date": "August 25, 2015 - 5:40 pm", "content": "That is correct, you can create an error bar plot using MATLAB Visualizations App. You will not be able to create an error bar plot in a MATLAB Analysis App. Create a new MATLAB Visualization App and select 'Custom (no starter code)' option from the Templates. Paste the below MATLAB Code in the new MATLAB Visualizations App to generate an example 'errorbar' plot.x = 0:pi/10:pi;y = sin(x);e = std(y)*ones(size(x));errorbar(x,y,e)", "num_user_post": " 62", "author": "Adarsh_Murthy"}, {"date": "August 25, 2015 - 7:53 pm", "content": "Hi,I have an arduino that is contantly writing to ThinkSpeak to monitor the system intake performance.  Here's some code that I use to visualize the data associated with that.  You should be able to copy/paste this into a MATLAB Visualization verbatim.numHours = 6;[data,ts] = thingSpeakRead(52622,'readkey','P3DEWWFW89DVMUIY','NumMinutes',numHours*60,'Fields',1);% Create hour of day categories to summarize byhourOfDay = floor(hours(timeofday(ts)));% Apply the function max, min, mean, and standard deviation to each of the% hours in the daysumStats = table;sumStats.hour = unique(hourOfDay);sumStats.max = arrayfun(@(x)(max(data(hourOfDay == x))),sumStats.hour);sumStats.min = arrayfun(@(x)(min(data(hourOfDay == x))),sumStats.hour);sumStats.mean = arrayfun(@(x)(mean(data(hourOfDay == x))),sumStats.hour);sumStats.std = arrayfun(@(x)(std(data(hourOfDay == x))),sumStats.hour);errorbar(sumStats.hour, sumStats.mean,sumStats.std,'d-')hold onplot(sumStats.hour, sumStats.max ,'+',...    sumStats.hour, sumStats.min ,'+')hold off", "num_user_post": " 47", "author": "Rob Purser"}, {"date": "August 26, 2015 - 2:43 pm", "content": "Thanks Rob - that's got it all working well now \ud83d\ude42 Thank you!Thanks also Adash - makes sense now \ud83d\ude42Cheers!Mean CO2 with Errors:https://thingspeak.com/channels/51602", "num_user_post": " 4", "author": "BMcC"}, {"date": "August 26, 2015 - 9:24 pm", "content": "Looks awesome!  Thanks for sharing!-Rob", "num_user_post": " 47", "author": "Rob Purser"}]}, {"url": "https://community.thingspeak.com/forum/matlab/sum-query-with-non-periodic-data/", "posts": [{"date": "August 25, 2015 - 9:49 am", "content": "HiI'm posting energy measurements to a channel feed that are not periodic, I mean, one hour there may be 10 values, but the next one there may be 50 or 100. The problem comes when I want to calculate daily totals, because something like this:api.thingspeak.com?sum=dailyreturns meaningless values. The reason is that sum simply adds all the values inside each day, and so days with a lot of measurements have higher values than days with fewer. Is there's some way to calculate a sum taking into account the 'distance' between measurements? Graphically speaking, I would need the area under the line chart, not just the sum of the values.", "num_user_post": " 1", "author": "jesjimher"}, {"date": "August 25, 2015 - 8:10 pm", "content": "I have a similar channel.  You can do this in a MATLAB Analysis function:% Get the data[data,ts] = thingSpeakRead(32188,'NumMinutes',60);% Calculate the number of minutes for each value (the weight)weights = minutes(diff(ts));% Discard the last data point (because you don't know its weight)data(end) = [];% Need to use 'dot product' operator (.*), since MATLAB default is% 'cross product' operator.sum(data .* weights)", "num_user_post": " 47", "author": "Rob Purser"}]}]}
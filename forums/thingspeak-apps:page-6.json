{"url": "https://community.thingspeak.com/forum/thingspeak-apps/page-6/", "threads": [{"url": "https://community.thingspeak.com/forum/thingspeak-apps/error-parsing-google-doc-form-url-and-my-phpmyadmin-url/", "posts": [{"date": "February 2, 2017 - 6:18 am", "content": "Hi,\u00a0I am having problem parsing a google document form response.\u00a0I have a form ready and I have tried copying the xpath of the data which i need from thingspeak ThingHTTP via Google chrome and FireFox (Firebug).\u00a0The same problem arises for data from my phpMyAdmin server. I have made a database for my project and I am trying to get that Data from thingspeak ThingHTTP via Google chrome and FireFox (Firebug).\u00a0Please Help me solve this problem.PHP:URL:http://34.194.161.164/phpMyAdmin/import.php#PMAURL-1:sql.php?db=TestDB&table=Patient+1&server=1&target=&token=36c7a84259ab3e9734d961f300d45483\u00a0Xpath://*[@id='table_results']/tbody/tr[1]/td[1]/span\u00a0Google Doc:\u00a0URL:https://docs.google.com/forms/d/1D4QSNaPA0VYKwOgkLmH4OoPcmCiEdwVrNDqIB9PHc-s/edit#responses\u00a0Xpath://*[@id='ResponsesView']/div/div[2]/div/div[4]/div[1]/div/div[2]/div/div[1]", "num_user_post": " 3", "author": "djshah95"}, {"date": "February 2, 2017 - 8:44 am", "content": "Interesting application... I would try leaving off the Xpath:// part of the XPath.\u00a0", "num_user_post": " 402", "author": "Hans"}, {"date": "February 3, 2017 - 9:49 am", "content": "I tried doing that but there no change in the output.\u00a0It says 'Error parsing document, try a different parse string'\u00a0As per the error I have tried parsing all other data on the webpage but none of them worked. As per my above post I have tried \u00a0gettign the Xpath via Google Chrome and Mozilla FireFox (Firebug) but did not work.Please help me solving this.", "num_user_post": " 3", "author": "djshah95"}, {"date": "February 3, 2017 - 10:35 pm", "content": "I've had the same trouble in the past- there seems to be differences in the way different versions of the xpath parser work. Its also possible that the website you are scraping renders differently when accessed by thingHTTP than when your browser loads it.I can only suggest that you start with shorter expressions and gradually refine your xpath. \u00a0I agree with Rob that you should leave out the XPath:\u00a0For example this is the xpath firebug gives me for the timestamp of the latest tweet on someone's twitter feed/html/body/div[2]/div[2]/div/div[2]/div/div/div[2]/div/div[2]/div[4]/div/div[2]/ol[1]/li[1]/div/div[2]/div[1]/small/a/span[1]\u00a0Whereas this is the string that actually works in thingHTP(//span/@data-time)[1]\u00a0In your case I would start with \u00a0//[@id='table_results'] \u00a0, get that to work and then drill down into the structure gradually.\u00a0", "num_user_post": " 271", "author": "rw950431"}, {"date": "February 4, 2017 - 1:43 am", "content": "I am new to the Xpath thing so would like to ask one thing that for example can I get the data by using xpath from phpMyAdmin database ?\u00a0I am getting that error then too. I am just entering the URL and the Xpath in the ThingHTTP. Is it anything i need to enter so as to get this thing work.\u00a0I have a project for which i need to get data from phpMyAdmin Database .\u00a0\u00a0And for the google document form. I am able to get the Data i.e the Question on ThingHTTP but i am unable to get the answer. For e.g Medicine name is my question which i am getting it on ThingHTTP but I am unable to get Crocin on ThingHTTP.\u00a0Error Still persists for both Google Doc form and phpMyAdmin!\u00a0Please Help!", "num_user_post": " 3", "author": "djshah95"}, {"date": "February 5, 2017 - 6:59 pm", "content": "I tried your google forms URL and found\u00a0//div[@id='ResponsesView']/div/div[2]/div/div[4]\u00a0\u00a0 succeeds but gives an empty element but\u00a0//div[@id='ResponsesView']/div/div[2]/div/div[4]/div[1] gives the error message.\u00a0So perhaps you can work from there..I was unable to use [@class='....'] as a selector anywhere on that form. \u00a0", "num_user_post": " 271", "author": "rw950431"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-apps/insert-field-value-into-thinghttp-url/", "posts": [{"date": "February 4, 2017 - 1:14 am", "content": "Hi, \u00a0I am hoping someone can help me. \u00a0I have an ESP8266 running ESPBasic. \u00a0It has a Thingspeak send function and it works like a charm to get data from the IOT device to my\u00a0channel/field. \u00a0 I want to send this data (using time control) as part of a https:// URL which has the format\u00a0https://my.zipato.com/zipato-web/remoting/attribute/set?serial=xxxxxxxxxxx&apiKey=xxxxxxx=xxx&value1=111Using GET i can successfully send the &value=111 to my.zipato.com as a manual entry so i know the URL works.How can i replace the &value=xxx \u00a0so that it contains the actual field value of my channel ? \u00a0I tried to replace the manual value with\u00a0%%channel_1234_field_1%% but this doesnt work.I would appreciate\u00a0any suggestionsbest regardsbob", "num_user_post": " 1", "author": "iot001"}, {"date": "February 4, 2017 - 6:23 pm", "content": "You can do this:1) Write a MATLAB Analysis App that uses thingSpeakRead\u00a0to read from the channel2) Use the webwrite function to write data to zipato3) Schedule the MATLAB analysis app to be run by your TimeControl", "num_user_post": " 225", "author": "Vinod"}, {"date": "February 5, 2017 - 6:53 am", "content": "There is some evidence to suggest that variable substitution doesn't occur in GET requests (where the values are passed in the URL). \u00a0Is it possible for you to use the POST format instead? \u00a0Otherwise Vinod's solution looks good if you can find your way around the Matlab syntax.http://community.thingspeak.com/forum/thingspeak-api/thinghttp-post-to-pushingbox-pass-value-fields/#p2284", "num_user_post": " 271", "author": "rw950431"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-apps/cant-use-data-from-thingspeakread-to-parse-comma-delimited-values/", "posts": [{"date": "October 28, 2016 - 3:27 pm", "content": "Hello,I'm finding the reference for thingSpeak extremely lacking so I have turned here in exasperation.I am using the thingSpeakRead() function to read the most recent value from Field 1 of my private channel. \u00a0The data that this field stores is a string of comma-separated values.I want to take this list of values, parse them, and write them to\u00a0their corresponding field on a different private channel I own.I have the following code:data = thingSpeakRead(readChannelID,'ReadKey', readAPIKey,'NumPoints', 1, 'Fields', [1]);dataArray = strsplit(data, ',');\u00a0If I try and run this code, I get the following error message in the 'Output' box:Error using strsplitFirst input must be either a character vector or a string scalar.So, obviously the data that thingSpeakRead() returned\u00a0was not a string\u00a0(or 'character vector' as I guess MATLAB calls it...).Not sure where to go from here.... is there a way to access this string of values stored in Field 1?", "num_user_post": " 3", "author": "jaza_tom"}, {"date": "October 28, 2016 - 3:46 pm", "content": "Hi,\u00a0thingSpeakRead() by default returns data back as a numeric array. For your case, since the data on the ThingSpeak channel is a string, you should use the 'OutputFormat' names parameter to request for data back as a table:data = thingSpeakRead(readChannelID,'ReadKey', readAPIKey,'NumPoints', 1, 'Fields', [1], 'OutputFormat', 'table');You will then need to access the data in the table (data.<columnName>) to apply strsplit() function. Refer to the following link on how to access data in a table:https://www.mathworks.com/help/matlab/ref/table.htmlhttps://www.mathworks.com/help/matlab/matlab_prog/access-data-in-a-table.html\u00a0If this doesn't work, share the values stored in the data table and we\u00a0might be able to provide additional suggestions.\u00a0HTH!", "num_user_post": " 62", "author": "Adarsh_Murthy"}, {"date": "November 1, 2016 - 2:45 pm", "content": "Thanks for the reply! \u00a0Clearly I have a lot to learn about MATLAB...I now have the thingSpeakRead() function returning a table. \u00a0It would appear that it thinks the column with the comma-delimited strings in it is a variable of type\u00a0doubleHere is my code:%% Read Data %% data = thingSpeakRead(readChannelID,'ReadKey', readAPIKey, 'OutputFormat', 'table');%% Analyze Data %% % Add code in this section to analyze data and store the result in the % analyzedData variable. summary(data);disp ----------------;testVar = data.allData(1); disp(testVar);disp ----------------;whos;.... and the output:Variables:Timestamps: 1\u00d71 datetime Values:min 01-Nov-2016 13:56:35 median 01-Nov-2016 13:56:35 max 01-Nov-2016 13:56:35allData: 1\u00d71 double Values:min NaN median NaN max NaN NaNs 1---------------- NaN---------------- Name Size Bytes Class Attributesdata 1x2 1198 table metacl 1x1 8 meta.class readAPIKey 1x16 32 char readChannelID 1x1 8 double testVar 1x1 8 double writeAPIKey 1x16 32 char writeChannelID 1x1 8 double\u00a0Any idea why I am getting a double instead of a string?EDIT:Here is the first few rows of the table, with headers:created_atentry_idfield130-10-16 13:141351477844100, 11.13,\u00a0 0.78,\u00a0 8.73,\u00a0 2.14, 11.64,\u00a0 1.27, 14.74,\u00a0 3.56, 21.95,\u00a0 5.41,\u00a0 0.00,\u00a0 0.00,\u00a0 5.01,\u00a0 1.22,\u00a0 1.08,\u00a0 0.25,30-10-16 13:291361477845000, 11.15,\u00a0 0.84,\u00a0 9.39,\u00a0 2.33, 11.66,\u00a0 1.29, 15.03,\u00a0 3.69, 22.85,\u00a0 5.66,\u00a0 0.00,\u00a0 0.00,\u00a0 5.02,\u00a0 1.23,\u00a0 1.07,\u00a0 0.26,", "num_user_post": " 3", "author": "jaza_tom"}, {"date": "November 2, 2016 - 12:33 pm", "content": "Hi,\u00a0Thanks for sharing the additional info. ThingSpeakRead at present doesn't support the case where a numeric vector\u00a0is stored in a single field. We will consider this in a future update of the ThingSpeakRead function.In the meanwhile, to access your data in a MATLAB Analysis App, you can use the following lines of code instead:data = webread('https://api.thingspeak.com/channels/<channelID>/feeds.json?api_key=<read_Key>&results=1')myData = data.feeds.field1;\u00a0The data returned from thingSpeak will be stored in the variable data as a structure. As shown in your previous post, since the value of interest is stored in field1, myData should contain the data of interest.NOTE: you need to replace <channelID> and <read_Key> with their appropriate values.\u00a0Let me know if this doesn't work for you.", "num_user_post": " 62", "author": "Adarsh_Murthy"}, {"date": "January 18, 2017 - 12:49 pm", "content": "Adarsh_Murthy, what you recommended works perfectly!Thank you", "num_user_post": " 4", "author": "mohamedali1993"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-apps/visualizing-data-in-a-time-table-format-data-table-format/", "posts": [{"date": "January 16, 2017 - 7:07 pm", "content": "I am wondering if anyone tried to visualize data in a time table format on their channel.\u00a0I am sending strings (from an ESP8266) and I am reading them in Matlab using the 'timetable' output format of\u00a0thingSpeakRead function, but I am unable to view the same data table in the actual channel. I have seen people visualize their data using google gauges, videos, regular plots, or maps! Yet, I haven't seen a regular data chart with regular strings in it.\u00a0I have found a very useful\u00a0web based tool (https://github.com/nothans/iot-debugger ) that basically does what I want, but is there anyway I can integrate it in my channel?I don't know Html, CSS, or Javascript... I am hoping someone coded a template for the visualization app that prints a data chart to a channel.Thanks,Mo", "num_user_post": " 4", "author": "mohamedali1993"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-apps/matlab-visualization-plot-update-after-channel-update/", "posts": [{"date": "November 22, 2015 - 9:38 am", "content": "Hello,I have created a Matlab plot and want it to be automatically re-drawn upon receiving new channel update. Is there any way to do this please? Thanks, Martin M.", "num_user_post": " 3", "author": "martin mienkina"}, {"date": "November 23, 2015 - 9:37 am", "content": "Hi Martin,Yes you can do this using React ( https://thingspeak.com/docs/react#react ) set with a test frequency of 'on data insertion'.lee", "num_user_post": " 457", "author": "lee"}, {"date": "November 23, 2015 - 10:28 am", "content": "Hi Lee,thanks for your answer.The 'react' as well as 'time control' can trigger Matlab Analysis but not Matlab Visualization script. I haven't found yet any solution. Also tried to code my plotting script in a while loop with pause without success.  I think, that what I want to achieve is not implemented, or I must be missing something.Thanks,Martin M.", "num_user_post": " 3", "author": "martin mienkina"}, {"date": "November 23, 2015 - 11:13 am", "content": "Hi Martin,Sorry for the misunderstanding, yes you are correct that this is not possible.  We will look into ways of improving this in the futurelee", "num_user_post": " 457", "author": "lee"}, {"date": "November 23, 2015 - 11:52 am", "content": "Hi Lee,That would be really great!Martin M. \u201cThe future depends on what you do today.\u201d\u2015 Mahatma Gandhi", "num_user_post": " 3", "author": "martin mienkina"}, {"date": "January 13, 2017 - 6:05 am", "content": "Hi,are there news concerning this topic?I've the same problem\u00a0Thank you \ud83d\ude42", "num_user_post": " 2", "author": "Tesla41"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-apps/thinghttp-slack-incoming-webhook/", "posts": [{"date": "January 10, 2017 - 3:04 am", "content": "Quick guide for anyone interested in how to get thingHTTP to post to a slack channel (AFAIK the earlier how-to using Slackbot should still work but I didnt try it)First enable incoming webhooks in your slack channel by going to 'apps and integrations'-> search 'incoming webhook' and click 'add customisation' This allows you to set a default channel for incoming webhooks and some other things. \u00a0Eventually you will get a page containing your webhook address as well as some useful tips.\u00a0Next set up thingHTTP similar to below (fill it in with your details) and it should work.\u00a0Fancier things can be done see https://api.slack.com/incoming-webhooks\u00a0Name:post to slackAPI Key:THINGHTTP_KEYURL:https://hooks.slack.com/services/SLACK_KEY/ANOTHER_SLACK_KEYHTTP Auth Username:\u00a0HTTP Auth Password:\u00a0Method:POSTContent Type:application/jsonHTTP Version:1.1Host:\u00a0Headers:\u00a0Body:{'username':'thingspeak', 'text': 'Something happened'}Parse String:\u00a0Created:2017-01-10 5:45 pm", "num_user_post": " 271", "author": "rw950431"}, {"date": "January 10, 2017 - 7:32 am", "content": "Awesome example! Thanks for sharing.", "num_user_post": " 402", "author": "Hans"}, {"date": "January 11, 2017 - 12:01 am", "content": "Thank you for creating and sharing the example!", "num_user_post": " 225", "author": "Vinod"}, {"date": "January 11, 2017 - 11:44 pm", "content": "Should have added that I'm evaluating the android Slack app for notifications since I'm pretty disappointed with the revamped IFTTT client (which now doesn't seem to show any of the actual message you send it via the Maker channel).\u00a0Was a bit worried about the reports of high battery usage by the Slack app but so far (2 days) its OK.", "num_user_post": " 271", "author": "rw950431"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-apps/2-d-line-plot-dosent-show-correct-on-external-site-iframe/", "posts": [{"date": "January 9, 2017 - 12:59 pm", "content": "I copy and paste the iframe code from a visualisation that works great on the thingspeak site, the page for my channel.\u00a0\u00a0But when I past the code on my own page the graph dosent show in the expected way. On the thingspeak page the graph is the standard blue thin line for a 2d plot. But on my page it just shows the standard thingspeak red with dots. The colour is not a problem but the time period showing isnt correct either. The 2d plot is showing 1 day of data on the thingspeak page, but on my page it dosent show a complete day.\u00a0The iframe code Im using.<iframe width='450' height='260' style='border: 1px solid #cccccc;' src='https://thingspeak.com/apps/matlab_visualizations/XXXXXX'></iframe>", "num_user_post": " 8", "author": "popunonkok"}, {"date": "January 10, 2017 - 8:08 am", "content": "Hi\u00a0popunonkok,\u00a0Is this a public MATLAB Visualization? Would it be possible share the MATLAB code without the channel id or API keys to enable us to investigate this issue further?\u00a0ThanksAkhila\u00a0", "num_user_post": " 21", "author": "akhila"}, {"date": "January 10, 2017 - 11:20 am", "content": "The way the graph looks at my channels\u00a0 page at Thingspeak.\u00a0The way the Graph looks in the iFrame on my own page.\u00a0The iFrame code snippet:<iframe width='450' height='260' style='border: 1px solid #cccccc;' src='https://thingspeak.com/apps/matlab_visualizations/119501'></iframe>\u00a0The code from Matlab Visualisation% Template MATLAB code for visualizing data from a channel as a 2D line% plot using THINGSPEAKPLOT function.% Prior to running this MATLAB code template, assign the channel ID to read% data from to the 'readChannelID' variable. Also, assign the field ID% within the channel that you want to read data from to plot. % TODO - Replace the [] with channel ID to read data from:readChannelID = [XXXXXXXX];% TODO - Replace the [] with the Field ID to read data from:fieldID1 = [2];% Channel Read API Key% If your channel is private, then enter the read API% Key between the '' below:readAPIKey = 'XXXXXXXX';%% Read Data %%[data, time] = thingSpeakRead(readChannelID, 'Field', fieldID1, 'NumDays',1, 'ReadKey', readAPIKey);%% Visualize Data %%thingSpeakPlot(time, data);Any help would be appreciated.\u00a0Tanks in advance.", "num_user_post": " 8", "author": "popunonkok"}, {"date": "January 10, 2017 - 9:50 pm", "content": "Let's try this:1) Create a new\u00a0text document and save it as\u00a0Test.html2) In the text document, add this:<html><iframe width='450' height='260' style='border: 1px solid #cccccc;' src='https://thingspeak.com/apps/matlab_visualizations/YourMATLABVizNumber'></iframe></html>3) Open this up in your browser. Does this look like you expect?\u00a0If this does not look like the plot you expect, confirm that the plot generated by your MATLAB visualization is added to your channel and the YourMATLABVisualizationNumber corresponds to the\u00a0plot for your channel.", "num_user_post": " 225", "author": "Vinod"}, {"date": "January 10, 2017 - 10:13 pm", "content": "Here's an example MATLAB visualization that I have made public and inserted into HTML<html><iframe width='450' height='260' style='border: 1px solid #cccccc;' src='https://thingspeak.com/apps/matlab_visualizations/119981'></iframe></html>", "num_user_post": " 225", "author": "Vinod"}, {"date": "January 11, 2017 - 6:59 am", "content": "I dont know what I did but it seems to be working now.\u00a0I try to ask another question here before starting a new topic.\u00a0Is there a way to tilt the x axis lables 45 degrees on a 2-d line plot? When I google I can see that the function exist on matlab but I cant seem to get it to work on the thingspeak plugin page. Where I enter the code for the plot.Im also looking to set a min and max value for the y axis in the plot. It is easy on the default Thingspeak graph but in the code for a plot i cant get it to work. I have used the examples that I have found that regards Matlab but not thingspeak.", "num_user_post": " 8", "author": "popunonkok"}, {"date": "January 11, 2017 - 7:51 am", "content": "You can certainly use the method described in the documentation here: http://www.mathworks.com/help/matlab/creating_plots/change-tick-marks-and-tick-labels-of-graph-1.htmlThis should work for axes generated by PLOT and similar commands.\u00a0", "num_user_post": " 225", "author": "Vinod"}, {"date": "January 11, 2017 - 10:57 am", "content": "Thanks for the reply but that does not seem to work.% Template MATLAB code for visualizing data from a channel as a 2D line% plot using THINGSPEAKPLOT function.% Prior to running this MATLAB code template, assign the channel ID to read% data from to the 'readChannelID' variable. Also, assign the field ID% within the channel that you want to read data from to plot. % TODO - Replace the [] with channel ID to read data from:readChannelID = [XXXXX];% TODO - Replace the [] with the Field ID to read data from:fieldID1 = [2];% Channel Read API Key% If your channel is private, then enter the read API% Key between the '' below:readAPIKey = 'XXXXXXXXXX';%% Read Data %%[data, time] = thingSpeakRead(readChannelID, 'Field', fieldID1, 'NumDays',1, 'ReadKey', readAPIKey);xtickangle(45)%% Visualize Data %%thingSpeakPlot(time, data);It does not generate a Error but the xtick lables are straight as an arrow, not 45 degrees. I also tried with a trailing semicolon, ( ; ) with no difference.There are lots of stuff I would like to 'adjust/customise', number of decimals and time format are 2 things.\u00a0", "num_user_post": " 8", "author": "popunonkok"}, {"date": "January 11, 2017 - 11:15 am", "content": "I do not expect the xtick label to work with thingSpeakPlot.Try MATLAB's PLOT command instead.", "num_user_post": " 225", "author": "Vinod"}, {"date": "January 11, 2017 - 12:34 pm", "content": "Hmmm... I just went through the menu Apps -> MATLAB Visualization -> Create a 2d line plot. Where and how do I find a way to do a MATLAB PLOT instead?", "num_user_post": " 8", "author": "popunonkok"}, {"date": "January 11, 2017 - 5:22 pm", "content": "In the code example you have above, replace the linethingSpeakPlot(time, data);\u00a0withplot(time,data);", "num_user_post": " 225", "author": "Vinod"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-apps/thingtweet-failures-last-two-days/", "posts": [{"date": "December 7, 2016 - 3:17 pm", "content": "I was wondering if anything has changed with ThingTweet? \u00a0After many months of continuous operation, I am no longer seeing updates in Twitter. \u00a0Perhaps related to the updated agreement that was presented two days ago? \u00a0maybe I need to re-link Thingspeak --> Twitter?Or, maybe that is just a co-incidence, and there is a problem with my application...any advice is appreciated ....thanks!", "num_user_post": " 5", "author": "Mike Teachman"}, {"date": "December 7, 2016 - 4:24 pm", "content": "I just tested my ThingTweet and it is working. What are you using to post the tweets?", "num_user_post": " 402", "author": "Hans"}, {"date": "December 8, 2016 - 1:06 pm", "content": "thanks for confirming that ThingTweet is still working. \u00a0I took a 2nd look at my Arduino/Ethernet shield code and realized I had made a 'minor' change on Monday night...in an attempt to claim back some RAM space, I gave some strings in the Thingspeak REST API code the F() treatment. \u00a0I reverted these changes, and voila... ThingTweet is working again for me.\u00a0", "num_user_post": " 5", "author": "Mike Teachman"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-apps/thingspeak-support-mqtt-protocol/", "posts": [{"date": "July 7, 2016 - 6:23 pm", "content": "Hello Guys,\u00a0The thingspeak plataform support native MQTT communication between IoT devices?\u00a0Can play the role of MQTT broker?\u00a0Thanks in advance", "num_user_post": " 3", "author": "Luis_Filipe"}, {"date": "July 7, 2016 - 7:27 pm", "content": "Unfortunately not..\u00a0 Its been listed as a feature request for 2 years already. http://community.thingspeak.com/forum/feature-requests/mqtt-bridge/", "num_user_post": " 271", "author": "rw950431"}, {"date": "December 8, 2016 - 11:10 am", "content": "We are happy to announce that we added MQTT publish so users can send data to ThingSpeak channels using the MQTT protocol.Here's a link to the documentation: https://www.mathworks.com/help/thingspeak/mqtt-api.html", "num_user_post": " 402", "author": "Hans"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-apps/new-thingspeak-app-talkback/", "posts": [{"date": "January 21, 2014 - 6:19 pm", "content": "We have developed a new ThingSpeak App and it is available now to all ThingSpeak Users.The new TalkBack App allows devices to check ThingSpeak for commands to execute. TalkBack is perfect for battery-powered devices that need to sleep most of the time and wake up to see if there is anything to do and then go back to sleep, like a door lock for example. The lock is mostly going to be asleep to save battery power, but it can way up periodically and check TalkBack or be woken up by a button press to see if it should be opened or not.Devices powered by ThingSpeak and now with TalkBack will be able to both push sensor data to the ThingSpeak Cloud and check TalkBack if any commands are available all in one request. To get started, we have the complete TalkBack API Documentation and an Arduino Y\u00fan Tutorial available now.TalkBack API Documentation: https://thingspeak.com/docs/talkbackArduino Y\u00fan Tutorial: http://community.thingspeak.com/tutorials/arduino/controlling-the-arduino-yun-with-talkback/", "num_user_post": " 402", "author": "Hans"}, {"date": "January 25, 2014 - 12:35 pm", "content": "Hello, first, thanks for your great job on ThingSpeak.I succeeded turn off/on a led with talkbackCommand app and my Arduino Uno ethernet client mode by updating the Command String directly on ThingSpeak website.Now I wish update the Command String with the APIs and a button scripted with html or php on an external personal website.Could someone give me an example because I tried a lot of things without success like ? 'PUT' method seem doesn't work with an html form.Thanks for your help.R\u00e9gis.My Arduino Uno code based on ThingSpeak tutorials (talkback commands must start with '_CMD_') :/*----------------------------------------------------------------*/#include 'SPI.h'#include 'Ethernet.h'byte mac[] = {0x--, 0x--, 0x--, 0x--, 0x--, 0x--};const String channelsAPIKey = '--------------------------';const String talkBackAPIKey = '--------------------------';const String talkBackID = '--';const String talkCommandID = '--';const unsigned int getTalkBackInterval = 10 * 1000;const unsigned int updateChannelsInterval = 15 * 1000;String talkBackCommand;const int RelayPin2 = 7;long lastConnectionTimeChannels = 0;boolean lastConnectedChannels = false;int failedCounterChannels = 0;long lastConnectionTimeTalkBack = 0;boolean lastConnectedTalkBack = false;int failedCounterTalkBack = 0;// capteursfloat temperature = 0;float humidity = 0;float moisture = 0;EthernetClient client;void setup(){  Serial.begin(9600);  pinMode(RelayPin2, OUTPUT);  digitalWrite(RelayPin2, HIGH);  startEthernet();}void loop(){  temperature = (((float)analogRead(A0) * 100) / 1023);  humidity = (((float)analogRead(A1) * 100) / 1023);  moisture = (((float)analogRead(A2) * 100) / 1023);  getTalkBack();  updateChannels();  if(talkBackCommand == 'LEDON') digitalWrite(RelayPin2, LOW);  if(talkBackCommand == 'LEDOFF') digitalWrite(RelayPin2, HIGH);}void getTalkBack(){  String tsData;  tsData=talkBackID+'/commands/'+talkCommandID+'?api_key='+talkBackAPIKey;  if((!client.connected() && (millis() - lastConnectionTimeTalkBack > getTalkBackInterval)))  {    if (client.connect('api.thingspeak.com', 80))    {      client.println('GET /talkbacks/'+tsData+' HTTP/1.0');      client.println();      lastConnectionTimeTalkBack = millis();      if (client.connected())      {        Serial.println('****************************************');        Serial.println('GET TalkBack command');        Serial.println();        Serial.println('Connecting to ThingSpeak...');        Serial.println();        Serial.println();        Serial.println('Server response ->');        Serial.println();        failedCounterTalkBack = 0;        talkBackCommand='';        while(client.connected() && !client.available()) delay(1); //waits for data        while (client.connected() || client.available())        {          char charIn = client.read();          Serial.print(charIn);          talkBackCommand += charIn;        }        talkBackCommand=talkBackCommand.substring(talkBackCommand.indexOf('_CMD_')+5);        Serial.println();        Serial.println();        Serial.println('...disconnected');        Serial.println();        Serial.println('-----------------------');        Serial.print('Command -> ');        Serial.println(talkBackCommand);        Serial.println('-----------------------');        Serial.println();      }      else      {        failedCounterTalkBack++;        Serial.println('Connection to ThingSpeak failed ('+String(failedCounterTalkBack, DEC)+')');        Serial.println();        lastConnectionTimeChannels = millis();      }    }    else    {      failedCounterTalkBack++;      Serial.println('Connection to ThingSpeak Failed ('+String(failedCounterTalkBack, DEC)+')');      Serial.println();      lastConnectionTimeTalkBack = millis();    }  }  if (failedCounterTalkBack > 3 ) {startEthernet();}  client.stop();  Serial.flush();}void updateChannels(){  String tsData;  tsData='field1='+String(temperature, DEC)+'&field2='+String(humidity, DEC)+'&field3='+String(moisture, DEC);  if(!client.connected() && (millis() - lastConnectionTimeChannels > updateChannelsInterval))  {    if (client.connect('api.thingspeak.com', 80))    {      client.print('POST /update HTTP/1.1n');      client.print('Host: api.thingspeak.comn');      client.print('Connection: closen');      client.print('X-THINGSPEAKAPIKEY: '+channelsAPIKey+'n');      client.print('Content-Type: application/x-www-form-urlencodedn');      client.print('Content-Length: ');      client.print(tsData.length());      client.print('nn');      client.print(tsData);      lastConnectionTimeChannels = millis();      if (client.connected())      {        Serial.println('****************************************');        Serial.println('Uptade channels');        Serial.println();        Serial.println('Connecting to ThingSpeak...');        Serial.println();        Serial.println('Server response ->');        Serial.println();        failedCounterChannels = 0;        while(client.connected() && !client.available()) delay(1); //waits for data        while (client.connected() || client.available())        {          char charIn = client.read();          Serial.print(charIn);        }        Serial.println();        Serial.println();        Serial.println('...disconnected');        Serial.println();      }      else      {        failedCounterChannels++;        Serial.println('Connection to ThingSpeak failed ('+String(failedCounterChannels, DEC)+')');        Serial.println();        lastConnectionTimeChannels = millis();      }    }    else    {      failedCounterChannels++;      Serial.println('Connection to ThingSpeak Failed ('+String(failedCounterChannels, DEC)+')');      Serial.println();      lastConnectionTimeChannels = millis();    }  }  if (failedCounterChannels > 3 ) {startEthernet();}  client.stop();  Serial.flush();}void startEthernet(){  client.stop();  Serial.println();  Serial.println();  Serial.println('****************************************');  Serial.println('Connecting Arduino to network...');  delay(1000);  if (Ethernet.begin(mac) == 0)  {    Serial.println('DHCP Failed, reset Arduino to try again');    Serial.println('****************************************');    Serial.println();  }  else  {    Serial.println('Arduino connected to network using DHCP');    Serial.println('****************************************');    Serial.println();  }  delay(1000);}/*----------------------------------------------------------------*/", "num_user_post": " 1", "author": "regis44"}, {"date": "March 14, 2014 - 11:44 pm", "content": "Hey Regis!Thanks for posting that, I haven't quite got it working yet but It's sue helped. I can't get the Uno with and Ethernet shield to Read my talkback commands, everything else works! I've tweaked the code slightly but the print.client seems to be reading my talkback... I see them (Kind of) in the serial monitor but they don't get applied to the talkBackCommand string for some reason, would you be able to do me a favour and explain what data you would put in the black areas in your code? Is this the code that works for you because I would love to get this working  Did you get your buttons working on your website? I can help you with some AJAX buttons if you like, using some HTTP requests that will work...Here is my code.../*\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014-*/#include 'SPI.h'#include 'Ethernet.h'#include 'DHT.h'#define DHTPIN 2#define DHTTYPE DHT11DHT dht(DHTPIN, DHTTYPE);byte mac[] = { 0x90, 0xA2, 0xDA, 0x0D, 0xC0, 0xDE };const String channelsAPIKey = '3QCA1VSDZHEIYL2B';const String talkBackAPIKey = '64V6QUYTP3ARBXEN';const String talkBackID = '213';char charIn;String talkBackCommand;const String talkCommandID = '';const unsigned int getTalkBackInterval = 10 * 1000;const unsigned int updateChannelsInterval = 15 * 1000;const int RelayPin2 = 13;long lastConnectionTimeChannels = 0;boolean lastConnectedChannels = false;int failedCounterChannels = 0;long lastConnectionTimeTalkBack = 0;boolean lastConnectedTalkBack = false;int failedCounterTalkBack = 0;// capteursEthernetClient client;void setup(){Serial.begin(9600);dht.begin();pinMode(RelayPin2, OUTPUT);digitalWrite(RelayPin2, HIGH);startEthernet();}void loop(){getTalkBack();updateChannels();//-------------------------------------------if(talkBackCommand == 'LEDOFF'){digitalWrite(RelayPin2, LOW);Serial.println('OFF');}if(talkBackCommand == 'LEDON'){digitalWrite(RelayPin2, HIGH);Serial.println('ON');}//--------------------------------------------}//-----------------------------------void getTalkBack(){// This section I had to change --->String tsData;tsData=talkBackID + '/commands/execute?api_key=' + talkBackAPIKey;if((!client.connected() && (millis() - lastConnectionTimeTalkBack > getTalkBackInterval))){if (client.connect('api.thingspeak.com', 80)){client.println('GET /talkbacks/'+tsData+' HTTP/1.0');client.println();lastConnectionTimeTalkBack = millis();if (client.connected()){Serial.println('---------------------------------------');Serial.println('GET TalkBack command');Serial.println();Serial.println('Connecting to ThingSpeak');Serial.println();Serial.println();Serial.println('Server response');Serial.println();failedCounterTalkBack = 0;while(client.connected() && !client.available()) delay(2000); //waits for datawhile (client.connected() || client.available()){char charIn = client.read();talkBackCommand += charIn;Serial.print(charIn);}talkBackCommand = talkBackCommand.substring(talkBackCommand.indexOf('_CMD_')+5);Serial.println();Serial.println();Serial.println('Disconnected');Serial.println();Serial.println('--------');Serial.println();Serial.println('talkBack Was');Serial.println();Serial.println('--------');Serial.println();Serial.println(talkBackCommand);Serial.println();Serial.println();Serial.println('--------');Serial.println();}else{failedCounterTalkBack++;Serial.println('Connection to ThingSpeak failed ('+String(failedCounterTalkBack, DEC)+')');Serial.println();lastConnectionTimeChannels = millis();}}else{failedCounterTalkBack++;Serial.println('Connection to ThingSpeak Failed ('+String(failedCounterTalkBack, DEC)+')');Serial.println();lastConnectionTimeTalkBack = millis();}}if (failedCounterTalkBack > 3 ) {startEthernet();}client.stop();Serial.flush();}//---------------------------------------------------void updateChannels(){float humid = dht.readHumidity();float temp = dht.readTemperature();String tsData;tsData='field1='+String(temp - 1, DEC)+'&field2='+String(humid, DEC);if(!client.connected() && (millis() - lastConnectionTimeChannels > updateChannelsInterval)){if (client.connect('api.thingspeak.com', 80)){client.print('POST /update HTTP/1.1n');client.print('Host: api.thingspeak.comn');client.print('Connection: closen');client.print('X-THINGSPEAKAPIKEY: '+channelsAPIKey+'n');client.print('Content-Type: application/x-www-form-urlencodedn');client.print('Content-Length: ');client.print(tsData.length());client.print('nn');client.print(tsData);lastConnectionTimeChannels = millis();if (client.connected()){Serial.println('----------------------------------------');Serial.println('Updade channels');Serial.println();Serial.println('Connecting to ThingSpeak');Serial.println();Serial.println('Server response');Serial.println();failedCounterChannels = 0;while(client.connected() && !client.available()) delay(1); //waits for datawhile (client.connected() || client.available()){char charIn = client.read();Serial.print(charIn);}Serial.println();Serial.println();Serial.println('Disconnected');Serial.println();}else{failedCounterChannels++;Serial.println('Connection to ThingSpeak failed ('+String(failedCounterChannels, DEC)+')');Serial.println();lastConnectionTimeChannels = millis();}}else{failedCounterChannels++;Serial.println('Connection to ThingSpeak Failed ('+String(failedCounterChannels, DEC)+')');Serial.println();lastConnectionTimeChannels = millis();}}if (failedCounterChannels > 3 ) {startEthernet();}client.stop();Serial.flush();}void startEthernet(){client.stop();Serial.println();Serial.println();Serial.println('----------------------------------------');Serial.println('Connecting Arduino to network');delay(1000);if (Ethernet.begin(mac) == 0){Serial.println('DHCP Failed, reset Arduino to try again');Serial.println('----------------------------------------');Serial.println();}else{Serial.println('Arduino connected to network using DHCP');Serial.println('----------------------------------------');Serial.println();}delay(1000);}/*\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014-*/", "num_user_post": " 3", "author": "autoDood"}, {"date": "August 14, 2015 - 1:23 pm", "content": "hi All ,please i need to control led via Ethernet shield but i dont how to control on talkback  . please i need your help all tutorials control via wifi module , i need example on Ethernet shield thanksregards ", "num_user_post": " 1", "author": "samir_assaad"}, {"date": "November 30, 2016 - 11:37 am", "content": "hi,i am trying thingspeak talkback on arduino using esp8266. But i am not getting how to do that .If anyone knows, can you share the code please.thanks", "num_user_post": " 1", "author": "Aishwarya"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-apps/auto-update-thingspeakplot-charts/", "posts": [{"date": "November 22, 2016 - 10:20 am", "content": "Hi, I use two Arduinos to count certain events. Each Arduino is sending its counter every 20sec to its Channel, i.e. I have two channels- one for each Arduino. In addition I have generated one ThingSpeakPlot visualisation which is calculating the difference between counter 1 from channel 1 and counter 2 from channel 2. The result is depicted using\u00a0[Counter1Data, time] = thingSpeakRead(readChannelID1, 'Fields', Counter1FieldID, 'NumPoints', 30,'ReadKey', readAPIKey1);[Counter2Data, time] = thingSpeakRead(readChannelID2, 'Fields', Counter1FieldID, 'NumPoints', 30,'ReadKey', readAPIKey2);Difference = Counter1Data - Counter2Data;thingSpeakPlot(time, [Difference]);Problem: when the chart is generated/depicted in either Channel 1 or 2 it does not automatically update itself, i.e. when the counter values change the plot/chart does not update...it only does, when I manually refresh the page or open it the first time.I'd like to have a 'living' chart as I have it when visualizing each channel counter value separately.Any help is appreciated- Thanks!", "num_user_post": " 1", "author": "eggfile"}, {"date": "November 23, 2016 - 7:21 pm", "content": "To confirm your request, you would like the plot generated using thingSpeakPlot to auto refresh every 'n' seconds?\u00a0This is not possible today, but we will put it in the list of features to add based on user requirements.\u00a0In the mean time, you could save the following into a simple HTML page. It auto reloads the page every 5\u00a0minutes. Instead of opening ThingSpeak.com, you would open this page.<html lang='en'> <body style='margin:0;padding:0'>   <iframe src='' id='myIFrame' style='border:none;' height='0' width='0'></iframe> </body> <script>   var width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;   var height = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;   var frameHdl = document.getElementById('myIFrame');   frameHdl.src = 'https://thingspeak.com/channels/YOURCHANNELNUMBER'   frameHdl.height = height;   frameHdl.width = width;   window.setInterval('reloadPage();', 5*60*1000); //minutes to milliseconds\u00a0   function reloadPage() {     location.reload(true);    } </script> </html>", "num_user_post": " 225", "author": "Vinod"}]}, {"url": "https://community.thingspeak.com/forum/thingspeak-apps/nov-7-tweetcontrol-not-working-for-me/", "posts": [{"date": "November 7, 2016 - 12:04 pm", "content": "worked yersteday do not todayI have a number of controls through thweetcontrol. They worked well yesterday and today there is no way to make them work. Likewise I've tried cheerliht and does not change color, watching the feed of the latter does not change from blue from yesterday at 7/11/2016 00:45:35 -0500.182657, blue, # 0000FFIT is something \u00a0related to?Our outbound IP addresses are changing on November 7, 2016. Please read if you whitelist our servers for crawling.https://t.co/P3rXwoSXQV\u2014 Twitter API (@TwitterAPI) October 6, 2016\u00a0thanks in advance.", "num_user_post": " 2", "author": "gaz_iot"}, {"date": "November 7, 2016 - 1:13 pm", "content": "Thanks for reporting. We are looking into the issue.", "num_user_post": " 402", "author": "Hans"}, {"date": "November 7, 2016 - 9:34 pm", "content": "It\u00a0appears that this was related to the Twitter API servers\u00a0IP address changes.@gaz_iot:\u00a0Can you confirm tweetcontrols\u00a0are\u00a0working now?", "num_user_post": " 225", "author": "Vinod"}, {"date": "November 8, 2016 - 3:45 am", "content": "working again, THANKS!!!!", "num_user_post": " 2", "author": "gaz_iot"}]}]}